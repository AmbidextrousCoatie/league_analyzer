<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 0083866f-28e3-46ba-a6ef-d8eff8789028 (2025-12-05 07:07Z) -->

# Sort comparison_data by avg_points (2025-12-05 07:07Z)

_**User (2025-12-06 20:11Z)**_

still doesnt work, here is the console output

---

_**Agent (model default, mode Agent)**_



---


Please share the console output. Checking how the data is structured and verifying the column mapping:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is the game overview table data structured with team_name and opponent_name fields?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\n\n\n    def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n        \"\"\"\n        Get game overview data for a specific round.\n        Shows all matches with team vs opponent: team name, team pins, team points | opponent points, opponent pins, opponent name\n        \n        Args:\n            season: Season identifier\n            league: League name\n            week: Week number\n            round_number: Round/Game number\n            \n        Returns:\n            TableData with column groups for Team and Opponent\n        \"\"\"\n        try:\n            # Get team totals for this round\n            filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.round_number: {'value': round_number, 'operator': 'eq'},\n                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Team totals\n            }\n            \n            team_totals = self.adapter.get_filtered_data(filters=filters)\n            \n            if team_totals.empty:\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {i18n_service.get_text('game')} {round_number}\"\n                )\n            \n            # Get league standings to determine team positions\n            standings = self.get_league_standings(season, league, week)\n            team_positions = {}\n            if standings and standings.teams:\n                for team in standings.teams:\n                    team_positions[team.team_name] = team.position\n            \n            # Create column groups\n            columns =",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "lineNumber": 90
          },
          {
            "lineNumber": 91
          },
          {
            "text": "    def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 93
          },
          {
            "text": "        Get game overview data for a specific round.",
            "lineNumber": 94
          },
          {
            "text": "        Shows all matches with team vs opponent: team name, team pins, team points | opponent points, opponent pins, opponent name",
            "lineNumber": 95
          },
          {
            "text": "        ",
            "lineNumber": 96
          },
          {
            "text": "        Args:",
            "lineNumber": 97
          },
          {
            "text": "            season: Season identifier",
            "lineNumber": 98
          },
          {
            "text": "            league: League name",
            "lineNumber": 99
          },
          {
            "text": "            week: Week number",
            "lineNumber": 100
          },
          {
            "text": "            round_number: Round/Game number",
            "lineNumber": 101
          },
          {
            "text": "            ",
            "lineNumber": 102
          },
          {
            "text": "        Returns:",
            "lineNumber": 103
          },
          {
            "text": "            TableData with column groups for Team and Opponent",
            "lineNumber": 104
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 105
          },
          {
            "text": "        try:",
            "lineNumber": 106
          },
          {
            "text": "            # Get team totals for this round",
            "lineNumber": 107
          },
          {
            "text": "            filters = {",
            "lineNumber": 108
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 109
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 110
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 111
          },
          {
            "text": "                Columns.round_number: {'value': round_number, 'operator': 'eq'},",
            "lineNumber": 112
          },
          {
            "text": "                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Team totals",
            "lineNumber": 113
          },
          {
            "text": "            }",
            "lineNumber": 114
          },
          {
            "text": "            ",
            "lineNumber": 115
          },
          {
            "text": "            team_totals = self.adapter.get_filtered_data(filters=filters)",
            "lineNumber": 116
          },
          {
            "text": "            ",
            "lineNumber": 117
          },
          {
            "text": "            if team_totals.empty:",
            "lineNumber": 118
          },
          {
            "text": "                return TableData(",
            "lineNumber": 119
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 120
          },
          {
            "text": "                    data=[],",
            "lineNumber": 121
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {i18n_service.get_text('game')} {round_number}\"",
            "lineNumber": 122
          },
          {
            "text": "                )",
            "lineNumber": 123
          },
          {
            "text": "            ",
            "lineNumber": 124
          },
          {
            "text": "            # Get league standings to determine team positions",
            "lineNumber": 125
          },
          {
            "text": "            standings = self.get_league_standings(season, league, week)",
            "lineNumber": 126
          },
          {
            "text": "            team_positions = {}",
            "lineNumber": 127
          },
          {
            "text": "            if standings and standings.teams:",
            "lineNumber": 128
          },
          {
            "text": "                for team in standings.teams:",
            "lineNumber": 129
          },
          {
            "text": "                    team_positions[team.team_name] = team.position",
            "lineNumber": 130
          },
          {
            "text": "            ",
            "lineNumber": 131
          },
          {
            "text": "            # Create column groups",
            "lineNumber": 132
          },
          {
            "text": "            columns =",
            "lineNumber": 133
          }
        ]
      },
      "score": 0.5300900936126709
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n\n            \n            # Create column groups\n            columns = [\n                ColumnGroup(\n                    title=i18n_service.get_text(\"team\"),\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),\n                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")\n                    ]\n                ),\n                ColumnGroup(\n                    title=i18n_service.get_text(\"opponent\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),\n                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Get individual player points for this round to add to team points",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 92,
                "column": 5
              },
              "endPosition": {
                "line": 93,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "lineNumber": 130
          },
          {
            "text": "            ",
            "lineNumber": 131
          },
          {
            "text": "            # Create column groups",
            "lineNumber": 132
          },
          {
            "text": "            columns = [",
            "lineNumber": 133
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 134
          },
          {
            "text": "                    title=i18n_service.get_text(\"team\"),",
            "lineNumber": 135
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 136
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 137
          },
          {
            "text": "                    columns=[",
            "lineNumber": 138
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),",
            "lineNumber": 139
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),",
            "lineNumber": 140
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 141
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")",
            "lineNumber": 142
          },
          {
            "text": "                    ]",
            "lineNumber": 143
          },
          {
            "text": "                ),",
            "lineNumber": 144
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 145
          },
          {
            "text": "                    title=i18n_service.get_text(\"opponent\"),",
            "lineNumber": 146
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},",
            "lineNumber": 147
          },
          {
            "text": "                    columns=[",
            "lineNumber": 148
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 149
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 150
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),",
            "lineNumber": 151
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")",
            "lineNumber": 152
          },
          {
            "text": "                    ]",
            "lineNumber": 153
          },
          {
            "text": "                )",
            "lineNumber": 154
          },
          {
            "text": "            ]",
            "lineNumber": 155
          },
          {
            "text": "            ",
            "lineNumber": 156
          },
          {
            "text": "            # Get individual player points for this round to add to team points",
            "lineNumber": 157
          }
        ]
      },
      "score": 0.5293142199516296
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n\n            \n            for _, row in team_totals.iterrows():\n                team_name = row[Columns.team_name]\n                if team_name in processed_teams:\n                    continue\n                    \n                opponent_name = row[Columns.team_name_opponent]\n                team_pins = int(row[Columns.score]) if pd.notna(row[Columns.score]) else 0\n                team_points = float(row[Columns.points]) if pd.notna(row[Columns.points]) else 0.0\n                \n                # Add individual points to team points\n                individual_points = individual_points_by_team.get(team_name, 0.0)\n                total_team_points = team_points + individual_points\n                \n                # Find opponent's totals\n                opponent_row = team_totals[\n                    (team_totals[Columns.team_name] == opponent_name) &amp;\n                    (team_totals[Columns.team_name_opponent] == team_name)\n                ]\n                \n                if not opponent_row.empty:\n                    opponent_pins = int(opponent_row[Columns.score].iloc[0]) if pd.notna(opponent_row[Columns.score].iloc[0]) else 0\n                    opponent_team_points = float(opponent_row[Columns.points].iloc[0]) if pd.notna(opponent_row[Columns.points].iloc[0]) else 0.0\n                    # Add opponent individual points\n                    opponent_individual_points = individual_points_by_team.get(opponent_name, 0.0)\n                    total_opponent_points = opponent_team_points + opponent_individual_points\n                else:\n                    opponent_pins = 0\n                    total_opponent_points = 0.0\n                \n                # Get positions for both teams\n                team_position = team_positions.get(team_name, None)\n                opponent_position = team_positions.get(opponent_name, None)\n                \n                data.append",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 92,
                "column": 5
              },
              "endPosition": {
                "line": 93,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "lineNumber": 177
          },
          {
            "text": "            ",
            "lineNumber": 178
          },
          {
            "text": "            for _, row in team_totals.iterrows():",
            "lineNumber": 179
          },
          {
            "text": "                team_name = row[Columns.team_name]",
            "lineNumber": 180
          },
          {
            "text": "                if team_name in processed_teams:",
            "lineNumber": 181
          },
          {
            "text": "                    continue",
            "lineNumber": 182
          },
          {
            "text": "                    ",
            "lineNumber": 183
          },
          {
            "text": "                opponent_name = row[Columns.team_name_opponent]",
            "lineNumber": 184
          },
          {
            "text": "                team_pins = int(row[Columns.score]) if pd.notna(row[Columns.score]) else 0",
            "lineNumber": 185
          },
          {
            "text": "                team_points = float(row[Columns.points]) if pd.notna(row[Columns.points]) else 0.0",
            "lineNumber": 186
          },
          {
            "text": "                ",
            "lineNumber": 187
          },
          {
            "text": "                # Add individual points to team points",
            "lineNumber": 188
          },
          {
            "text": "                individual_points = individual_points_by_team.get(team_name, 0.0)",
            "lineNumber": 189
          },
          {
            "text": "                total_team_points = team_points + individual_points",
            "lineNumber": 190
          },
          {
            "text": "                ",
            "lineNumber": 191
          },
          {
            "text": "                # Find opponent's totals",
            "lineNumber": 192
          },
          {
            "text": "                opponent_row = team_totals[",
            "lineNumber": 193
          },
          {
            "text": "                    (team_totals[Columns.team_name] == opponent_name) &amp;",
            "lineNumber": 194
          },
          {
            "text": "                    (team_totals[Columns.team_name_opponent] == team_name)",
            "lineNumber": 195
          },
          {
            "text": "                ]",
            "lineNumber": 196
          },
          {
            "text": "                ",
            "lineNumber": 197
          },
          {
            "text": "                if not opponent_row.empty:",
            "lineNumber": 198
          },
          {
            "text": "                    opponent_pins = int(opponent_row[Columns.score].iloc[0]) if pd.notna(opponent_row[Columns.score].iloc[0]) else 0",
            "lineNumber": 199
          },
          {
            "text": "                    opponent_team_points = float(opponent_row[Columns.points].iloc[0]) if pd.notna(opponent_row[Columns.points].iloc[0]) else 0.0",
            "lineNumber": 200
          },
          {
            "text": "                    # Add opponent individual points",
            "lineNumber": 201
          },
          {
            "text": "                    opponent_individual_points = individual_points_by_team.get(opponent_name, 0.0)",
            "lineNumber": 202
          },
          {
            "text": "                    total_opponent_points = opponent_team_points + opponent_individual_points",
            "lineNumber": 203
          },
          {
            "text": "                else:",
            "lineNumber": 204
          },
          {
            "text": "                    opponent_pins = 0",
            "lineNumber": 205
          },
          {
            "text": "                    total_opponent_points = 0.0",
            "lineNumber": 206
          },
          {
            "text": "                ",
            "lineNumber": 207
          },
          {
            "text": "                # Get positions for both teams",
            "lineNumber": 208
          },
          {
            "text": "                team_position = team_positions.get(team_name, None)",
            "lineNumber": 209
          },
          {
            "text": "                opponent_position = team_positions.get(opponent_name, None)",
            "lineNumber": 210
          },
          {
            "text": "                ",
            "lineNumber": 211
          },
          {
            "text": "                data.append",
            "lineNumber": 212
          }
        ]
      },
      "score": 0.5095418095588684
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n team_positions.get(opponent_name, None)\n                \n                data.append([\n                    team_position if team_position is not None else '',\n                    team_name,\n                    team_pins,\n                    total_team_points,\n                    total_opponent_points,\n                    opponent_pins,\n                    opponent_position if opponent_position is not None else '',\n                    opponent_name\n                ])\n                \n                processed_teams.add(team_name)\n                processed_teams.add(opponent_name)\n            \n            return TableData(\n                columns=columns,\n                data=data,\n                title=f\"{league} - {i18n_service.get_text('week')} {week}, {i18n_service.get_text('game')} {round_number}\",\n                description=f\"{i18n_service.get_text('match_results')} {season}\",\n                config={\n                    \"stickyHeader\": True,\n                    \"striped\": True,\n                    \"hover\": True,\n                    \"responsive\": True,\n                    \"compact\": False\n                }\n            )\n            \n        except Exception as e:\n            print(f\"Error in get_game_overview_data: {e}\")\n            import traceback\n            traceback.print_exc()\n            return TableData(\n                columns=[],\n                data=[],\n                title=f\"Error loading game overview data\"\n            )\n\n    def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n        ",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 92,
                "column": 5
              },
              "endPosition": {
                "line": 93,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "text": " team_positions.get(opponent_name, None)",
            "lineNumber": 210
          },
          {
            "text": "                ",
            "lineNumber": 211
          },
          {
            "text": "                data.append([",
            "lineNumber": 212
          },
          {
            "text": "                    team_position if team_position is not None else '',",
            "lineNumber": 213
          },
          {
            "text": "                    team_name,",
            "lineNumber": 214
          },
          {
            "text": "                    team_pins,",
            "lineNumber": 215
          },
          {
            "text": "                    total_team_points,",
            "lineNumber": 216
          },
          {
            "text": "                    total_opponent_points,",
            "lineNumber": 217
          },
          {
            "text": "                    opponent_pins,",
            "lineNumber": 218
          },
          {
            "text": "                    opponent_position if opponent_position is not None else '',",
            "lineNumber": 219
          },
          {
            "text": "                    opponent_name",
            "lineNumber": 220
          },
          {
            "text": "                ])",
            "lineNumber": 221
          },
          {
            "text": "                ",
            "lineNumber": 222
          },
          {
            "text": "                processed_teams.add(team_name)",
            "lineNumber": 223
          },
          {
            "text": "                processed_teams.add(opponent_name)",
            "lineNumber": 224
          },
          {
            "text": "            ",
            "lineNumber": 225
          },
          {
            "text": "            return TableData(",
            "lineNumber": 226
          },
          {
            "text": "                columns=columns,",
            "lineNumber": 227
          },
          {
            "text": "                data=data,",
            "lineNumber": 228
          },
          {
            "text": "                title=f\"{league} - {i18n_service.get_text('week')} {week}, {i18n_service.get_text('game')} {round_number}\",",
            "lineNumber": 229
          },
          {
            "text": "                description=f\"{i18n_service.get_text('match_results')} {season}\",",
            "lineNumber": 230
          },
          {
            "text": "                config={",
            "lineNumber": 231
          },
          {
            "text": "                    \"stickyHeader\": True,",
            "lineNumber": 232
          },
          {
            "text": "                    \"striped\": True,",
            "lineNumber": 233
          },
          {
            "text": "                    \"hover\": True,",
            "lineNumber": 234
          },
          {
            "text": "                    \"responsive\": True,",
            "lineNumber": 235
          },
          {
            "text": "                    \"compact\": False",
            "lineNumber": 236
          },
          {
            "text": "                }",
            "lineNumber": 237
          },
          {
            "text": "            )",
            "lineNumber": 238
          },
          {
            "text": "            ",
            "lineNumber": 239
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 240
          },
          {
            "text": "            print(f\"Error in get_game_overview_data: {e}\")",
            "lineNumber": 241
          },
          {
            "text": "            import traceback",
            "lineNumber": 242
          },
          {
            "text": "            traceback.print_exc()",
            "lineNumber": 243
          },
          {
            "text": "            return TableData(",
            "lineNumber": 244
          },
          {
            "text": "                columns=[],",
            "lineNumber": 245
          },
          {
            "text": "                data=[],",
            "lineNumber": 246
          },
          {
            "text": "                title=f\"Error loading game overview data\"",
            "lineNumber": 247
          },
          {
            "text": "            )",
            "lineNumber": 248
          },
          {
            "lineNumber": 249
          },
          {
            "text": "    def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "text": "        ",
            "lineNumber": 251
          }
        ]
      },
      "score": 0.49186429381370544
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n            \n            # Add game column groups with opponent team names\n            for game in games:\n                opponent_name = game_to_opponent.get(game, f\"{i18n_service.get_text('game')} {game}\")\n                columns.append(\n                    ColumnGroup(\n                        title=opponent_name,\n                        columns=[\n                            Column(title=i18n_service.get_text(\"pins\"), field=f\"game{game}_score\", width=\"80px\", align=\"center\"),\n                            Column(title=i18n_service.get_text(\"points\"), field=f\"game{game}_points\", width=\"60px\", align=\"center\")\n                        ]\n                    )\n                )\n            \n            # Add totals column group\n            columns.append(\n                ColumnGroup(\n                    title=i18n_service.get_text(\"total\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"total_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"score\"), field=\"total_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"avg\"), field=\"average\", width=\"80px\", align=\"center\")\n                    ]\n                )\n            )\n            \n            # Prepare data rows with merged position cells\n            data = []\n            row_metadata = []\n            \n            # Get all unique players who played in this event (same logic as New view)\n            player_identifiers = []\n            for _, row in player_data.iterrows():\n                player_id =",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 772,
                "column": 5
              },
              "endPosition": {
                "line": 773,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 772
          },
          {
            "lineNumber": 848
          },
          {
            "text": "            ",
            "lineNumber": 849
          },
          {
            "text": "            # Add game column groups with opponent team names",
            "lineNumber": 850
          },
          {
            "text": "            for game in games:",
            "lineNumber": 851
          },
          {
            "text": "                opponent_name = game_to_opponent.get(game, f\"{i18n_service.get_text('game')} {game}\")",
            "lineNumber": 852
          },
          {
            "text": "                columns.append(",
            "lineNumber": 853
          },
          {
            "text": "                    ColumnGroup(",
            "lineNumber": 854
          },
          {
            "text": "                        title=opponent_name,",
            "lineNumber": 855
          },
          {
            "text": "                        columns=[",
            "lineNumber": 856
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"pins\"), field=f\"game{game}_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 857
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"points\"), field=f\"game{game}_points\", width=\"60px\", align=\"center\")",
            "lineNumber": 858
          },
          {
            "text": "                        ]",
            "lineNumber": 859
          },
          {
            "text": "                    )",
            "lineNumber": 860
          },
          {
            "text": "                )",
            "lineNumber": 861
          },
          {
            "text": "            ",
            "lineNumber": 862
          },
          {
            "text": "            # Add totals column group",
            "lineNumber": 863
          },
          {
            "text": "            columns.append(",
            "lineNumber": 864
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 865
          },
          {
            "text": "                    title=i18n_service.get_text(\"total\"),",
            "lineNumber": 866
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 867
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 868
          },
          {
            "text": "                    columns=[",
            "lineNumber": 869
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"total_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 870
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=\"total_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 871
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"avg\"), field=\"average\", width=\"80px\", align=\"center\")",
            "lineNumber": 872
          },
          {
            "text": "                    ]",
            "lineNumber": 873
          },
          {
            "text": "                )",
            "lineNumber": 874
          },
          {
            "text": "            )",
            "lineNumber": 875
          },
          {
            "text": "            ",
            "lineNumber": 876
          },
          {
            "text": "            # Prepare data rows with merged position cells",
            "lineNumber": 877
          },
          {
            "text": "            data = []",
            "lineNumber": 878
          },
          {
            "text": "            row_metadata = []",
            "lineNumber": 879
          },
          {
            "text": "            ",
            "lineNumber": 880
          },
          {
            "text": "            # Get all unique players who played in this event (same logic as New view)",
            "lineNumber": 881
          },
          {
            "text": "            player_identifiers = []",
            "lineNumber": 882
          },
          {
            "text": "            for _, row in player_data.iterrows():",
            "lineNumber": 883
          },
          {
            "text": "                player_id =",
            "lineNumber": 884
          }
        ]
      },
      "score": 0.4848506450653076
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\business_logic\\server.py",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 936
          }
        },
        "contents": "class Server:\n    # fetches basic dataframes from data adapter\n    # converts basic dataframes to aggregated dataframes\n    # forwards aggregated dataframes to app\ndef get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:\n float(round(game[Columns.points], 1))\n\n        # Add team totals\n        team_row.update({\n            'Points_Total': float(round(team_data[Columns.points].sum(), 1)),\n            'Score_Total': int(team_data[Columns.score].sum()),\n            'Score_Average': float(round(player_data[Columns.score].mean(), 2)) if not np.isnan(team_data[Columns.score].mean()) else 0\n        })\n\n        # Add opponent totals\n        opponent_row.update({\n            'Points_Total': float(round(team_opponent_data[Columns.points].sum(), 1)),\n            'Score_Total': int(team_opponent_data[Columns.score].sum()),\n            'Score_Average': float(round(team_opponent_data[Columns.score].mean(), 2)) if not np.isnan(team_opponent_data[Columns.score].mean()) else 0\n        })\n        \n        rows.append(team_row)\n        rows.append(opponent_row)\n\n        # Prepare header groups for the table\n        header_groups = [\n            { 'title': 'Player', 'colspan': 2 }\n        ]\n        \n        # Add game columns\n        for game_idx in range(1, n_games + 1):\n            header_groups.append({ \n                'title': f'Game {game_idx}', \n                'colspan': 2 \n            })\n        \n        # Add totals column\n        header_groups.append({ \n            'title': 'Total', \n            'colspan': 3 \n        })\n\n        # Create columns based on number of games\n        columns = [\n            {\n                'key': 'Position',\n                'title': 'Pos',\n                'className': 'text-center'\n            },\n            {\n                'key': 'Name',\n                'title': 'Name',\n                'className': 'text-start'\n            }\n        ]\n        \n        # Add columns for each game\n        for game_idx in",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 12,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 442,
                "column": 5
              },
              "endPosition": {
                "line": 443,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class Server:",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    # fetches basic dataframes from data adapter",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    # converts basic dataframes to aggregated dataframes",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "text": "    # forwards aggregated dataframes to app",
            "lineNumber": 11,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:",
            "lineNumber": 442
          },
          {
            "text": " float(round(game[Columns.points], 1))",
            "lineNumber": 575
          },
          {
            "lineNumber": 576
          },
          {
            "text": "        # Add team totals",
            "lineNumber": 577
          },
          {
            "text": "        team_row.update({",
            "lineNumber": 578
          },
          {
            "text": "            'Points_Total': float(round(team_data[Columns.points].sum(), 1)),",
            "lineNumber": 579
          },
          {
            "text": "            'Score_Total': int(team_data[Columns.score].sum()),",
            "lineNumber": 580
          },
          {
            "text": "            'Score_Average': float(round(player_data[Columns.score].mean(), 2)) if not np.isnan(team_data[Columns.score].mean()) else 0",
            "lineNumber": 581
          },
          {
            "text": "        })",
            "lineNumber": 582
          },
          {
            "lineNumber": 583
          },
          {
            "text": "        # Add opponent totals",
            "lineNumber": 584
          },
          {
            "text": "        opponent_row.update({",
            "lineNumber": 585
          },
          {
            "text": "            'Points_Total': float(round(team_opponent_data[Columns.points].sum(), 1)),",
            "lineNumber": 586
          },
          {
            "text": "            'Score_Total': int(team_opponent_data[Columns.score].sum()),",
            "lineNumber": 587
          },
          {
            "text": "            'Score_Average': float(round(team_opponent_data[Columns.score].mean(), 2)) if not np.isnan(team_opponent_data[Columns.score].mean()) else 0",
            "lineNumber": 588
          },
          {
            "text": "        })",
            "lineNumber": 589
          },
          {
            "text": "        ",
            "lineNumber": 590
          },
          {
            "text": "        rows.append(team_row)",
            "lineNumber": 591
          },
          {
            "text": "        rows.append(opponent_row)",
            "lineNumber": 592
          },
          {
            "lineNumber": 593
          },
          {
            "text": "        # Prepare header groups for the table",
            "lineNumber": 594
          },
          {
            "text": "        header_groups = [",
            "lineNumber": 595
          },
          {
            "text": "            { 'title': 'Player', 'colspan': 2 }",
            "lineNumber": 596
          },
          {
            "text": "        ]",
            "lineNumber": 597
          },
          {
            "text": "        ",
            "lineNumber": 598
          },
          {
            "text": "        # Add game columns",
            "lineNumber": 599
          },
          {
            "text": "        for game_idx in range(1, n_games + 1):",
            "lineNumber": 600
          },
          {
            "text": "            header_groups.append({ ",
            "lineNumber": 601
          },
          {
            "text": "                'title': f'Game {game_idx}', ",
            "lineNumber": 602
          },
          {
            "text": "                'colspan': 2 ",
            "lineNumber": 603
          },
          {
            "text": "            })",
            "lineNumber": 604
          },
          {
            "text": "        ",
            "lineNumber": 605
          },
          {
            "text": "        # Add totals column",
            "lineNumber": 606
          },
          {
            "text": "        header_groups.append({ ",
            "lineNumber": 607
          },
          {
            "text": "            'title': 'Total', ",
            "lineNumber": 608
          },
          {
            "text": "            'colspan': 3 ",
            "lineNumber": 609
          },
          {
            "text": "        })",
            "lineNumber": 610
          },
          {
            "lineNumber": 611
          },
          {
            "text": "        # Create columns based on number of games",
            "lineNumber": 612
          },
          {
            "text": "        columns = [",
            "lineNumber": 613
          },
          {
            "text": "            {",
            "lineNumber": 614
          },
          {
            "text": "                'key': 'Position',",
            "lineNumber": 615
          },
          {
            "text": "                'title': 'Pos',",
            "lineNumber": 616
          },
          {
            "text": "                'className': 'text-center'",
            "lineNumber": 617
          },
          {
            "text": "            },",
            "lineNumber": 618
          },
          {
            "text": "            {",
            "lineNumber": 619
          },
          {
            "text": "                'key': 'Name',",
            "lineNumber": 620
          },
          {
            "text": "                'title': 'Name',",
            "lineNumber": 621
          },
          {
            "text": "                'className': 'text-start'",
            "lineNumber": 622
          },
          {
            "text": "            }",
            "lineNumber": 623
          },
          {
            "text": "        ]",
            "lineNumber": 624
          },
          {
            "text": "        ",
            "lineNumber": 625
          },
          {
            "text": "        # Add columns for each game",
            "lineNumber": 626
          },
          {
            "text": "        for game_idx in",
            "lineNumber": 627
          }
        ]
      },
      "score": 0.475509911775589
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n            \n            # Get individual opponent data to calculate average based on individual results\n            opponent_individual_filters = {\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.team_name_opponent: {'value': team, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual data, not computed\n            }\n            \n            opponent_individual_data = self.adapter.get_filtered_data(filters=opponent_individual_filters)\n            \n            # Get unique games (round_number) for this team and map to opponent names\n            games = sorted(player_data[Columns.round_number].unique())\n            \n            # Create a mapping of round_number to opponent team name\n            game_to_opponent = {}\n            for game in games:\n                game_data = player_data[player_data[Columns.round_number] == game]\n                if not game_data.empty:\n                    opponent_name = game_data[Columns.team_name_opponent].iloc[0]\n                    game_to_opponent[game] = opponent_name\n            \n            # Create column groups\n            columns = [\n                ColumnGroup(\n                    title=i18n_service.get_text(\"player\"),\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=\"position\", width=\"50px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"name\"), field=\"name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Add game column groups with opponent team names\n            for",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 772,
                "column": 5
              },
              "endPosition": {
                "line": 773,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 772
          },
          {
            "lineNumber": 813
          },
          {
            "text": "            ",
            "lineNumber": 814
          },
          {
            "text": "            # Get individual opponent data to calculate average based on individual results",
            "lineNumber": 815
          },
          {
            "text": "            opponent_individual_filters = {",
            "lineNumber": 816
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 817
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 818
          },
          {
            "text": "                Columns.team_name_opponent: {'value': team, 'operator': 'eq'},",
            "lineNumber": 819
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 820
          },
          {
            "text": "                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual data, not computed",
            "lineNumber": 821
          },
          {
            "text": "            }",
            "lineNumber": 822
          },
          {
            "text": "            ",
            "lineNumber": 823
          },
          {
            "text": "            opponent_individual_data = self.adapter.get_filtered_data(filters=opponent_individual_filters)",
            "lineNumber": 824
          },
          {
            "text": "            ",
            "lineNumber": 825
          },
          {
            "text": "            # Get unique games (round_number) for this team and map to opponent names",
            "lineNumber": 826
          },
          {
            "text": "            games = sorted(player_data[Columns.round_number].unique())",
            "lineNumber": 827
          },
          {
            "text": "            ",
            "lineNumber": 828
          },
          {
            "text": "            # Create a mapping of round_number to opponent team name",
            "lineNumber": 829
          },
          {
            "text": "            game_to_opponent = {}",
            "lineNumber": 830
          },
          {
            "text": "            for game in games:",
            "lineNumber": 831
          },
          {
            "text": "                game_data = player_data[player_data[Columns.round_number] == game]",
            "lineNumber": 832
          },
          {
            "text": "                if not game_data.empty:",
            "lineNumber": 833
          },
          {
            "text": "                    opponent_name = game_data[Columns.team_name_opponent].iloc[0]",
            "lineNumber": 834
          },
          {
            "text": "                    game_to_opponent[game] = opponent_name",
            "lineNumber": 835
          },
          {
            "text": "            ",
            "lineNumber": 836
          },
          {
            "text": "            # Create column groups",
            "lineNumber": 837
          },
          {
            "text": "            columns = [",
            "lineNumber": 838
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 839
          },
          {
            "text": "                    title=i18n_service.get_text(\"player\"),",
            "lineNumber": 840
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 841
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 842
          },
          {
            "text": "                    columns=[",
            "lineNumber": 843
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"position\", width=\"50px\", align=\"center\"),",
            "lineNumber": 844
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"name\"), field=\"name\", width=\"200px\", align=\"left\")",
            "lineNumber": 845
          },
          {
            "text": "                    ]",
            "lineNumber": 846
          },
          {
            "text": "                )",
            "lineNumber": 847
          },
          {
            "text": "            ]",
            "lineNumber": 848
          },
          {
            "text": "            ",
            "lineNumber": 849
          },
          {
            "text": "            # Add game column groups with opponent team names",
            "lineNumber": 850
          },
          {
            "text": "            for",
            "lineNumber": 851
          }
        ]
      },
      "score": 0.4719853401184082
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\business_logic\\server.py",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 936
          }
        },
        "contents": "class Server:\n    # fetches basic dataframes from data adapter\n    # converts basic dataframes to aggregated dataframes\n    # forwards aggregated dataframes to app\ndef get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:\n\n        \n        for player_name, player_games in player_groups:\n            player_row = {\n                'type': 'player',\n                'Position': int(player_games[Columns.position].iloc[0]),  # Get player's position\n                'Name': player_name\n            }\n            \n            # Add each game's scores and points\n            for game_idx, (_, game) in enumerate(player_games.iterrows(), 1):\n                player_row[f'Score_{game_idx}'] = int(game[Columns.score])\n                player_row[f'Points_{game_idx}'] = float(round(game[Columns.points], 1))\n                \n            # Add totals\n\n            player_row.update({\n                'Points_Total': float(round(player_games[Columns.points].sum(), 1)),\n                'Score_Total': int(player_games[Columns.score].sum()),\n                'Score_Average': float(round(player_games[Columns.score].mean(), 2)) if not np.isnan(player_games[Columns.score].mean()) else 0\n            })\n            \n            rows.append(player_row)\n        \n        # Add team row\n        team_row = {\n            'type': 'team',\n            'Position': '-',\n            'Name': team_name\n        }\n\n        opponent_row = {\n            'type': 'opponent',\n            'Position': '-',\n            'Name': 'Opponents'\n        }\n        \n        # Add team scores and points for each game\n        for game_idx, (_, game) in enumerate(team_data.iterrows(), 1):\n            team_row[f'Score_{game_idx}'] = int(game[Columns.score])\n            team_row[f'Points_{game_idx}'] = float(round(game[Columns.points], 1))\n        \n\n        # Add opponent scores and points for each game\n        for game_idx, (_, game) in enumerate(team_opponent_data.iterrows(), 1):\n            opponent_row[f'Score_{game_idx}'] = int(game[Columns.score])\n            opponent_row[f'Points_{game_idx}'] = float(round(game[Columns.points], 1))\n\n        # Add team totals\n        team_row.update",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 12,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 442,
                "column": 5
              },
              "endPosition": {
                "line": 443,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class Server:",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    # fetches basic dataframes from data adapter",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    # converts basic dataframes to aggregated dataframes",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "text": "    # forwards aggregated dataframes to app",
            "lineNumber": 11,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:",
            "lineNumber": 442
          },
          {
            "lineNumber": 529
          },
          {
            "text": "        ",
            "lineNumber": 530
          },
          {
            "text": "        for player_name, player_games in player_groups:",
            "lineNumber": 531
          },
          {
            "text": "            player_row = {",
            "lineNumber": 532
          },
          {
            "text": "                'type': 'player',",
            "lineNumber": 533
          },
          {
            "text": "                'Position': int(player_games[Columns.position].iloc[0]),  # Get player's position",
            "lineNumber": 534
          },
          {
            "text": "                'Name': player_name",
            "lineNumber": 535
          },
          {
            "text": "            }",
            "lineNumber": 536
          },
          {
            "text": "            ",
            "lineNumber": 537
          },
          {
            "text": "            # Add each game's scores and points",
            "lineNumber": 538
          },
          {
            "text": "            for game_idx, (_, game) in enumerate(player_games.iterrows(), 1):",
            "lineNumber": 539
          },
          {
            "text": "                player_row[f'Score_{game_idx}'] = int(game[Columns.score])",
            "lineNumber": 540
          },
          {
            "text": "                player_row[f'Points_{game_idx}'] = float(round(game[Columns.points], 1))",
            "lineNumber": 541
          },
          {
            "text": "                ",
            "lineNumber": 542
          },
          {
            "text": "            # Add totals",
            "lineNumber": 543
          },
          {
            "lineNumber": 544
          },
          {
            "text": "            player_row.update({",
            "lineNumber": 545
          },
          {
            "text": "                'Points_Total': float(round(player_games[Columns.points].sum(), 1)),",
            "lineNumber": 546
          },
          {
            "text": "                'Score_Total': int(player_games[Columns.score].sum()),",
            "lineNumber": 547
          },
          {
            "text": "                'Score_Average': float(round(player_games[Columns.score].mean(), 2)) if not np.isnan(player_games[Columns.score].mean()) else 0",
            "lineNumber": 548
          },
          {
            "text": "            })",
            "lineNumber": 549
          },
          {
            "text": "            ",
            "lineNumber": 550
          },
          {
            "text": "            rows.append(player_row)",
            "lineNumber": 551
          },
          {
            "text": "        ",
            "lineNumber": 552
          },
          {
            "text": "        # Add team row",
            "lineNumber": 553
          },
          {
            "text": "        team_row = {",
            "lineNumber": 554
          },
          {
            "text": "            'type': 'team',",
            "lineNumber": 555
          },
          {
            "text": "            'Position': '-',",
            "lineNumber": 556
          },
          {
            "text": "            'Name': team_name",
            "lineNumber": 557
          },
          {
            "text": "        }",
            "lineNumber": 558
          },
          {
            "lineNumber": 559
          },
          {
            "text": "        opponent_row = {",
            "lineNumber": 560
          },
          {
            "text": "            'type': 'opponent',",
            "lineNumber": 561
          },
          {
            "text": "            'Position': '-',",
            "lineNumber": 562
          },
          {
            "text": "            'Name': 'Opponents'",
            "lineNumber": 563
          },
          {
            "text": "        }",
            "lineNumber": 564
          },
          {
            "text": "        ",
            "lineNumber": 565
          },
          {
            "text": "        # Add team scores and points for each game",
            "lineNumber": 566
          },
          {
            "text": "        for game_idx, (_, game) in enumerate(team_data.iterrows(), 1):",
            "lineNumber": 567
          },
          {
            "text": "            team_row[f'Score_{game_idx}'] = int(game[Columns.score])",
            "lineNumber": 568
          },
          {
            "text": "            team_row[f'Points_{game_idx}'] = float(round(game[Columns.points], 1))",
            "lineNumber": 569
          },
          {
            "text": "        ",
            "lineNumber": 570
          },
          {
            "lineNumber": 571
          },
          {
            "text": "        # Add opponent scores and points for each game",
            "lineNumber": 572
          },
          {
            "text": "        for game_idx, (_, game) in enumerate(team_opponent_data.iterrows(), 1):",
            "lineNumber": 573
          },
          {
            "text": "            opponent_row[f'Score_{game_idx}'] = int(game[Columns.score])",
            "lineNumber": 574
          },
          {
            "text": "            opponent_row[f'Points_{game_idx}'] = float(round(game[Columns.points], 1))",
            "lineNumber": 575
          },
          {
            "lineNumber": 576
          },
          {
            "text": "        # Add team totals",
            "lineNumber": 577
          },
          {
            "text": "        team_row.update",
            "lineNumber": 578
          }
        ]
      },
      "score": 0.4673742949962616
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\data_access\\schema.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 50
          }
        },
        "contents": "from dataclasses import dataclass\n\n\n@dataclass\nclass Columns:\n    season: str = 'Season'\n    week: str = 'Week'\n    date: str = 'Date'\n    league_name: str = 'League'\n    players_per_team: str = 'Players per Team'\n    location: str = 'Location'\n    round_number: str = 'Round Number'\n    match_number: str = 'Match Number'\n    team_name: str = 'Team'\n    position: str = 'Position'\n    player_name: str = 'Player'\n    player_id: str = 'Player ID'\n    team_name_opponent: str = 'Opponent'\n    score: str = 'Score'\n    points: str = 'Points'\n    input_data: str = 'Input Data'\n    computed_data: str = 'Computed Data'\n    \n    # New tournament-specific fields\n    event_type: str = 'Event Type'  # 'league' or 'tournament'\n    event_name: str = 'Event Name'  # Generic event name (league or tournament)\n    game_number: str = 'Game Number'  # Game within series (reuses round_number concept)\n    handicap: str = 'Handicap'  # Per-game handicap for tournaments\n\n    def __str__(self):\n        return str(self.get_column_names())\n\n    def get_column_names(self, selection=None):\n        if selection is None:\n            return [self.season, self.week, self.date, self.league_name, self.players_per_team, self.location, self.round_number, \n                    self.match_number, self.team_name, self.position, self.player_name, self.player_id, self.team_name_opponent,\n                    self.score, self.points, self.input_data, self.computed_data, self.event_type, self.event_name, \n                    self.game_number, self.handicap]\n        \n@dataclass\nclass ColumnsExtra:\n    position: str = '#'",
        "signatures": {},
        "detailedLines": [
          {
            "text": "from dataclasses import dataclass",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "@dataclass",
            "lineNumber": 4
          },
          {
            "text": "class Columns:",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "text": "    season: str = 'Season'",
            "lineNumber": 6
          },
          {
            "text": "    week: str = 'Week'",
            "lineNumber": 7
          },
          {
            "text": "    date: str = 'Date'",
            "lineNumber": 8
          },
          {
            "text": "    league_name: str = 'League'",
            "lineNumber": 9
          },
          {
            "text": "    players_per_team: str = 'Players per Team'",
            "lineNumber": 10
          },
          {
            "text": "    location: str = 'Location'",
            "lineNumber": 11
          },
          {
            "text": "    round_number: str = 'Round Number'",
            "lineNumber": 12
          },
          {
            "text": "    match_number: str = 'Match Number'",
            "lineNumber": 13
          },
          {
            "text": "    team_name: str = 'Team'",
            "lineNumber": 14
          },
          {
            "text": "    position: str = 'Position'",
            "lineNumber": 15
          },
          {
            "text": "    player_name: str = 'Player'",
            "lineNumber": 16
          },
          {
            "text": "    player_id: str = 'Player ID'",
            "lineNumber": 17
          },
          {
            "text": "    team_name_opponent: str = 'Opponent'",
            "lineNumber": 18
          },
          {
            "text": "    score: str = 'Score'",
            "lineNumber": 19
          },
          {
            "text": "    points: str = 'Points'",
            "lineNumber": 20
          },
          {
            "text": "    input_data: str = 'Input Data'",
            "lineNumber": 21
          },
          {
            "text": "    computed_data: str = 'Computed Data'",
            "lineNumber": 22
          },
          {
            "text": "    ",
            "lineNumber": 23
          },
          {
            "text": "    # New tournament-specific fields",
            "lineNumber": 24
          },
          {
            "text": "    event_type: str = 'Event Type'  # 'league' or 'tournament'",
            "lineNumber": 25
          },
          {
            "text": "    event_name: str = 'Event Name'  # Generic event name (league or tournament)",
            "lineNumber": 26
          },
          {
            "text": "    game_number: str = 'Game Number'  # Game within series (reuses round_number concept)",
            "lineNumber": 27
          },
          {
            "text": "    handicap: str = 'Handicap'  # Per-game handicap for tournaments",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "    def __str__(self):",
            "lineNumber": 30
          },
          {
            "text": "        return str(self.get_column_names())",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "    def get_column_names(self, selection=None):",
            "lineNumber": 33
          },
          {
            "text": "        if selection is None:",
            "lineNumber": 34
          },
          {
            "text": "            return [self.season, self.week, self.date, self.league_name, self.players_per_team, self.location, self.round_number, ",
            "lineNumber": 35
          },
          {
            "text": "                    self.match_number, self.team_name, self.position, self.player_name, self.player_id, self.team_name_opponent,",
            "lineNumber": 36
          },
          {
            "text": "                    self.score, self.points, self.input_data, self.computed_data, self.event_type, self.event_name, ",
            "lineNumber": 37
          },
          {
            "text": "                    self.game_number, self.handicap]",
            "lineNumber": 38,
            "isSignature": true
          },
          {
            "text": "        ",
            "lineNumber": 39
          },
          {
            "text": "@dataclass",
            "lineNumber": 40
          },
          {
            "text": "class ColumnsExtra:",
            "lineNumber": 41,
            "isSignature": true
          },
          {
            "text": "    position: str = '#'",
            "lineNumber": 42
          }
        ]
      },
      "score": 0.44855284690856934
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n\n                )\n            ]\n            \n            # Get individual player points for this round to add to team points\n            individual_filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.round_number: {'value': round_number, 'operator': 'eq'},\n                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual player data\n            }\n            \n            individual_data = self.adapter.get_filtered_data(filters=individual_filters)\n            \n            # Calculate individual points per team\n            individual_points_by_team = {}\n            if not individual_data.empty:\n                for team in individual_data[Columns.team_name].unique():\n                    team_individual = individual_data[individual_data[Columns.team_name] == team]\n                    individual_points_by_team[team] = float(team_individual[Columns.points].sum()) if pd.notna(team_individual[Columns.points].sum()) else 0.0\n            \n            # Build data rows - group by team to find their opponent\n            data = []\n            processed_teams = set()\n            \n            for _, row in team_totals.iterrows():",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 92,
                "column": 5
              },
              "endPosition": {
                "line": 93,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "lineNumber": 153
          },
          {
            "text": "                )",
            "lineNumber": 154
          },
          {
            "text": "            ]",
            "lineNumber": 155
          },
          {
            "text": "            ",
            "lineNumber": 156
          },
          {
            "text": "            # Get individual player points for this round to add to team points",
            "lineNumber": 157
          },
          {
            "text": "            individual_filters = {",
            "lineNumber": 158
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 159
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 160
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 161
          },
          {
            "text": "                Columns.round_number: {'value': round_number, 'operator': 'eq'},",
            "lineNumber": 162
          },
          {
            "text": "                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual player data",
            "lineNumber": 163
          },
          {
            "text": "            }",
            "lineNumber": 164
          },
          {
            "text": "            ",
            "lineNumber": 165
          },
          {
            "text": "            individual_data = self.adapter.get_filtered_data(filters=individual_filters)",
            "lineNumber": 166
          },
          {
            "text": "            ",
            "lineNumber": 167
          },
          {
            "text": "            # Calculate individual points per team",
            "lineNumber": 168
          },
          {
            "text": "            individual_points_by_team = {}",
            "lineNumber": 169
          },
          {
            "text": "            if not individual_data.empty:",
            "lineNumber": 170
          },
          {
            "text": "                for team in individual_data[Columns.team_name].unique():",
            "lineNumber": 171
          },
          {
            "text": "                    team_individual = individual_data[individual_data[Columns.team_name] == team]",
            "lineNumber": 172
          },
          {
            "text": "                    individual_points_by_team[team] = float(team_individual[Columns.points].sum()) if pd.notna(team_individual[Columns.points].sum()) else 0.0",
            "lineNumber": 173
          },
          {
            "text": "            ",
            "lineNumber": 174
          },
          {
            "text": "            # Build data rows - group by team to find their opponent",
            "lineNumber": 175
          },
          {
            "text": "            data = []",
            "lineNumber": 176
          },
          {
            "text": "            processed_teams = set()",
            "lineNumber": 177
          },
          {
            "text": "            ",
            "lineNumber": 178
          },
          {
            "text": "            for _, row in team_totals.iterrows():",
            "lineNumber": 179
          }
        ]
      },
      "score": 0.4418911933898926
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n\n            \n            # Create columns - two column groups: selected team and opposing team\n            # Order: Player name, Pins, Points | Points, Pins, Player name\n            columns = [\n                ColumnGroup(\n                    title=team,  # Selected team name\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"player\"), field=\"player_name\", width=\"200px\", align=\"left\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"player_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"points\", width=\"80px\", align=\"center\")\n                    ]\n                ),\n                ColumnGroup(\n                    title=opponent_name,  # Opposing team name\n                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"player\"), field=\"opponent_player_name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Build data rows - sort by position\n            data = []\n            if Columns.position not in player_data.columns:\n                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing position column)\"\n                )\n            \n            player_data_sorted = player_data.sort_values(by=Columns.position)",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 250,
                "column": 5
              },
              "endPosition": {
                "line": 251,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "lineNumber": 356
          },
          {
            "text": "            ",
            "lineNumber": 357
          },
          {
            "text": "            # Create columns - two column groups: selected team and opposing team",
            "lineNumber": 358
          },
          {
            "text": "            # Order: Player name, Pins, Points | Points, Pins, Player name",
            "lineNumber": 359
          },
          {
            "text": "            columns = [",
            "lineNumber": 360
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 361
          },
          {
            "text": "                    title=team,  # Selected team name",
            "lineNumber": 362
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 363
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 364
          },
          {
            "text": "                    columns=[",
            "lineNumber": 365
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"player\"), field=\"player_name\", width=\"200px\", align=\"left\"),",
            "lineNumber": 366
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"player_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 367
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"points\", width=\"80px\", align=\"center\")",
            "lineNumber": 368
          },
          {
            "text": "                    ]",
            "lineNumber": 369
          },
          {
            "text": "                ),",
            "lineNumber": 370
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 371
          },
          {
            "text": "                    title=opponent_name,  # Opposing team name",
            "lineNumber": 372
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},",
            "lineNumber": 373
          },
          {
            "text": "                    columns=[",
            "lineNumber": 374
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 375
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 376
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"player\"), field=\"opponent_player_name\", width=\"200px\", align=\"left\")",
            "lineNumber": 377
          },
          {
            "text": "                    ]",
            "lineNumber": 378
          },
          {
            "text": "                )",
            "lineNumber": 379
          },
          {
            "text": "            ]",
            "lineNumber": 380
          },
          {
            "text": "            ",
            "lineNumber": 381
          },
          {
            "text": "            # Build data rows - sort by position",
            "lineNumber": 382
          },
          {
            "text": "            data = []",
            "lineNumber": 383
          },
          {
            "text": "            if Columns.position not in player_data.columns:",
            "lineNumber": 384
          },
          {
            "text": "                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")",
            "lineNumber": 385
          },
          {
            "text": "                return TableData(",
            "lineNumber": 386
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 387
          },
          {
            "text": "                    data=[],",
            "lineNumber": 388
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing position column)\"",
            "lineNumber": 389
          },
          {
            "text": "                )",
            "lineNumber": 390
          },
          {
            "text": "            ",
            "lineNumber": 391
          },
          {
            "text": "            player_data_sorted = player_data.sort_values(by=Columns.position)",
            "lineNumber": 392
          }
        ]
      },
      "score": 0.43890491127967834
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n\n                    continue\n            \n            # Add team totals row (shows team name and team match points)\n            data.append([\n                team,  # Team name instead of \"Total\"\n                total_player_pins,\n                team_match_points,  # Team match points (0/3)\n                opponent_match_points,  # Opponent team match points\n                total_opponent_pins,\n                opponent_name  # Opponent team name\n            ])\n            \n            # Add final row with sum of all points (individual + team) for both teams\n            total_all_points_team = total_points + team_match_points\n            total_all_points_opponent = total_opponent_points + opponent_match_points\n            data.append([\n                \"\",  # Empty (player name column)\n                \"\",  # Empty (pins column)\n                total_all_points_team,  # Sum of individual + team points for team\n                total_all_points_opponent,  # Sum of individual + team points for opponent\n                \"\",  # Empty (pins column)\n                \"\"  # Empty (player name column)\n            ])\n            \n            return TableData(\n                columns=columns,\n                data=data,\n                title=f\"{team} - {i18n_service.get_text('week')} {week}, {i18n_service.get_text('game')} {round_number}\",\n                description=f\"{i18n_service.get_text('individual_scores')} vs {opponent_name}\",\n                config={\n                    \"stickyHeader\": True,\n                    \"striped\": True,\n                    \"hover\": True,\n                    \"responsive\": True,\n                    \"compact\": False,\n                    \"highlightLastRow\": True\n                }\n            )\n            \n        except Exception as e:",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 250,
                "column": 5
              },
              "endPosition": {
                "line": 251,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "lineNumber": 440
          },
          {
            "text": "                    continue",
            "lineNumber": 441
          },
          {
            "text": "            ",
            "lineNumber": 442
          },
          {
            "text": "            # Add team totals row (shows team name and team match points)",
            "lineNumber": 443
          },
          {
            "text": "            data.append([",
            "lineNumber": 444
          },
          {
            "text": "                team,  # Team name instead of \"Total\"",
            "lineNumber": 445
          },
          {
            "text": "                total_player_pins,",
            "lineNumber": 446
          },
          {
            "text": "                team_match_points,  # Team match points (0/3)",
            "lineNumber": 447
          },
          {
            "text": "                opponent_match_points,  # Opponent team match points",
            "lineNumber": 448
          },
          {
            "text": "                total_opponent_pins,",
            "lineNumber": 449
          },
          {
            "text": "                opponent_name  # Opponent team name",
            "lineNumber": 450
          },
          {
            "text": "            ])",
            "lineNumber": 451
          },
          {
            "text": "            ",
            "lineNumber": 452
          },
          {
            "text": "            # Add final row with sum of all points (individual + team) for both teams",
            "lineNumber": 453
          },
          {
            "text": "            total_all_points_team = total_points + team_match_points",
            "lineNumber": 454
          },
          {
            "text": "            total_all_points_opponent = total_opponent_points + opponent_match_points",
            "lineNumber": 455
          },
          {
            "text": "            data.append([",
            "lineNumber": 456
          },
          {
            "text": "                \"\",  # Empty (player name column)",
            "lineNumber": 457
          },
          {
            "text": "                \"\",  # Empty (pins column)",
            "lineNumber": 458
          },
          {
            "text": "                total_all_points_team,  # Sum of individual + team points for team",
            "lineNumber": 459
          },
          {
            "text": "                total_all_points_opponent,  # Sum of individual + team points for opponent",
            "lineNumber": 460
          },
          {
            "text": "                \"\",  # Empty (pins column)",
            "lineNumber": 461
          },
          {
            "text": "                \"\"  # Empty (player name column)",
            "lineNumber": 462
          },
          {
            "text": "            ])",
            "lineNumber": 463
          },
          {
            "text": "            ",
            "lineNumber": 464
          },
          {
            "text": "            return TableData(",
            "lineNumber": 465
          },
          {
            "text": "                columns=columns,",
            "lineNumber": 466
          },
          {
            "text": "                data=data,",
            "lineNumber": 467
          },
          {
            "text": "                title=f\"{team} - {i18n_service.get_text('week')} {week}, {i18n_service.get_text('game')} {round_number}\",",
            "lineNumber": 468
          },
          {
            "text": "                description=f\"{i18n_service.get_text('individual_scores')} vs {opponent_name}\",",
            "lineNumber": 469
          },
          {
            "text": "                config={",
            "lineNumber": 470
          },
          {
            "text": "                    \"stickyHeader\": True,",
            "lineNumber": 471
          },
          {
            "text": "                    \"striped\": True,",
            "lineNumber": 472
          },
          {
            "text": "                    \"hover\": True,",
            "lineNumber": 473
          },
          {
            "text": "                    \"responsive\": True,",
            "lineNumber": 474
          },
          {
            "text": "                    \"compact\": False,",
            "lineNumber": 475
          },
          {
            "text": "                    \"highlightLastRow\": True",
            "lineNumber": 476
          },
          {
            "text": "                }",
            "lineNumber": 477
          },
          {
            "text": "            )",
            "lineNumber": 478
          },
          {
            "text": "            ",
            "lineNumber": 479
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 480
          }
        ]
      },
      "score": 0.4283527135848999
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:\n\n            \n            # --- Build data rows ---\n            if view_mode == 'own_team':\n                # Build main data rows (one per round)\n                data = []\n                for rnd in all_rounds:\n                    # Get opponent team name for this round (from own or opponent data)\n                    if rnd in team_data[Columns.round_number].values:\n                        opponent_team = team_data[team_data[Columns.round_number] == rnd][Columns.team_name_opponent].iloc[0]\n                    elif rnd in opponent_data[Columns.round_number].values:\n                        opponent_team = opponent_data[opponent_data[Columns.round_number] == rnd][Columns.team_name].iloc[0]\n                    else:\n                        opponent_team = \"\"\n                    row = [int(rnd), opponent_team]\n                    # For each player, always output pos, score, points (blank if not played)\n                    for player in own_players:\n                        if rnd in own_part_map[player]:\n                            row_data = own_part_map[player][rnd]\n                            row.append(int(row_data[Columns.position] + 1) if not pd.isnull(row_data[Columns.position]) else \"\")\n                            row.append(int(row_data[Columns.score]) if not pd.isnull(row_data[Columns.score]) else \"\")\n                            row.append(float(row_data[Columns.points]) if not pd.isnull(row_data[Columns.points]) else \"\")\n                        else:\n                            row.extend([\"\", \"\", \"\"])\n                    # Team totals for this round (if available)\n                    team_totals = team_data[(team_data[Columns.round_number] == rnd) &amp; (team_data[Columns.computed_data] == True)]\n                    if not team_totals.empty:\n                        row.append(int(team_totals[Columns.score].iloc[0]))\n                        row.append(int(team_totals[Columns.points].iloc[0]))\n                    else:\n                        row.extend([\"\", \"\"])\n                    data.append(row)\n                # Add team totals row at the end\n                team_total_row = [\"Team\", \"\"]",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1783,
                "column": 5
              },
              "endPosition": {
                "line": 1784,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:",
            "lineNumber": 1783
          },
          {
            "lineNumber": 1879
          },
          {
            "text": "            ",
            "lineNumber": 1880
          },
          {
            "text": "            # --- Build data rows ---",
            "lineNumber": 1881
          },
          {
            "text": "            if view_mode == 'own_team':",
            "lineNumber": 1882
          },
          {
            "text": "                # Build main data rows (one per round)",
            "lineNumber": 1883
          },
          {
            "text": "                data = []",
            "lineNumber": 1884
          },
          {
            "text": "                for rnd in all_rounds:",
            "lineNumber": 1885
          },
          {
            "text": "                    # Get opponent team name for this round (from own or opponent data)",
            "lineNumber": 1886
          },
          {
            "text": "                    if rnd in team_data[Columns.round_number].values:",
            "lineNumber": 1887
          },
          {
            "text": "                        opponent_team = team_data[team_data[Columns.round_number] == rnd][Columns.team_name_opponent].iloc[0]",
            "lineNumber": 1888
          },
          {
            "text": "                    elif rnd in opponent_data[Columns.round_number].values:",
            "lineNumber": 1889
          },
          {
            "text": "                        opponent_team = opponent_data[opponent_data[Columns.round_number] == rnd][Columns.team_name].iloc[0]",
            "lineNumber": 1890
          },
          {
            "text": "                    else:",
            "lineNumber": 1891
          },
          {
            "text": "                        opponent_team = \"\"",
            "lineNumber": 1892
          },
          {
            "text": "                    row = [int(rnd), opponent_team]",
            "lineNumber": 1893
          },
          {
            "text": "                    # For each player, always output pos, score, points (blank if not played)",
            "lineNumber": 1894
          },
          {
            "text": "                    for player in own_players:",
            "lineNumber": 1895
          },
          {
            "text": "                        if rnd in own_part_map[player]:",
            "lineNumber": 1896
          },
          {
            "text": "                            row_data = own_part_map[player][rnd]",
            "lineNumber": 1897
          },
          {
            "text": "                            row.append(int(row_data[Columns.position] + 1) if not pd.isnull(row_data[Columns.position]) else \"\")",
            "lineNumber": 1898
          },
          {
            "text": "                            row.append(int(row_data[Columns.score]) if not pd.isnull(row_data[Columns.score]) else \"\")",
            "lineNumber": 1899
          },
          {
            "text": "                            row.append(float(row_data[Columns.points]) if not pd.isnull(row_data[Columns.points]) else \"\")",
            "lineNumber": 1900
          },
          {
            "text": "                        else:",
            "lineNumber": 1901
          },
          {
            "text": "                            row.extend([\"\", \"\", \"\"])",
            "lineNumber": 1902
          },
          {
            "text": "                    # Team totals for this round (if available)",
            "lineNumber": 1903
          },
          {
            "text": "                    team_totals = team_data[(team_data[Columns.round_number] == rnd) &amp; (team_data[Columns.computed_data] == True)]",
            "lineNumber": 1904
          },
          {
            "text": "                    if not team_totals.empty:",
            "lineNumber": 1905
          },
          {
            "text": "                        row.append(int(team_totals[Columns.score].iloc[0]))",
            "lineNumber": 1906
          },
          {
            "text": "                        row.append(int(team_totals[Columns.points].iloc[0]))",
            "lineNumber": 1907
          },
          {
            "text": "                    else:",
            "lineNumber": 1908
          },
          {
            "text": "                        row.extend([\"\", \"\"])",
            "lineNumber": 1909
          },
          {
            "text": "                    data.append(row)",
            "lineNumber": 1910
          },
          {
            "text": "                # Add team totals row at the end",
            "lineNumber": 1911
          },
          {
            "text": "                team_total_row = [\"Team\", \"\"]",
            "lineNumber": 1912
          }
        ]
      },
      "score": 0.4254629909992218
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\n\n\n    def get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n        \"\"\"\n        Returns a table with all individual scores of each player of the selected team at the given event (league, season, week).\n        - Col group 'Opponents': Name (opponent name)\n        - Col group with team name: Score, Points, Total Points (sum of all individual points + team points for the match)\n        - One col group per player who played: Pos, Score, Points\n        - Each row is a match (round) for the team in that week\n        - Summary row at the end: sum of all individual scores and points per player, sum of team totals\n        - hbar above the final row, final row bold\n        \"\"\"\n        import pandas as pd\n        from app.models.table_data import TableData, ColumnGroup, Column\n        from data_access.schema import Columns\n\n        # Get all individual player results for the team in this event\n        player_filters = {\n            Columns.league_name: {'value': league, 'operator': 'eq'},\n            Columns.season: {'value': season, 'operator': 'eq'},\n            Columns.team_name: {'value': team, 'operator': 'eq'},\n            Columns.week: {'value': week, 'operator': 'eq'},\n            Columns.computed_data: {'value': False, 'operator': 'eq'}\n        }\n        player_data = self.adapter.get_filtered_data(filters=player_filters)\n        if player_data.empty:\n            return TableData(columns=[], data=[], title=f\"No data available for {team} - Week {week}\")\n\n        # Get team totals (computed data)\n        team_filters = {\n            Columns.league_name: {'value': league, 'operator': 'eq'},\n            Columns.season: {'value': season, 'operator': 'eq'},\n            Columns.team_name: {'value': team, 'operator': 'eq'},\n            Columns.week: {'value': week, 'operator': 'eq'},\n            Columns.computed_data: {'value': True, 'operator': 'eq'}\n        }\n        team_data = self.adapter.get_filtered_data(filters=team_filters)\n\n        # Get all rounds (matches) for this team in this event\n        rounds = sorted(player_data[Columns.round_number].unique())",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "lineNumber": 2019
          },
          {
            "lineNumber": 2020
          },
          {
            "text": "    def get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 2021
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2022
          },
          {
            "text": "        Returns a table with all individual scores of each player of the selected team at the given event (league, season, week).",
            "lineNumber": 2023
          },
          {
            "text": "        - Col group 'Opponents': Name (opponent name)",
            "lineNumber": 2024
          },
          {
            "text": "        - Col group with team name: Score, Points, Total Points (sum of all individual points + team points for the match)",
            "lineNumber": 2025
          },
          {
            "text": "        - One col group per player who played: Pos, Score, Points",
            "lineNumber": 2026
          },
          {
            "text": "        - Each row is a match (round) for the team in that week",
            "lineNumber": 2027
          },
          {
            "text": "        - Summary row at the end: sum of all individual scores and points per player, sum of team totals",
            "lineNumber": 2028
          },
          {
            "text": "        - hbar above the final row, final row bold",
            "lineNumber": 2029
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 2030
          },
          {
            "text": "        import pandas as pd",
            "lineNumber": 2031
          },
          {
            "text": "        from app.models.table_data import TableData, ColumnGroup, Column",
            "lineNumber": 2032
          },
          {
            "text": "        from data_access.schema import Columns",
            "lineNumber": 2033
          },
          {
            "lineNumber": 2034
          },
          {
            "text": "        # Get all individual player results for the team in this event",
            "lineNumber": 2035
          },
          {
            "text": "        player_filters = {",
            "lineNumber": 2036
          },
          {
            "text": "            Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 2037
          },
          {
            "text": "            Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 2038
          },
          {
            "text": "            Columns.team_name: {'value': team, 'operator': 'eq'},",
            "lineNumber": 2039
          },
          {
            "text": "            Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 2040
          },
          {
            "text": "            Columns.computed_data: {'value': False, 'operator': 'eq'}",
            "lineNumber": 2041
          },
          {
            "text": "        }",
            "lineNumber": 2042
          },
          {
            "text": "        player_data = self.adapter.get_filtered_data(filters=player_filters)",
            "lineNumber": 2043
          },
          {
            "text": "        if player_data.empty:",
            "lineNumber": 2044
          },
          {
            "text": "            return TableData(columns=[], data=[], title=f\"No data available for {team} - Week {week}\")",
            "lineNumber": 2045
          },
          {
            "lineNumber": 2046
          },
          {
            "text": "        # Get team totals (computed data)",
            "lineNumber": 2047
          },
          {
            "text": "        team_filters = {",
            "lineNumber": 2048
          },
          {
            "text": "            Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 2049
          },
          {
            "text": "            Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 2050
          },
          {
            "text": "            Columns.team_name: {'value': team, 'operator': 'eq'},",
            "lineNumber": 2051
          },
          {
            "text": "            Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 2052
          },
          {
            "text": "            Columns.computed_data: {'value': True, 'operator': 'eq'}",
            "lineNumber": 2053
          },
          {
            "text": "        }",
            "lineNumber": 2054
          },
          {
            "text": "        team_data = self.adapter.get_filtered_data(filters=team_filters)",
            "lineNumber": 2055
          },
          {
            "lineNumber": 2056
          },
          {
            "text": "        # Get all rounds (matches) for this team in this event",
            "lineNumber": 2057
          },
          {
            "text": "        rounds = sorted(player_data[Columns.round_number].unique())",
            "lineNumber": 2058
          }
        ]
      },
      "score": 0.42016685009002686
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\business_logic\\server.py",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 936
          }
        },
        "contents": "class Server:\n    # fetches basic dataframes from data adapter\n    # converts basic dataframes to aggregated dataframes\n    # forwards aggregated dataframes to app\ndef get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:\n\n\n        team_opponent_filters = {\n            Columns.league_name: league_name,\n            Columns.season: season,\n            Columns.team_name_opponent: team_name,\n            Columns.week: week,\n            Columns.computed_data: True\n        }\n        \n        columns_team = [Columns.score, Columns.points, Columns.team_name, Columns.team_name_opponent, Columns.week]\n\n\n\n        team_data = self.data_adapter.get_filtered_data(\n            columns=columns_team,\n            filters_eq=team_filters\n        )\n        if debug_output:\n            print(\"team_data: \\n\" + str(team_data))\n        \n\n        team_opponent_data = self.data_adapter.get_filtered_data(\n            columns=columns_team,\n            filters_eq=team_opponent_filters\n        )\n        if debug_output:\n            print(\"team_opponent_data: \\n\" + str(team_opponent_data))\n\n        # Get number of games\n        n_games = len(player_data[Columns.team_name_opponent].unique())\n        \n        # Prepare player rows\n        rows = []\n        # Group by player to get their games\n        player_groups = player_data.groupby(Columns.player_name)\n        player_groups = sorted(player_groups, key=lambda x: x[1][Columns.position].iloc[0])\n        \n        for player_name, player_games in player_groups:",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 12,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 442,
                "column": 5
              },
              "endPosition": {
                "line": 443,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class Server:",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    # fetches basic dataframes from data adapter",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    # converts basic dataframes to aggregated dataframes",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "text": "    # forwards aggregated dataframes to app",
            "lineNumber": 11,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:",
            "lineNumber": 442
          },
          {
            "lineNumber": 493
          },
          {
            "lineNumber": 494
          },
          {
            "text": "        team_opponent_filters = {",
            "lineNumber": 495
          },
          {
            "text": "            Columns.league_name: league_name,",
            "lineNumber": 496
          },
          {
            "text": "            Columns.season: season,",
            "lineNumber": 497
          },
          {
            "text": "            Columns.team_name_opponent: team_name,",
            "lineNumber": 498
          },
          {
            "text": "            Columns.week: week,",
            "lineNumber": 499
          },
          {
            "text": "            Columns.computed_data: True",
            "lineNumber": 500
          },
          {
            "text": "        }",
            "lineNumber": 501
          },
          {
            "text": "        ",
            "lineNumber": 502
          },
          {
            "text": "        columns_team = [Columns.score, Columns.points, Columns.team_name, Columns.team_name_opponent, Columns.week]",
            "lineNumber": 503
          },
          {
            "lineNumber": 504
          },
          {
            "lineNumber": 505
          },
          {
            "lineNumber": 506
          },
          {
            "text": "        team_data = self.data_adapter.get_filtered_data(",
            "lineNumber": 507
          },
          {
            "text": "            columns=columns_team,",
            "lineNumber": 508
          },
          {
            "text": "            filters_eq=team_filters",
            "lineNumber": 509
          },
          {
            "text": "        )",
            "lineNumber": 510
          },
          {
            "text": "        if debug_output:",
            "lineNumber": 511
          },
          {
            "text": "            print(\"team_data: \\n\" + str(team_data))",
            "lineNumber": 512
          },
          {
            "text": "        ",
            "lineNumber": 513
          },
          {
            "lineNumber": 514
          },
          {
            "text": "        team_opponent_data = self.data_adapter.get_filtered_data(",
            "lineNumber": 515
          },
          {
            "text": "            columns=columns_team,",
            "lineNumber": 516
          },
          {
            "text": "            filters_eq=team_opponent_filters",
            "lineNumber": 517
          },
          {
            "text": "        )",
            "lineNumber": 518
          },
          {
            "text": "        if debug_output:",
            "lineNumber": 519
          },
          {
            "text": "            print(\"team_opponent_data: \\n\" + str(team_opponent_data))",
            "lineNumber": 520
          },
          {
            "lineNumber": 521
          },
          {
            "text": "        # Get number of games",
            "lineNumber": 522
          },
          {
            "text": "        n_games = len(player_data[Columns.team_name_opponent].unique())",
            "lineNumber": 523
          },
          {
            "text": "        ",
            "lineNumber": 524
          },
          {
            "text": "        # Prepare player rows",
            "lineNumber": 525
          },
          {
            "text": "        rows = []",
            "lineNumber": 526
          },
          {
            "text": "        # Group by player to get their games",
            "lineNumber": 527
          },
          {
            "text": "        player_groups = player_data.groupby(Columns.player_name)",
            "lineNumber": 528
          },
          {
            "text": "        player_groups = sorted(player_groups, key=lambda x: x[1][Columns.position].iloc[0])",
            "lineNumber": 529
          },
          {
            "text": "        ",
            "lineNumber": 530
          },
          {
            "text": "        for player_name, player_games in player_groups:",
            "lineNumber": 531
          }
        ]
      },
      "score": 0.418781042098999
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n            \n            # Add opponent total row right after team row\n            if not opponent_data.empty:\n                # Start with position and name\n                opponent_row = [\"Team\", \"Opponents\"]\n                \n                # Add game data for opponents\n                for game in games:\n                    game_data = opponent_data[opponent_data[Columns.round_number] == game]\n                    if not game_data.empty:\n                        opponent_row.append(int(game_data[Columns.score].iloc[0]))\n                        opponent_row.append(\"\")  # Replace opponent points with empty string\n                    else:\n                        opponent_row.append(0)\n                        opponent_row.append(\"\")\n                \n                # Calculate opponent totals\n                opponent_row.append(\"\")  # Replace opponent total points with empty string\n                opponent_row.append(int(opponent_data[Columns.score].sum()))\n                \n                # Calculate opponent average based on individual results\n                if not opponent_individual_data.empty:\n                    opponent_average = round(float(opponent_individual_data[Columns.score].mean()), 1)\n                else:\n                    opponent_average = 0\n                \n                opponent_row.append(opponent_average)\n                \n                # Add metadata for styling\n                row_metadata.append({\n                    'rowType': 'opponents',\n                    'styling': {}\n                })\n                \n                data.append(opponent_row)\n            \n            # Add Total row that sums all points (individual + team)\n            total_row = [\"Total\", \"Points\"]\n            \n            # Calculate total points for each game (individual + team)",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 772,
                "column": 5
              },
              "endPosition": {
                "line": 773,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 772
          },
          {
            "lineNumber": 1031
          },
          {
            "text": "            ",
            "lineNumber": 1032
          },
          {
            "text": "            # Add opponent total row right after team row",
            "lineNumber": 1033
          },
          {
            "text": "            if not opponent_data.empty:",
            "lineNumber": 1034
          },
          {
            "text": "                # Start with position and name",
            "lineNumber": 1035
          },
          {
            "text": "                opponent_row = [\"Team\", \"Opponents\"]",
            "lineNumber": 1036
          },
          {
            "text": "                ",
            "lineNumber": 1037
          },
          {
            "text": "                # Add game data for opponents",
            "lineNumber": 1038
          },
          {
            "text": "                for game in games:",
            "lineNumber": 1039
          },
          {
            "text": "                    game_data = opponent_data[opponent_data[Columns.round_number] == game]",
            "lineNumber": 1040
          },
          {
            "text": "                    if not game_data.empty:",
            "lineNumber": 1041
          },
          {
            "text": "                        opponent_row.append(int(game_data[Columns.score].iloc[0]))",
            "lineNumber": 1042
          },
          {
            "text": "                        opponent_row.append(\"\")  # Replace opponent points with empty string",
            "lineNumber": 1043
          },
          {
            "text": "                    else:",
            "lineNumber": 1044
          },
          {
            "text": "                        opponent_row.append(0)",
            "lineNumber": 1045
          },
          {
            "text": "                        opponent_row.append(\"\")",
            "lineNumber": 1046
          },
          {
            "text": "                ",
            "lineNumber": 1047
          },
          {
            "text": "                # Calculate opponent totals",
            "lineNumber": 1048
          },
          {
            "text": "                opponent_row.append(\"\")  # Replace opponent total points with empty string",
            "lineNumber": 1049
          },
          {
            "text": "                opponent_row.append(int(opponent_data[Columns.score].sum()))",
            "lineNumber": 1050
          },
          {
            "text": "                ",
            "lineNumber": 1051
          },
          {
            "text": "                # Calculate opponent average based on individual results",
            "lineNumber": 1052
          },
          {
            "text": "                if not opponent_individual_data.empty:",
            "lineNumber": 1053
          },
          {
            "text": "                    opponent_average = round(float(opponent_individual_data[Columns.score].mean()), 1)",
            "lineNumber": 1054
          },
          {
            "text": "                else:",
            "lineNumber": 1055
          },
          {
            "text": "                    opponent_average = 0",
            "lineNumber": 1056
          },
          {
            "text": "                ",
            "lineNumber": 1057
          },
          {
            "text": "                opponent_row.append(opponent_average)",
            "lineNumber": 1058
          },
          {
            "text": "                ",
            "lineNumber": 1059
          },
          {
            "text": "                # Add metadata for styling",
            "lineNumber": 1060
          },
          {
            "text": "                row_metadata.append({",
            "lineNumber": 1061
          },
          {
            "text": "                    'rowType': 'opponents',",
            "lineNumber": 1062
          },
          {
            "text": "                    'styling': {}",
            "lineNumber": 1063
          },
          {
            "text": "                })",
            "lineNumber": 1064
          },
          {
            "text": "                ",
            "lineNumber": 1065
          },
          {
            "text": "                data.append(opponent_row)",
            "lineNumber": 1066
          },
          {
            "text": "            ",
            "lineNumber": 1067
          },
          {
            "text": "            # Add Total row that sums all points (individual + team)",
            "lineNumber": 1068
          },
          {
            "text": "            total_row = [\"Total\", \"Points\"]",
            "lineNumber": 1069
          },
          {
            "text": "            ",
            "lineNumber": 1070
          },
          {
            "text": "            # Calculate total points for each game (individual + team)",
            "lineNumber": 1071
          }
        ]
      },
      "score": 0.41750308871269226
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\business_logic\\server.py",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 936
          }
        },
        "contents": "class Server:\n    # fetches basic dataframes from data adapter\n    # converts basic dataframes to aggregated dataframes\n    # forwards aggregated dataframes to app\ndef get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:\n\n        \n        # Add columns for each game\n        for game_idx in range(1, n_games + 1):\n            columns.extend([\n                {\n                    'key': f'Score_{game_idx}',\n                    'title': 'Score',\n                    'className': 'text-center'\n                },\n                {\n                    'key': f'Points_{game_idx}',\n                    'title': 'Pts',\n                    'className': 'text-center'\n                }\n            ])\n        \n        # Add total columns\n        columns.extend([\n            {\n                'key': 'Points_Total',\n                'title': 'Points',\n                'className': 'text-center'\n            },\n            {\n                'key': 'Score_Total',\n                'title': 'Score',\n                'className': 'text-center'\n            },\n            {\n                'key': 'Score_Average',\n                'title': 'Avg',\n                'className': 'text-center',\n                'formatter': '(value || 0).toFixed(1)'\n            }\n        ])\n\n        # Create the complete table configuration matching the component's expected structure\n        table_config = {\n            'data': rows,  # The actual data rows\n            'columns': columns,  # Column definitions\n            'headerGroups': header_groups,  # Header group definitions\n            'rowNumbering': False,  # Disable row numbers\n            'positionChange': False,  # Disable position change indicators\n            'metadata': {  # Additional metadata\n                'league': league_name,\n                'season': season,\n                'week': week,\n                'location': 'TBD'\n            }\n        }\n        if debug_output:\n            print(table_config)\n        return table_config\n\n    def get_games_for_player(self, player_name: str) -&gt; pd.DataFrame:\n        \"\"\"Get all games for a player\"\"\"",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 12,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 442,
                "column": 5
              },
              "endPosition": {
                "line": 443,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class Server:",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    # fetches basic dataframes from data adapter",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    # converts basic dataframes to aggregated dataframes",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "text": "    # forwards aggregated dataframes to app",
            "lineNumber": 11,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:",
            "lineNumber": 442
          },
          {
            "lineNumber": 624
          },
          {
            "text": "        ",
            "lineNumber": 625
          },
          {
            "text": "        # Add columns for each game",
            "lineNumber": 626
          },
          {
            "text": "        for game_idx in range(1, n_games + 1):",
            "lineNumber": 627
          },
          {
            "text": "            columns.extend([",
            "lineNumber": 628
          },
          {
            "text": "                {",
            "lineNumber": 629
          },
          {
            "text": "                    'key': f'Score_{game_idx}',",
            "lineNumber": 630
          },
          {
            "text": "                    'title': 'Score',",
            "lineNumber": 631
          },
          {
            "text": "                    'className': 'text-center'",
            "lineNumber": 632
          },
          {
            "text": "                },",
            "lineNumber": 633
          },
          {
            "text": "                {",
            "lineNumber": 634
          },
          {
            "text": "                    'key': f'Points_{game_idx}',",
            "lineNumber": 635
          },
          {
            "text": "                    'title': 'Pts',",
            "lineNumber": 636
          },
          {
            "text": "                    'className': 'text-center'",
            "lineNumber": 637
          },
          {
            "text": "                }",
            "lineNumber": 638
          },
          {
            "text": "            ])",
            "lineNumber": 639
          },
          {
            "text": "        ",
            "lineNumber": 640
          },
          {
            "text": "        # Add total columns",
            "lineNumber": 641
          },
          {
            "text": "        columns.extend([",
            "lineNumber": 642
          },
          {
            "text": "            {",
            "lineNumber": 643
          },
          {
            "text": "                'key': 'Points_Total',",
            "lineNumber": 644
          },
          {
            "text": "                'title': 'Points',",
            "lineNumber": 645
          },
          {
            "text": "                'className': 'text-center'",
            "lineNumber": 646
          },
          {
            "text": "            },",
            "lineNumber": 647
          },
          {
            "text": "            {",
            "lineNumber": 648
          },
          {
            "text": "                'key': 'Score_Total',",
            "lineNumber": 649
          },
          {
            "text": "                'title': 'Score',",
            "lineNumber": 650
          },
          {
            "text": "                'className': 'text-center'",
            "lineNumber": 651
          },
          {
            "text": "            },",
            "lineNumber": 652
          },
          {
            "text": "            {",
            "lineNumber": 653
          },
          {
            "text": "                'key': 'Score_Average',",
            "lineNumber": 654
          },
          {
            "text": "                'title': 'Avg',",
            "lineNumber": 655
          },
          {
            "text": "                'className': 'text-center',",
            "lineNumber": 656
          },
          {
            "text": "                'formatter': '(value || 0).toFixed(1)'",
            "lineNumber": 657
          },
          {
            "text": "            }",
            "lineNumber": 658
          },
          {
            "text": "        ])",
            "lineNumber": 659
          },
          {
            "lineNumber": 660
          },
          {
            "text": "        # Create the complete table configuration matching the component's expected structure",
            "lineNumber": 661
          },
          {
            "text": "        table_config = {",
            "lineNumber": 662
          },
          {
            "text": "            'data': rows,  # The actual data rows",
            "lineNumber": 663
          },
          {
            "text": "            'columns': columns,  # Column definitions",
            "lineNumber": 664
          },
          {
            "text": "            'headerGroups': header_groups,  # Header group definitions",
            "lineNumber": 665
          },
          {
            "text": "            'rowNumbering': False,  # Disable row numbers",
            "lineNumber": 666
          },
          {
            "text": "            'positionChange': False,  # Disable position change indicators",
            "lineNumber": 667
          },
          {
            "text": "            'metadata': {  # Additional metadata",
            "lineNumber": 668
          },
          {
            "text": "                'league': league_name,",
            "lineNumber": 669
          },
          {
            "text": "                'season': season,",
            "lineNumber": 670
          },
          {
            "text": "                'week': week,",
            "lineNumber": 671
          },
          {
            "text": "                'location': 'TBD'",
            "lineNumber": 672
          },
          {
            "text": "            }",
            "lineNumber": 673
          },
          {
            "text": "        }",
            "lineNumber": 674
          },
          {
            "text": "        if debug_output:",
            "lineNumber": 675
          },
          {
            "text": "            print(table_config)",
            "lineNumber": 676
          },
          {
            "text": "        return table_config",
            "lineNumber": 677
          },
          {
            "lineNumber": 678
          },
          {
            "text": "    def get_games_for_player(self, player_name: str) -&gt; pd.DataFrame:",
            "lineNumber": 679
          },
          {
            "text": "        \"\"\"Get all games for a player\"\"\"",
            "lineNumber": 680
          }
        ]
      },
      "score": 0.41578209400177
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n\n            \n            # Get opponent team name from first row\n            if Columns.team_name_opponent not in player_data.columns:\n                print(f\"get_game_team_details_data: Column {Columns.team_name_opponent} not found in player_data\")\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing opponent column)\"\n                )\n            \n            # Extract opponent name and handle various edge cases\n            opponent_name_raw = player_data[Columns.team_name_opponent].iloc[0] if not player_data.empty else \"\"\n            # Convert to string and handle NaN/None values\n            if pd.isna(opponent_name_raw) or opponent_name_raw is None:\n                opponent_name = \"\"\n            else:\n                opponent_name = str(opponent_name_raw).strip()\n            \n            print(f\"get_game_team_details_data: Opponent name = '{opponent_name}' (raw: {opponent_name_raw}, type: {type(opponent_name_raw)})\")\n            \n            if not opponent_name or opponent_name == '' or opponent_name.lower() == 'nan':\n                print(f\"get_game_team_details_data: No opponent name found\")\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (no opponent found)\"\n                )\n            \n            # Get opponent player data\n            opponent_filters",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 250,
                "column": 5
              },
              "endPosition": {
                "line": 251,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "lineNumber": 287
          },
          {
            "text": "            ",
            "lineNumber": 288
          },
          {
            "text": "            # Get opponent team name from first row",
            "lineNumber": 289
          },
          {
            "text": "            if Columns.team_name_opponent not in player_data.columns:",
            "lineNumber": 290
          },
          {
            "text": "                print(f\"get_game_team_details_data: Column {Columns.team_name_opponent} not found in player_data\")",
            "lineNumber": 291
          },
          {
            "text": "                return TableData(",
            "lineNumber": 292
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 293
          },
          {
            "text": "                    data=[],",
            "lineNumber": 294
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing opponent column)\"",
            "lineNumber": 295
          },
          {
            "text": "                )",
            "lineNumber": 296
          },
          {
            "text": "            ",
            "lineNumber": 297
          },
          {
            "text": "            # Extract opponent name and handle various edge cases",
            "lineNumber": 298
          },
          {
            "text": "            opponent_name_raw = player_data[Columns.team_name_opponent].iloc[0] if not player_data.empty else \"\"",
            "lineNumber": 299
          },
          {
            "text": "            # Convert to string and handle NaN/None values",
            "lineNumber": 300
          },
          {
            "text": "            if pd.isna(opponent_name_raw) or opponent_name_raw is None:",
            "lineNumber": 301
          },
          {
            "text": "                opponent_name = \"\"",
            "lineNumber": 302
          },
          {
            "text": "            else:",
            "lineNumber": 303
          },
          {
            "text": "                opponent_name = str(opponent_name_raw).strip()",
            "lineNumber": 304
          },
          {
            "text": "            ",
            "lineNumber": 305
          },
          {
            "text": "            print(f\"get_game_team_details_data: Opponent name = '{opponent_name}' (raw: {opponent_name_raw}, type: {type(opponent_name_raw)})\")",
            "lineNumber": 306
          },
          {
            "text": "            ",
            "lineNumber": 307
          },
          {
            "text": "            if not opponent_name or opponent_name == '' or opponent_name.lower() == 'nan':",
            "lineNumber": 308
          },
          {
            "text": "                print(f\"get_game_team_details_data: No opponent name found\")",
            "lineNumber": 309
          },
          {
            "text": "                return TableData(",
            "lineNumber": 310
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 311
          },
          {
            "text": "                    data=[],",
            "lineNumber": 312
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (no opponent found)\"",
            "lineNumber": 313
          },
          {
            "text": "                )",
            "lineNumber": 314
          },
          {
            "text": "            ",
            "lineNumber": 315
          },
          {
            "text": "            # Get opponent player data",
            "lineNumber": 316
          },
          {
            "text": "            opponent_filters",
            "lineNumber": 317
          }
        ]
      },
      "score": 0.4157392978668213
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\business_logic\\server.py",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 936
          }
        },
        "contents": "class Server:\n    # fetches basic dataframes from data adapter\n    # converts basic dataframes to aggregated dataframes\n    # forwards aggregated dataframes to app\n\n\n    def get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:\n        \"\"\"Get detailed team results for a specific week including individual and team stats\"\"\"\n        \n        # Get individual player results\n        player_filters = {\n            Columns.league_name: league_name,\n            Columns.season: season,\n            Columns.team_name: team_name,\n            Columns.week: week,\n            Columns.computed_data: False\n        }\n        \n        player_opponent_filters = {\n            Columns.league_name: league_name,\n            Columns.season: season,\n            Columns.team_name_opponent: team_name,\n            Columns.week: week,\n            Columns.computed_data: False\n        }\n\n        player_columns = [\n            Columns.player_name,\n            Columns.score,\n            Columns.points,\n            Columns.team_name_opponent,\n            Columns.match_number,\n            Columns.position, \n            Columns.week\n        ]\n        \n        player_data = self.data_adapter.get_filtered_data(\n            columns=player_columns,\n            filters_eq=player_filters\n        )\n        if debug_output:\n            print(\"player_data: \\n\" + str(player_data))\n        \n        player_opponent_data = self.data_adapter.get_filtered_data(\n            columns=player_columns,\n            filters_eq=player_opponent_filters\n        )\n        if debug_output:\n            print(\"player_opponent_data: \\n\" + str(player_opponent_data))\n\n        # Get team results\n        team_filters = {\n            Columns.league_name: league_name,\n            Columns.season: season,\n            Columns.team_name: team_name,\n            Columns.week: week,\n            Columns.computed_data: True\n        }\n\n        team_opponent_filters = {\n            Columns.league_name: league_name",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 12,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class Server:",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    # fetches basic dataframes from data adapter",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    # converts basic dataframes to aggregated dataframes",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "text": "    # forwards aggregated dataframes to app",
            "lineNumber": 11,
            "isSignature": true
          },
          {
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "    def get_team_week_details(self, league_name: str, season: str, team_name: str, week: int, debug_output: bool=False) -&gt; dict:",
            "lineNumber": 442
          },
          {
            "text": "        \"\"\"Get detailed team results for a specific week including individual and team stats\"\"\"",
            "lineNumber": 443
          },
          {
            "text": "        ",
            "lineNumber": 444
          },
          {
            "text": "        # Get individual player results",
            "lineNumber": 445
          },
          {
            "text": "        player_filters = {",
            "lineNumber": 446
          },
          {
            "text": "            Columns.league_name: league_name,",
            "lineNumber": 447
          },
          {
            "text": "            Columns.season: season,",
            "lineNumber": 448
          },
          {
            "text": "            Columns.team_name: team_name,",
            "lineNumber": 449
          },
          {
            "text": "            Columns.week: week,",
            "lineNumber": 450
          },
          {
            "text": "            Columns.computed_data: False",
            "lineNumber": 451
          },
          {
            "text": "        }",
            "lineNumber": 452
          },
          {
            "text": "        ",
            "lineNumber": 453
          },
          {
            "text": "        player_opponent_filters = {",
            "lineNumber": 454
          },
          {
            "text": "            Columns.league_name: league_name,",
            "lineNumber": 455
          },
          {
            "text": "            Columns.season: season,",
            "lineNumber": 456
          },
          {
            "text": "            Columns.team_name_opponent: team_name,",
            "lineNumber": 457
          },
          {
            "text": "            Columns.week: week,",
            "lineNumber": 458
          },
          {
            "text": "            Columns.computed_data: False",
            "lineNumber": 459
          },
          {
            "text": "        }",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "        player_columns = [",
            "lineNumber": 462
          },
          {
            "text": "            Columns.player_name,",
            "lineNumber": 463
          },
          {
            "text": "            Columns.score,",
            "lineNumber": 464
          },
          {
            "text": "            Columns.points,",
            "lineNumber": 465
          },
          {
            "text": "            Columns.team_name_opponent,",
            "lineNumber": 466
          },
          {
            "text": "            Columns.match_number,",
            "lineNumber": 467
          },
          {
            "text": "            Columns.position, ",
            "lineNumber": 468
          },
          {
            "text": "            Columns.week",
            "lineNumber": 469
          },
          {
            "text": "        ]",
            "lineNumber": 470
          },
          {
            "text": "        ",
            "lineNumber": 471
          },
          {
            "text": "        player_data = self.data_adapter.get_filtered_data(",
            "lineNumber": 472
          },
          {
            "text": "            columns=player_columns,",
            "lineNumber": 473
          },
          {
            "text": "            filters_eq=player_filters",
            "lineNumber": 474
          },
          {
            "text": "        )",
            "lineNumber": 475
          },
          {
            "text": "        if debug_output:",
            "lineNumber": 476
          },
          {
            "text": "            print(\"player_data: \\n\" + str(player_data))",
            "lineNumber": 477
          },
          {
            "text": "        ",
            "lineNumber": 478
          },
          {
            "text": "        player_opponent_data = self.data_adapter.get_filtered_data(",
            "lineNumber": 479
          },
          {
            "text": "            columns=player_columns,",
            "lineNumber": 480
          },
          {
            "text": "            filters_eq=player_opponent_filters",
            "lineNumber": 481
          },
          {
            "text": "        )",
            "lineNumber": 482
          },
          {
            "text": "        if debug_output:",
            "lineNumber": 483
          },
          {
            "text": "            print(\"player_opponent_data: \\n\" + str(player_opponent_data))",
            "lineNumber": 484
          },
          {
            "lineNumber": 485
          },
          {
            "text": "        # Get team results",
            "lineNumber": 486
          },
          {
            "text": "        team_filters = {",
            "lineNumber": 487
          },
          {
            "text": "            Columns.league_name: league_name,",
            "lineNumber": 488
          },
          {
            "text": "            Columns.season: season,",
            "lineNumber": 489
          },
          {
            "text": "            Columns.team_name: team_name,",
            "lineNumber": 490
          },
          {
            "text": "            Columns.week: week,",
            "lineNumber": 491
          },
          {
            "text": "            Columns.computed_data: True",
            "lineNumber": 492
          },
          {
            "text": "        }",
            "lineNumber": 493
          },
          {
            "lineNumber": 494
          },
          {
            "text": "        team_opponent_filters = {",
            "lineNumber": 495
          },
          {
            "text": "            Columns.league_name: league_name",
            "lineNumber": 496
          }
        ]
      },
      "score": 0.41488736867904663
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n        try:\n            # Get individual player results for the team\n            player_filters = {\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.team_name: {'value': team, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.computed_data: {'value': False, 'operator': 'eq'}\n            }\n            \n            player_data = self.adapter.get_filtered_data(filters=player_filters)\n            \n            if player_data.empty:\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available_for_team_week')} {team} - {i18n_service.get_text('week')} {week}\"\n                )\n            \n            # Get team totals (computed data)\n            team_filters = {\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.team_name: {'value': team, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.computed_data: {'value': True, 'operator': 'eq'}\n            }\n            \n            team_data = self.adapter.get_filtered_data(filters=team_filters)\n            \n            # Get opponent team totals\n            opponent_filters = {\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.team_name_opponent: {'value': team, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.computed_data: {'value': True, 'operator': 'eq'}\n            }\n            \n            opponent_data = self.adapter.get_filtered_data(filters=opponent_filters)\n            \n            # Get individual opponent data to calculate average based on individual results",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 772,
                "column": 5
              },
              "endPosition": {
                "line": 773,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 772
          },
          {
            "lineNumber": 773
          },
          {
            "text": "        try:",
            "lineNumber": 774
          },
          {
            "text": "            # Get individual player results for the team",
            "lineNumber": 775
          },
          {
            "text": "            player_filters = {",
            "lineNumber": 776
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 777
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 778
          },
          {
            "text": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
            "lineNumber": 779
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 780
          },
          {
            "text": "                Columns.computed_data: {'value': False, 'operator': 'eq'}",
            "lineNumber": 781
          },
          {
            "text": "            }",
            "lineNumber": 782
          },
          {
            "text": "            ",
            "lineNumber": 783
          },
          {
            "text": "            player_data = self.adapter.get_filtered_data(filters=player_filters)",
            "lineNumber": 784
          },
          {
            "text": "            ",
            "lineNumber": 785
          },
          {
            "text": "            if player_data.empty:",
            "lineNumber": 786
          },
          {
            "text": "                return TableData(",
            "lineNumber": 787
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 788
          },
          {
            "text": "                    data=[],",
            "lineNumber": 789
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available_for_team_week')} {team} - {i18n_service.get_text('week')} {week}\"",
            "lineNumber": 790
          },
          {
            "text": "                )",
            "lineNumber": 791
          },
          {
            "text": "            ",
            "lineNumber": 792
          },
          {
            "text": "            # Get team totals (computed data)",
            "lineNumber": 793
          },
          {
            "text": "            team_filters = {",
            "lineNumber": 794
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 795
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 796
          },
          {
            "text": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
            "lineNumber": 797
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 798
          },
          {
            "text": "                Columns.computed_data: {'value': True, 'operator': 'eq'}",
            "lineNumber": 799
          },
          {
            "text": "            }",
            "lineNumber": 800
          },
          {
            "text": "            ",
            "lineNumber": 801
          },
          {
            "text": "            team_data = self.adapter.get_filtered_data(filters=team_filters)",
            "lineNumber": 802
          },
          {
            "text": "            ",
            "lineNumber": 803
          },
          {
            "text": "            # Get opponent team totals",
            "lineNumber": 804
          },
          {
            "text": "            opponent_filters = {",
            "lineNumber": 805
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 806
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 807
          },
          {
            "text": "                Columns.team_name_opponent: {'value': team, 'operator': 'eq'},",
            "lineNumber": 808
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 809
          },
          {
            "text": "                Columns.computed_data: {'value': True, 'operator': 'eq'}",
            "lineNumber": 810
          },
          {
            "text": "            }",
            "lineNumber": 811
          },
          {
            "text": "            ",
            "lineNumber": 812
          },
          {
            "text": "            opponent_data = self.adapter.get_filtered_data(filters=opponent_filters)",
            "lineNumber": 813
          },
          {
            "text": "            ",
            "lineNumber": 814
          },
          {
            "text": "            # Get individual opponent data to calculate average based on individual results",
            "lineNumber": 815
          }
        ]
      },
      "score": 0.4139705002307892
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\n\n\n    def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n        \"\"\"\n        Get game team details data for a specific team in a specific round.\n        Shows individual player scores: Points, Player Name, Player Pins, Opponent Pins, Opponent Name\n        Last row contains accumulated totals.\n        \n        Args:\n            season: Season identifier\n            league: League name\n            week: Week number\n            team: Team name\n            round_number: Round/Game number\n            \n        Returns:\n            TableData with player rows and totals row\n        \"\"\"\n        try:\n            print(f\"get_game_team_details_data: season={season}, league={league}, week={week}, team={team}, round={round_number}\")\n            # Get individual player data for this team and round\n            player_filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.team_name: {'value': team, 'operator': 'eq'},\n                Columns.round_number: {'value': round_number, 'operator': 'eq'},\n                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual player data\n            }\n            \n            player_data = self.adapter.get_filtered_data(filters=player_filters)\n            print(f\"get_game_team_details_data: Found {len(player_data)} player rows\")\n            \n            if player_data.empty:\n                print(f\"get_game_team_details_data: No player data found\")\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number}\"\n                )\n            \n            # Get opponent team name from first row\n            if",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "lineNumber": 248
          },
          {
            "lineNumber": 249
          },
          {
            "text": "    def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 251
          },
          {
            "text": "        Get game team details data for a specific team in a specific round.",
            "lineNumber": 252
          },
          {
            "text": "        Shows individual player scores: Points, Player Name, Player Pins, Opponent Pins, Opponent Name",
            "lineNumber": 253
          },
          {
            "text": "        Last row contains accumulated totals.",
            "lineNumber": 254
          },
          {
            "text": "        ",
            "lineNumber": 255
          },
          {
            "text": "        Args:",
            "lineNumber": 256
          },
          {
            "text": "            season: Season identifier",
            "lineNumber": 257
          },
          {
            "text": "            league: League name",
            "lineNumber": 258
          },
          {
            "text": "            week: Week number",
            "lineNumber": 259
          },
          {
            "text": "            team: Team name",
            "lineNumber": 260
          },
          {
            "text": "            round_number: Round/Game number",
            "lineNumber": 261
          },
          {
            "text": "            ",
            "lineNumber": 262
          },
          {
            "text": "        Returns:",
            "lineNumber": 263
          },
          {
            "text": "            TableData with player rows and totals row",
            "lineNumber": 264
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 265
          },
          {
            "text": "        try:",
            "lineNumber": 266
          },
          {
            "text": "            print(f\"get_game_team_details_data: season={season}, league={league}, week={week}, team={team}, round={round_number}\")",
            "lineNumber": 267
          },
          {
            "text": "            # Get individual player data for this team and round",
            "lineNumber": 268
          },
          {
            "text": "            player_filters = {",
            "lineNumber": 269
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 270
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 271
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 272
          },
          {
            "text": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
            "lineNumber": 273
          },
          {
            "text": "                Columns.round_number: {'value': round_number, 'operator': 'eq'},",
            "lineNumber": 274
          },
          {
            "text": "                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual player data",
            "lineNumber": 275
          },
          {
            "text": "            }",
            "lineNumber": 276
          },
          {
            "text": "            ",
            "lineNumber": 277
          },
          {
            "text": "            player_data = self.adapter.get_filtered_data(filters=player_filters)",
            "lineNumber": 278
          },
          {
            "text": "            print(f\"get_game_team_details_data: Found {len(player_data)} player rows\")",
            "lineNumber": 279
          },
          {
            "text": "            ",
            "lineNumber": 280
          },
          {
            "text": "            if player_data.empty:",
            "lineNumber": 281
          },
          {
            "text": "                print(f\"get_game_team_details_data: No player data found\")",
            "lineNumber": 282
          },
          {
            "text": "                return TableData(",
            "lineNumber": 283
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 284
          },
          {
            "text": "                    data=[],",
            "lineNumber": 285
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number}\"",
            "lineNumber": 286
          },
          {
            "text": "                )",
            "lineNumber": 287
          },
          {
            "text": "            ",
            "lineNumber": 288
          },
          {
            "text": "            # Get opponent team name from first row",
            "lineNumber": 289
          },
          {
            "text": "            if",
            "lineNumber": 290
          }
        ]
      },
      "score": 0.40976929664611816
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:\n\n            show_opp = view_mode in ('opponents', 'full')\n\n            # Get unique players for each side\n            own_players = team_data[Columns.player_name].unique() if show_own else []\n            opp_players = opponent_data[Columns.player_name].unique() if show_opp else []\n\n            # Build player participation map: {player: {round: row(s)}}\n            def build_participation_map(df):\n                part_map = {}\n                for player in df[Columns.player_name].unique():\n                    player_rows = df[df[Columns.player_name] == player]\n                    part_map[player] = {}\n                    for rnd in player_rows[Columns.round_number].unique():\n                        part_map[player][rnd] = player_rows[player_rows[Columns.round_number] == rnd].iloc[0]\n                return part_map\n            own_part_map = build_participation_map(team_data) if show_own else {}\n            opp_part_map = build_participation_map(opponent_data) if show_opp else {}\n\n            # --- Build columns ---\n            columns = [\n                ColumnGroup(\n                    title=i18n_service.get_text(\"match_info\"),\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"round\"), field=\"round_number\", width=\"60px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"120px\", align=\"left\"),\n                    ]\n                )\n            ]\n\n            # Helper to build player col group\n            def player_col_group(player, prefix):\n                return",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1783,
                "column": 5
              },
              "endPosition": {
                "line": 1784,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:",
            "lineNumber": 1783
          },
          {
            "lineNumber": 1819
          },
          {
            "text": "            show_opp = view_mode in ('opponents', 'full')",
            "lineNumber": 1820
          },
          {
            "lineNumber": 1821
          },
          {
            "text": "            # Get unique players for each side",
            "lineNumber": 1822
          },
          {
            "text": "            own_players = team_data[Columns.player_name].unique() if show_own else []",
            "lineNumber": 1823
          },
          {
            "text": "            opp_players = opponent_data[Columns.player_name].unique() if show_opp else []",
            "lineNumber": 1824
          },
          {
            "lineNumber": 1825
          },
          {
            "text": "            # Build player participation map: {player: {round: row(s)}}",
            "lineNumber": 1826
          },
          {
            "text": "            def build_participation_map(df):",
            "lineNumber": 1827
          },
          {
            "text": "                part_map = {}",
            "lineNumber": 1828
          },
          {
            "text": "                for player in df[Columns.player_name].unique():",
            "lineNumber": 1829
          },
          {
            "text": "                    player_rows = df[df[Columns.player_name] == player]",
            "lineNumber": 1830
          },
          {
            "text": "                    part_map[player] = {}",
            "lineNumber": 1831
          },
          {
            "text": "                    for rnd in player_rows[Columns.round_number].unique():",
            "lineNumber": 1832
          },
          {
            "text": "                        part_map[player][rnd] = player_rows[player_rows[Columns.round_number] == rnd].iloc[0]",
            "lineNumber": 1833
          },
          {
            "text": "                return part_map",
            "lineNumber": 1834
          },
          {
            "text": "            own_part_map = build_participation_map(team_data) if show_own else {}",
            "lineNumber": 1835
          },
          {
            "text": "            opp_part_map = build_participation_map(opponent_data) if show_opp else {}",
            "lineNumber": 1836
          },
          {
            "lineNumber": 1837
          },
          {
            "text": "            # --- Build columns ---",
            "lineNumber": 1838
          },
          {
            "text": "            columns = [",
            "lineNumber": 1839
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1840
          },
          {
            "text": "                    title=i18n_service.get_text(\"match_info\"),",
            "lineNumber": 1841
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 1842
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1843
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"round\"), field=\"round_number\", width=\"60px\", align=\"center\"),",
            "lineNumber": 1844
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"120px\", align=\"left\"),",
            "lineNumber": 1845
          },
          {
            "text": "                    ]",
            "lineNumber": 1846
          },
          {
            "text": "                )",
            "lineNumber": 1847
          },
          {
            "text": "            ]",
            "lineNumber": 1848
          },
          {
            "lineNumber": 1849
          },
          {
            "text": "            # Helper to build player col group",
            "lineNumber": 1850
          },
          {
            "text": "            def player_col_group(player, prefix):",
            "lineNumber": 1851
          },
          {
            "text": "                return",
            "lineNumber": 1852
          }
        ]
      },
      "score": 0.40902096033096313
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n\n                )\n            \n            # Get opponent player data\n            opponent_filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.team_name: {'value': opponent_name, 'operator': 'eq'},\n                Columns.round_number: {'value': round_number, 'operator': 'eq'},\n                Columns.computed_data: {'value': False, 'operator': 'eq'}\n            }\n            \n            print(f\"get_game_team_details_data: Fetching opponent data for '{opponent_name}'\")\n            opponent_data = self.adapter.get_filtered_data(filters=opponent_filters)\n            print(f\"get_game_team_details_data: Found {len(opponent_data)} opponent rows\")\n            \n            # Get team match points (Team Total row)\n            team_total_filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.team_name: {'value': team, 'operator': 'eq'},\n                Columns.round_number: {'value': round_number, 'operator': 'eq'},\n                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Team totals\n            }\n            team_total_data = self.adapter.get_filtered_data(filters=team_total_filters)\n            team_match_points = 0.0\n            if not team_total_data.empty and Columns.points in team_total_data.columns:\n                team_match_points = float(team_total_data[Columns.points].iloc[0]) if pd.notna(team_total_data[Columns.points].iloc[0]) else 0.0\n            \n            # Get opponent team match points\n            opponent_total_filters",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 250,
                "column": 5
              },
              "endPosition": {
                "line": 251,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "lineNumber": 313
          },
          {
            "text": "                )",
            "lineNumber": 314
          },
          {
            "text": "            ",
            "lineNumber": 315
          },
          {
            "text": "            # Get opponent player data",
            "lineNumber": 316
          },
          {
            "text": "            opponent_filters = {",
            "lineNumber": 317
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 318
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 319
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 320
          },
          {
            "text": "                Columns.team_name: {'value': opponent_name, 'operator': 'eq'},",
            "lineNumber": 321
          },
          {
            "text": "                Columns.round_number: {'value': round_number, 'operator': 'eq'},",
            "lineNumber": 322
          },
          {
            "text": "                Columns.computed_data: {'value': False, 'operator': 'eq'}",
            "lineNumber": 323
          },
          {
            "text": "            }",
            "lineNumber": 324
          },
          {
            "text": "            ",
            "lineNumber": 325
          },
          {
            "text": "            print(f\"get_game_team_details_data: Fetching opponent data for '{opponent_name}'\")",
            "lineNumber": 326
          },
          {
            "text": "            opponent_data = self.adapter.get_filtered_data(filters=opponent_filters)",
            "lineNumber": 327
          },
          {
            "text": "            print(f\"get_game_team_details_data: Found {len(opponent_data)} opponent rows\")",
            "lineNumber": 328
          },
          {
            "text": "            ",
            "lineNumber": 329
          },
          {
            "text": "            # Get team match points (Team Total row)",
            "lineNumber": 330
          },
          {
            "text": "            team_total_filters = {",
            "lineNumber": 331
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 332
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 333
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 334
          },
          {
            "text": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
            "lineNumber": 335
          },
          {
            "text": "                Columns.round_number: {'value': round_number, 'operator': 'eq'},",
            "lineNumber": 336
          },
          {
            "text": "                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Team totals",
            "lineNumber": 337
          },
          {
            "text": "            }",
            "lineNumber": 338
          },
          {
            "text": "            team_total_data = self.adapter.get_filtered_data(filters=team_total_filters)",
            "lineNumber": 339
          },
          {
            "text": "            team_match_points = 0.0",
            "lineNumber": 340
          },
          {
            "text": "            if not team_total_data.empty and Columns.points in team_total_data.columns:",
            "lineNumber": 341
          },
          {
            "text": "                team_match_points = float(team_total_data[Columns.points].iloc[0]) if pd.notna(team_total_data[Columns.points].iloc[0]) else 0.0",
            "lineNumber": 342
          },
          {
            "text": "            ",
            "lineNumber": 343
          },
          {
            "text": "            # Get opponent team match points",
            "lineNumber": 344
          },
          {
            "text": "            opponent_total_filters",
            "lineNumber": 345
          }
        ]
      },
      "score": 0.4057348072528839
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n        row_metadata = []\n        for rnd in rounds:\n            row = []\n            # Opponent name for this round\n            round_data = player_data[player_data[Columns.round_number] == rnd]\n            opponent = round_data[Columns.team_name_opponent].iloc[0] if not round_data.empty else \"\"\n            row.append(str(opponent))\n            # Team totals for this round\n            team_row = team_data[team_data[Columns.round_number] == rnd] if not team_data.empty else pd.DataFrame()\n            team_score = int(team_row[Columns.score].iloc[0]) if not team_row.empty else 0\n            team_points = float(team_row[Columns.points].iloc[0]) if not team_row.empty else 0.0\n            # Total Points = sum of all individual points + team points\n            indiv_points = float(round_data[Columns.points].sum()) if not round_data.empty else 0.0\n            total_points = indiv_points + team_points\n            row.append(total_points)\n            row.append(team_score)\n            row.append(team_points)\n            \n            # For each player, get their data for this round\n            for",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2021,
                "column": 5
              },
              "endPosition": {
                "line": 2022,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 2021
          },
          {
            "lineNumber": 2112
          },
          {
            "text": "        row_metadata = []",
            "lineNumber": 2113
          },
          {
            "text": "        for rnd in rounds:",
            "lineNumber": 2114
          },
          {
            "text": "            row = []",
            "lineNumber": 2115
          },
          {
            "text": "            # Opponent name for this round",
            "lineNumber": 2116
          },
          {
            "text": "            round_data = player_data[player_data[Columns.round_number] == rnd]",
            "lineNumber": 2117
          },
          {
            "text": "            opponent = round_data[Columns.team_name_opponent].iloc[0] if not round_data.empty else \"\"",
            "lineNumber": 2118
          },
          {
            "text": "            row.append(str(opponent))",
            "lineNumber": 2119
          },
          {
            "text": "            # Team totals for this round",
            "lineNumber": 2120
          },
          {
            "text": "            team_row = team_data[team_data[Columns.round_number] == rnd] if not team_data.empty else pd.DataFrame()",
            "lineNumber": 2121
          },
          {
            "text": "            team_score = int(team_row[Columns.score].iloc[0]) if not team_row.empty else 0",
            "lineNumber": 2122
          },
          {
            "text": "            team_points = float(team_row[Columns.points].iloc[0]) if not team_row.empty else 0.0",
            "lineNumber": 2123
          },
          {
            "text": "            # Total Points = sum of all individual points + team points",
            "lineNumber": 2124
          },
          {
            "text": "            indiv_points = float(round_data[Columns.points].sum()) if not round_data.empty else 0.0",
            "lineNumber": 2125
          },
          {
            "text": "            total_points = indiv_points + team_points",
            "lineNumber": 2126
          },
          {
            "text": "            row.append(total_points)",
            "lineNumber": 2127
          },
          {
            "text": "            row.append(team_score)",
            "lineNumber": 2128
          },
          {
            "text": "            row.append(team_points)",
            "lineNumber": 2129
          },
          {
            "text": "            ",
            "lineNumber": 2130
          },
          {
            "text": "            # For each player, get their data for this round",
            "lineNumber": 2131
          },
          {
            "text": "            for",
            "lineNumber": 2132
          }
        ]
      },
      "score": 0.4002746045589447
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\data_access\\reconstruct_flat_csv.py",
        "range": {
          "startPosition": {
            "line": 40
          },
          "endPosition": {
            "line": 562
          }
        },
        "contents": "def reconstruct_flat_csv() -&gt; pd.DataFrame:\n\n\t\n\t# Construct Team name: club_name + \" \" + team_number\n\tresult[\"team_name\"] = result[\"club_name\"].astype(str) + \" \" + result[\"team_number\"].astype(str)\n\t\n\t# Use venue name or full_name (prefer full_name if available)\n\tresult[\"location_name\"] = result[\"full_name\"].fillna(result[\"name\"])\n\t\n\t# Derive Opponent: Use original CSV as primary source, derive only when missing\n\tprint(\"Deriving opponents...\")\n\t\n\t# First, try to load opponent from original CSV (most reliable source)\n\ttry:\n\t\torig_path = ROOT / \"database\" / \"data\" / \"bowling_ergebnisse_real.csv\"\n\t\torig_df = pd.read_csv(orig_path, sep=\";\", dtype=str, keep_default_na=False)\n\t\t\n\t\t# Create merge keys to match rows\n\t\tresult[\"merge_key\"] = (\n\t\t\tresult[\"season\"].astype(str) + \"|\" +\n\t\t\tresult[\"league_name\"].astype(str) + \"|\" +\n\t\t\tresult[\"league_week\"].astype(str) + \"|\" +\n\t\t\tresult[\"date\"].astype(str) + \"|\" +\n\t\t\tresult[\"round_number\"].fillna(\"\").astype(str) + \"|\" +\n\t\t\tresult[\"team_name\"].astype(str) + \"|\" +\n\t\t\tresult[\"player_name\"].astype(str)\n\t\t)\n\t\t\n\t\torig_df[\"merge_key\"] = (\n\t\t\torig_df[\"Season\"].astype(str) + \"|\" +\n\t\t\torig_df[\"League\"].astype(str) + \"|\" +\n\t\t\torig_df[\"Week\"].astype(str) + \"|\" +\n\t\t\torig_df[\"Date\"].astype(str) + \"|\" +\n\t\t\torig_df[\"Round Number\"].fillna(\"\").astype(str) + \"|\" +\n\t\t\torig_df[\"Team\"].astype(str) + \"|\" +\n\t\t\torig_df[\"Player\"].astype(str)\n\t\t)\n\t\t\n\t\t# Merge to get opponent from original CSV\n\t\tresult = result.merge(\n\t\t\torig_df[[\"merge_key\", \"Opponent\"]].rename(columns={\"Opponent\": \"opponent_orig\"}),\n\t\t\ton=\"merge_key\",\n\t\t\thow=\"left\"\n\t\t)\n\t\t\n\t\t# Use original opponent if available\n\t\tresult[\"opponent\"] = result[\"opponent_orig\"].fillna(\"\")\n\t\tresult = result.drop(columns=[\"merge_key\", \"opponent_orig\"])\n\t\t\n\t\tprint(f\"  Loaded opponents from original CSV for {result['opponent'].ne('').sum()} rows\")\n\t\t\n\texcept Exception as e:\n\t\tprint(f\"  Warning: Could not load opponents from original CSV: {e}\")\n\t\tresult[\"opponent\"] = \"\"\n\t\n\t# For rows where opponent is still missing, derive from relational data\n\tmissing_mask = result[\"opponent\"].fillna(\"\") == \"\"\n\tif missing_mask.sum() &gt; 0:\n\t\tprint(f\"  Deriving opponents for ",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 41,
                "column": 1
              },
              "endPosition": {
                "line": 42,
                "column": 2
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def reconstruct_flat_csv() -&gt; pd.DataFrame:",
            "lineNumber": 41,
            "isSignature": true
          },
          {
            "lineNumber": 170
          },
          {
            "text": "\t",
            "lineNumber": 171
          },
          {
            "text": "\t# Construct Team name: club_name + \" \" + team_number",
            "lineNumber": 172
          },
          {
            "text": "\tresult[\"team_name\"] = result[\"club_name\"].astype(str) + \" \" + result[\"team_number\"].astype(str)",
            "lineNumber": 173
          },
          {
            "text": "\t",
            "lineNumber": 174
          },
          {
            "text": "\t# Use venue name or full_name (prefer full_name if available)",
            "lineNumber": 175
          },
          {
            "text": "\tresult[\"location_name\"] = result[\"full_name\"].fillna(result[\"name\"])",
            "lineNumber": 176
          },
          {
            "text": "\t",
            "lineNumber": 177
          },
          {
            "text": "\t# Derive Opponent: Use original CSV as primary source, derive only when missing",
            "lineNumber": 178
          },
          {
            "text": "\tprint(\"Deriving opponents...\")",
            "lineNumber": 179
          },
          {
            "text": "\t",
            "lineNumber": 180
          },
          {
            "text": "\t# First, try to load opponent from original CSV (most reliable source)",
            "lineNumber": 181
          },
          {
            "text": "\ttry:",
            "lineNumber": 182
          },
          {
            "text": "\t\torig_path = ROOT / \"database\" / \"data\" / \"bowling_ergebnisse_real.csv\"",
            "lineNumber": 183
          },
          {
            "text": "\t\torig_df = pd.read_csv(orig_path, sep=\";\", dtype=str, keep_default_na=False)",
            "lineNumber": 184
          },
          {
            "text": "\t\t",
            "lineNumber": 185
          },
          {
            "text": "\t\t# Create merge keys to match rows",
            "lineNumber": 186
          },
          {
            "text": "\t\tresult[\"merge_key\"] = (",
            "lineNumber": 187
          },
          {
            "text": "\t\t\tresult[\"season\"].astype(str) + \"|\" +",
            "lineNumber": 188
          },
          {
            "text": "\t\t\tresult[\"league_name\"].astype(str) + \"|\" +",
            "lineNumber": 189
          },
          {
            "text": "\t\t\tresult[\"league_week\"].astype(str) + \"|\" +",
            "lineNumber": 190
          },
          {
            "text": "\t\t\tresult[\"date\"].astype(str) + \"|\" +",
            "lineNumber": 191
          },
          {
            "text": "\t\t\tresult[\"round_number\"].fillna(\"\").astype(str) + \"|\" +",
            "lineNumber": 192
          },
          {
            "text": "\t\t\tresult[\"team_name\"].astype(str) + \"|\" +",
            "lineNumber": 193
          },
          {
            "text": "\t\t\tresult[\"player_name\"].astype(str)",
            "lineNumber": 194
          },
          {
            "text": "\t\t)",
            "lineNumber": 195
          },
          {
            "text": "\t\t",
            "lineNumber": 196
          },
          {
            "text": "\t\torig_df[\"merge_key\"] = (",
            "lineNumber": 197
          },
          {
            "text": "\t\t\torig_df[\"Season\"].astype(str) + \"|\" +",
            "lineNumber": 198
          },
          {
            "text": "\t\t\torig_df[\"League\"].astype(str) + \"|\" +",
            "lineNumber": 199
          },
          {
            "text": "\t\t\torig_df[\"Week\"].astype(str) + \"|\" +",
            "lineNumber": 200
          },
          {
            "text": "\t\t\torig_df[\"Date\"].astype(str) + \"|\" +",
            "lineNumber": 201
          },
          {
            "text": "\t\t\torig_df[\"Round Number\"].fillna(\"\").astype(str) + \"|\" +",
            "lineNumber": 202
          },
          {
            "text": "\t\t\torig_df[\"Team\"].astype(str) + \"|\" +",
            "lineNumber": 203
          },
          {
            "text": "\t\t\torig_df[\"Player\"].astype(str)",
            "lineNumber": 204
          },
          {
            "text": "\t\t)",
            "lineNumber": 205
          },
          {
            "text": "\t\t",
            "lineNumber": 206
          },
          {
            "text": "\t\t# Merge to get opponent from original CSV",
            "lineNumber": 207
          },
          {
            "text": "\t\tresult = result.merge(",
            "lineNumber": 208
          },
          {
            "text": "\t\t\torig_df[[\"merge_key\", \"Opponent\"]].rename(columns={\"Opponent\": \"opponent_orig\"}),",
            "lineNumber": 209
          },
          {
            "text": "\t\t\ton=\"merge_key\",",
            "lineNumber": 210
          },
          {
            "text": "\t\t\thow=\"left\"",
            "lineNumber": 211
          },
          {
            "text": "\t\t)",
            "lineNumber": 212
          },
          {
            "text": "\t\t",
            "lineNumber": 213
          },
          {
            "text": "\t\t# Use original opponent if available",
            "lineNumber": 214
          },
          {
            "text": "\t\tresult[\"opponent\"] = result[\"opponent_orig\"].fillna(\"\")",
            "lineNumber": 215
          },
          {
            "text": "\t\tresult = result.drop(columns=[\"merge_key\", \"opponent_orig\"])",
            "lineNumber": 216
          },
          {
            "text": "\t\t",
            "lineNumber": 217
          },
          {
            "text": "\t\tprint(f\"  Loaded opponents from original CSV for {result['opponent'].ne('').sum()} rows\")",
            "lineNumber": 218
          },
          {
            "text": "\t\t",
            "lineNumber": 219
          },
          {
            "text": "\texcept Exception as e:",
            "lineNumber": 220
          },
          {
            "text": "\t\tprint(f\"  Warning: Could not load opponents from original CSV: {e}\")",
            "lineNumber": 221
          },
          {
            "text": "\t\tresult[\"opponent\"] = \"\"",
            "lineNumber": 222
          },
          {
            "text": "\t",
            "lineNumber": 223
          },
          {
            "text": "\t# For rows where opponent is still missing, derive from relational data",
            "lineNumber": 224
          },
          {
            "text": "\tmissing_mask = result[\"opponent\"].fillna(\"\") == \"\"",
            "lineNumber": 225
          },
          {
            "text": "\tif missing_mask.sum() &gt; 0:",
            "lineNumber": 226
          },
          {
            "text": "\t\tprint(f\"  Deriving opponents for ",
            "lineNumber": 227
          }
        ]
      },
      "score": 0.39769819378852844
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Adding debug logging to inspect the values. Please share the console output. Adding more detailed logging:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "4140de54-8665-461e-9625-365a7ffadc40"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking the column order to ensure we're accessing the correct index:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---


Column order: team_position, team_name, team_pins, team_points, opponent_points, opponent_pins, opponent_position, opponent_name. `opponent_name` should be at index 7. Verifying the lookup and adding more robust debugging:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "3a09338a-e0ea-4a35-8e0c-a89a8e0aeab8"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/tables.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/tables.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Added more detailed logging. Please refresh the page and share the console output. The logs will show:
1. The `rowIdx` being processed
2. The `opponentNameIndex` found
3. The value from the raw data array
4. The value from `rowData['opponent_name']`

This will help identify where the issue occurs. The logs only appear for the first 3 rows to avoid spam.

If you can share the console output, I can pinpoint the problem.

---

_**User (2025-12-06 20:11Z)**_

not working

base-content-block.js?v=3b668c1f:8 🔄 BaseContentBlock class definition loaded

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:4583 🚀 Initializing application...

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:4595 ✅ Application initialized

league-stats-app.js?v=96659650:367 📄 DOM loaded, initializing LeagueStatsApp...

league-stats-app.js?v=96659650:27 🚀 Initializing LeagueStatsApp...

league-stats-app.js?v=96659650:74 🧱 Initializing content blocks...

league-stats-app.js?v=96659650:78 🔄 Creating SeasonLeagueStandingsBlock...

league-stats-app.js?v=96659650:80 🔄 Creating LeagueAggregationBlock...

league-stats-app.js?v=96659650:82 🔄 Creating LeagueSeasonOverviewBlock...

league-stats-app.js?v=96659650:84 🔄 Creating SeasonOverviewBlock...

league-stats-app.js?v=96659650:86 🔄 Creating MatchDayBlock...

league-stats-app.js?v=96659650:88 🔄 Creating TeamDetailsBlock...

league-stats-app.js?v=96659650:90 🔄 Creating TeamPerformanceBlock...

league-stats-app.js?v=96659650:92 🔄 Creating TeamWinPercentageBlock...

league-stats-app.js?v=96659650:94 🔄 Creating GameOverviewBlock...

league-stats-app.js?v=96659650:96 🔄 Creating GameTeamDetailsBlock...

league-stats-app.js?v=96659650:111 ✅ Content blocks initialized

centralized-button-manager.js?v=fe0f2832:96 🚀 CentralizedButtonManager: Handling initial state: {team: '', season: '24/25', week: '1', round: '1', league: 'BayL', …}

centralized-button-manager.js?v=fe0f2832:175 📋 CentralizedButtonManager: Processing groups: (5) ['season', 'league', 'week', 'round', 'team']

centralized-button-manager.js?v=fe0f2832:176 📋 CentralizedButtonManager: Current constraints: {}

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group season

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for season: /league/get_available_seasons?database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for season: {}

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:375 Sources info response: {available_sources: Array(3), current_display_name: 'Real Data', current_source: 'db_real', sources_info: {…}, success: true}

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:380 Loaded sources info: {db_real: {…}, db_real_recon: {…}, db_sim: {…}}

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:381 Current source: db_real

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for season: (2) ['24/25', '25/26']

centralized-button-manager.js?v=fe0f2832:261 ✅ CentralizedButtonManager: Keeping current selection for season: 24/25

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for season with 2 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating season - current selection: "24/25", candidates: (2) ['24/25', '25/26']

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated season with 2 candidates, selected: 24/25

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 2 buttons for season

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group league

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint season=24/25 for league

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for league: /league/get_available_leagues?season=24%2F25&database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for league: {season: '24/25'}

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for league: (3) [{…}, {…}, {…}]

centralized-button-manager.js?v=fe0f2832:261 ✅ CentralizedButtonManager: Keeping current selection for league: BayL

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for league with 3 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating league - current selection: "BayL", candidates: (3) [{…}, {…}, {…}]

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated league with 3 candidates, selected: BayL

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 3 buttons for league

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group week

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint season=24/25 for week

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint league=BayL for week

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for week: /league/get_available_weeks?season=24%2F25&league=BayL&database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for week: {season: '24/25', league: 'BayL'}

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for week: (6) [1, 2, 3, 4, 5, 6]

centralized-button-manager.js?v=fe0f2832:261 ✅ CentralizedButtonManager: Keeping current selection for week: 1

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for week with 6 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating week - current selection: "1", candidates: (6) [1, 2, 3, 4, 5, 6]

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated week with 6 candidates, selected: 1

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 6 buttons for week

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group round

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint season=24/25 for round

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint league=BayL for round

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint week=1 for round

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for round: /league/get_available_rounds?season=24%2F25&league=BayL&week=1&database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for round: {season: '24/25', league: 'BayL', week: '1'}

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for round: (9) [1, 2, 3, 4, 5, 6, 7, 8, 9]

centralized-button-manager.js?v=fe0f2832:261 ✅ CentralizedButtonManager: Keeping current selection for round: 1

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for round with 9 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating round - current selection: "1", candidates: (9) [1, 2, 3, 4, 5, 6, 7, 8, 9]

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated round with 9 candidates, selected: 1

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 9 buttons for round

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group team

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint season=24/25 for team

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint league=BayL for team

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint week=1 for team

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint round=1 for team

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for team: /league/get_available_teams?season=24%2F25&league=BayL&week=1&round=1&database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for team: {season: '24/25', league: 'BayL', week: '1', round: '1'}

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for team: (10) ['BC Comet Nürnberg 1', 'BC EMAX Unterföhring 2', 'BK München 3', 'Bajuwaren München 1', 'Bowlinghaus Bamberg 1', 'High Roller Rosenheim 1', 'RW Lichtenhof 69 Stein 1', 'SG DJK Rimpar 1', 'SG Rottendorf 1', 'Schanzer Ingolstadt 1']

centralized-button-manager.js?v=fe0f2832:281 🔄 CentralizedButtonManager: Invalid selection for team, clearing selection

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for team with 10 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating team - current selection: "", candidates: (10) ['BC Comet Nürnberg 1', 'BC EMAX Unterföhring 2', 'BK München 3', 'Bajuwaren München 1', 'Bowlinghaus Bamberg 1', 'High Roller Rosenheim 1', 'RW Lichtenhof 69 Stein 1', 'SG DJK Rimpar 1', 'SG Rottendorf 1', 'Schanzer Ingolstadt 1']

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated team with 10 candidates, selected: 

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 10 buttons for team

centralized-button-manager.js?v=fe0f2832:185 🔄 CentralizedButtonManager: Triggering state change callback with state: {team: '', season: '24/25', week: '1', round: '1', league: 'BayL', …}

centralized-button-manager.js?v=fe0f2832:186 🔄 CentralizedButtonManager: Callback function: function

league-stats-app.js?v=96659650:115 🔄 LeagueStatsApp: Button state changed, rendering content: {team: '', season: '24/25', week: '1', round: '1', league: 'BayL', …}

league-stats-app.js?v=96659650:116 🔄 LeagueStatsApp: State keys: (7) ['team', 'season', 'week', 'round', 'league', 'league_long', 'database']

league-stats-app.js?v=96659650:117 🔄 LeagueStatsApp: Round value: 1 Type: string

league-stats-app.js?v=96659650:287 🎨 Rendering content for state: {team: '', season: '24/25', week: '1', round: '1', league: 'BayL', …}

league-stats-app.js?v=96659650:288 🎨 Available content blocks: (10) ['season-league-standings', 'league-aggregation', 'league-season-overview', 'season-overview', 'matchday', 'team-details', 'team-performance', 'team-win-percentage', 'game-overview', 'game-team-details']

league-stats-app.js?v=96659650:299 🔄 Rendering block: season-league-standings with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

season-league-standings-block.js?v=d397c605:45 SeasonLeagueStandingsBlock shouldRender: season="24/25", league="BayL", result=false

league-stats-app.js?v=96659650:299 🔄 Rendering block: league-aggregation with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-aggregation-block.js?v=78863a39:45 LeagueAggregationBlock shouldRender: league="BayL", season="24/25", result=false

league-stats-app.js?v=96659650:299 🔄 Rendering block: league-season-overview with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-season-overview-block.js?v=105f24d2:47 LeagueSeasonOverviewBlock shouldRender: league="BayL", season="24/25", week="1", team="", result=false

league-stats-app.js?v=96659650:299 🔄 Rendering block: season-overview with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: matchday with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: team-details with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: team-performance with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: team-win-percentage with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: game-overview with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

game-overview-block.js?v=88db6f13:67 🎮 GameOverviewBlock.shouldRender: {season: '24/25', league: 'BayL', week: '1', round: '1', roundType: 'string', …}

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:4727 🔄 getCurrentDatabase called, returning: db_real

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:4744 🔄 fetchWithDatabase called: {originalUrl: '/league/get_game_overview?season=24/25&league=BayL&week=1&round=1', urlWithDatabase: '/league/get_game_overview?season=24/25&league=BayL&week=1&round=1&database=db_real'}

league-stats-app.js?v=96659650:299 🔄 Rendering block: game-team-details with state: {season: '24/25', league: 'BayL', week: '1', round: '1', team: ''}

game-team-details-block.js?v=65c2f60a:66 🎮 GameTeamDetailsBlock.shouldRender: {season: '24/25', league: 'BayL', week: '1', team: '', round: '1', …}

centralized-button-manager.js?v=fe0f2832:189 ✅ CentralizedButtonManager: State change callback executed successfully

league-stats-app.js?v=96659650:307 ✅ Rendered block: season-league-standings

league-stats-app.js?v=96659650:307 ✅ Rendered block: league-aggregation

league-stats-app.js?v=96659650:307 ✅ Rendered block: league-season-overview

league-stats-app.js?v=96659650:307 ✅ Rendered block: season-overview

league-stats-app.js?v=96659650:307 ✅ Rendered block: matchday

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-details

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-performance

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-win-percentage

league-stats-app.js?v=96659650:307 ✅ Rendered block: game-team-details

league-stats-app.js?v=96659650:281 Content rendering already in progress, skipping

league-stats-app.js?v=96659650:66 ✅ LeagueStatsApp initialized successfully

game-overview-block.js?v=88db6f13:143 Game overview data: {columns: Array(2), config: {…}, data: Array(5), description: 'match_results 24/25', title: 'BayL - Spieltag 1, Spiel 1'}

game-overview-block.js?v=88db6f13:149 Using createTableTabulator function for game overview table

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:1829 Table "tableGameOverview" successfully created/updated (Tabulator)

game-overview-block.js?v=88db6f13:55 game-overview: Game overview content rendered

league-stats-app.js?v=96659650:307 ✅ Rendered block: game-overview

league-stats-app.js?v=96659650:314 ✅ Content rendering complete

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:1398 [opponent_position] Row 0: opponentNameIndex=7, rawRow[7]=BK München 3, rowData['opponent_name']=BK München 3

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:1398 [opponent_position] Row 1: opponentNameIndex=7, rawRow[7]=SG Rottendorf 1, rowData['opponent_name']=SG Rottendorf 1

stats?season=24%2F25&week=1&round=1&league=BayL&league_long=Bayernliga&database=db_real:1398 [opponent_position] Row 2: opponentNameIndex=7, rawRow[7]=Schanzer Ingolstadt 1, rowData['opponent_name']=Schanzer Ingolstadt 1



---

_**Agent (model default, mode Agent)**_



---


Console shows the correct opponent names are read. The issue is likely in how `teamName` is used or captured. Checking the formatter logic and ensuring `teamName` is used correctly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getTeamColor",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getTeamColor",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "338:                            const color = getTeamColor(teamName);",
              "matches": [
                {
                  "lineNumber": 525,
                  "content": "                            const color = getTeamColor(teamName);"
                },
                {
                  "lineNumber": 907,
                  "content": "                const accentColor = getTeamColor(rowData[teamField]);"
                },
                {
                  "lineNumber": 1589,
                  "content": "                                    if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1590,
                  "content": "                                        color1 = window.getTeamColor(teamName1);"
                }
              ]
            }
          ],
          "totalLines": 4,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---


Checking where `teamName` is used to render the circle:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---


The code looks correct. Adding logging to see what `getTeamColor` receives and returns:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "4d751ed9-efe8-4579-9acb-29fb8f4766c5"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/tables.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/tables.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Added logging to see what `getTeamColor` receives. Refresh the page and check the console. The logs should show the team name and color for each row.

If the colors are still wrong, the issue may be in `getTeamColor` or how the formatter is invoked. Checking if there's a closure issue or if we need to capture the row index differently:


---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does getTeamColor function work and where is it defined?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\n\n\n    function updateTeamColorMap(currentTeams = []) {\n        if (!Array.isArray(currentTeams)) return;\n\n        Object.keys(teamColorMap).forEach(team =&gt; {\n            if (!currentTeams.includes(team)) {\n                delete teamColorMap[team];\n            }\n        });\n\n        let paletteIdx = 0;\n        currentTeams.forEach(team =&gt; {\n            if (!teamColorMap[team]) {\n                teamColorMap[team] = getPaletteColor(paletteIdx++);\n            }\n        });\n    }\n\n    function getTeamColor(teamName, fallbackIndex = 0) {\n        if (teamName &amp;&amp; teamColorMap[teamName]) {\n            return teamColorMap[teamName];\n        }\n        return getPaletteColor(fallbackIndex);\n    }\n\n    function setPalette(name) {\n        if (TEAM_COLOR_PALETTES[name]) {\n            currentPaletteName = name;\n            currentPalette = TEAM_COLOR_PALETTES[name];\n            return true;\n        }\n        return false;\n    }\n\n    function getSemanticColor(semanticName) {\n        const mapping = SEMANTIC_COLOR_MAPPINGS[currentPaletteName];\n        if (mapping &amp;&amp; mapping[semanticName] !== undefined) {\n            return getPaletteColor(mapping[semanticName]);\n        }\n        const fallbacks = {\n            positive: \"#2CA02C\",\n            negative: \"#D62728\",\n            highlight: \"#ffd700\"\n        };\n        return fallbacks[semanticName] || \"#888\";\n    }\n\n    // Dark mode management\n    function isDarkMode() {\n        if (typeof localStorage !== 'undefined') {\n            const stored = localStorage.getItem('darkMode');\n            if (stored !== null) {\n                return stored === 'true';\n            }\n        }\n        // Check if system prefers dark mode\n        if (typeof window !== 'undefined' &amp;&amp; window.matchMedia) {\n            return window.matchMedia('(prefers-color-scheme: dark)').matches;\n        }\n        return false;\n    }\n\n    function setDarkMode(enabled) {\n        if\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    function updateTeamColorMap(currentTeams = []) {",
            "lineNumber": 262
          },
          {
            "text": "        if (!Array.isArray(currentTeams)) return;",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "        Object.keys(teamColorMap).forEach(team =&gt; {",
            "lineNumber": 265
          },
          {
            "text": "            if (!currentTeams.includes(team)) {",
            "lineNumber": 266
          },
          {
            "text": "                delete teamColorMap[team];",
            "lineNumber": 267
          },
          {
            "text": "            }",
            "lineNumber": 268
          },
          {
            "text": "        });",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "        let paletteIdx = 0;",
            "lineNumber": 271
          },
          {
            "text": "        currentTeams.forEach(team =&gt; {",
            "lineNumber": 272
          },
          {
            "text": "            if (!teamColorMap[team]) {",
            "lineNumber": 273
          },
          {
            "text": "                teamColorMap[team] = getPaletteColor(paletteIdx++);",
            "lineNumber": 274
          },
          {
            "text": "            }",
            "lineNumber": 275
          },
          {
            "text": "        });",
            "lineNumber": 276
          },
          {
            "text": "    }",
            "lineNumber": 277
          },
          {
            "lineNumber": 278
          },
          {
            "text": "    function getTeamColor(teamName, fallbackIndex = 0) {",
            "lineNumber": 279
          },
          {
            "text": "        if (teamName &amp;&amp; teamColorMap[teamName]) {",
            "lineNumber": 280
          },
          {
            "text": "            return teamColorMap[teamName];",
            "lineNumber": 281
          },
          {
            "text": "        }",
            "lineNumber": 282
          },
          {
            "text": "        return getPaletteColor(fallbackIndex);",
            "lineNumber": 283
          },
          {
            "text": "    }",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "    function setPalette(name) {",
            "lineNumber": 286
          },
          {
            "text": "        if (TEAM_COLOR_PALETTES[name]) {",
            "lineNumber": 287
          },
          {
            "text": "            currentPaletteName = name;",
            "lineNumber": 288
          },
          {
            "text": "            currentPalette = TEAM_COLOR_PALETTES[name];",
            "lineNumber": 289
          },
          {
            "text": "            return true;",
            "lineNumber": 290
          },
          {
            "text": "        }",
            "lineNumber": 291
          },
          {
            "text": "        return false;",
            "lineNumber": 292
          },
          {
            "text": "    }",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "    function getSemanticColor(semanticName) {",
            "lineNumber": 295
          },
          {
            "text": "        const mapping = SEMANTIC_COLOR_MAPPINGS[currentPaletteName];",
            "lineNumber": 296
          },
          {
            "text": "        if (mapping &amp;&amp; mapping[semanticName] !== undefined) {",
            "lineNumber": 297
          },
          {
            "text": "            return getPaletteColor(mapping[semanticName]);",
            "lineNumber": 298
          },
          {
            "text": "        }",
            "lineNumber": 299
          },
          {
            "text": "        const fallbacks = {",
            "lineNumber": 300
          },
          {
            "text": "            positive: \"#2CA02C\",",
            "lineNumber": 301
          },
          {
            "text": "            negative: \"#D62728\",",
            "lineNumber": 302
          },
          {
            "text": "            highlight: \"#ffd700\"",
            "lineNumber": 303
          },
          {
            "text": "        };",
            "lineNumber": 304
          },
          {
            "text": "        return fallbacks[semanticName] || \"#888\";",
            "lineNumber": 305
          },
          {
            "text": "    }",
            "lineNumber": 306
          },
          {
            "lineNumber": 307
          },
          {
            "text": "    // Dark mode management",
            "lineNumber": 308
          },
          {
            "text": "    function isDarkMode() {",
            "lineNumber": 309
          },
          {
            "text": "        if (typeof localStorage !== 'undefined') {",
            "lineNumber": 310
          },
          {
            "text": "            const stored = localStorage.getItem('darkMode');",
            "lineNumber": 311
          },
          {
            "text": "            if (stored !== null) {",
            "lineNumber": 312
          },
          {
            "text": "                return stored === 'true';",
            "lineNumber": 313
          },
          {
            "text": "            }",
            "lineNumber": 314
          },
          {
            "text": "        }",
            "lineNumber": 315
          },
          {
            "text": "        // Check if system prefers dark mode",
            "lineNumber": 316
          },
          {
            "text": "        if (typeof window !== 'undefined' &amp;&amp; window.matchMedia) {",
            "lineNumber": 317
          },
          {
            "text": "            return window.matchMedia('(prefers-color-scheme: dark)').matches;",
            "lineNumber": 318
          },
          {
            "text": "        }",
            "lineNumber": 319
          },
          {
            "text": "        return false;",
            "lineNumber": 320
          },
          {
            "text": "    }",
            "lineNumber": 321
          },
          {
            "lineNumber": 322
          },
          {
            "text": "    function setDarkMode(enabled) {",
            "lineNumber": 323
          },
          {
            "text": "        if",
            "lineNumber": 324
          },
          {
            "text": "    }",
            "lineNumber": 328
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.45226263999938965
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\league\\league-chart-utils.js",
        "range": {
          "startPosition": {
            "line": 46
          },
          "endPosition": {
            "line": 279,
            "column": 1
          }
        },
        "contents": "function updatePositionChart() {\n\n}\n\n/**\n * Get team color for charts\n */\nfunction getTeamColor(teamName, teamIndex = 0) {\n    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {\n        const color = window.ColorUtils.getTeamColor(teamName);\n        if (color &amp;&amp; color !== '#888') {\n            return color;\n        }\n        return window.ColorUtils.getPaletteColor ? window.ColorUtils.getPaletteColor(teamIndex) : color;\n    }\n    const fallback = [\n        '#28255c', '#592a6b', '#882c70', '#b4306b',\n        '#d8405e', '#f25b4a', '#ff7f30', '#ffa600'\n    ];\n    return fallback[teamIndex % fallback.length];\n}\n\n/**\n * Destroy all chart instances\n */\nfunction destroyAllCharts() {\n    if\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "function updatePositionChart() {",
            "lineNumber": 47,
            "isSignature": true
          },
          {
            "lineNumber": 238
          },
          {
            "text": "}",
            "lineNumber": 239,
            "isSignature": true
          },
          {
            "lineNumber": 240
          },
          {
            "text": "/**",
            "lineNumber": 241
          },
          {
            "text": " * Get team color for charts",
            "lineNumber": 242
          },
          {
            "text": " */",
            "lineNumber": 243
          },
          {
            "text": "function getTeamColor(teamName, teamIndex = 0) {",
            "lineNumber": 244,
            "isSignature": true
          },
          {
            "text": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {",
            "lineNumber": 245
          },
          {
            "text": "        const color = window.ColorUtils.getTeamColor(teamName);",
            "lineNumber": 246
          },
          {
            "text": "        if (color &amp;&amp; color !== '#888') {",
            "lineNumber": 247
          },
          {
            "text": "            return color;",
            "lineNumber": 248
          },
          {
            "text": "        }",
            "lineNumber": 249
          },
          {
            "text": "        return window.ColorUtils.getPaletteColor ? window.ColorUtils.getPaletteColor(teamIndex) : color;",
            "lineNumber": 250
          },
          {
            "text": "    }",
            "lineNumber": 251
          },
          {
            "text": "    const fallback = [",
            "lineNumber": 252
          },
          {
            "text": "        '#28255c', '#592a6b', '#882c70', '#b4306b',",
            "lineNumber": 253
          },
          {
            "text": "        '#d8405e', '#f25b4a', '#ff7f30', '#ffa600'",
            "lineNumber": 254
          },
          {
            "text": "    ];",
            "lineNumber": 255
          },
          {
            "text": "    return fallback[teamIndex % fallback.length];",
            "lineNumber": 256
          },
          {
            "text": "}",
            "lineNumber": 257,
            "isSignature": true
          },
          {
            "lineNumber": 258
          },
          {
            "text": "/**",
            "lineNumber": 259
          },
          {
            "text": " * Destroy all chart instances",
            "lineNumber": 260
          },
          {
            "text": " */",
            "lineNumber": 261
          },
          {
            "text": "function destroyAllCharts() {",
            "lineNumber": 262,
            "isSignature": true
          },
          {
            "text": "    if",
            "lineNumber": 263
          },
          {
            "text": "}",
            "lineNumber": 280,
            "isSignature": true
          }
        ]
      },
      "score": 0.4460465908050537
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-history-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 401,
            "column": 1
          }
        },
        "contents": "class TeamHistoryBlock extends BaseContentBlock {\n\n    \n    /**\n     * Get team color (fallback to simple color if team color map not available)\n     */\n    getTeamColor(teamName) {\n        if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {\n            return window.ColorUtils.getTeamColor(teamName);\n        }\n        if (typeof getTeamColorForBlock === 'function') {\n            return getTeamColorForBlock(teamName);\n        }\n        if (typeof getTeamColor === 'function') {\n            return getTeamColor(teamName);\n        }\n        return 'rgba(255, 99, 132, 1)'; // Default red\n    }\n    \n    /**\n     * Destroy the chart instance\n     */\n    destroyChart() {\n        const container = this.getContainer();\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class TeamHistoryBlock extends BaseContentBlock {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 180
          },
          {
            "text": "    ",
            "lineNumber": 181
          },
          {
            "text": "    /**",
            "lineNumber": 182
          },
          {
            "text": "     * Get team color (fallback to simple color if team color map not available)",
            "lineNumber": 183
          },
          {
            "text": "     */",
            "lineNumber": 184
          },
          {
            "text": "    getTeamColor(teamName) {",
            "lineNumber": 185,
            "isSignature": true
          },
          {
            "text": "        if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {",
            "lineNumber": 186
          },
          {
            "text": "            return window.ColorUtils.getTeamColor(teamName);",
            "lineNumber": 187
          },
          {
            "text": "        }",
            "lineNumber": 188
          },
          {
            "text": "        if (typeof getTeamColorForBlock === 'function') {",
            "lineNumber": 189
          },
          {
            "text": "            return getTeamColorForBlock(teamName);",
            "lineNumber": 190
          },
          {
            "text": "        }",
            "lineNumber": 191
          },
          {
            "text": "        if (typeof getTeamColor === 'function') {",
            "lineNumber": 192
          },
          {
            "text": "            return getTeamColor(teamName);",
            "lineNumber": 193
          },
          {
            "text": "        }",
            "lineNumber": 194
          },
          {
            "text": "        return 'rgba(255, 99, 132, 1)'; // Default red",
            "lineNumber": 195
          },
          {
            "text": "    }",
            "lineNumber": 196,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 197
          },
          {
            "text": "    /**",
            "lineNumber": 198
          },
          {
            "text": "     * Destroy the chart instance",
            "lineNumber": 199
          },
          {
            "text": "     */",
            "lineNumber": 200
          },
          {
            "text": "    destroyChart() {",
            "lineNumber": 201,
            "isSignature": true
          },
          {
            "text": "        const container = this.getContainer();",
            "lineNumber": 202
          },
          {
            "text": "    }",
            "lineNumber": 261,
            "isSignature": true
          }
        ]
      },
      "score": 0.43266069889068604
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\charts.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 60
          }
        },
        "contents": "&lt;script src=\"https://cdn.jsdelivr.net/npm/chart.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\nconst ColorUtilsRef = window.ColorUtils || {};\n\nlet currentPaletteName = ColorUtilsRef.getCurrentPaletteName\n    ? ColorUtilsRef.getCurrentPaletteName()\n    : 'rainbowPastel';\nlet currentPalette = ColorUtilsRef.getCurrentPalette\n    ? ColorUtilsRef.getCurrentPalette()\n    : (ColorUtilsRef.TEAM_COLOR_PALETTES?.[currentPaletteName] || []);\n\nfunction syncPalette(name) {\n    if (ColorUtilsRef.setPalette &amp;&amp; ColorUtilsRef.setPalette(name)) {\n        currentPaletteName = ColorUtilsRef.getCurrentPaletteName();\n        currentPalette = ColorUtilsRef.getCurrentPalette();\n        return true;\n    }\n    if (ColorUtilsRef.TEAM_COLOR_PALETTES &amp;&amp; ColorUtilsRef.TEAM_COLOR_PALETTES[name]) {\n        currentPaletteName = name;\n        currentPalette = ColorUtilsRef.TEAM_COLOR_PALETTES[name];\n        return true;\n    }\n    return false;\n}\n\nfunction getSemanticColor(semanticName) {\n    if (ColorUtilsRef.getSemanticColor) {\n        return ColorUtilsRef.getSemanticColor(semanticName);\n    }\n    const fallbackColors = {\n        positive: '#2CA02C',\n        negative: '#D62728',\n        highlight: '#ffd700'\n    };\n    return fallbackColors[semanticName] || '#888';\n}\n\nfunction updateTeamColorMap(currentTeams) {\n    if (ColorUtilsRef.updateTeamColorMap) {\n        ColorUtilsRef.updateTeamColorMap(currentTeams);\n    }\n}\n\nfunction getTeamColor(team) {\n    if (ColorUtilsRef.getTeamColor) {\n        return ColorUtilsRef.getTeamColor(team);\n    }\n    return '#888';\n}\n\nwindow.teamColorMap = ColorUtilsRef.teamColorMap || window.teamColorMap || {};\nwindow.updateTeamColorMap = updateTeamColorMap;\nwindow.getTeamColor = getTeamColor;\n\n// --- Palette Switcher UI ---\nfunction renderPaletteSwitcher(containerId = \"paletteSwitcher\") {\n  const container = document.getElementById(containerId);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;script src=\"https://cdn.jsdelivr.net/npm/chart.js\"&gt;&lt;/script&gt;",
            "lineNumber": 1
          },
          {
            "text": "&lt;script src=\"https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js\"&gt;&lt;/script&gt;",
            "lineNumber": 2
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 5
          },
          {
            "text": "const ColorUtilsRef = window.ColorUtils || {};",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "let currentPaletteName = ColorUtilsRef.getCurrentPaletteName",
            "lineNumber": 8
          },
          {
            "text": "    ? ColorUtilsRef.getCurrentPaletteName()",
            "lineNumber": 9
          },
          {
            "text": "    : 'rainbowPastel';",
            "lineNumber": 10
          },
          {
            "text": "let currentPalette = ColorUtilsRef.getCurrentPalette",
            "lineNumber": 11
          },
          {
            "text": "    ? ColorUtilsRef.getCurrentPalette()",
            "lineNumber": 12
          },
          {
            "text": "    : (ColorUtilsRef.TEAM_COLOR_PALETTES?.[currentPaletteName] || []);",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "function syncPalette(name) {",
            "lineNumber": 15
          },
          {
            "text": "    if (ColorUtilsRef.setPalette &amp;&amp; ColorUtilsRef.setPalette(name)) {",
            "lineNumber": 16
          },
          {
            "text": "        currentPaletteName = ColorUtilsRef.getCurrentPaletteName();",
            "lineNumber": 17
          },
          {
            "text": "        currentPalette = ColorUtilsRef.getCurrentPalette();",
            "lineNumber": 18
          },
          {
            "text": "        return true;",
            "lineNumber": 19
          },
          {
            "text": "    }",
            "lineNumber": 20
          },
          {
            "text": "    if (ColorUtilsRef.TEAM_COLOR_PALETTES &amp;&amp; ColorUtilsRef.TEAM_COLOR_PALETTES[name]) {",
            "lineNumber": 21
          },
          {
            "text": "        currentPaletteName = name;",
            "lineNumber": 22
          },
          {
            "text": "        currentPalette = ColorUtilsRef.TEAM_COLOR_PALETTES[name];",
            "lineNumber": 23
          },
          {
            "text": "        return true;",
            "lineNumber": 24
          },
          {
            "text": "    }",
            "lineNumber": 25
          },
          {
            "text": "    return false;",
            "lineNumber": 26
          },
          {
            "text": "}",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "function getSemanticColor(semanticName) {",
            "lineNumber": 29
          },
          {
            "text": "    if (ColorUtilsRef.getSemanticColor) {",
            "lineNumber": 30
          },
          {
            "text": "        return ColorUtilsRef.getSemanticColor(semanticName);",
            "lineNumber": 31
          },
          {
            "text": "    }",
            "lineNumber": 32
          },
          {
            "text": "    const fallbackColors = {",
            "lineNumber": 33
          },
          {
            "text": "        positive: '#2CA02C',",
            "lineNumber": 34
          },
          {
            "text": "        negative: '#D62728',",
            "lineNumber": 35
          },
          {
            "text": "        highlight: '#ffd700'",
            "lineNumber": 36
          },
          {
            "text": "    };",
            "lineNumber": 37
          },
          {
            "text": "    return fallbackColors[semanticName] || '#888';",
            "lineNumber": 38
          },
          {
            "text": "}",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "function updateTeamColorMap(currentTeams) {",
            "lineNumber": 41
          },
          {
            "text": "    if (ColorUtilsRef.updateTeamColorMap) {",
            "lineNumber": 42
          },
          {
            "text": "        ColorUtilsRef.updateTeamColorMap(currentTeams);",
            "lineNumber": 43
          },
          {
            "text": "    }",
            "lineNumber": 44
          },
          {
            "text": "}",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "function getTeamColor(team) {",
            "lineNumber": 47
          },
          {
            "text": "    if (ColorUtilsRef.getTeamColor) {",
            "lineNumber": 48
          },
          {
            "text": "        return ColorUtilsRef.getTeamColor(team);",
            "lineNumber": 49
          },
          {
            "text": "    }",
            "lineNumber": 50
          },
          {
            "text": "    return '#888';",
            "lineNumber": 51
          },
          {
            "text": "}",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "window.teamColorMap = ColorUtilsRef.teamColorMap || window.teamColorMap || {};",
            "lineNumber": 54
          },
          {
            "text": "window.updateTeamColorMap = updateTeamColorMap;",
            "lineNumber": 55
          },
          {
            "text": "window.getTeamColor = getTeamColor;",
            "lineNumber": 56
          },
          {
            "lineNumber": 57
          },
          {
            "text": "// --- Palette Switcher UI ---",
            "lineNumber": 58
          },
          {
            "text": "function renderPaletteSwitcher(containerId = \"paletteSwitcher\") {",
            "lineNumber": 59
          },
          {
            "text": "  const container = document.getElementById(containerId);",
            "lineNumber": 60
          }
        ]
      },
      "score": 0.42563238739967346
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\chart-adapters.js",
        "range": {
          "startPosition": {
            "line": 114
          },
          "endPosition": {
            "line": 207,
            "column": 73
          }
        },
        "contents": "function createLineChart_forContentBlock(canvas, data, labels, title, options = {}) {\n\n}\n\n/**\n * Helper function to get team color (shared utility)\n */\nfunction getTeamColorForBlock(teamName) {\n    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {\n        return window.ColorUtils.getTeamColor(teamName);\n    }\n    if (typeof getTeamColor === 'function') {\n        return getTeamColor(teamName);\n    }\n    \n    const fallbackColors = [\n        'rgba(255, 99, 132, 1)',\n        'rgba(54, 162, 235, 1)',\n        'rgba(255, 205, 86, 1)',\n        'rgba(75, 192, 192, 1)',\n        'rgba(153, 102, 255, 1)',\n        'rgba(255, 159, 64, 1)'\n    ];\n    \n    let hash = 0;\n    for (let i = 0; i &lt; teamName.length; i++) {\n        hash = teamName.charCodeAt(i) + ((hash &lt;&lt; 5) - hash);\n    }\n    \n    return fallbackColors[Math.abs(hash) % fallbackColors.length];\n}\n\n// Make functions globally available\nwindow.createAreaChart_forContentBlock = createAreaChart_forContentBlock;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "function createLineChart_forContentBlock(canvas, data, labels, title, options = {}) {",
            "lineNumber": 115,
            "isSignature": true
          },
          {
            "lineNumber": 176
          },
          {
            "text": "}",
            "lineNumber": 177,
            "isSignature": true
          },
          {
            "lineNumber": 178
          },
          {
            "text": "/**",
            "lineNumber": 179
          },
          {
            "text": " * Helper function to get team color (shared utility)",
            "lineNumber": 180
          },
          {
            "text": " */",
            "lineNumber": 181
          },
          {
            "text": "function getTeamColorForBlock(teamName) {",
            "lineNumber": 182,
            "isSignature": true
          },
          {
            "text": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {",
            "lineNumber": 183
          },
          {
            "text": "        return window.ColorUtils.getTeamColor(teamName);",
            "lineNumber": 184
          },
          {
            "text": "    }",
            "lineNumber": 185
          },
          {
            "text": "    if (typeof getTeamColor === 'function') {",
            "lineNumber": 186
          },
          {
            "text": "        return getTeamColor(teamName);",
            "lineNumber": 187
          },
          {
            "text": "    }",
            "lineNumber": 188
          },
          {
            "text": "    ",
            "lineNumber": 189
          },
          {
            "text": "    const fallbackColors = [",
            "lineNumber": 190
          },
          {
            "text": "        'rgba(255, 99, 132, 1)',",
            "lineNumber": 191
          },
          {
            "text": "        'rgba(54, 162, 235, 1)',",
            "lineNumber": 192
          },
          {
            "text": "        'rgba(255, 205, 86, 1)',",
            "lineNumber": 193
          },
          {
            "text": "        'rgba(75, 192, 192, 1)',",
            "lineNumber": 194
          },
          {
            "text": "        'rgba(153, 102, 255, 1)',",
            "lineNumber": 195
          },
          {
            "text": "        'rgba(255, 159, 64, 1)'",
            "lineNumber": 196
          },
          {
            "text": "    ];",
            "lineNumber": 197
          },
          {
            "text": "    ",
            "lineNumber": 198
          },
          {
            "text": "    let hash = 0;",
            "lineNumber": 199
          },
          {
            "text": "    for (let i = 0; i &lt; teamName.length; i++) {",
            "lineNumber": 200
          },
          {
            "text": "        hash = teamName.charCodeAt(i) + ((hash &lt;&lt; 5) - hash);",
            "lineNumber": 201
          },
          {
            "text": "    }",
            "lineNumber": 202
          },
          {
            "text": "    ",
            "lineNumber": 203
          },
          {
            "text": "    return fallbackColors[Math.abs(hash) % fallbackColors.length];",
            "lineNumber": 204
          },
          {
            "text": "}",
            "lineNumber": 205,
            "isSignature": true
          },
          {
            "lineNumber": 206
          },
          {
            "text": "// Make functions globally available",
            "lineNumber": 207
          },
          {
            "text": "window.createAreaChart_forContentBlock = createAreaChart_forContentBlock;",
            "lineNumber": 208
          }
        ]
      },
      "score": 0.4013364315032959
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1730
          },
          "endPosition": {
            "line": 1757,
            "column": 32
          }
        },
        "contents": "                            }\n                        } else {\n                            // Fallback to original cell_metadata approach if no metadata available\n                            if (data.cell_metadata &amp;&amp; data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;]) {\n                                const cellMeta = data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;];\n                                Object.entries(cellMeta).forEach(([key, value]) =&gt; {\n                                    td.style[key] = value;\n                                });\n                            }\n                        }\n                        \n                        // Now increment colIndex\n                        \n                        \n                        // Special handling for team vs team comparison table (takes precedence)\n                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {\n                            // Special handling for team vs team comparison table - first column shows team name with color\n                            const teamName = value;\n                            let color = \"#888\"; // fallback color\n                            \n                            if (typeof window.getTeamColor === 'function') {\n                                color = window.getTeamColor(teamName);\n                            } else if (window.teamColorMap &amp;&amp; window.teamColorMap[teamName]) {\n                                color = window.teamColorMap[teamName];\n                            }\n                            \n                            td.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;\n                                ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                            }",
            "lineNumber": 1731
          },
          {
            "text": "                        } else {",
            "lineNumber": 1732
          },
          {
            "text": "                            // Fallback to original cell_metadata approach if no metadata available",
            "lineNumber": 1733
          },
          {
            "text": "                            if (data.cell_metadata &amp;&amp; data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;]) {",
            "lineNumber": 1734
          },
          {
            "text": "                                const cellMeta = data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;];",
            "lineNumber": 1735
          },
          {
            "text": "                                Object.entries(cellMeta).forEach(([key, value]) =&gt; {",
            "lineNumber": 1736
          },
          {
            "text": "                                    td.style[key] = value;",
            "lineNumber": 1737
          },
          {
            "text": "                                });",
            "lineNumber": 1738
          },
          {
            "text": "                            }",
            "lineNumber": 1739
          },
          {
            "text": "                        }",
            "lineNumber": 1740
          },
          {
            "text": "                        ",
            "lineNumber": 1741
          },
          {
            "text": "                        // Now increment colIndex",
            "lineNumber": 1742
          },
          {
            "text": "                        ",
            "lineNumber": 1743
          },
          {
            "text": "                        ",
            "lineNumber": 1744
          },
          {
            "text": "                        // Special handling for team vs team comparison table (takes precedence)",
            "lineNumber": 1745
          },
          {
            "text": "                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {",
            "lineNumber": 1746
          },
          {
            "text": "                            // Special handling for team vs team comparison table - first column shows team name with color",
            "lineNumber": 1747
          },
          {
            "text": "                            const teamName = value;",
            "lineNumber": 1748
          },
          {
            "text": "                            let color = \"#888\"; // fallback color",
            "lineNumber": 1749
          },
          {
            "text": "                            ",
            "lineNumber": 1750
          },
          {
            "text": "                            if (typeof window.getTeamColor === 'function') {",
            "lineNumber": 1751
          },
          {
            "text": "                                color = window.getTeamColor(teamName);",
            "lineNumber": 1752
          },
          {
            "text": "                            } else if (window.teamColorMap &amp;&amp; window.teamColorMap[teamName]) {",
            "lineNumber": 1753
          },
          {
            "text": "                                color = window.teamColorMap[teamName];",
            "lineNumber": 1754
          },
          {
            "text": "                            }",
            "lineNumber": 1755
          },
          {
            "text": "                            ",
            "lineNumber": 1756
          },
          {
            "text": "                            td.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
            "lineNumber": 1757
          },
          {
            "text": "                                ",
            "lineNumber": 1758
          }
        ]
      },
      "score": 0.375784307718277
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 5
          }
        },
        "contents": "() =&gt; {\nfunction applyDarkMode(enabled) {\n\n        }\n        \n        // Dispatch event for other components\n        if (typeof window !== 'undefined') {\n            window.dispatchEvent(new CustomEvent('themeChanged', { \n                detail: { darkMode: enabled } \n            }));\n        }\n    }\n\n    // Initialize dark mode on load\n    if (typeof document !== 'undefined') {\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', () =&gt; {\n                applyDarkMode(isDarkMode());\n            });\n        } else {\n            applyDarkMode(isDarkMode());\n        }\n    }\n\n    const ColorUtils = {\n        TEAM_COLOR_PALETTES,\n        SEMANTIC_COLOR_MAPPINGS,\n        THEME_COLORS,\n        THEME_COLORS_DARK,\n        getCurrentPaletteName: () =&gt; currentPaletteName,\n        getCurrentPalette: () =&gt; [...currentPalette],\n        setPalette,\n        getPaletteColor,\n        getSemanticColor,\n        getThemeColor,\n        updateTeamColorMap,\n        getTeamColor,\n        getGradientColors,\n        getStripeColors,\n        getHeatMapColor,\n        hexToRgb,\n        toRgba,\n        teamColorMap,\n        assignGroupStripeCss,\n        generateStripeCss,\n        injectStripeCss,\n        isDarkMode,\n        setDarkMode,\n        toggleDarkMode,\n        applyDarkMode\n    };\n\n    globalObj.ColorUtils = ColorUtils;\n    globalObj.teamColorMap = teamColorMap;\n    globalObj.getTeamColor = getTeamColor;\n    globalObj.updateTeamColorMap = updateTeamColorMap;\n})();",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 336,
                "column": 5
              },
              "endPosition": {
                "line": 337,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "function applyDarkMode(enabled) {",
            "lineNumber": 336
          },
          {
            "lineNumber": 380
          },
          {
            "text": "        }",
            "lineNumber": 381
          },
          {
            "text": "        ",
            "lineNumber": 382
          },
          {
            "text": "        // Dispatch event for other components",
            "lineNumber": 383
          },
          {
            "text": "        if (typeof window !== 'undefined') {",
            "lineNumber": 384
          },
          {
            "text": "            window.dispatchEvent(new CustomEvent('themeChanged', { ",
            "lineNumber": 385
          },
          {
            "text": "                detail: { darkMode: enabled } ",
            "lineNumber": 386
          },
          {
            "text": "            }));",
            "lineNumber": 387
          },
          {
            "text": "        }",
            "lineNumber": 388
          },
          {
            "text": "    }",
            "lineNumber": 389
          },
          {
            "lineNumber": 390
          },
          {
            "text": "    // Initialize dark mode on load",
            "lineNumber": 391
          },
          {
            "text": "    if (typeof document !== 'undefined') {",
            "lineNumber": 392
          },
          {
            "text": "        if (document.readyState === 'loading') {",
            "lineNumber": 393
          },
          {
            "text": "            document.addEventListener('DOMContentLoaded', () =&gt; {",
            "lineNumber": 394
          },
          {
            "text": "                applyDarkMode(isDarkMode());",
            "lineNumber": 395
          },
          {
            "text": "            });",
            "lineNumber": 396
          },
          {
            "text": "        } else {",
            "lineNumber": 397
          },
          {
            "text": "            applyDarkMode(isDarkMode());",
            "lineNumber": 398
          },
          {
            "text": "        }",
            "lineNumber": 399
          },
          {
            "text": "    }",
            "lineNumber": 400
          },
          {
            "lineNumber": 401
          },
          {
            "text": "    const ColorUtils = {",
            "lineNumber": 402
          },
          {
            "text": "        TEAM_COLOR_PALETTES,",
            "lineNumber": 403
          },
          {
            "text": "        SEMANTIC_COLOR_MAPPINGS,",
            "lineNumber": 404
          },
          {
            "text": "        THEME_COLORS,",
            "lineNumber": 405
          },
          {
            "text": "        THEME_COLORS_DARK,",
            "lineNumber": 406
          },
          {
            "text": "        getCurrentPaletteName: () =&gt; currentPaletteName,",
            "lineNumber": 407
          },
          {
            "text": "        getCurrentPalette: () =&gt; [...currentPalette],",
            "lineNumber": 408
          },
          {
            "text": "        setPalette,",
            "lineNumber": 409
          },
          {
            "text": "        getPaletteColor,",
            "lineNumber": 410
          },
          {
            "text": "        getSemanticColor,",
            "lineNumber": 411
          },
          {
            "text": "        getThemeColor,",
            "lineNumber": 412
          },
          {
            "text": "        updateTeamColorMap,",
            "lineNumber": 413
          },
          {
            "text": "        getTeamColor,",
            "lineNumber": 414
          },
          {
            "text": "        getGradientColors,",
            "lineNumber": 415
          },
          {
            "text": "        getStripeColors,",
            "lineNumber": 416
          },
          {
            "text": "        getHeatMapColor,",
            "lineNumber": 417
          },
          {
            "text": "        hexToRgb,",
            "lineNumber": 418
          },
          {
            "text": "        toRgba,",
            "lineNumber": 419
          },
          {
            "text": "        teamColorMap,",
            "lineNumber": 420
          },
          {
            "text": "        assignGroupStripeCss,",
            "lineNumber": 421
          },
          {
            "text": "        generateStripeCss,",
            "lineNumber": 422
          },
          {
            "text": "        injectStripeCss,",
            "lineNumber": 423
          },
          {
            "text": "        isDarkMode,",
            "lineNumber": 424
          },
          {
            "text": "        setDarkMode,",
            "lineNumber": 425
          },
          {
            "text": "        toggleDarkMode,",
            "lineNumber": 426
          },
          {
            "text": "        applyDarkMode",
            "lineNumber": 427
          },
          {
            "text": "    };",
            "lineNumber": 428
          },
          {
            "lineNumber": 429
          },
          {
            "text": "    globalObj.ColorUtils = ColorUtils;",
            "lineNumber": 430
          },
          {
            "text": "    globalObj.teamColorMap = teamColorMap;",
            "lineNumber": 431
          },
          {
            "text": "    globalObj.getTeamColor = getTeamColor;",
            "lineNumber": 432
          },
          {
            "text": "    globalObj.updateTeamColorMap = updateTeamColorMap;",
            "lineNumber": 433
          },
          {
            "text": "})();",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.3562159538269043
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1574
          },
          "endPosition": {
            "line": 1599
          }
        },
        "contents": "                            } else {\n                                // Regular columns - create cells for both rows\n                                const td1 = document.createElement('td');\n                                const td2 = document.createElement('td');\n                                \n                                td1.style.padding = '8px';\n                                td2.style.padding = '8px';\n                                td1.style.textAlign = col.align || 'center';\n                                td2.style.textAlign = col.align || 'center';\n                                \n                                const value1 = row1.rowData[flatIndex];\n                                const value2 = row2.rowData[flatIndex];\n                                \n                        // Special handling for team vs team comparison table (takes precedence)\n                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {\n                                    // Special handling for team vs team comparison table - first column shows team name with color\n                                    const teamName1 = value1;\n                                    const teamName2 = value2;\n                                    \n                                    let color1 = \"#888\"; // fallback color\n                                    let color2 = \"#888\"; // fallback color\n                                    \n                                    if (typeof window.getTeamColor === 'function') {\n                                        color1 = window.getTeamColor(teamName1);\n                                        color2 = window.getTeamColor(teamName2);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                            } else {",
            "lineNumber": 1575
          },
          {
            "text": "                                // Regular columns - create cells for both rows",
            "lineNumber": 1576
          },
          {
            "text": "                                const td1 = document.createElement('td');",
            "lineNumber": 1577
          },
          {
            "text": "                                const td2 = document.createElement('td');",
            "lineNumber": 1578
          },
          {
            "text": "                                ",
            "lineNumber": 1579
          },
          {
            "text": "                                td1.style.padding = '8px';",
            "lineNumber": 1580
          },
          {
            "text": "                                td2.style.padding = '8px';",
            "lineNumber": 1581
          },
          {
            "text": "                                td1.style.textAlign = col.align || 'center';",
            "lineNumber": 1582
          },
          {
            "text": "                                td2.style.textAlign = col.align || 'center';",
            "lineNumber": 1583
          },
          {
            "text": "                                ",
            "lineNumber": 1584
          },
          {
            "text": "                                const value1 = row1.rowData[flatIndex];",
            "lineNumber": 1585
          },
          {
            "text": "                                const value2 = row2.rowData[flatIndex];",
            "lineNumber": 1586
          },
          {
            "text": "                                ",
            "lineNumber": 1587
          },
          {
            "text": "                        // Special handling for team vs team comparison table (takes precedence)",
            "lineNumber": 1588
          },
          {
            "text": "                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {",
            "lineNumber": 1589
          },
          {
            "text": "                                    // Special handling for team vs team comparison table - first column shows team name with color",
            "lineNumber": 1590
          },
          {
            "text": "                                    const teamName1 = value1;",
            "lineNumber": 1591
          },
          {
            "text": "                                    const teamName2 = value2;",
            "lineNumber": 1592
          },
          {
            "text": "                                    ",
            "lineNumber": 1593
          },
          {
            "text": "                                    let color1 = \"#888\"; // fallback color",
            "lineNumber": 1594
          },
          {
            "text": "                                    let color2 = \"#888\"; // fallback color",
            "lineNumber": 1595
          },
          {
            "text": "                                    ",
            "lineNumber": 1596
          },
          {
            "text": "                                    if (typeof window.getTeamColor === 'function') {",
            "lineNumber": 1597
          },
          {
            "text": "                                        color1 = window.getTeamColor(teamName1);",
            "lineNumber": 1598
          },
          {
            "text": "                                        color2 = window.getTeamColor(teamName2);",
            "lineNumber": 1599
          }
        ]
      },
      "score": 0.34919169545173645
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1891
          },
          "endPosition": {
            "line": 1941
          }
        },
        "contents": "            // Render the table with the fetched data - use Tabulator by default\n            if (typeof createTableTabulator === 'function') {\n                createTableTabulator(tableId, data, {\n                    ...params.options,\n                    tooltips: true\n                });\n            } else if (typeof createTableBootstrap3 === 'function') {\n                // Fallback to Bootstrap if Tabulator not available\n                createTableBootstrap3(tableId, data, params.options || {});\n            } else {\n                console.error('No table creation function available');\n                container.innerHTML = '&lt;div class=\"alert alert-warning\"&gt;Table creation function not available&lt;/div&gt;';\n            }\n        })\n        .catch(error =&gt; {\n            console.error('Error fetching table data:', error);\n            \n            // Show appropriate error message based on error type\n            const container = document.getElementById(tableId);\n            if (error.status === 404 || error.message.includes('No data found')) {\n                container.innerHTML = &#96;\n                    &lt;div class=\"alert alert-warning\"&gt;\n                        &lt;strong&gt;Data Unavailable:&lt;/strong&gt; No data found for the current parameters.\n                        &lt;br&gt;&lt;small&gt;This might be due to a data source change. Try refreshing the page or selecting different parameters.&lt;/small&gt;\n                    &lt;/div&gt;\n                &#96;;\n            } else {\n                container.innerHTML = &#96;\n                    &lt;div class=\"alert alert-danger\"&gt;\n                        &lt;strong&gt;Error:&lt;/strong&gt; Failed to load table data. ${error.message}\n                        &lt;br&gt;&lt;small&gt;Please try refreshing the page or contact support if the problem persists.&lt;/small&gt;\n                    &lt;/div&gt;\n                &#96;;\n            }\n        });\n}\n\n// Function to get team color\nfunction getTeamColor(teamName) {\n    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {\n        return window.ColorUtils.getTeamColor(teamName);\n    }\n    return '#888';\n}\n&lt;/script&gt;\n\n&lt;style&gt;\n/* Table theme with light/dark support */\n:root {\n    --table-surface: var(--theme-surface, #ffffff);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            // Render the table with the fetched data - use Tabulator by default",
            "lineNumber": 1892
          },
          {
            "text": "            if (typeof createTableTabulator === 'function') {",
            "lineNumber": 1893
          },
          {
            "text": "                createTableTabulator(tableId, data, {",
            "lineNumber": 1894
          },
          {
            "text": "                    ...params.options,",
            "lineNumber": 1895
          },
          {
            "text": "                    tooltips: true",
            "lineNumber": 1896
          },
          {
            "text": "                });",
            "lineNumber": 1897
          },
          {
            "text": "            } else if (typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 1898
          },
          {
            "text": "                // Fallback to Bootstrap if Tabulator not available",
            "lineNumber": 1899
          },
          {
            "text": "                createTableBootstrap3(tableId, data, params.options || {});",
            "lineNumber": 1900
          },
          {
            "text": "            } else {",
            "lineNumber": 1901
          },
          {
            "text": "                console.error('No table creation function available');",
            "lineNumber": 1902
          },
          {
            "text": "                container.innerHTML = '&lt;div class=\"alert alert-warning\"&gt;Table creation function not available&lt;/div&gt;';",
            "lineNumber": 1903
          },
          {
            "text": "            }",
            "lineNumber": 1904
          },
          {
            "text": "        })",
            "lineNumber": 1905
          },
          {
            "text": "        .catch(error =&gt; {",
            "lineNumber": 1906
          },
          {
            "text": "            console.error('Error fetching table data:', error);",
            "lineNumber": 1907
          },
          {
            "text": "            ",
            "lineNumber": 1908
          },
          {
            "text": "            // Show appropriate error message based on error type",
            "lineNumber": 1909
          },
          {
            "text": "            const container = document.getElementById(tableId);",
            "lineNumber": 1910
          },
          {
            "text": "            if (error.status === 404 || error.message.includes('No data found')) {",
            "lineNumber": 1911
          },
          {
            "text": "                container.innerHTML = &#96;",
            "lineNumber": 1912
          },
          {
            "text": "                    &lt;div class=\"alert alert-warning\"&gt;",
            "lineNumber": 1913
          },
          {
            "text": "                        &lt;strong&gt;Data Unavailable:&lt;/strong&gt; No data found for the current parameters.",
            "lineNumber": 1914
          },
          {
            "text": "                        &lt;br&gt;&lt;small&gt;This might be due to a data source change. Try refreshing the page or selecting different parameters.&lt;/small&gt;",
            "lineNumber": 1915
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 1916
          },
          {
            "text": "                &#96;;",
            "lineNumber": 1917
          },
          {
            "text": "            } else {",
            "lineNumber": 1918
          },
          {
            "text": "                container.innerHTML = &#96;",
            "lineNumber": 1919
          },
          {
            "text": "                    &lt;div class=\"alert alert-danger\"&gt;",
            "lineNumber": 1920
          },
          {
            "text": "                        &lt;strong&gt;Error:&lt;/strong&gt; Failed to load table data. ${error.message}",
            "lineNumber": 1921
          },
          {
            "text": "                        &lt;br&gt;&lt;small&gt;Please try refreshing the page or contact support if the problem persists.&lt;/small&gt;",
            "lineNumber": 1922
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 1923
          },
          {
            "text": "                &#96;;",
            "lineNumber": 1924
          },
          {
            "text": "            }",
            "lineNumber": 1925
          },
          {
            "text": "        });",
            "lineNumber": 1926
          },
          {
            "text": "}",
            "lineNumber": 1927
          },
          {
            "lineNumber": 1928
          },
          {
            "text": "// Function to get team color",
            "lineNumber": 1929
          },
          {
            "text": "function getTeamColor(teamName) {",
            "lineNumber": 1930
          },
          {
            "text": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {",
            "lineNumber": 1931
          },
          {
            "text": "        return window.ColorUtils.getTeamColor(teamName);",
            "lineNumber": 1932
          },
          {
            "text": "    }",
            "lineNumber": 1933
          },
          {
            "text": "    return '#888';",
            "lineNumber": 1934
          },
          {
            "text": "}",
            "lineNumber": 1935
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 1936
          },
          {
            "lineNumber": 1937
          },
          {
            "text": "&lt;style&gt;",
            "lineNumber": 1938
          },
          {
            "text": "/* Table theme with light/dark support */",
            "lineNumber": 1939
          },
          {
            "text": ":root {",
            "lineNumber": 1940
          },
          {
            "text": "    --table-surface: var(--theme-surface, #ffffff);",
            "lineNumber": 1941
          }
        ]
      },
      "score": 0.34494465589523315
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "class SeasonOverviewBlock extends BaseContentBlock {\n\n\n    updateSharedLegend(teams) {\n        // Safe guard against undefined teams\n        if (!teams || !Array.isArray(teams) || teams.length === 0) {\n            console.warn('Teams array is empty or invalid:', teams);\n            const sharedLegend = document.getElementById('sharedLegend');\n            const sharedLegendMiddle = document.getElementById('sharedLegendMiddle');\n            \n            if (sharedLegend) sharedLegend.innerHTML = '&lt;span class=\"text-muted\"&gt;No teams available&lt;/span&gt;';\n            if (sharedLegendMiddle) sharedLegendMiddle.innerHTML = '&lt;span class=\"text-muted\"&gt;No teams available&lt;/span&gt;';\n            return;\n        }\n        \n        const legendHtml = teams.map(team =&gt; &#96;\n            &lt;div class=\"mx-3 mb-2 d-flex align-items-center\"&gt;\n                &lt;div style=\"width: 20px; height: 20px; border-radius: 50%; background-color: ${window.ColorUtils ? window.ColorUtils.getTeamColor(team) : (typeof getTeamColor === 'function' ? getTeamColor(team) : (window.ColorUtils?.getThemeColor('primary') || '#007bff'))}; margin-right: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;\"&gt;\n                    \n                &lt;/div&gt;\n                &lt;span&gt;${team}&lt;/span&gt;\n            &lt;/div&gt;\n        &#96;).join('');\n        \n        const sharedLegend = document.getElementById('sharedLegend');\n        const sharedLegendMiddle = document.getElementById('sharedLegendMiddle');\n        \n        if (sharedLegend) sharedLegend.innerHTML = legendHtml;\n        if (sharedLegendMiddle) sharedLegendMiddle.innerHTML = legendHtml;\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 332
          },
          {
            "lineNumber": 333
          },
          {
            "text": "    updateSharedLegend(teams) {",
            "lineNumber": 334,
            "isSignature": true
          },
          {
            "text": "        // Safe guard against undefined teams",
            "lineNumber": 335
          },
          {
            "text": "        if (!teams || !Array.isArray(teams) || teams.length === 0) {",
            "lineNumber": 336
          },
          {
            "text": "            console.warn('Teams array is empty or invalid:', teams);",
            "lineNumber": 337
          },
          {
            "text": "            const sharedLegend = document.getElementById('sharedLegend');",
            "lineNumber": 338
          },
          {
            "text": "            const sharedLegendMiddle = document.getElementById('sharedLegendMiddle');",
            "lineNumber": 339
          },
          {
            "text": "            ",
            "lineNumber": 340
          },
          {
            "text": "            if (sharedLegend) sharedLegend.innerHTML = '&lt;span class=\"text-muted\"&gt;No teams available&lt;/span&gt;';",
            "lineNumber": 341
          },
          {
            "text": "            if (sharedLegendMiddle) sharedLegendMiddle.innerHTML = '&lt;span class=\"text-muted\"&gt;No teams available&lt;/span&gt;';",
            "lineNumber": 342
          },
          {
            "text": "            return;",
            "lineNumber": 343
          },
          {
            "text": "        }",
            "lineNumber": 344
          },
          {
            "text": "        ",
            "lineNumber": 345
          },
          {
            "text": "        const legendHtml = teams.map(team =&gt; &#96;",
            "lineNumber": 346
          },
          {
            "text": "            &lt;div class=\"mx-3 mb-2 d-flex align-items-center\"&gt;",
            "lineNumber": 347
          },
          {
            "text": "                &lt;div style=\"width: 20px; height: 20px; border-radius: 50%; background-color: ${window.ColorUtils ? window.ColorUtils.getTeamColor(team) : (typeof getTeamColor === 'function' ? getTeamColor(team) : (window.ColorUtils?.getThemeColor('primary') || '#007bff'))}; margin-right: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;\"&gt;",
            "lineNumber": 348
          },
          {
            "text": "                    ",
            "lineNumber": 349
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 350
          },
          {
            "text": "                &lt;span&gt;${team}&lt;/span&gt;",
            "lineNumber": 351
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 352
          },
          {
            "text": "        &#96;).join('');",
            "lineNumber": 353
          },
          {
            "text": "        ",
            "lineNumber": 354
          },
          {
            "text": "        const sharedLegend = document.getElementById('sharedLegend');",
            "lineNumber": 355
          },
          {
            "text": "        const sharedLegendMiddle = document.getElementById('sharedLegendMiddle');",
            "lineNumber": 356
          },
          {
            "text": "        ",
            "lineNumber": 357
          },
          {
            "text": "        if (sharedLegend) sharedLegend.innerHTML = legendHtml;",
            "lineNumber": 358
          },
          {
            "text": "        if (sharedLegendMiddle) sharedLegendMiddle.innerHTML = legendHtml;",
            "lineNumber": 359
          },
          {
            "text": "    }",
            "lineNumber": 360,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 361,
            "isSignature": true
          }
        ]
      },
      "score": 0.3253450095653534
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\nfunction generateStripeCss(groupCount, options = {}) {\n\n        return css;\n    }\n\n    /**\n     * Injects stripe CSS into the document if not already present.\n     * @param {number} groupCount - Number of groups\n     * @param {Object} options - Color options\n     */\n    function injectStripeCss(groupCount, options = {}) {\n        const styleId = \"tabulator-stripe-styles\";\n        let styleEl = document.getElementById(styleId);\n        if (!styleEl) {\n            styleEl = document.createElement(\"style\");\n            styleEl.id = styleId;\n            document.head.appendChild(styleEl);\n        }\n        styleEl.textContent = generateStripeCss(groupCount, options);\n    }\n\n    function interpolateValue(value, minVal, maxVal) {\n        if (maxVal === minVal) return 0;\n        return (value - minVal) / (maxVal - minVal);\n    }\n\n    function getThemeColor(colorName) {\n        return THEME_COLORS[colorName] || null;\n    }\n\n    function getHeatMapColor(value, minVal, maxVal, options = {}) {\n        const startColor = options.startColor || THEME_COLORS.heatMapStart;\n        const endColor = options.endColor || THEME_COLORS.heatMapEnd;\n\n        const ratio = Math.min(Math.max(interpolateValue(value, minVal, maxVal), 0), 1);\n        const [r1, g1, b1] = hexToRgb(startColor);\n        const [r2, g2, b2] = hexToRgb(endColor);\n\n        const r = Math.round(r1 + (r2 - r1) * ratio);\n        const g = Math.round(g1 + (g2 - g1) * ratio);\n        const b = Math.round(b1 + (b2 - b1) * ratio);\n        return &#96;rgb(${r}, ${g}, ${b})&#96;;\n    }\n\n    function getPaletteColor(index) {\n        if (!currentPalette.length) return \"#888\";\n        return currentPalette[Math.abs(index) % currentPalette.length];\n    }\n\n    function updateTeamColorMap(currentTeams = []) {\n        if (!Array.isArray(currentTeams)) return;\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "function generateStripeCss(groupCount, options = {}) {",
            "lineNumber": 199
          },
          {
            "lineNumber": 214
          },
          {
            "text": "        return css;",
            "lineNumber": 215
          },
          {
            "text": "    }",
            "lineNumber": 216
          },
          {
            "lineNumber": 217
          },
          {
            "text": "    /**",
            "lineNumber": 218
          },
          {
            "text": "     * Injects stripe CSS into the document if not already present.",
            "lineNumber": 219
          },
          {
            "text": "     * @param {number} groupCount - Number of groups",
            "lineNumber": 220
          },
          {
            "text": "     * @param {Object} options - Color options",
            "lineNumber": 221
          },
          {
            "text": "     */",
            "lineNumber": 222
          },
          {
            "text": "    function injectStripeCss(groupCount, options = {}) {",
            "lineNumber": 223
          },
          {
            "text": "        const styleId = \"tabulator-stripe-styles\";",
            "lineNumber": 224
          },
          {
            "text": "        let styleEl = document.getElementById(styleId);",
            "lineNumber": 225
          },
          {
            "text": "        if (!styleEl) {",
            "lineNumber": 226
          },
          {
            "text": "            styleEl = document.createElement(\"style\");",
            "lineNumber": 227
          },
          {
            "text": "            styleEl.id = styleId;",
            "lineNumber": 228
          },
          {
            "text": "            document.head.appendChild(styleEl);",
            "lineNumber": 229
          },
          {
            "text": "        }",
            "lineNumber": 230
          },
          {
            "text": "        styleEl.textContent = generateStripeCss(groupCount, options);",
            "lineNumber": 231
          },
          {
            "text": "    }",
            "lineNumber": 232
          },
          {
            "lineNumber": 233
          },
          {
            "text": "    function interpolateValue(value, minVal, maxVal) {",
            "lineNumber": 234
          },
          {
            "text": "        if (maxVal === minVal) return 0;",
            "lineNumber": 235
          },
          {
            "text": "        return (value - minVal) / (maxVal - minVal);",
            "lineNumber": 236
          },
          {
            "text": "    }",
            "lineNumber": 237
          },
          {
            "lineNumber": 238
          },
          {
            "text": "    function getThemeColor(colorName) {",
            "lineNumber": 239
          },
          {
            "text": "        return THEME_COLORS[colorName] || null;",
            "lineNumber": 240
          },
          {
            "text": "    }",
            "lineNumber": 241
          },
          {
            "lineNumber": 242
          },
          {
            "text": "    function getHeatMapColor(value, minVal, maxVal, options = {}) {",
            "lineNumber": 243
          },
          {
            "text": "        const startColor = options.startColor || THEME_COLORS.heatMapStart;",
            "lineNumber": 244
          },
          {
            "text": "        const endColor = options.endColor || THEME_COLORS.heatMapEnd;",
            "lineNumber": 245
          },
          {
            "lineNumber": 246
          },
          {
            "text": "        const ratio = Math.min(Math.max(interpolateValue(value, minVal, maxVal), 0), 1);",
            "lineNumber": 247
          },
          {
            "text": "        const [r1, g1, b1] = hexToRgb(startColor);",
            "lineNumber": 248
          },
          {
            "text": "        const [r2, g2, b2] = hexToRgb(endColor);",
            "lineNumber": 249
          },
          {
            "lineNumber": 250
          },
          {
            "text": "        const r = Math.round(r1 + (r2 - r1) * ratio);",
            "lineNumber": 251
          },
          {
            "text": "        const g = Math.round(g1 + (g2 - g1) * ratio);",
            "lineNumber": 252
          },
          {
            "text": "        const b = Math.round(b1 + (b2 - b1) * ratio);",
            "lineNumber": 253
          },
          {
            "text": "        return &#96;rgb(${r}, ${g}, ${b})&#96;;",
            "lineNumber": 254
          },
          {
            "text": "    }",
            "lineNumber": 255
          },
          {
            "lineNumber": 256
          },
          {
            "text": "    function getPaletteColor(index) {",
            "lineNumber": 257
          },
          {
            "text": "        if (!currentPalette.length) return \"#888\";",
            "lineNumber": 258
          },
          {
            "text": "        return currentPalette[Math.abs(index) % currentPalette.length];",
            "lineNumber": 259
          },
          {
            "text": "    }",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    function updateTeamColorMap(currentTeams = []) {",
            "lineNumber": 262
          },
          {
            "text": "        if (!Array.isArray(currentTeams)) return;",
            "lineNumber": 263
          },
          {
            "text": "    }",
            "lineNumber": 277
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.3246018886566162
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\test.html",
        "range": {
          "startPosition": {
            "line": 654
          },
          "endPosition": {
            "line": 691
          }
        },
        "contents": "function renderScatterPlot() {\n    // Get current selection\n    const season = document.querySelector('input[name=\"season\"]:checked')?.value;\n    const league = document.querySelector('input[name=\"league\"]:checked')?.value;\n    if (!season || !league) {\n        alert('Please select a season and league.');\n        return;\n    }\n    fetch(&#96;/league/get_team_points_vs_average?season=${encodeURIComponent(season)}&amp;league=${encodeURIComponent(league)}&#96;)\n        .then(res =&gt; res.json())\n        .then(data =&gt; {\n            if (!data || typeof data !== 'object' || Array.isArray(data)) {\n                console.error('No valid data for scatter plot:', data);\n                return;\n            }\n            const axis_labels = {x: 'Points', y: 'Average'};\n            // Use color palette for each team\n            if (typeof createScatterChart_vanilla === 'function') {\n                // Patch: inject color into data for each team\n                const teams = Object.keys(data);\n                const coloredData = {};\n                teams.forEach((team, idx) =&gt; {\n                    coloredData[team] = data[team]; // Data is array of [x, y]\n                    // The color will be set in the chart function using getTeamColor(team, idx)\n                });\n                createScatterChart_vanilla(coloredData, 'chartTeamPointsVsAverage', 'Points vs. Average', axis_labels);\n                // Render legend after every second chart (here, always after this chart)\n                renderScatterLegend(teams);\n            } else {\n                console.error('createScatterChart_vanilla is not defined');\n            }\n        })\n        .catch(err =&gt; console.error('Error fetching scatter plot data:', err));\n}\n\nfunction renderScatterLegend(teams) {\n    const legendDiv = document.getElementById('scatterPlotLegend');",
        "signatures": {},
        "detailedLines": [
          {
            "text": "function renderScatterPlot() {",
            "lineNumber": 655
          },
          {
            "text": "    // Get current selection",
            "lineNumber": 656
          },
          {
            "text": "    const season = document.querySelector('input[name=\"season\"]:checked')?.value;",
            "lineNumber": 657
          },
          {
            "text": "    const league = document.querySelector('input[name=\"league\"]:checked')?.value;",
            "lineNumber": 658
          },
          {
            "text": "    if (!season || !league) {",
            "lineNumber": 659
          },
          {
            "text": "        alert('Please select a season and league.');",
            "lineNumber": 660
          },
          {
            "text": "        return;",
            "lineNumber": 661
          },
          {
            "text": "    }",
            "lineNumber": 662
          },
          {
            "text": "    fetch(&#96;/league/get_team_points_vs_average?season=${encodeURIComponent(season)}&amp;league=${encodeURIComponent(league)}&#96;)",
            "lineNumber": 663
          },
          {
            "text": "        .then(res =&gt; res.json())",
            "lineNumber": 664
          },
          {
            "text": "        .then(data =&gt; {",
            "lineNumber": 665
          },
          {
            "text": "            if (!data || typeof data !== 'object' || Array.isArray(data)) {",
            "lineNumber": 666
          },
          {
            "text": "                console.error('No valid data for scatter plot:', data);",
            "lineNumber": 667
          },
          {
            "text": "                return;",
            "lineNumber": 668
          },
          {
            "text": "            }",
            "lineNumber": 669
          },
          {
            "text": "            const axis_labels = {x: 'Points', y: 'Average'};",
            "lineNumber": 670
          },
          {
            "text": "            // Use color palette for each team",
            "lineNumber": 671
          },
          {
            "text": "            if (typeof createScatterChart_vanilla === 'function') {",
            "lineNumber": 672
          },
          {
            "text": "                // Patch: inject color into data for each team",
            "lineNumber": 673
          },
          {
            "text": "                const teams = Object.keys(data);",
            "lineNumber": 674
          },
          {
            "text": "                const coloredData = {};",
            "lineNumber": 675
          },
          {
            "text": "                teams.forEach((team, idx) =&gt; {",
            "lineNumber": 676
          },
          {
            "text": "                    coloredData[team] = data[team]; // Data is array of [x, y]",
            "lineNumber": 677
          },
          {
            "text": "                    // The color will be set in the chart function using getTeamColor(team, idx)",
            "lineNumber": 678
          },
          {
            "text": "                });",
            "lineNumber": 679
          },
          {
            "text": "                createScatterChart_vanilla(coloredData, 'chartTeamPointsVsAverage', 'Points vs. Average', axis_labels);",
            "lineNumber": 680
          },
          {
            "text": "                // Render legend after every second chart (here, always after this chart)",
            "lineNumber": 681
          },
          {
            "text": "                renderScatterLegend(teams);",
            "lineNumber": 682
          },
          {
            "text": "            } else {",
            "lineNumber": 683
          },
          {
            "text": "                console.error('createScatterChart_vanilla is not defined');",
            "lineNumber": 684
          },
          {
            "text": "            }",
            "lineNumber": 685
          },
          {
            "text": "        })",
            "lineNumber": 686
          },
          {
            "text": "        .catch(err =&gt; console.error('Error fetching scatter plot data:', err));",
            "lineNumber": 687
          },
          {
            "text": "}",
            "lineNumber": 688
          },
          {
            "lineNumber": 689
          },
          {
            "text": "function renderScatterLegend(teams) {",
            "lineNumber": 690
          },
          {
            "text": "    const legendDiv = document.getElementById('scatterPlotLegend');",
            "lineNumber": 691
          }
        ]
      },
      "score": 0.3082468509674072
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 663,
            "column": 16
          },
          "endPosition": {
            "line": 683,
            "column": 8
          }
        },
        "contents": "} catch (e) {\n                    return '';\n                }\n            }\n            return String(value);\n        }\n        : false;\n\n    // Set up initial sort if specified\n    const initialSort = data.default_sort ? [\n        {\n            column: data.default_sort.field,\n            dir: data.default_sort.dir || \"desc\"  // Default to descending\n        }\n    ] : undefined;\n\n    // Extract teams from data and update team color map\n    // This ensures team colors are available when rendering tables on direct navigation\n    let teams = [];\n    if (data.data &amp;&amp; data.data.length &gt; 0) {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "} catch (e) {",
            "lineNumber": 664
          },
          {
            "text": "                    return '';",
            "lineNumber": 665
          },
          {
            "text": "                }",
            "lineNumber": 666
          },
          {
            "text": "            }",
            "lineNumber": 667
          },
          {
            "text": "            return String(value);",
            "lineNumber": 668
          },
          {
            "text": "        }",
            "lineNumber": 669
          },
          {
            "text": "        : false;",
            "lineNumber": 670
          },
          {
            "lineNumber": 671
          },
          {
            "text": "    // Set up initial sort if specified",
            "lineNumber": 672
          },
          {
            "text": "    const initialSort = data.default_sort ? [",
            "lineNumber": 673
          },
          {
            "text": "        {",
            "lineNumber": 674
          },
          {
            "text": "            column: data.default_sort.field,",
            "lineNumber": 675
          },
          {
            "text": "            dir: data.default_sort.dir || \"desc\"  // Default to descending",
            "lineNumber": 676
          },
          {
            "text": "        }",
            "lineNumber": 677
          },
          {
            "text": "    ] : undefined;",
            "lineNumber": 678
          },
          {
            "lineNumber": 679
          },
          {
            "text": "    // Extract teams from data and update team color map",
            "lineNumber": 680
          },
          {
            "text": "    // This ensures team colors are available when rendering tables on direct navigation",
            "lineNumber": 681
          },
          {
            "text": "    let teams = [];",
            "lineNumber": 682
          },
          {
            "text": "    if (data.data &amp;&amp; data.data.length &gt; 0) {",
            "lineNumber": 683
          },
          {
            "text": "        ",
            "lineNumber": 684
          }
        ]
      },
      "score": 0.3064981698989868
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 512,
            "column": 36
          },
          "endPosition": {
            "line": 532
          }
        },
        "contents": "try {\n                                        const opponentNameCell = row.getCell('opponent_name');\n                                        if (opponentNameCell) {\n                                            teamName = opponentNameCell.getValue();\n                                        }\n                                    } catch (e) {\n                                        // Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            const color = getTeamColor(teamName);\n                            // Debug logging for opponent_position\n                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {\n                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${teamName}\", color=\"${color}\"&#96;);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "try {",
            "lineNumber": 513
          },
          {
            "text": "                                        const opponentNameCell = row.getCell('opponent_name');",
            "lineNumber": 514
          },
          {
            "text": "                                        if (opponentNameCell) {",
            "lineNumber": 515
          },
          {
            "text": "                                            teamName = opponentNameCell.getValue();",
            "lineNumber": 516
          },
          {
            "text": "                                        }",
            "lineNumber": 517
          },
          {
            "text": "                                    } catch (e) {",
            "lineNumber": 518
          },
          {
            "text": "                                        // Cell might not be rendered yet",
            "lineNumber": 519
          },
          {
            "text": "                                    }",
            "lineNumber": 520
          },
          {
            "text": "                                }",
            "lineNumber": 521
          },
          {
            "text": "                            }",
            "lineNumber": 522
          },
          {
            "text": "                        } else {",
            "lineNumber": 523
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 524
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 525
          },
          {
            "text": "                        }",
            "lineNumber": 526
          },
          {
            "text": "                        ",
            "lineNumber": 527
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 528
          },
          {
            "text": "                            const color = getTeamColor(teamName);",
            "lineNumber": 529
          },
          {
            "text": "                            // Debug logging for opponent_position",
            "lineNumber": 530
          },
          {
            "text": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
            "lineNumber": 531
          },
          {
            "text": "                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${teamName}\", color=\"${color}\"&#96;);",
            "lineNumber": 532
          }
        ]
      },
      "score": 0.30421435832977295
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\color_constants.py",
        "range": {
          "startPosition": {
            "line": 44,
            "column": 1
          },
          "endPosition": {
            "line": 71
          }
        },
        "contents": "def get_theme_color(color_name: str) -&gt; str:\n    \"\"\"\n    Get a theme color by name.\n    \n    Args:\n        color_name: Name of the color (e.g., 'background', 'primary', 'border')\n        \n    Returns:\n        Hex color string, or empty string if not found\n    \"\"\"\n    return THEME_COLORS.get(color_name, \"\")\n\n\ndef hex_to_rgb(hex_color: str) -&gt; tuple:\n    \"\"\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_theme_color(color_name: str) -&gt; str:",
            "lineNumber": 48,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 49
          },
          {
            "text": "    Get a theme color by name.",
            "lineNumber": 50
          },
          {
            "text": "    ",
            "lineNumber": 51
          },
          {
            "text": "    Args:",
            "lineNumber": 52
          },
          {
            "text": "        color_name: Name of the color (e.g., 'background', 'primary', 'border')",
            "lineNumber": 53
          },
          {
            "text": "        ",
            "lineNumber": 54
          },
          {
            "text": "    Returns:",
            "lineNumber": 55
          },
          {
            "text": "        Hex color string, or empty string if not found",
            "lineNumber": 56
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 57
          },
          {
            "text": "    return THEME_COLORS.get(color_name, \"\")",
            "lineNumber": 58,
            "isSignature": true
          },
          {
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "def hex_to_rgb(hex_color: str) -&gt; tuple:",
            "lineNumber": 61,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 62
          }
        ]
      },
      "score": 0.298671692609787
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1082
          },
          "endPosition": {
            "line": 1124
          }
        },
        "contents": "    if (!data || !data.columns || !data.data) {\n        console.error('Invalid data format');\n        return;\n    }\n\n    // Normalize columns: if bare Column objects are provided (have 'field' but no 'columns'),\n    // wrap them in a ColumnGroup with empty title to match expected structure\n    if (data.columns.length &gt; 0 &amp;&amp; data.columns[0].field &amp;&amp; !data.columns[0].columns) {\n        // These are bare Column objects, wrap them in a single group\n        data.columns = [{\n            title: \"\",\n            columns: data.columns\n        }];\n    }\n\n    // Get table configuration\n    const config = data.config || {};\n    \n    // Get options with defaults\n    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;\n    \n    // Initialize team colors if this is a table with team data\n    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {\n        // Extract team names from the data\n        // For most tables, team name is in the second column (row[1])\n        // For team vs team comparison, team name is in the first column (row[0])\n        let teams = [];\n        \n        \n        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)\n        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {\n            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        } else {\n            // Standard tables with team names in second column\n            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        }\n        \n        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {\n            window.updateTeamColorMap(teams);\n        }\n    }\n    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 1083
          },
          {
            "text": "        console.error('Invalid data format');",
            "lineNumber": 1084
          },
          {
            "text": "        return;",
            "lineNumber": 1085
          },
          {
            "text": "    }",
            "lineNumber": 1086
          },
          {
            "lineNumber": 1087
          },
          {
            "text": "    // Normalize columns: if bare Column objects are provided (have 'field' but no 'columns'),",
            "lineNumber": 1088
          },
          {
            "text": "    // wrap them in a ColumnGroup with empty title to match expected structure",
            "lineNumber": 1089
          },
          {
            "text": "    if (data.columns.length &gt; 0 &amp;&amp; data.columns[0].field &amp;&amp; !data.columns[0].columns) {",
            "lineNumber": 1090
          },
          {
            "text": "        // These are bare Column objects, wrap them in a single group",
            "lineNumber": 1091
          },
          {
            "text": "        data.columns = [{",
            "lineNumber": 1092
          },
          {
            "text": "            title: \"\",",
            "lineNumber": 1093
          },
          {
            "text": "            columns: data.columns",
            "lineNumber": 1094
          },
          {
            "text": "        }];",
            "lineNumber": 1095
          },
          {
            "text": "    }",
            "lineNumber": 1096
          },
          {
            "lineNumber": 1097
          },
          {
            "text": "    // Get table configuration",
            "lineNumber": 1098
          },
          {
            "text": "    const config = data.config || {};",
            "lineNumber": 1099
          },
          {
            "text": "    ",
            "lineNumber": 1100
          },
          {
            "text": "    // Get options with defaults",
            "lineNumber": 1101
          },
          {
            "text": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;",
            "lineNumber": 1102
          },
          {
            "text": "    ",
            "lineNumber": 1103
          },
          {
            "text": "    // Initialize team colors if this is a table with team data",
            "lineNumber": 1104
          },
          {
            "text": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
            "lineNumber": 1105
          },
          {
            "text": "        // Extract team names from the data",
            "lineNumber": 1106
          },
          {
            "text": "        // For most tables, team name is in the second column (row[1])",
            "lineNumber": 1107
          },
          {
            "text": "        // For team vs team comparison, team name is in the first column (row[0])",
            "lineNumber": 1108
          },
          {
            "text": "        let teams = [];",
            "lineNumber": 1109
          },
          {
            "text": "        ",
            "lineNumber": 1110
          },
          {
            "text": "        ",
            "lineNumber": 1111
          },
          {
            "text": "        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)",
            "lineNumber": 1112
          },
          {
            "text": "        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {",
            "lineNumber": 1113
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1114
          },
          {
            "text": "        } else {",
            "lineNumber": 1115
          },
          {
            "text": "            // Standard tables with team names in second column",
            "lineNumber": 1116
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1117
          },
          {
            "text": "        }",
            "lineNumber": 1118
          },
          {
            "text": "        ",
            "lineNumber": 1119
          },
          {
            "text": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
            "lineNumber": 1120
          },
          {
            "text": "            window.updateTeamColorMap(teams);",
            "lineNumber": 1121
          },
          {
            "text": "        }",
            "lineNumber": 1122
          },
          {
            "text": "    }",
            "lineNumber": 1123
          },
          {
            "text": "    ",
            "lineNumber": 1124
          }
        ]
      },
      "score": 0.2894218862056732
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "(() =&gt; {\n    const globalObj = window || {};\n\n    const TEAM_COLOR_PALETTES = {\n        harmonic10: [\n            \"#1F77B4\", \"#FF7F0E\", \"#2CA02C\", \"#D62728\", \"#9467BD\",\n            \"#8C564B\", \"#E377C2\", \"#7F7F7F\", \"#BCBD22\", \"#17BECF\"\n        ],\n        rainbowPastel: [\n            \"#1B8CA6\", \"#2CA89A\", \"#8CBF8A\", \"#E6C86E\", \"#F7A86E\",\n            \"#E86E56\", \"#D95A6A\", \"#C94C8A\", \"#A04CBF\", \"#D6A4E6\"\n        ]\n    };\n\n    const SEMANTIC_COLOR_MAPPINGS = {\n        harmonic10: { positive: 2, negative: 3, highlight: 9 },\n        rainbowPastel: { positive: 2, negative: 5, highlight: 9 }\n    };\n\n    // Theme colors - used throughout the application\n    const THEME_COLORS = {\n        // Primary colors\n        primary: \"#0a9dc7\",           // Dark blue - navbar, card headers\n        secondary: \"#4aa8c2\",         // Light blue - buttons, interactive elements\n        accent: \"#7dcfe6\",             // Lightest blue - highlights, accents\n        \n        // Background colors\n        background: \"#f8f9fa\",        // Main page background\n        surface: \"#ffffff\",           // Card/container background\n        surfaceAlt: \"#e9ecef\",        // Alternate surface (lighter gray)\n        surfaceLight: \"#f0f0f0\",      // Light gray variant\n        \n        // Text colors\n        textOnPrimary: \"#ffffff\",     // Text on primary background\n        textOnSecondary: \"#ffffff\",   // Text on secondary background\n        textOnLight: \"#0a9dc7\",       // Text on light background\n        \n        // Border colors\n        border: \"#264653\",             // Dark teal/green borders\n        borderLight: \"#dee2e6\",        // Light borders\n        borderSoft: \"rgba(15, 23, 42, 0.08)\", // Soft border (light mode)\n        \n        // Table colors\n        tableHeaderBg: \"#eef2f7\",     // Table header background\n        tableHeaderText: \"#0f172a\",   // Table header text\n        tableBodyText: \"#1f2933\",     // Table body text\n        tableMutedText: \"#64748b\",    // Muted text\n        \n        // Heat map colors\n        heatMapStart: \"#dddddd\"\n    };\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "(() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "    const globalObj = window || {};",
            "lineNumber": 2
          },
          {
            "lineNumber": 3
          },
          {
            "text": "    const TEAM_COLOR_PALETTES = {",
            "lineNumber": 4
          },
          {
            "text": "        harmonic10: [",
            "lineNumber": 5
          },
          {
            "text": "            \"#1F77B4\", \"#FF7F0E\", \"#2CA02C\", \"#D62728\", \"#9467BD\",",
            "lineNumber": 6
          },
          {
            "text": "            \"#8C564B\", \"#E377C2\", \"#7F7F7F\", \"#BCBD22\", \"#17BECF\"",
            "lineNumber": 7
          },
          {
            "text": "        ],",
            "lineNumber": 8
          },
          {
            "text": "        rainbowPastel: [",
            "lineNumber": 9
          },
          {
            "text": "            \"#1B8CA6\", \"#2CA89A\", \"#8CBF8A\", \"#E6C86E\", \"#F7A86E\",",
            "lineNumber": 10
          },
          {
            "text": "            \"#E86E56\", \"#D95A6A\", \"#C94C8A\", \"#A04CBF\", \"#D6A4E6\"",
            "lineNumber": 11
          },
          {
            "text": "        ]",
            "lineNumber": 12
          },
          {
            "text": "    };",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "    const SEMANTIC_COLOR_MAPPINGS = {",
            "lineNumber": 15
          },
          {
            "text": "        harmonic10: { positive: 2, negative: 3, highlight: 9 },",
            "lineNumber": 16
          },
          {
            "text": "        rainbowPastel: { positive: 2, negative: 5, highlight: 9 }",
            "lineNumber": 17
          },
          {
            "text": "    };",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "    // Theme colors - used throughout the application",
            "lineNumber": 20
          },
          {
            "text": "    const THEME_COLORS = {",
            "lineNumber": 21
          },
          {
            "text": "        // Primary colors",
            "lineNumber": 22
          },
          {
            "text": "        primary: \"#0a9dc7\",           // Dark blue - navbar, card headers",
            "lineNumber": 23
          },
          {
            "text": "        secondary: \"#4aa8c2\",         // Light blue - buttons, interactive elements",
            "lineNumber": 24
          },
          {
            "text": "        accent: \"#7dcfe6\",             // Lightest blue - highlights, accents",
            "lineNumber": 25
          },
          {
            "text": "        ",
            "lineNumber": 26
          },
          {
            "text": "        // Background colors",
            "lineNumber": 27
          },
          {
            "text": "        background: \"#f8f9fa\",        // Main page background",
            "lineNumber": 28
          },
          {
            "text": "        surface: \"#ffffff\",           // Card/container background",
            "lineNumber": 29
          },
          {
            "text": "        surfaceAlt: \"#e9ecef\",        // Alternate surface (lighter gray)",
            "lineNumber": 30
          },
          {
            "text": "        surfaceLight: \"#f0f0f0\",      // Light gray variant",
            "lineNumber": 31
          },
          {
            "text": "        ",
            "lineNumber": 32
          },
          {
            "text": "        // Text colors",
            "lineNumber": 33
          },
          {
            "text": "        textOnPrimary: \"#ffffff\",     // Text on primary background",
            "lineNumber": 34
          },
          {
            "text": "        textOnSecondary: \"#ffffff\",   // Text on secondary background",
            "lineNumber": 35
          },
          {
            "text": "        textOnLight: \"#0a9dc7\",       // Text on light background",
            "lineNumber": 36
          },
          {
            "text": "        ",
            "lineNumber": 37
          },
          {
            "text": "        // Border colors",
            "lineNumber": 38
          },
          {
            "text": "        border: \"#264653\",             // Dark teal/green borders",
            "lineNumber": 39
          },
          {
            "text": "        borderLight: \"#dee2e6\",        // Light borders",
            "lineNumber": 40
          },
          {
            "text": "        borderSoft: \"rgba(15, 23, 42, 0.08)\", // Soft border (light mode)",
            "lineNumber": 41
          },
          {
            "text": "        ",
            "lineNumber": 42
          },
          {
            "text": "        // Table colors",
            "lineNumber": 43
          },
          {
            "text": "        tableHeaderBg: \"#eef2f7\",     // Table header background",
            "lineNumber": 44
          },
          {
            "text": "        tableHeaderText: \"#0f172a\",   // Table header text",
            "lineNumber": 45
          },
          {
            "text": "        tableBodyText: \"#1f2933\",     // Table body text",
            "lineNumber": 46
          },
          {
            "text": "        tableMutedText: \"#64748b\",    // Muted text",
            "lineNumber": 47
          },
          {
            "text": "        ",
            "lineNumber": 48
          },
          {
            "text": "        // Heat map colors",
            "lineNumber": 49
          },
          {
            "text": "        heatMapStart: \"#dddddd\"",
            "lineNumber": 50
          },
          {
            "text": "    };",
            "lineNumber": 60
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.28466224670410156
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\nconst THEME_COLORS_DARK = {\n\n        heatMapHigh: \"#1b8da7\",\n        \n        // Status colors (adjusted for dark mode)\n        warning: \"#86e1b3\",\n        info: \"#a1e8c4\",\n        success: \"#d4edda\",\n        danger: \"#f8d7da\",\n    };\n\n    // First color = base table background, second = accent stripe\n    // This makes one of the stripe colors effectively the \"default\" color.\n    //const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#e9f0ff\"];\n    const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#999999\"];\n\n    let currentPaletteName = \"rainbowPastel\";\n    let currentPalette = TEAM_COLOR_PALETTES[currentPaletteName];\n    const teamColorMap = globalObj.teamColorMap || {};\n\n    function hexToRgb(hex) {\n        if (!hex) return [255, 255, 255];\n        let clean = hex.replace(\"#\", \"\");\n        if (clean.length === 3) {\n            clean = clean.split(\"\").map(c =&gt; c + c).join(\"\");\n        }\n        const bigint = parseInt(clean, 16);\n        return [(bigint &gt;&gt; 16) &amp; 255, (bigint &gt;&gt; 8) &amp; 255, bigint &amp; 255];\n    }\n\n    function toRgba(color, alpha = 1) {\n        if (!color) return &#96;rgba(255,255,255,${alpha})&#96;;\n        if (color.startsWith(\"rgb\")) {\n            return color.replace(\")\", &#96;, ${alpha})&#96;).replace(\"rgb\", \"rgba\");\n        }\n        const [r, g, b] = hexToRgb(color);\n        return &#96;rgba(${r}, ${g}, ${b}, ${alpha})&#96;;\n    }\n\n    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {\n        \n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 21,
                "column": 5
              },
              "endPosition": {
                "line": 21,
                "column": 11
              }
            },
            {
              "startPosition": {
                "line": 21,
                "column": 11
              },
              "endPosition": {
                "line": 22,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "const THEME_COLORS_DARK = {",
            "lineNumber": 63
          },
          {
            "lineNumber": 94
          },
          {
            "text": "        heatMapHigh: \"#1b8da7\",",
            "lineNumber": 95
          },
          {
            "text": "        ",
            "lineNumber": 96
          },
          {
            "text": "        // Status colors (adjusted for dark mode)",
            "lineNumber": 97
          },
          {
            "text": "        warning: \"#86e1b3\",",
            "lineNumber": 98
          },
          {
            "text": "        info: \"#a1e8c4\",",
            "lineNumber": 99
          },
          {
            "text": "        success: \"#d4edda\",",
            "lineNumber": 100
          },
          {
            "text": "        danger: \"#f8d7da\",",
            "lineNumber": 101
          },
          {
            "text": "    };",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "    // First color = base table background, second = accent stripe",
            "lineNumber": 104
          },
          {
            "text": "    // This makes one of the stripe colors effectively the \"default\" color.",
            "lineNumber": 105
          },
          {
            "text": "    //const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#e9f0ff\"];",
            "lineNumber": 106
          },
          {
            "text": "    const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#999999\"];",
            "lineNumber": 107
          },
          {
            "lineNumber": 108
          },
          {
            "text": "    let currentPaletteName = \"rainbowPastel\";",
            "lineNumber": 109
          },
          {
            "text": "    let currentPalette = TEAM_COLOR_PALETTES[currentPaletteName];",
            "lineNumber": 110
          },
          {
            "text": "    const teamColorMap = globalObj.teamColorMap || {};",
            "lineNumber": 111
          },
          {
            "lineNumber": 112
          },
          {
            "text": "    function hexToRgb(hex) {",
            "lineNumber": 113
          },
          {
            "text": "        if (!hex) return [255, 255, 255];",
            "lineNumber": 114
          },
          {
            "text": "        let clean = hex.replace(\"#\", \"\");",
            "lineNumber": 115
          },
          {
            "text": "        if (clean.length === 3) {",
            "lineNumber": 116
          },
          {
            "text": "            clean = clean.split(\"\").map(c =&gt; c + c).join(\"\");",
            "lineNumber": 117
          },
          {
            "text": "        }",
            "lineNumber": 118
          },
          {
            "text": "        const bigint = parseInt(clean, 16);",
            "lineNumber": 119
          },
          {
            "text": "        return [(bigint &gt;&gt; 16) &amp; 255, (bigint &gt;&gt; 8) &amp; 255, bigint &amp; 255];",
            "lineNumber": 120
          },
          {
            "text": "    }",
            "lineNumber": 121
          },
          {
            "lineNumber": 122
          },
          {
            "text": "    function toRgba(color, alpha = 1) {",
            "lineNumber": 123
          },
          {
            "text": "        if (!color) return &#96;rgba(255,255,255,${alpha})&#96;;",
            "lineNumber": 124
          },
          {
            "text": "        if (color.startsWith(\"rgb\")) {",
            "lineNumber": 125
          },
          {
            "text": "            return color.replace(\")\", &#96;, ${alpha})&#96;).replace(\"rgb\", \"rgba\");",
            "lineNumber": 126
          },
          {
            "text": "        }",
            "lineNumber": 127
          },
          {
            "text": "        const [r, g, b] = hexToRgb(color);",
            "lineNumber": 128
          },
          {
            "text": "        return &#96;rgba(${r}, ${g}, ${b}, ${alpha})&#96;;",
            "lineNumber": 129
          },
          {
            "text": "    }",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {",
            "lineNumber": 132
          },
          {
            "text": "        ",
            "lineNumber": 133
          },
          {
            "text": "    }",
            "lineNumber": 148
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.28277960419654846
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 327,
            "column": 40
          },
          "endPosition": {
            "line": 370
          }
        },
        "contents": "// Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            const color = getTeamColor(teamName);\n                            // Debug logging for opponent_position\n                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {\n                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${teamName}\", color=\"${color}\"&#96;);\n                            }\n                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;\n                        }\n                    }\n\n                    return value ?? '';\n                };\n\n                const sampleValue = transformedData.length ? transformedData[0][field] : null;\n                const isNumberColumn = typeof sampleValue === 'number';\n                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);\n\n                let colCssClass = column.cssClass || '';\n                let colHeaderClass = column.headerClass || '';\n                \n                // Build CSS classes\n                let cssClasses = [];\n                if (column.align === 'right') {\n                    cssClasses.push('text-end');\n                } else if (column.align === 'left') {\n                    cssClasses.push('text-start');\n                } else {\n                    cssClasses.push('text-center');\n                }\n                \n                if (isHighlighted) {\n                    cssClasses.push('tab-col-highlighted');\n                }\n                ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// Cell might not be rendered yet",
            "lineNumber": 328
          },
          {
            "text": "                                    }",
            "lineNumber": 329
          },
          {
            "text": "                                }",
            "lineNumber": 330
          },
          {
            "text": "                            }",
            "lineNumber": 331
          },
          {
            "text": "                        } else {",
            "lineNumber": 332
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 333
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 334
          },
          {
            "text": "                        }",
            "lineNumber": 335
          },
          {
            "text": "                        ",
            "lineNumber": 336
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 337
          },
          {
            "text": "                            const color = getTeamColor(teamName);",
            "lineNumber": 338
          },
          {
            "text": "                            // Debug logging for opponent_position",
            "lineNumber": 339
          },
          {
            "text": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
            "lineNumber": 340
          },
          {
            "text": "                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${teamName}\", color=\"${color}\"&#96;);",
            "lineNumber": 341
          },
          {
            "text": "                            }",
            "lineNumber": 342
          },
          {
            "text": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
            "lineNumber": 343
          },
          {
            "text": "                        }",
            "lineNumber": 344
          },
          {
            "text": "                    }",
            "lineNumber": 345
          },
          {
            "lineNumber": 346
          },
          {
            "text": "                    return value ?? '';",
            "lineNumber": 347
          },
          {
            "text": "                };",
            "lineNumber": 348
          },
          {
            "lineNumber": 349
          },
          {
            "text": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;",
            "lineNumber": 350
          },
          {
            "text": "                const isNumberColumn = typeof sampleValue === 'number';",
            "lineNumber": 351
          },
          {
            "text": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
            "lineNumber": 352
          },
          {
            "lineNumber": 353
          },
          {
            "text": "                let colCssClass = column.cssClass || '';",
            "lineNumber": 354
          },
          {
            "text": "                let colHeaderClass = column.headerClass || '';",
            "lineNumber": 355
          },
          {
            "text": "                ",
            "lineNumber": 356
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 357
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 358
          },
          {
            "text": "                if (column.align === 'right') {",
            "lineNumber": 359
          },
          {
            "text": "                    cssClasses.push('text-end');",
            "lineNumber": 360
          },
          {
            "text": "                } else if (column.align === 'left') {",
            "lineNumber": 361
          },
          {
            "text": "                    cssClasses.push('text-start');",
            "lineNumber": 362
          },
          {
            "text": "                } else {",
            "lineNumber": 363
          },
          {
            "text": "                    cssClasses.push('text-center');",
            "lineNumber": 364
          },
          {
            "text": "                }",
            "lineNumber": 365
          },
          {
            "text": "                ",
            "lineNumber": 366
          },
          {
            "text": "                if (isHighlighted) {",
            "lineNumber": 367
          },
          {
            "text": "                    cssClasses.push('tab-col-highlighted');",
            "lineNumber": 368
          },
          {
            "text": "                }",
            "lineNumber": 369
          },
          {
            "text": "                ",
            "lineNumber": 370
          }
        ]
      },
      "score": 0.26803499460220337
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\business_logic\\team.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 23,
            "column": 78
          }
        },
        "contents": "class Team:\n\n    def __init__(self, team_name_wo_number, team_number, players, home_alley):\n        self.team_name = team_name_wo_number + \" \" + str(team_number)\n        self.team_name_wo_number = team_name_wo_number\n        self.team_number = team_number\n        \n        self.players = players\n        self.home_alley = home_alley\n\n    def get_name(self):\n        return self.team_name\n\n    def get_name_wo_number(self):\n        return self.team_name_wo_number\n\n\n    def get_number_of_players(self):\n        return len(self.players)\n\n    def __str__(self):\n\n        players = \"\\n\".join([str(player) for player in self.players])\n        return \"\\n\" + self.team_name + \"\\n-----------------------\\n\" + players",
        "signatures": {},
        "detailedLines": [
          {
            "text": "class Team:",
            "lineNumber": 1,
            "isSignature": true
          },
          {
            "lineNumber": 2
          },
          {
            "text": "    def __init__(self, team_name_wo_number, team_number, players, home_alley):",
            "lineNumber": 3
          },
          {
            "text": "        self.team_name = team_name_wo_number + \" \" + str(team_number)",
            "lineNumber": 4
          },
          {
            "text": "        self.team_name_wo_number = team_name_wo_number",
            "lineNumber": 5
          },
          {
            "text": "        self.team_number = team_number",
            "lineNumber": 6
          },
          {
            "text": "        ",
            "lineNumber": 7
          },
          {
            "text": "        self.players = players",
            "lineNumber": 8
          },
          {
            "text": "        self.home_alley = home_alley",
            "lineNumber": 9
          },
          {
            "lineNumber": 10
          },
          {
            "text": "    def get_name(self):",
            "lineNumber": 11
          },
          {
            "text": "        return self.team_name",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "    def get_name_wo_number(self):",
            "lineNumber": 14
          },
          {
            "text": "        return self.team_name_wo_number",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "    def get_number_of_players(self):",
            "lineNumber": 18
          },
          {
            "text": "        return len(self.players)",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "    def __str__(self):",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "        players = \"\\n\".join([str(player) for player in self.players])",
            "lineNumber": 23
          },
          {
            "text": "        return \"\\n\" + self.team_name + \"\\n-----------------------\\n\" + players",
            "lineNumber": 24,
            "isSignature": true
          }
        ]
      },
      "score": 0.2662922143936157
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "from typing import List, Dict, Any, Optional, Union\nimport datetime\nimport pandas as pd\n\nfrom data_access.adapters.data_adapter_factory import DataAdapterFactory, DataAdapterSelector\nfrom data_access.models.league_models import LeagueQuery, TeamSeasonPerformance, LeagueStandings, TeamWeeklyPerformance\nfrom app.services.i18n_service import i18n_service\nfrom app.models.table_data import TableData, ColumnGroup, Column, PlotData, TileData\nfrom app.services.statistics_service import StatisticsService\nfrom app.models.statistics_models import LeagueStatistics, LeagueResults\nfrom app.models.series_data import SeriesData\nfrom data_access.schema import Columns\nfrom itertools import accumulate\nfrom app.config.debug_config import debug_config\nfrom app.utils.color_constants import get_theme_color, get_heat_map_color\nfrom app.utils.league_utils import (\n    format_float_one_decimal,\n    get_league_level,\n    convert_to_simple_types,\n    apply_heat_map_to_columns\n)\n# from data_access.series_data import calculate_series_data, get_player_series_data, get_team_series_data\n\n\nclass LeagueService:\n    def __init__(self, adapter_type=DataAdapterSelector.PANDAS, database: str = None):\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "from typing import List, Dict, Any, Optional, Union",
            "lineNumber": 1
          },
          {
            "text": "import datetime",
            "lineNumber": 2
          },
          {
            "text": "import pandas as pd",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "from data_access.adapters.data_adapter_factory import DataAdapterFactory, DataAdapterSelector",
            "lineNumber": 5
          },
          {
            "text": "from data_access.models.league_models import LeagueQuery, TeamSeasonPerformance, LeagueStandings, TeamWeeklyPerformance",
            "lineNumber": 6
          },
          {
            "text": "from app.services.i18n_service import i18n_service",
            "lineNumber": 7
          },
          {
            "text": "from app.models.table_data import TableData, ColumnGroup, Column, PlotData, TileData",
            "lineNumber": 8
          },
          {
            "text": "from app.services.statistics_service import StatisticsService",
            "lineNumber": 9
          },
          {
            "text": "from app.models.statistics_models import LeagueStatistics, LeagueResults",
            "lineNumber": 10
          },
          {
            "text": "from app.models.series_data import SeriesData",
            "lineNumber": 11
          },
          {
            "text": "from data_access.schema import Columns",
            "lineNumber": 12
          },
          {
            "text": "from itertools import accumulate",
            "lineNumber": 13
          },
          {
            "text": "from app.config.debug_config import debug_config",
            "lineNumber": 14
          },
          {
            "text": "from app.utils.color_constants import get_theme_color, get_heat_map_color",
            "lineNumber": 15
          },
          {
            "text": "from app.utils.league_utils import (",
            "lineNumber": 16
          },
          {
            "text": "    format_float_one_decimal,",
            "lineNumber": 17
          },
          {
            "text": "    get_league_level,",
            "lineNumber": 18
          },
          {
            "text": "    convert_to_simple_types,",
            "lineNumber": 19
          },
          {
            "text": "    apply_heat_map_to_columns",
            "lineNumber": 20
          },
          {
            "text": ")",
            "lineNumber": 21
          },
          {
            "text": "# from data_access.series_data import calculate_series_data, get_player_series_data, get_team_series_data",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "    def __init__(self, adapter_type=DataAdapterSelector.PANDAS, database: str = None):",
            "lineNumber": 26
          },
          {
            "text": "        ",
            "lineNumber": 27
          }
        ]
      },
      "score": 0.26576709747314453
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\charts.html",
        "range": {
          "startPosition": {
            "line": 350
          },
          "endPosition": {
            "line": 402
          }
        },
        "contents": "function createScatterChart_vanilla(data, chartId, title, axis_labels) {\n    const canvas = document.getElementById(chartId);\n    if (!canvas) {\n        console.error('createScatterChart_vanilla: Canvas not found:', chartId);\n        return;\n    }\n    const ctx = canvas.getContext('2d');\n    // Destroy existing chart if it exists\n    if (window[chartId + 'Instance'] instanceof Chart) {\n        window[chartId + 'Instance'].destroy();\n    }\n    // Collect all points for regression\n    const allPoints = Object.values(data).flat();\n    const xs = allPoints.map(point =&gt; point[0]);\n    const ys = allPoints.map(point =&gt; point[1]);\n    // Calculate regression line\n    const n = xs.length;\n    const sumX = xs.reduce((a, b) =&gt; a + b, 0);\n    const sumY = ys.reduce((a, b) =&gt; a + b, 0);\n    const sumXY = xs.reduce((sum, x, i) =&gt; sum + x * ys[i], 0);\n    const sumXX = xs.reduce((sum, x) =&gt; sum + x * x, 0);\n    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);\n    const intercept = (sumY - slope * sumX) / n;\n    // Create regression line points\n    const minX = Math.min(...xs);\n    const maxX = Math.max(...xs);\n    const regressionLine = {\n        label: 'Regression',\n        data: [\n            {x: minX, y: slope * minX + intercept},\n            {x: maxX, y: slope * maxX + intercept}\n        ],\n        type: 'line',\n        borderColor: '#000000',\n        borderWidth: 1,\n        borderDash: [5, 5],\n        pointRadius: 0,\n        fill: false\n    };\n    // Create datasets for each team using palette colors\n    const teams = Object.keys(data);\n    const datasets = teams.map((team, idx) =&gt; ({\n        label: team,\n        data: data[team].map(point =&gt; ({x: point[0], y: point[1]})),\n        borderColor: getTeamColor(team),\n        backgroundColor: getTeamColor(team),\n        pointRadius: 5\n    }));\n    // Add regression line to datasets\n    datasets.push(regressionLine);\n    window[chartId + 'Instance'] = new Chart(ctx, {\n        type: 'scatter',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "function createScatterChart_vanilla(data, chartId, title, axis_labels) {",
            "lineNumber": 351
          },
          {
            "text": "    const canvas = document.getElementById(chartId);",
            "lineNumber": 352
          },
          {
            "text": "    if (!canvas) {",
            "lineNumber": 353
          },
          {
            "text": "        console.error('createScatterChart_vanilla: Canvas not found:', chartId);",
            "lineNumber": 354
          },
          {
            "text": "        return;",
            "lineNumber": 355
          },
          {
            "text": "    }",
            "lineNumber": 356
          },
          {
            "text": "    const ctx = canvas.getContext('2d');",
            "lineNumber": 357
          },
          {
            "text": "    // Destroy existing chart if it exists",
            "lineNumber": 358
          },
          {
            "text": "    if (window[chartId + 'Instance'] instanceof Chart) {",
            "lineNumber": 359
          },
          {
            "text": "        window[chartId + 'Instance'].destroy();",
            "lineNumber": 360
          },
          {
            "text": "    }",
            "lineNumber": 361
          },
          {
            "text": "    // Collect all points for regression",
            "lineNumber": 362
          },
          {
            "text": "    const allPoints = Object.values(data).flat();",
            "lineNumber": 363
          },
          {
            "text": "    const xs = allPoints.map(point =&gt; point[0]);",
            "lineNumber": 364
          },
          {
            "text": "    const ys = allPoints.map(point =&gt; point[1]);",
            "lineNumber": 365
          },
          {
            "text": "    // Calculate regression line",
            "lineNumber": 366
          },
          {
            "text": "    const n = xs.length;",
            "lineNumber": 367
          },
          {
            "text": "    const sumX = xs.reduce((a, b) =&gt; a + b, 0);",
            "lineNumber": 368
          },
          {
            "text": "    const sumY = ys.reduce((a, b) =&gt; a + b, 0);",
            "lineNumber": 369
          },
          {
            "text": "    const sumXY = xs.reduce((sum, x, i) =&gt; sum + x * ys[i], 0);",
            "lineNumber": 370
          },
          {
            "text": "    const sumXX = xs.reduce((sum, x) =&gt; sum + x * x, 0);",
            "lineNumber": 371
          },
          {
            "text": "    const slope = (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX);",
            "lineNumber": 372
          },
          {
            "text": "    const intercept = (sumY - slope * sumX) / n;",
            "lineNumber": 373
          },
          {
            "text": "    // Create regression line points",
            "lineNumber": 374
          },
          {
            "text": "    const minX = Math.min(...xs);",
            "lineNumber": 375
          },
          {
            "text": "    const maxX = Math.max(...xs);",
            "lineNumber": 376
          },
          {
            "text": "    const regressionLine = {",
            "lineNumber": 377
          },
          {
            "text": "        label: 'Regression',",
            "lineNumber": 378
          },
          {
            "text": "        data: [",
            "lineNumber": 379
          },
          {
            "text": "            {x: minX, y: slope * minX + intercept},",
            "lineNumber": 380
          },
          {
            "text": "            {x: maxX, y: slope * maxX + intercept}",
            "lineNumber": 381
          },
          {
            "text": "        ],",
            "lineNumber": 382
          },
          {
            "text": "        type: 'line',",
            "lineNumber": 383
          },
          {
            "text": "        borderColor: '#000000',",
            "lineNumber": 384
          },
          {
            "text": "        borderWidth: 1,",
            "lineNumber": 385
          },
          {
            "text": "        borderDash: [5, 5],",
            "lineNumber": 386
          },
          {
            "text": "        pointRadius: 0,",
            "lineNumber": 387
          },
          {
            "text": "        fill: false",
            "lineNumber": 388
          },
          {
            "text": "    };",
            "lineNumber": 389
          },
          {
            "text": "    // Create datasets for each team using palette colors",
            "lineNumber": 390
          },
          {
            "text": "    const teams = Object.keys(data);",
            "lineNumber": 391
          },
          {
            "text": "    const datasets = teams.map((team, idx) =&gt; ({",
            "lineNumber": 392
          },
          {
            "text": "        label: team,",
            "lineNumber": 393
          },
          {
            "text": "        data: data[team].map(point =&gt; ({x: point[0], y: point[1]})),",
            "lineNumber": 394
          },
          {
            "text": "        borderColor: getTeamColor(team),",
            "lineNumber": 395
          },
          {
            "text": "        backgroundColor: getTeamColor(team),",
            "lineNumber": 396
          },
          {
            "text": "        pointRadius: 5",
            "lineNumber": 397
          },
          {
            "text": "    }));",
            "lineNumber": 398
          },
          {
            "text": "    // Add regression line to datasets",
            "lineNumber": 399
          },
          {
            "text": "    datasets.push(regressionLine);",
            "lineNumber": 400
          },
          {
            "text": "    window[chartId + 'Instance'] = new Chart(ctx, {",
            "lineNumber": 401
          },
          {
            "text": "        type: 'scatter',",
            "lineNumber": 402
          }
        ]
      },
      "score": 0.2649393081665039
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\color_constants.py",
        "range": {
          "startPosition": {
            "line": 71,
            "column": 62
          },
          "endPosition": {
            "line": 120,
            "column": 32
          }
        },
        "contents": "def get_heat_map_color(value: float, min_val: float, max_val: float, \n                       start_color: str = None, end_color: str = None,\n                       use_low_high: bool = True) -&gt; str:\n    \"\"\"\n    Generate heat map color interpolating between start and end colors.\n    Matches the JavaScript ColorUtils.getHeatMapColor implementation.\n    \n    Args:\n        value: The value to map to a color\n        min_val: Minimum value in the range\n        max_val: Maximum value in the range\n        start_color: Optional start color (low value). If None, uses theme color\n        end_color: Optional end color (high value). If None, uses theme color\n        use_low_high: If True (default), uses heat_map_low/high. If False, uses heat_map_start/end\n        \n    Returns:\n        RGB color string (e.g., \"rgb(123, 45, 67)\")\n    \"\"\"\n    if value == \"\" or value is None or min_val == max_val:\n        return get_theme_color(\"background\") or \"#f8f9fa\"\n    \n    # Use theme colors if not specified\n    if start_color is None:\n        if use_low_high:\n            start_color = THEME_COLORS.get(\"heat_map_low\", \"#d9596a\")\n        else:\n            start_color = THEME_COLORS.get(\"heat_map_start\", \"#dddddd\")\n    if end_color is None:\n        if use_low_high:\n            end_color = THEME_COLORS.get(\"heat_map_high\", \"#1b8da7\")\n        else:\n            end_color = THEME_COLORS.get(\"heat_map_end\", \"#1b8da7\")\n    \n    # Normalize value to 0-1 range, clamped between 0 and 1\n    ratio = (value - min_val) / (max_val - min_val) if max_val != min_val else 0\n    ratio = max(0, min(1, ratio))  # Clamp between 0 and 1\n    \n    # Convert hex colors to RGB\n    r1, g1, b1 = hex_to_rgb(start_color)\n    r2, g2, b2 = hex_to_rgb(end_color)\n    \n    # Interpolate between the two colors\n    r = round(r1 + (r2 - r1) * ratio)\n    g = round(g1 + (g2 - g1) * ratio)\n    b = round(b1 + (b2 - b1) * ratio)\n    \n    return f\"rgb({r}, {g}, {b})\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_heat_map_color(value: float, min_val: float, max_val: float, ",
            "lineNumber": 75,
            "isSignature": true
          },
          {
            "text": "                       start_color: str = None, end_color: str = None,",
            "lineNumber": 76,
            "isSignature": true
          },
          {
            "text": "                       use_low_high: bool = True) -&gt; str:",
            "lineNumber": 77,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 78
          },
          {
            "text": "    Generate heat map color interpolating between start and end colors.",
            "lineNumber": 79
          },
          {
            "text": "    Matches the JavaScript ColorUtils.getHeatMapColor implementation.",
            "lineNumber": 80
          },
          {
            "text": "    ",
            "lineNumber": 81
          },
          {
            "text": "    Args:",
            "lineNumber": 82
          },
          {
            "text": "        value: The value to map to a color",
            "lineNumber": 83
          },
          {
            "text": "        min_val: Minimum value in the range",
            "lineNumber": 84
          },
          {
            "text": "        max_val: Maximum value in the range",
            "lineNumber": 85
          },
          {
            "text": "        start_color: Optional start color (low value). If None, uses theme color",
            "lineNumber": 86
          },
          {
            "text": "        end_color: Optional end color (high value). If None, uses theme color",
            "lineNumber": 87
          },
          {
            "text": "        use_low_high: If True (default), uses heat_map_low/high. If False, uses heat_map_start/end",
            "lineNumber": 88
          },
          {
            "text": "        ",
            "lineNumber": 89
          },
          {
            "text": "    Returns:",
            "lineNumber": 90
          },
          {
            "text": "        RGB color string (e.g., \"rgb(123, 45, 67)\")",
            "lineNumber": 91
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 92
          },
          {
            "text": "    if value == \"\" or value is None or min_val == max_val:",
            "lineNumber": 93
          },
          {
            "text": "        return get_theme_color(\"background\") or \"#f8f9fa\"",
            "lineNumber": 94
          },
          {
            "text": "    ",
            "lineNumber": 95
          },
          {
            "text": "    # Use theme colors if not specified",
            "lineNumber": 96
          },
          {
            "text": "    if start_color is None:",
            "lineNumber": 97
          },
          {
            "text": "        if use_low_high:",
            "lineNumber": 98
          },
          {
            "text": "            start_color = THEME_COLORS.get(\"heat_map_low\", \"#d9596a\")",
            "lineNumber": 99
          },
          {
            "text": "        else:",
            "lineNumber": 100
          },
          {
            "text": "            start_color = THEME_COLORS.get(\"heat_map_start\", \"#dddddd\")",
            "lineNumber": 101
          },
          {
            "text": "    if end_color is None:",
            "lineNumber": 102
          },
          {
            "text": "        if use_low_high:",
            "lineNumber": 103
          },
          {
            "text": "            end_color = THEME_COLORS.get(\"heat_map_high\", \"#1b8da7\")",
            "lineNumber": 104
          },
          {
            "text": "        else:",
            "lineNumber": 105
          },
          {
            "text": "            end_color = THEME_COLORS.get(\"heat_map_end\", \"#1b8da7\")",
            "lineNumber": 106
          },
          {
            "text": "    ",
            "lineNumber": 107
          },
          {
            "text": "    # Normalize value to 0-1 range, clamped between 0 and 1",
            "lineNumber": 108
          },
          {
            "text": "    ratio = (value - min_val) / (max_val - min_val) if max_val != min_val else 0",
            "lineNumber": 109
          },
          {
            "text": "    ratio = max(0, min(1, ratio))  # Clamp between 0 and 1",
            "lineNumber": 110
          },
          {
            "text": "    ",
            "lineNumber": 111
          },
          {
            "text": "    # Convert hex colors to RGB",
            "lineNumber": 112
          },
          {
            "text": "    r1, g1, b1 = hex_to_rgb(start_color)",
            "lineNumber": 113
          },
          {
            "text": "    r2, g2, b2 = hex_to_rgb(end_color)",
            "lineNumber": 114
          },
          {
            "text": "    ",
            "lineNumber": 115
          },
          {
            "text": "    # Interpolate between the two colors",
            "lineNumber": 116
          },
          {
            "text": "    r = round(r1 + (r2 - r1) * ratio)",
            "lineNumber": 117
          },
          {
            "text": "    g = round(g1 + (g2 - g1) * ratio)",
            "lineNumber": 118
          },
          {
            "text": "    b = round(b1 + (b2 - b1) * ratio)",
            "lineNumber": 119
          },
          {
            "text": "    ",
            "lineNumber": 120
          },
          {
            "text": "    return f\"rgb({r}, {g}, {b})\"",
            "lineNumber": 121,
            "isSignature": true
          }
        ]
      },
      "score": 0.26432645320892334
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1697,
            "column": 16
          },
          "endPosition": {
            "line": 1719
          }
        },
        "contents": "if (colGroup.columns) {\n                    colGroup.columns.forEach((col, index) =&gt; {\n                        const td = document.createElement('td');\n                        td.style.padding = '8px';\n                        td.style.textAlign = col.align || 'center';\n                        \n                        // Get the value for this cell\n                        const value = rowData[colIndex];\n                        colIndex++;\n                        // Apply dynamic heat map colors based on cell value (for sorting compatibility)\n                        if (data.metadata &amp;&amp; data.metadata.score_range &amp;&amp; data.metadata.points_range) {\n                            if (value === \"\") {\n                                // Empty cells (diagonal) get light gray background\n                                td.style.backgroundColor = ColorUtils.getThemeColor('background') || \"#f8f9fa\";\n                            } else {\n                                const cellValue = parseFloat(value);\n                                if (!isNaN(cellValue)) {\n                                    // Determine if this is a score or points column based on column position\n                                    // Skip the first column (team name) - colIndex starts at 1 after team name\n                                    const adjustedColIndex = colIndex - 1; // Adjust for team name column\n                                    // Based on debug output: Col 4 (adjustedColIndex 3) has score 751, Col 5 (adjustedColIndex 4) has points 5\n                                    // So the pattern is: Score (odd adjustedColIndex), Points (even adjustedColIndex)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "if (colGroup.columns) {",
            "lineNumber": 1698
          },
          {
            "text": "                    colGroup.columns.forEach((col, index) =&gt; {",
            "lineNumber": 1699
          },
          {
            "text": "                        const td = document.createElement('td');",
            "lineNumber": 1700
          },
          {
            "text": "                        td.style.padding = '8px';",
            "lineNumber": 1701
          },
          {
            "text": "                        td.style.textAlign = col.align || 'center';",
            "lineNumber": 1702
          },
          {
            "text": "                        ",
            "lineNumber": 1703
          },
          {
            "text": "                        // Get the value for this cell",
            "lineNumber": 1704
          },
          {
            "text": "                        const value = rowData[colIndex];",
            "lineNumber": 1705
          },
          {
            "text": "                        colIndex++;",
            "lineNumber": 1706
          },
          {
            "text": "                        // Apply dynamic heat map colors based on cell value (for sorting compatibility)",
            "lineNumber": 1707
          },
          {
            "text": "                        if (data.metadata &amp;&amp; data.metadata.score_range &amp;&amp; data.metadata.points_range) {",
            "lineNumber": 1708
          },
          {
            "text": "                            if (value === \"\") {",
            "lineNumber": 1709
          },
          {
            "text": "                                // Empty cells (diagonal) get light gray background",
            "lineNumber": 1710
          },
          {
            "text": "                                td.style.backgroundColor = ColorUtils.getThemeColor('background') || \"#f8f9fa\";",
            "lineNumber": 1711
          },
          {
            "text": "                            } else {",
            "lineNumber": 1712
          },
          {
            "text": "                                const cellValue = parseFloat(value);",
            "lineNumber": 1713
          },
          {
            "text": "                                if (!isNaN(cellValue)) {",
            "lineNumber": 1714
          },
          {
            "text": "                                    // Determine if this is a score or points column based on column position",
            "lineNumber": 1715
          },
          {
            "text": "                                    // Skip the first column (team name) - colIndex starts at 1 after team name",
            "lineNumber": 1716
          },
          {
            "text": "                                    const adjustedColIndex = colIndex - 1; // Adjust for team name column",
            "lineNumber": 1717
          },
          {
            "text": "                                    // Based on debug output: Col 4 (adjustedColIndex 3) has score 751, Col 5 (adjustedColIndex 4) has points 5",
            "lineNumber": 1718
          },
          {
            "text": "                                    // So the pattern is: Score (odd adjustedColIndex), Points (even adjustedColIndex)",
            "lineNumber": 1719
          }
        ]
      },
      "score": 0.2625023126602173
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\chart-adapters.js",
        "range": {
          "startPosition": {
            "line": 204,
            "column": 1
          },
          "endPosition": {
            "line": 209,
            "column": 51
          }
        },
        "contents": "// Make functions globally available\nwindow.createAreaChart_forContentBlock = createAreaChart_forContentBlock;\nwindow.createLineChart_forContentBlock = createLineChart_forContentBlock;\nwindow.getTeamColorForBlock = getTeamColorForBlock;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// Make functions globally available",
            "lineNumber": 207
          },
          {
            "text": "window.createAreaChart_forContentBlock = createAreaChart_forContentBlock;",
            "lineNumber": 208
          },
          {
            "text": "window.createLineChart_forContentBlock = createLineChart_forContentBlock;",
            "lineNumber": 209
          },
          {
            "text": "window.getTeamColorForBlock = getTeamColorForBlock;",
            "lineNumber": 210
          }
        ]
      },
      "score": 0.25855863094329834
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "function getTeamColor|const getTeamColor|getTeamColor\\s*=",
  "path": "app",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "function getTeamColor|const getTeamColor|getTeamColor\\s*=",
    "path": "app",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 1597,
                  "content": "                                    if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1751,
                  "content": "                            if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1930,
                  "content": "function getTeamColor(teamName) {"
                },
                {
                  "lineNumber": 1931,
                  "content": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {"
                }
              ]
            },
            {
              "file": "app\\templates\\components\\charts.html",
              "matches": [
                {
                  "lineNumber": 47,
                  "content": "function getTeamColor(team) {"
                },
                {
                  "lineNumber": 56,
                  "content": "window.getTeamColor = getTeamColor;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\theme\\color-utils.js",
              "matches": [
                {
                  "lineNumber": 279,
                  "content": "    function getTeamColor(teamName, fallbackIndex = 0) {"
                },
                {
                  "lineNumber": 432,
                  "content": "    globalObj.getTeamColor = getTeamColor;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 348,
                  "content": "                &lt;div style=\"width: 20px; height: 20px; border-radius: 50%; background-color: ${window.ColorUtils ? window.ColorUtils.getTeamColor(team) : (typeof getTeamColor === 'function' ? getTeamColor(team) : (window.ColorUtils?.getThemeColor('primary') || '#007bff'))}; margin-right: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;\"&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\league\\league-chart-utils.js",
              "matches": [
                {
                  "lineNumber": 244,
                  "content": "function getTeamColor(teamName, teamIndex = 0) {"
                },
                {
                  "lineNumber": 245,
                  "content": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-history-block.js",
              "matches": [
                {
                  "lineNumber": 186,
                  "content": "        if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 192,
                  "content": "        if (typeof getTeamColor === 'function') {"
                }
              ]
            },
            {
              "file": "app\\static\\js\\chart-adapters.js",
              "matches": [
                {
                  "lineNumber": 182,
                  "content": "function getTeamColorForBlock(teamName) {"
                },
                {
                  "lineNumber": 183,
                  "content": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 186,
                  "content": "    if (typeof getTeamColor === 'function') {"
                }
              ]
            }
          ],
          "totalLines": 16,
          "totalMatchedLines": 16
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking if `getTeamColor` is defined in `tables.html` and how it's used:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---



---


`getTeamColor` returns `getPaletteColor(0)` (first palette color) when the team name isn't in `teamColorMap`. This likely explains why all opponent positions show the same color. Checking if opponent team names are added to the color map. Adding normalization/trimming to the team name lookup:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "f6404ecb-86ba-4344-a517-f4ddd83f70a2"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "updateTeamColorMap|extractTeamNames",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "updateTeamColorMap|extractTeamNames",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "696:        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
              "matches": [
                {
                  "lineNumber": 697,
                  "content": "            window.updateTeamColorMap(teams);"
                },
                {
                  "lineNumber": 1124,
                  "content": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {"
                },
                {
                  "lineNumber": 1125,
                  "content": "            window.updateTeamColorMap(teams);"
                }
              ]
            }
          ],
          "totalLines": 3,
          "totalMatchedLines": 3
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking how team names are extracted and if opponent names are included:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---


The team extraction only includes team names (column 1), not opponent names (column 7). Updating it to also include opponent names:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "4fba91fc-6a7c-4078-a351-41d69811c794"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/tables.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/tables.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


The issue: the code that builds the team color map only extracted team names (column 1), not opponent names (column 7). So opponent names weren't in the color map, causing all opponent positions to use the same fallback color.

**The fix:**
1. Updated the team extraction logic to also include opponent names when an `opponent_name` field exists in the column definitions
2. Added normalization (trimming) of team names before color lookup to handle whitespace issues
3. Added debug logging to verify the fix

The code now:
- Extracts both team names (from column 1) and opponent names (from the `opponent_name` column)
- Removes duplicates
- Updates the team color map with all unique team names

Refresh the page and check the console. You should see:
1. The opponent team names being extracted and added to the color map
2. Different colors for each opponent position
3. Debug logs showing the team names and colors being used

The opponent position circles should now show the correct team colors.

---

_**User (2025-12-06 20:11Z)**_

works! so now apply a heatmap the 2 pairs of cols on points and score

---

_**Agent (model default, mode Agent)**_



---


Checking how heatmaps are applied in the codebase, then applying them to the points and pins columns:


---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are heatmap colors applied to table columns in the backend?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\league_utils.py",
        "range": {
          "startPosition": {
            "line": 56,
            "column": 24
          },
          "endPosition": {
            "line": 103,
            "column": 24
          }
        },
        "contents": "def apply_heat_map_to_columns(table_data: List[List], cell_metadata: Dict[str, Dict],\n                              column_indices: List[int], min_val: float = None, max_val: float = None) -&gt; Dict[str, Dict]:\n    \"\"\"\n    Apply heat map coloring to specified column indices.\n    \n    Args:\n        table_data: List of rows, where each row is a list of values\n        cell_metadata: Dictionary mapping \"row:col\" to cell metadata\n        column_indices: List of column indices (0-based) to apply coloring to\n        min_val: Optional minimum value for color scale. If None, calculated from data\n        max_val: Optional maximum value for color scale. If None, calculated from data\n        \n    Returns:\n        Updated cell_metadata dictionary\n    \"\"\"\n    if not table_data or not column_indices:\n        return cell_metadata\n    \n    # Extract all values from specified columns\n    all_values = []\n    for row in table_data:\n        for col_idx in column_indices:\n            if col_idx &lt; len(row):\n                value = row[col_idx]\n                # Only include numeric values (skip empty strings, None, etc.)\n                if isinstance(value, (int, float)) and value != \"\":\n                    all_values.append(value)\n    \n    if not all_values:\n        return cell_metadata\n    \n    # Calculate min/max if not provided\n    calculated_min = min(all_values) if min_val is None else min_val\n    calculated_max = max(all_values) if max_val is None else max_val\n    \n    # Apply coloring to each cell in specified columns\n    for row_idx, row in enumerate(table_data):\n        for col_idx in column_indices:\n            if col_idx &lt; len(row):\n                value = row[col_idx]\n                if isinstance(value, (int, float)) and value != \"\":\n                    color = get_heat_map_color(value, calculated_min, calculated_max)\n                    cell_metadata[f\"{row_idx}:{col_idx}\"] = {\"backgroundColor\": color}\n    \n    return cell_metadata",
        "signatures": {},
        "detailedLines": [
          {
            "text": "def apply_heat_map_to_columns(table_data: List[List], cell_metadata: Dict[str, Dict],",
            "lineNumber": 60,
            "isSignature": true
          },
          {
            "text": "                              column_indices: List[int], min_val: float = None, max_val: float = None) -&gt; Dict[str, Dict]:",
            "lineNumber": 61,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 62
          },
          {
            "text": "    Apply heat map coloring to specified column indices.",
            "lineNumber": 63
          },
          {
            "text": "    ",
            "lineNumber": 64
          },
          {
            "text": "    Args:",
            "lineNumber": 65
          },
          {
            "text": "        table_data: List of rows, where each row is a list of values",
            "lineNumber": 66
          },
          {
            "text": "        cell_metadata: Dictionary mapping \"row:col\" to cell metadata",
            "lineNumber": 67
          },
          {
            "text": "        column_indices: List of column indices (0-based) to apply coloring to",
            "lineNumber": 68
          },
          {
            "text": "        min_val: Optional minimum value for color scale. If None, calculated from data",
            "lineNumber": 69
          },
          {
            "text": "        max_val: Optional maximum value for color scale. If None, calculated from data",
            "lineNumber": 70
          },
          {
            "text": "        ",
            "lineNumber": 71
          },
          {
            "text": "    Returns:",
            "lineNumber": 72
          },
          {
            "text": "        Updated cell_metadata dictionary",
            "lineNumber": 73
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 74
          },
          {
            "text": "    if not table_data or not column_indices:",
            "lineNumber": 75
          },
          {
            "text": "        return cell_metadata",
            "lineNumber": 76
          },
          {
            "text": "    ",
            "lineNumber": 77
          },
          {
            "text": "    # Extract all values from specified columns",
            "lineNumber": 78
          },
          {
            "text": "    all_values = []",
            "lineNumber": 79
          },
          {
            "text": "    for row in table_data:",
            "lineNumber": 80
          },
          {
            "text": "        for col_idx in column_indices:",
            "lineNumber": 81
          },
          {
            "text": "            if col_idx &lt; len(row):",
            "lineNumber": 82
          },
          {
            "text": "                value = row[col_idx]",
            "lineNumber": 83
          },
          {
            "text": "                # Only include numeric values (skip empty strings, None, etc.)",
            "lineNumber": 84
          },
          {
            "text": "                if isinstance(value, (int, float)) and value != \"\":",
            "lineNumber": 85
          },
          {
            "text": "                    all_values.append(value)",
            "lineNumber": 86
          },
          {
            "text": "    ",
            "lineNumber": 87
          },
          {
            "text": "    if not all_values:",
            "lineNumber": 88
          },
          {
            "text": "        return cell_metadata",
            "lineNumber": 89
          },
          {
            "text": "    ",
            "lineNumber": 90
          },
          {
            "text": "    # Calculate min/max if not provided",
            "lineNumber": 91
          },
          {
            "text": "    calculated_min = min(all_values) if min_val is None else min_val",
            "lineNumber": 92
          },
          {
            "text": "    calculated_max = max(all_values) if max_val is None else max_val",
            "lineNumber": 93
          },
          {
            "text": "    ",
            "lineNumber": 94
          },
          {
            "text": "    # Apply coloring to each cell in specified columns",
            "lineNumber": 95
          },
          {
            "text": "    for row_idx, row in enumerate(table_data):",
            "lineNumber": 96
          },
          {
            "text": "        for col_idx in column_indices:",
            "lineNumber": 97
          },
          {
            "text": "            if col_idx &lt; len(row):",
            "lineNumber": 98
          },
          {
            "text": "                value = row[col_idx]",
            "lineNumber": 99
          },
          {
            "text": "                if isinstance(value, (int, float)) and value != \"\":",
            "lineNumber": 100
          },
          {
            "text": "                    color = get_heat_map_color(value, calculated_min, calculated_max)",
            "lineNumber": 101
          },
          {
            "text": "                    cell_metadata[f\"{row_idx}:{col_idx}\"] = {\"backgroundColor\": color}",
            "lineNumber": 102
          },
          {
            "text": "    ",
            "lineNumber": 103
          },
          {
            "text": "    return cell_metadata",
            "lineNumber": 104,
            "isSignature": true
          }
        ]
      },
      "score": 0.5335672497749329
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1696,
            "column": 12
          },
          "endPosition": {
            "line": 1719
          }
        },
        "contents": "const tr = document.createElement('tr');\n            \n            let colIndex = 0;  // Track the flat column index\n            \n            // Apply styling based on metadata if available and special styling is enabled\n            if (enableSpecialRowStyling &amp;&amp; data.row_metadata &amp;&amp; data.row_metadata[rowIndex]) {\n                const rowMetadata = data.row_metadata[rowIndex];\n                const styling = rowMetadata.styling || {};\n                \n                // Apply row-level styles\n                Object.entries(styling).forEach(([key, value]) =&gt; {\n                    tr.style[key] = value;\n                });\n            }\n            \n            data.columns.forEach((colGroup, groupIndex) =&gt; {\n                if (colGroup.columns) {\n                    colGroup.columns.forEach((col, index) =&gt; {\n                        const td = document.createElement('td');\n                        td.style.padding = '8px';\n                        td.style.textAlign = col.align || 'center';\n                        \n                        // Get the value for this cell",
        "signatures": {},
        "detailedLines": [
          {
            "text": "const tr = document.createElement('tr');",
            "lineNumber": 1697
          },
          {
            "text": "            ",
            "lineNumber": 1698
          },
          {
            "text": "            let colIndex = 0;  // Track the flat column index",
            "lineNumber": 1699
          },
          {
            "text": "            ",
            "lineNumber": 1700
          },
          {
            "text": "            // Apply styling based on metadata if available and special styling is enabled",
            "lineNumber": 1701
          },
          {
            "text": "            if (enableSpecialRowStyling &amp;&amp; data.row_metadata &amp;&amp; data.row_metadata[rowIndex]) {",
            "lineNumber": 1702
          },
          {
            "text": "                const rowMetadata = data.row_metadata[rowIndex];",
            "lineNumber": 1703
          },
          {
            "text": "                const styling = rowMetadata.styling || {};",
            "lineNumber": 1704
          },
          {
            "text": "                ",
            "lineNumber": 1705
          },
          {
            "text": "                // Apply row-level styles",
            "lineNumber": 1706
          },
          {
            "text": "                Object.entries(styling).forEach(([key, value]) =&gt; {",
            "lineNumber": 1707
          },
          {
            "text": "                    tr.style[key] = value;",
            "lineNumber": 1708
          },
          {
            "text": "                });",
            "lineNumber": 1709
          },
          {
            "text": "            }",
            "lineNumber": 1710
          },
          {
            "text": "            ",
            "lineNumber": 1711
          },
          {
            "text": "            data.columns.forEach((colGroup, groupIndex) =&gt; {",
            "lineNumber": 1712
          },
          {
            "text": "                if (colGroup.columns) {",
            "lineNumber": 1713
          },
          {
            "text": "                    colGroup.columns.forEach((col, index) =&gt; {",
            "lineNumber": 1714
          },
          {
            "text": "                        const td = document.createElement('td');",
            "lineNumber": 1715
          },
          {
            "text": "                        td.style.padding = '8px';",
            "lineNumber": 1716
          },
          {
            "text": "                        td.style.textAlign = col.align || 'center';",
            "lineNumber": 1717
          },
          {
            "text": "                        ",
            "lineNumber": 1718
          },
          {
            "text": "                        // Get the value for this cell",
            "lineNumber": 1719
          }
        ]
      },
      "score": 0.48721373081207275
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':\n\n                for opponent in sorted_teams:\n                    if team != opponent:\n                        if opponent in comparison_data[team]:\n                            score = comparison_data[team][opponent]['avg_score']\n                            points = comparison_data[team][opponent]['avg_points']\n                        else:\n                            score = 0.0\n                            points = 0.0\n                        \n                        row.extend([score, points])\n                        col_idx += 2\n                    else:\n                        # Diagonal cells - empty cells\n                        row.extend([\"\", \"\"])\n                        cell_metadata[f\"{row_idx}:{col_idx}\"] = {\"backgroundColor\": get_theme_color(\"background\")}\n                        cell_metadata[f\"{row_idx}:{col_idx + 1}\"] = {\"backgroundColor\": get_theme_color(\"background\")}\n                        col_idx += 2\n                \n                table_data.append(row)\n            \n            # ========== APPLY HEAT MAP COLORING ==========\n            # Apply heat map using generic function (automatically skips empty diagonal cells)\n            self._apply_heat_map_to_columns(table_data, cell_metadata, score_column_indices, score_min, score_max)\n            self._apply_heat_map_to_columns(table_data, cell_metadata, points_column_indices, points_min, points_max)\n            self._apply_heat_map_to_columns(table_data, cell_metadata, [avg_score_col_idx], score_min, score_max)\n            self._apply_heat_map_to_columns(table_data, cell_metadata, [avg_points_col_idx], points_min, points_max)\n            \n            # ========== RETURN TABLE DATA ==========\n            return",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3026,
                "column": 5
              },
              "endPosition": {
                "line": 3027,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':",
            "lineNumber": 3026
          },
          {
            "lineNumber": 3307
          },
          {
            "text": "                for opponent in sorted_teams:",
            "lineNumber": 3308
          },
          {
            "text": "                    if team != opponent:",
            "lineNumber": 3309
          },
          {
            "text": "                        if opponent in comparison_data[team]:",
            "lineNumber": 3310
          },
          {
            "text": "                            score = comparison_data[team][opponent]['avg_score']",
            "lineNumber": 3311
          },
          {
            "text": "                            points = comparison_data[team][opponent]['avg_points']",
            "lineNumber": 3312
          },
          {
            "text": "                        else:",
            "lineNumber": 3313
          },
          {
            "text": "                            score = 0.0",
            "lineNumber": 3314
          },
          {
            "text": "                            points = 0.0",
            "lineNumber": 3315
          },
          {
            "text": "                        ",
            "lineNumber": 3316
          },
          {
            "text": "                        row.extend([score, points])",
            "lineNumber": 3317
          },
          {
            "text": "                        col_idx += 2",
            "lineNumber": 3318
          },
          {
            "text": "                    else:",
            "lineNumber": 3319
          },
          {
            "text": "                        # Diagonal cells - empty cells",
            "lineNumber": 3320
          },
          {
            "text": "                        row.extend([\"\", \"\"])",
            "lineNumber": 3321
          },
          {
            "text": "                        cell_metadata[f\"{row_idx}:{col_idx}\"] = {\"backgroundColor\": get_theme_color(\"background\")}",
            "lineNumber": 3322
          },
          {
            "text": "                        cell_metadata[f\"{row_idx}:{col_idx + 1}\"] = {\"backgroundColor\": get_theme_color(\"background\")}",
            "lineNumber": 3323
          },
          {
            "text": "                        col_idx += 2",
            "lineNumber": 3324
          },
          {
            "text": "                ",
            "lineNumber": 3325
          },
          {
            "text": "                table_data.append(row)",
            "lineNumber": 3326
          },
          {
            "text": "            ",
            "lineNumber": 3327
          },
          {
            "text": "            # ========== APPLY HEAT MAP COLORING ==========",
            "lineNumber": 3328
          },
          {
            "text": "            # Apply heat map using generic function (automatically skips empty diagonal cells)",
            "lineNumber": 3329
          },
          {
            "text": "            self._apply_heat_map_to_columns(table_data, cell_metadata, score_column_indices, score_min, score_max)",
            "lineNumber": 3330
          },
          {
            "text": "            self._apply_heat_map_to_columns(table_data, cell_metadata, points_column_indices, points_min, points_max)",
            "lineNumber": 3331
          },
          {
            "text": "            self._apply_heat_map_to_columns(table_data, cell_metadata, [avg_score_col_idx], score_min, score_max)",
            "lineNumber": 3332
          },
          {
            "text": "            self._apply_heat_map_to_columns(table_data, cell_metadata, [avg_points_col_idx], points_min, points_max)",
            "lineNumber": 3333
          },
          {
            "text": "            ",
            "lineNumber": 3334
          },
          {
            "text": "            # ========== RETURN TABLE DATA ==========",
            "lineNumber": 3335
          },
          {
            "text": "            return",
            "lineNumber": 3336
          }
        ]
      },
      "score": 0.4262394905090332
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1682
          },
          "endPosition": {
            "line": 1700
          }
        },
        "contents": "                            }\n                        });\n                    }\n                });\n                \n                tbody.appendChild(tr1);\n                tbody.appendChild(tr2);\n            }\n        });\n    }\n    \n    // Function to update table body with regular logic (original implementation)\n    function updateTableBodyRegular(tableData, enableSpecialRowStyling) {\n        tableData.forEach((rowData, rowIndex) =&gt; {\n            const tr = document.createElement('tr');\n            \n            let colIndex = 0;  // Track the flat column index\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                            }",
            "lineNumber": 1683
          },
          {
            "text": "                        });",
            "lineNumber": 1684
          },
          {
            "text": "                    }",
            "lineNumber": 1685
          },
          {
            "text": "                });",
            "lineNumber": 1686
          },
          {
            "text": "                ",
            "lineNumber": 1687
          },
          {
            "text": "                tbody.appendChild(tr1);",
            "lineNumber": 1688
          },
          {
            "text": "                tbody.appendChild(tr2);",
            "lineNumber": 1689
          },
          {
            "text": "            }",
            "lineNumber": 1690
          },
          {
            "text": "        });",
            "lineNumber": 1691
          },
          {
            "text": "    }",
            "lineNumber": 1692
          },
          {
            "text": "    ",
            "lineNumber": 1693
          },
          {
            "text": "    // Function to update table body with regular logic (original implementation)",
            "lineNumber": 1694
          },
          {
            "text": "    function updateTableBodyRegular(tableData, enableSpecialRowStyling) {",
            "lineNumber": 1695
          },
          {
            "text": "        tableData.forEach((rowData, rowIndex) =&gt; {",
            "lineNumber": 1696
          },
          {
            "text": "            const tr = document.createElement('tr');",
            "lineNumber": 1697
          },
          {
            "text": "            ",
            "lineNumber": 1698
          },
          {
            "text": "            let colIndex = 0;  // Track the flat column index",
            "lineNumber": 1699
          },
          {
            "text": "            ",
            "lineNumber": 1700
          }
        ]
      },
      "score": 0.42384374141693115
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\color_constants.py",
        "range": {
          "startPosition": {
            "line": 71,
            "column": 62
          },
          "endPosition": {
            "line": 120,
            "column": 32
          }
        },
        "contents": "def get_heat_map_color(value: float, min_val: float, max_val: float, \n                       start_color: str = None, end_color: str = None,\n                       use_low_high: bool = True) -&gt; str:\n    \"\"\"\n    Generate heat map color interpolating between start and end colors.\n    Matches the JavaScript ColorUtils.getHeatMapColor implementation.\n    \n    Args:\n        value: The value to map to a color\n        min_val: Minimum value in the range\n        max_val: Maximum value in the range\n        start_color: Optional start color (low value). If None, uses theme color\n        end_color: Optional end color (high value). If None, uses theme color\n        use_low_high: If True (default), uses heat_map_low/high. If False, uses heat_map_start/end\n        \n    Returns:\n        RGB color string (e.g., \"rgb(123, 45, 67)\")\n    \"\"\"\n    if value == \"\" or value is None or min_val == max_val:\n        return get_theme_color(\"background\") or \"#f8f9fa\"\n    \n    # Use theme colors if not specified\n    if start_color is None:\n        if use_low_high:\n            start_color = THEME_COLORS.get(\"heat_map_low\", \"#d9596a\")\n        else:\n            start_color = THEME_COLORS.get(\"heat_map_start\", \"#dddddd\")\n    if end_color is None:\n        if use_low_high:\n            end_color = THEME_COLORS.get(\"heat_map_high\", \"#1b8da7\")\n        else:\n            end_color = THEME_COLORS.get(\"heat_map_end\", \"#1b8da7\")\n    \n    # Normalize value to 0-1 range, clamped between 0 and 1\n    ratio = (value - min_val) / (max_val - min_val) if max_val != min_val else 0\n    ratio = max(0, min(1, ratio))  # Clamp between 0 and 1\n    \n    # Convert hex colors to RGB\n    r1, g1, b1 = hex_to_rgb(start_color)\n    r2, g2, b2 = hex_to_rgb(end_color)\n    \n    # Interpolate between the two colors\n    r = round(r1 + (r2 - r1) * ratio)\n    g = round(g1 + (g2 - g1) * ratio)\n    b = round(b1 + (b2 - b1) * ratio)\n    \n    return f\"rgb({r}, {g}, {b})\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "def get_heat_map_color(value: float, min_val: float, max_val: float, ",
            "lineNumber": 75,
            "isSignature": true
          },
          {
            "text": "                       start_color: str = None, end_color: str = None,",
            "lineNumber": 76,
            "isSignature": true
          },
          {
            "text": "                       use_low_high: bool = True) -&gt; str:",
            "lineNumber": 77,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 78
          },
          {
            "text": "    Generate heat map color interpolating between start and end colors.",
            "lineNumber": 79
          },
          {
            "text": "    Matches the JavaScript ColorUtils.getHeatMapColor implementation.",
            "lineNumber": 80
          },
          {
            "text": "    ",
            "lineNumber": 81
          },
          {
            "text": "    Args:",
            "lineNumber": 82
          },
          {
            "text": "        value: The value to map to a color",
            "lineNumber": 83
          },
          {
            "text": "        min_val: Minimum value in the range",
            "lineNumber": 84
          },
          {
            "text": "        max_val: Maximum value in the range",
            "lineNumber": 85
          },
          {
            "text": "        start_color: Optional start color (low value). If None, uses theme color",
            "lineNumber": 86
          },
          {
            "text": "        end_color: Optional end color (high value). If None, uses theme color",
            "lineNumber": 87
          },
          {
            "text": "        use_low_high: If True (default), uses heat_map_low/high. If False, uses heat_map_start/end",
            "lineNumber": 88
          },
          {
            "text": "        ",
            "lineNumber": 89
          },
          {
            "text": "    Returns:",
            "lineNumber": 90
          },
          {
            "text": "        RGB color string (e.g., \"rgb(123, 45, 67)\")",
            "lineNumber": 91
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 92
          },
          {
            "text": "    if value == \"\" or value is None or min_val == max_val:",
            "lineNumber": 93
          },
          {
            "text": "        return get_theme_color(\"background\") or \"#f8f9fa\"",
            "lineNumber": 94
          },
          {
            "text": "    ",
            "lineNumber": 95
          },
          {
            "text": "    # Use theme colors if not specified",
            "lineNumber": 96
          },
          {
            "text": "    if start_color is None:",
            "lineNumber": 97
          },
          {
            "text": "        if use_low_high:",
            "lineNumber": 98
          },
          {
            "text": "            start_color = THEME_COLORS.get(\"heat_map_low\", \"#d9596a\")",
            "lineNumber": 99
          },
          {
            "text": "        else:",
            "lineNumber": 100
          },
          {
            "text": "            start_color = THEME_COLORS.get(\"heat_map_start\", \"#dddddd\")",
            "lineNumber": 101
          },
          {
            "text": "    if end_color is None:",
            "lineNumber": 102
          },
          {
            "text": "        if use_low_high:",
            "lineNumber": 103
          },
          {
            "text": "            end_color = THEME_COLORS.get(\"heat_map_high\", \"#1b8da7\")",
            "lineNumber": 104
          },
          {
            "text": "        else:",
            "lineNumber": 105
          },
          {
            "text": "            end_color = THEME_COLORS.get(\"heat_map_end\", \"#1b8da7\")",
            "lineNumber": 106
          },
          {
            "text": "    ",
            "lineNumber": 107
          },
          {
            "text": "    # Normalize value to 0-1 range, clamped between 0 and 1",
            "lineNumber": 108
          },
          {
            "text": "    ratio = (value - min_val) / (max_val - min_val) if max_val != min_val else 0",
            "lineNumber": 109
          },
          {
            "text": "    ratio = max(0, min(1, ratio))  # Clamp between 0 and 1",
            "lineNumber": 110
          },
          {
            "text": "    ",
            "lineNumber": 111
          },
          {
            "text": "    # Convert hex colors to RGB",
            "lineNumber": 112
          },
          {
            "text": "    r1, g1, b1 = hex_to_rgb(start_color)",
            "lineNumber": 113
          },
          {
            "text": "    r2, g2, b2 = hex_to_rgb(end_color)",
            "lineNumber": 114
          },
          {
            "text": "    ",
            "lineNumber": 115
          },
          {
            "text": "    # Interpolate between the two colors",
            "lineNumber": 116
          },
          {
            "text": "    r = round(r1 + (r2 - r1) * ratio)",
            "lineNumber": 117
          },
          {
            "text": "    g = round(g1 + (g2 - g1) * ratio)",
            "lineNumber": 118
          },
          {
            "text": "    b = round(b1 + (b2 - b1) * ratio)",
            "lineNumber": 119
          },
          {
            "text": "    ",
            "lineNumber": 120
          },
          {
            "text": "    return f\"rgb({r}, {g}, {b})\"",
            "lineNumber": 121,
            "isSignature": true
          }
        ]
      },
      "score": 0.403792142868042
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_analysis(self, league: str, season: str, team: str) -&gt; Dict[str, Any]:\n\n            \n            # Return data using existing SeriesData interface\n            return {\n                'performance_data': performance_series.to_dict(),\n                'win_percentage_data': win_percentage_series.to_dict(),\n                'weeks': [f'Week {int(w)}' for w in weeks],\n                'players': [str(p) for p in players],\n                'team': str(team),\n                'league': str(league),\n                'season': str(season)\n            }\n            \n        except Exception as e:\n            print(f\"Error in get_team_analysis: {e}\")\n            return {\n                'error': f'Error analyzing team data: {str(e)}',\n                'performance_data': [],\n                'win_percentage_data': [],\n                'weeks': [],\n                'players': []\n            }\n\n    def _apply_heat_map_to_columns(self, table_data: List[List], cell_metadata: Dict[str, Dict],\n                                    column_indices: List[int], min_val: float = None, max_val: float = None) -&gt; Dict[str, Dict]:\n        \"\"\"\n        Apply heat map coloring to specified column indices (delegates to utility function).\n        \n        Args:\n            table_data: List of rows, where each row is a list of values\n            cell_metadata: Dictionary mapping \"row:col\" to cell metadata\n            column_indices: List of column indices (0-based) to apply coloring to\n            min_val: Optional minimum value for color scale. If None, calculated from data\n            max_val: Optional maximum value for color scale. If None, calculated from data\n            \n        Returns:\n            Updated cell_metadata dictionary\n        \"\"\"\n        return apply_heat_map_to_columns(table_data, cell_metadata, column_indices, min_val, max_val)\n\n    def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':\n        ",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2786,
                "column": 5
              },
              "endPosition": {
                "line": 2787,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_analysis(self, league: str, season: str, team: str) -&gt; Dict[str, Any]:",
            "lineNumber": 2786
          },
          {
            "lineNumber": 2986
          },
          {
            "text": "            ",
            "lineNumber": 2987
          },
          {
            "text": "            # Return data using existing SeriesData interface",
            "lineNumber": 2988
          },
          {
            "text": "            return {",
            "lineNumber": 2989
          },
          {
            "text": "                'performance_data': performance_series.to_dict(),",
            "lineNumber": 2990
          },
          {
            "text": "                'win_percentage_data': win_percentage_series.to_dict(),",
            "lineNumber": 2991
          },
          {
            "text": "                'weeks': [f'Week {int(w)}' for w in weeks],",
            "lineNumber": 2992
          },
          {
            "text": "                'players': [str(p) for p in players],",
            "lineNumber": 2993
          },
          {
            "text": "                'team': str(team),",
            "lineNumber": 2994
          },
          {
            "text": "                'league': str(league),",
            "lineNumber": 2995
          },
          {
            "text": "                'season': str(season)",
            "lineNumber": 2996
          },
          {
            "text": "            }",
            "lineNumber": 2997
          },
          {
            "text": "            ",
            "lineNumber": 2998
          },
          {
            "text": "        except Exception as e:",
            "lineNumber": 2999
          },
          {
            "text": "            print(f\"Error in get_team_analysis: {e}\")",
            "lineNumber": 3000
          },
          {
            "text": "            return {",
            "lineNumber": 3001
          },
          {
            "text": "                'error': f'Error analyzing team data: {str(e)}',",
            "lineNumber": 3002
          },
          {
            "text": "                'performance_data': [],",
            "lineNumber": 3003
          },
          {
            "text": "                'win_percentage_data': [],",
            "lineNumber": 3004
          },
          {
            "text": "                'weeks': [],",
            "lineNumber": 3005
          },
          {
            "text": "                'players': []",
            "lineNumber": 3006
          },
          {
            "text": "            }",
            "lineNumber": 3007
          },
          {
            "lineNumber": 3008
          },
          {
            "text": "    def _apply_heat_map_to_columns(self, table_data: List[List], cell_metadata: Dict[str, Dict],",
            "lineNumber": 3009
          },
          {
            "text": "                                    column_indices: List[int], min_val: float = None, max_val: float = None) -&gt; Dict[str, Dict]:",
            "lineNumber": 3010
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 3011
          },
          {
            "text": "        Apply heat map coloring to specified column indices (delegates to utility function).",
            "lineNumber": 3012
          },
          {
            "text": "        ",
            "lineNumber": 3013
          },
          {
            "text": "        Args:",
            "lineNumber": 3014
          },
          {
            "text": "            table_data: List of rows, where each row is a list of values",
            "lineNumber": 3015
          },
          {
            "text": "            cell_metadata: Dictionary mapping \"row:col\" to cell metadata",
            "lineNumber": 3016
          },
          {
            "text": "            column_indices: List of column indices (0-based) to apply coloring to",
            "lineNumber": 3017
          },
          {
            "text": "            min_val: Optional minimum value for color scale. If None, calculated from data",
            "lineNumber": 3018
          },
          {
            "text": "            max_val: Optional maximum value for color scale. If None, calculated from data",
            "lineNumber": 3019
          },
          {
            "text": "            ",
            "lineNumber": 3020
          },
          {
            "text": "        Returns:",
            "lineNumber": 3021
          },
          {
            "text": "            Updated cell_metadata dictionary",
            "lineNumber": 3022
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 3023
          },
          {
            "text": "        return apply_heat_map_to_columns(table_data, cell_metadata, column_indices, min_val, max_val)",
            "lineNumber": 3024
          },
          {
            "lineNumber": 3025
          },
          {
            "text": "    def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':",
            "lineNumber": 3026
          },
          {
            "text": "        ",
            "lineNumber": 3027
          }
        ]
      },
      "score": 0.37391141057014465
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 54,
            "column": 8
          }
        },
        "contents": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;\n&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\nfunction createTable(config) {\n    const {\n        data,\n        columns,\n        headerGroups = [],  // This contains the actual colspan values\n        rowNumbering = true,\n        positionChange = false\n    } = config;\n\n    let currentData = [...data];\n\n    const colors = ColorUtils.getGradientColors(\n        headerGroups.length, \n        ColorUtils.getThemeColor('surface') || '#ffffff', \n        ColorUtils.getThemeColor('accent') || '#7ec2f8'\n    );\n\n    // Create mappings for column colors and last group columns\n    const columnColors = {};\n    const lastGroupColumns = {};\n    let currentColumn = 0;\n    headerGroups.forEach((group, groupIndex) =&gt; {\n        const isLastGroup = groupIndex === headerGroups.length - 1;\n        const colspan = group.colspan || 1;  // Get actual colspan from the group\n        for (let i = 0; i &lt; colspan; i++) {\n            columnColors[currentColumn] = colors[groupIndex];\n            lastGroupColumns[currentColumn] = isLastGroup;\n            currentColumn++;\n        }\n    });\n\n    const createHeaderGroups = () =&gt; {\n        if (!headerGroups || headerGroups.length === 0) return '';\n        \n        return &#96;\n            &lt;tr&gt;\n                ${headerGroups.map((group, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        colspan=\"${group.colspan || 1}\" \n                        style=\"background-color: ${colors[index]}; \n                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;\n                        ${group.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;",
            "lineNumber": 1
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 2
          },
          {
            "text": "&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 5
          },
          {
            "text": "function createTable(config) {",
            "lineNumber": 6
          },
          {
            "text": "    const {",
            "lineNumber": 7
          },
          {
            "text": "        data,",
            "lineNumber": 8
          },
          {
            "text": "        columns,",
            "lineNumber": 9
          },
          {
            "text": "        headerGroups = [],  // This contains the actual colspan values",
            "lineNumber": 10
          },
          {
            "text": "        rowNumbering = true,",
            "lineNumber": 11
          },
          {
            "text": "        positionChange = false",
            "lineNumber": 12
          },
          {
            "text": "    } = config;",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "    let currentData = [...data];",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "    const colors = ColorUtils.getGradientColors(",
            "lineNumber": 17
          },
          {
            "text": "        headerGroups.length, ",
            "lineNumber": 18
          },
          {
            "text": "        ColorUtils.getThemeColor('surface') || '#ffffff', ",
            "lineNumber": 19
          },
          {
            "text": "        ColorUtils.getThemeColor('accent') || '#7ec2f8'",
            "lineNumber": 20
          },
          {
            "text": "    );",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "    // Create mappings for column colors and last group columns",
            "lineNumber": 23
          },
          {
            "text": "    const columnColors = {};",
            "lineNumber": 24
          },
          {
            "text": "    const lastGroupColumns = {};",
            "lineNumber": 25
          },
          {
            "text": "    let currentColumn = 0;",
            "lineNumber": 26
          },
          {
            "text": "    headerGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 27
          },
          {
            "text": "        const isLastGroup = groupIndex === headerGroups.length - 1;",
            "lineNumber": 28
          },
          {
            "text": "        const colspan = group.colspan || 1;  // Get actual colspan from the group",
            "lineNumber": 29
          },
          {
            "text": "        for (let i = 0; i &lt; colspan; i++) {",
            "lineNumber": 30
          },
          {
            "text": "            columnColors[currentColumn] = colors[groupIndex];",
            "lineNumber": 31
          },
          {
            "text": "            lastGroupColumns[currentColumn] = isLastGroup;",
            "lineNumber": 32
          },
          {
            "text": "            currentColumn++;",
            "lineNumber": 33
          },
          {
            "text": "        }",
            "lineNumber": 34
          },
          {
            "text": "    });",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "    const createHeaderGroups = () =&gt; {",
            "lineNumber": 37
          },
          {
            "text": "        if (!headerGroups || headerGroups.length === 0) return '';",
            "lineNumber": 38
          },
          {
            "text": "        ",
            "lineNumber": 39
          },
          {
            "text": "        return &#96;",
            "lineNumber": 40
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 41
          },
          {
            "text": "                ${headerGroups.map((group, index) =&gt; &#96;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 43
          },
          {
            "text": "                        colspan=\"${group.colspan || 1}\" ",
            "lineNumber": 44
          },
          {
            "text": "                        style=\"background-color: ${colors[index]}; ",
            "lineNumber": 45
          },
          {
            "text": "                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                        ${group.title || ''}",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        ",
            "lineNumber": 55
          }
        ]
      },
      "score": 0.36110246181488037
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 431
          },
          "endPosition": {
            "line": 473
          }
        },
        "contents": "        \n        // Use backend flag for highlighting\n        const isHighlighted = group.highlighted === true;\n\n        // Build cssClass: combine striped class (already added by assignGroupStripeCss) with highlight class\n        let groupCssClass = group.cssClass || '';\n        if (isHighlighted) {\n            groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();\n        }\n\n        const groupDefinition = {\n            title: group.title || '',\n            headerHozAlign: 'center',\n            cssClass: groupCssClass,\n            columns: group.columns.map((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return null;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add stripe class for column group coloring; actual colors come from CSS\n                    if (useStripedGroups) {\n                        element.classList.add('col-group-' + groupIndex);\n                    }\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        ",
            "lineNumber": 432
          },
          {
            "text": "        // Use backend flag for highlighting",
            "lineNumber": 433
          },
          {
            "text": "        const isHighlighted = group.highlighted === true;",
            "lineNumber": 434
          },
          {
            "lineNumber": 435
          },
          {
            "text": "        // Build cssClass: combine striped class (already added by assignGroupStripeCss) with highlight class",
            "lineNumber": 436
          },
          {
            "text": "        let groupCssClass = group.cssClass || '';",
            "lineNumber": 437
          },
          {
            "text": "        if (isHighlighted) {",
            "lineNumber": 438
          },
          {
            "text": "            groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();",
            "lineNumber": 439
          },
          {
            "text": "        }",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "        const groupDefinition = {",
            "lineNumber": 442
          },
          {
            "text": "            title: group.title || '',",
            "lineNumber": 443
          },
          {
            "text": "            headerHozAlign: 'center',",
            "lineNumber": 444
          },
          {
            "text": "            cssClass: groupCssClass,",
            "lineNumber": 445
          },
          {
            "text": "            columns: group.columns.map((column, columnIndex) =&gt; {",
            "lineNumber": 446
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 447
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 448
          },
          {
            "text": "                    return null;",
            "lineNumber": 449
          },
          {
            "text": "                }",
            "lineNumber": 450
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 451
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 452
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 453
          },
          {
            "text": "                ",
            "lineNumber": 454
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 455
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 456
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 457
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 458
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 459
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "                    // Add stripe class for column group coloring; actual colors come from CSS",
            "lineNumber": 462
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 463
          },
          {
            "text": "                        element.classList.add('col-group-' + groupIndex);",
            "lineNumber": 464
          },
          {
            "text": "                    }",
            "lineNumber": 465
          },
          {
            "lineNumber": 466
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 467
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 468
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 469
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 470
          },
          {
            "text": "                    }",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 473
          }
        ]
      },
      "score": 0.35622459650039673
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 327,
            "column": 40
          },
          "endPosition": {
            "line": 368
          }
        },
        "contents": "// Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            // Normalize team name (trim whitespace) to ensure it matches the color map\n                            const normalizedTeamName = String(teamName).trim();\n                            const color = getTeamColor(normalizedTeamName);\n                            // Debug logging for opponent_position\n                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {\n                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${normalizedTeamName}\", color=\"${color}\", inMap=${window.ColorUtils?.teamColorMap?.[normalizedTeamName] ? 'yes' : 'no'}&#96;);\n                            }\n                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;\n                        }\n                    }\n\n                    return value ?? '';\n                };\n\n                const sampleValue = transformedData.length ? transformedData[0][field] : null;\n                const isNumberColumn = typeof sampleValue === 'number';\n                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);\n\n                let colCssClass = column.cssClass || '';\n                let colHeaderClass = column.headerClass || '';\n                \n                // Build CSS classes\n                let cssClasses = [];\n                if (column.align === 'right') {\n                    cssClasses.push('text-end');\n                } else if (column.align === 'left') {\n                    cssClasses.push('text-start');\n                } else {\n                    cssClasses.push('text-center');\n                }\n                ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// Cell might not be rendered yet",
            "lineNumber": 328
          },
          {
            "text": "                                    }",
            "lineNumber": 329
          },
          {
            "text": "                                }",
            "lineNumber": 330
          },
          {
            "text": "                            }",
            "lineNumber": 331
          },
          {
            "text": "                        } else {",
            "lineNumber": 332
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 333
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 334
          },
          {
            "text": "                        }",
            "lineNumber": 335
          },
          {
            "text": "                        ",
            "lineNumber": 336
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 337
          },
          {
            "text": "                            // Normalize team name (trim whitespace) to ensure it matches the color map",
            "lineNumber": 338
          },
          {
            "text": "                            const normalizedTeamName = String(teamName).trim();",
            "lineNumber": 339
          },
          {
            "text": "                            const color = getTeamColor(normalizedTeamName);",
            "lineNumber": 340
          },
          {
            "text": "                            // Debug logging for opponent_position",
            "lineNumber": 341
          },
          {
            "text": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
            "lineNumber": 342
          },
          {
            "text": "                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${normalizedTeamName}\", color=\"${color}\", inMap=${window.ColorUtils?.teamColorMap?.[normalizedTeamName] ? 'yes' : 'no'}&#96;);",
            "lineNumber": 343
          },
          {
            "text": "                            }",
            "lineNumber": 344
          },
          {
            "text": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
            "lineNumber": 345
          },
          {
            "text": "                        }",
            "lineNumber": 346
          },
          {
            "text": "                    }",
            "lineNumber": 347
          },
          {
            "lineNumber": 348
          },
          {
            "text": "                    return value ?? '';",
            "lineNumber": 349
          },
          {
            "text": "                };",
            "lineNumber": 350
          },
          {
            "lineNumber": 351
          },
          {
            "text": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;",
            "lineNumber": 352
          },
          {
            "text": "                const isNumberColumn = typeof sampleValue === 'number';",
            "lineNumber": 353
          },
          {
            "text": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
            "lineNumber": 354
          },
          {
            "lineNumber": 355
          },
          {
            "text": "                let colCssClass = column.cssClass || '';",
            "lineNumber": 356
          },
          {
            "text": "                let colHeaderClass = column.headerClass || '';",
            "lineNumber": 357
          },
          {
            "text": "                ",
            "lineNumber": 358
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 359
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 360
          },
          {
            "text": "                if (column.align === 'right') {",
            "lineNumber": 361
          },
          {
            "text": "                    cssClasses.push('text-end');",
            "lineNumber": 362
          },
          {
            "text": "                } else if (column.align === 'left') {",
            "lineNumber": 363
          },
          {
            "text": "                    cssClasses.push('text-start');",
            "lineNumber": 364
          },
          {
            "text": "                } else {",
            "lineNumber": 365
          },
          {
            "text": "                    cssClasses.push('text-center');",
            "lineNumber": 366
          },
          {
            "text": "                }",
            "lineNumber": 367
          },
          {
            "text": "                ",
            "lineNumber": 368
          }
        ]
      },
      "score": 0.34777870774269104
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 48
          },
          "endPosition": {
            "line": 104,
            "column": 8
          }
        },
        "contents": "                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        return &#96;\n            &lt;tr&gt;\n                ${columns.map((col, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        style=\"background-color: ${columnColors[index]};\n                               color: ${lastGroupColumns[index] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;\n                        ${col.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createTableRows = () =&gt; {\n        return currentData.map((row, rowIndex) =&gt; &#96;\n            &lt;tr&gt;\n                ${columns.map((col, colIndex) =&gt; &#96;\n                    &lt;td class=\"text-center\" \n                        style=\"background-color: ${columnColors[colIndex]};\n                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};\n                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; \n                                              columnColors[colIndex] !== columnColors[colIndex + 1]) \n                                             ? '2px solid #dee2e6' \n                                             : '1px solid #dee2e6'};\"&gt;\n                        ${row[colIndex] !== undefined ? row[colIndex] : ''}\n                    &lt;/td&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;).join('');\n    };\n\n    return &#96;\n        &lt;table class=\"table\"&gt;\n            &lt;thead&gt;\n                ${createHeaderGroups()}\n                ${createColumnHeaders()}\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                ${createTableRows()}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &#96;;\n}\n\n\nfunction flattenColumnMetadata(columnGroups = []) {\n    const flatColumns = [];\n    columnGroups.forEach((group, groupIndex) =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        return &#96;",
            "lineNumber": 55
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 56
          },
          {
            "text": "                ${columns.map((col, index) =&gt; &#96;",
            "lineNumber": 57
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 58
          },
          {
            "text": "                        style=\"background-color: ${columnColors[index]};",
            "lineNumber": 59
          },
          {
            "text": "                               color: ${lastGroupColumns[index] ? 'white' : 'black'};",
            "lineNumber": 60
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                        ${col.title || ''}",
            "lineNumber": 62
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 63
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 64
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 65
          },
          {
            "text": "        &#96;;",
            "lineNumber": 66
          },
          {
            "text": "    };",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "    const createTableRows = () =&gt; {",
            "lineNumber": 69
          },
          {
            "text": "        return currentData.map((row, rowIndex) =&gt; &#96;",
            "lineNumber": 70
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 71
          },
          {
            "text": "                ${columns.map((col, colIndex) =&gt; &#96;",
            "lineNumber": 72
          },
          {
            "text": "                    &lt;td class=\"text-center\" ",
            "lineNumber": 73
          },
          {
            "text": "                        style=\"background-color: ${columnColors[colIndex]};",
            "lineNumber": 74
          },
          {
            "text": "                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};",
            "lineNumber": 75
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};",
            "lineNumber": 76
          },
          {
            "text": "                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; ",
            "lineNumber": 77
          },
          {
            "text": "                                              columnColors[colIndex] !== columnColors[colIndex + 1]) ",
            "lineNumber": 78
          },
          {
            "text": "                                             ? '2px solid #dee2e6' ",
            "lineNumber": 79
          },
          {
            "text": "                                             : '1px solid #dee2e6'};\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "                        ${row[colIndex] !== undefined ? row[colIndex] : ''}",
            "lineNumber": 81
          },
          {
            "text": "                    &lt;/td&gt;",
            "lineNumber": 82
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 83
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 84
          },
          {
            "text": "        &#96;).join('');",
            "lineNumber": 85
          },
          {
            "text": "    };",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "    return &#96;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;table class=\"table\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;thead&gt;",
            "lineNumber": 90
          },
          {
            "text": "                ${createHeaderGroups()}",
            "lineNumber": 91
          },
          {
            "text": "                ${createColumnHeaders()}",
            "lineNumber": 92
          },
          {
            "text": "            &lt;/thead&gt;",
            "lineNumber": 93
          },
          {
            "text": "            &lt;tbody&gt;",
            "lineNumber": 94
          },
          {
            "text": "                ${createTableRows()}",
            "lineNumber": 95
          },
          {
            "text": "            &lt;/tbody&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;/table&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &#96;;",
            "lineNumber": 98
          },
          {
            "text": "}",
            "lineNumber": 99
          },
          {
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "function flattenColumnMetadata(columnGroups = []) {",
            "lineNumber": 102
          },
          {
            "text": "    const flatColumns = [];",
            "lineNumber": 103
          },
          {
            "text": "    columnGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 104
          },
          {
            "text": "        ",
            "lineNumber": 105
          }
        ]
      },
      "score": 0.3425544500350952
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':\n\n            ))\n            \n            # Add columns for each team (using sorted order)\n            for team in sorted_teams:\n                columns.append(ColumnGroup(\n                    title=team,\n                    columns=[\n                        Column(\n                            title=i18n_service.get_text(\"score\"), \n                            field=f'{team}_score', \n                            width='80px', \n                            align='center',\n                            tooltip=f'{i18n_service.get_text(\"average\")} {i18n_service.get_text(\"score\")} vs. {team}'\n                        ),\n                        Column(\n                            title=i18n_service.get_text(\"points\"), \n                            field=f'{team}_points', \n                            width='80px', \n                            align='center',\n                            tooltip=f'{i18n_service.get_text(\"average\")} {i18n_service.get_text(\"points\")} vs. {team}'\n                        )\n                    ]\n                ))\n            \n            # ========== GENERATE TABLE ROWS ==========\n            table_data = []\n            cell_metadata = {}\n            \n            # Collect all score and points values for heat map min/max calculation\n            all_scores = []\n            all_points = []\n            \n            for team in sorted_teams:\n                for opponent in sorted_teams:\n                    if team != opponent and opponent in comparison_data[team]:\n                        all_scores.append(comparison_data[team][opponent]['avg_score'])\n                        all_points.append(comparison_data[team][opponent]['avg_points'])\n            \n            if not all_scores or not all_points:",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3026,
                "column": 5
              },
              "endPosition": {
                "line": 3027,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':",
            "lineNumber": 3026
          },
          {
            "lineNumber": 3213
          },
          {
            "text": "            ))",
            "lineNumber": 3214
          },
          {
            "text": "            ",
            "lineNumber": 3215
          },
          {
            "text": "            # Add columns for each team (using sorted order)",
            "lineNumber": 3216
          },
          {
            "text": "            for team in sorted_teams:",
            "lineNumber": 3217
          },
          {
            "text": "                columns.append(ColumnGroup(",
            "lineNumber": 3218
          },
          {
            "text": "                    title=team,",
            "lineNumber": 3219
          },
          {
            "text": "                    columns=[",
            "lineNumber": 3220
          },
          {
            "text": "                        Column(",
            "lineNumber": 3221
          },
          {
            "text": "                            title=i18n_service.get_text(\"score\"), ",
            "lineNumber": 3222
          },
          {
            "text": "                            field=f'{team}_score', ",
            "lineNumber": 3223
          },
          {
            "text": "                            width='80px', ",
            "lineNumber": 3224
          },
          {
            "text": "                            align='center',",
            "lineNumber": 3225
          },
          {
            "text": "                            tooltip=f'{i18n_service.get_text(\"average\")} {i18n_service.get_text(\"score\")} vs. {team}'",
            "lineNumber": 3226
          },
          {
            "text": "                        ),",
            "lineNumber": 3227
          },
          {
            "text": "                        Column(",
            "lineNumber": 3228
          },
          {
            "text": "                            title=i18n_service.get_text(\"points\"), ",
            "lineNumber": 3229
          },
          {
            "text": "                            field=f'{team}_points', ",
            "lineNumber": 3230
          },
          {
            "text": "                            width='80px', ",
            "lineNumber": 3231
          },
          {
            "text": "                            align='center',",
            "lineNumber": 3232
          },
          {
            "text": "                            tooltip=f'{i18n_service.get_text(\"average\")} {i18n_service.get_text(\"points\")} vs. {team}'",
            "lineNumber": 3233
          },
          {
            "text": "                        )",
            "lineNumber": 3234
          },
          {
            "text": "                    ]",
            "lineNumber": 3235
          },
          {
            "text": "                ))",
            "lineNumber": 3236
          },
          {
            "text": "            ",
            "lineNumber": 3237
          },
          {
            "text": "            # ========== GENERATE TABLE ROWS ==========",
            "lineNumber": 3238
          },
          {
            "text": "            table_data = []",
            "lineNumber": 3239
          },
          {
            "text": "            cell_metadata = {}",
            "lineNumber": 3240
          },
          {
            "text": "            ",
            "lineNumber": 3241
          },
          {
            "text": "            # Collect all score and points values for heat map min/max calculation",
            "lineNumber": 3242
          },
          {
            "text": "            all_scores = []",
            "lineNumber": 3243
          },
          {
            "text": "            all_points = []",
            "lineNumber": 3244
          },
          {
            "text": "            ",
            "lineNumber": 3245
          },
          {
            "text": "            for team in sorted_teams:",
            "lineNumber": 3246
          },
          {
            "text": "                for opponent in sorted_teams:",
            "lineNumber": 3247
          },
          {
            "text": "                    if team != opponent and opponent in comparison_data[team]:",
            "lineNumber": 3248
          },
          {
            "text": "                        all_scores.append(comparison_data[team][opponent]['avg_score'])",
            "lineNumber": 3249
          },
          {
            "text": "                        all_points.append(comparison_data[team][opponent]['avg_points'])",
            "lineNumber": 3250
          },
          {
            "text": "            ",
            "lineNumber": 3251
          },
          {
            "text": "            if not all_scores or not all_points:",
            "lineNumber": 3252
          }
        ]
      },
      "score": 0.33693385124206543
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\nfunction generateStripeCss(groupCount, options = {}) {\n\n        return css;\n    }\n\n    /**\n     * Injects stripe CSS into the document if not already present.\n     * @param {number} groupCount - Number of groups\n     * @param {Object} options - Color options\n     */\n    function injectStripeCss(groupCount, options = {}) {\n        const styleId = \"tabulator-stripe-styles\";\n        let styleEl = document.getElementById(styleId);\n        if (!styleEl) {\n            styleEl = document.createElement(\"style\");\n            styleEl.id = styleId;\n            document.head.appendChild(styleEl);\n        }\n        styleEl.textContent = generateStripeCss(groupCount, options);\n    }\n\n    function interpolateValue(value, minVal, maxVal) {\n        if (maxVal === minVal) return 0;\n        return (value - minVal) / (maxVal - minVal);\n    }\n\n    function getThemeColor(colorName) {\n        return THEME_COLORS[colorName] || null;\n    }\n\n    function getHeatMapColor(value, minVal, maxVal, options = {}) {\n        const startColor = options.startColor || THEME_COLORS.heatMapStart;\n        const endColor = options.endColor || THEME_COLORS.heatMapEnd;\n\n        const ratio = Math.min(Math.max(interpolateValue(value, minVal, maxVal), 0), 1);\n        const [r1, g1, b1] = hexToRgb(startColor);\n        const [r2, g2, b2] = hexToRgb(endColor);\n\n        const r = Math.round(r1 + (r2 - r1) * ratio);\n        const g = Math.round(g1 + (g2 - g1) * ratio);\n        const b = Math.round(b1 + (b2 - b1) * ratio);\n        return &#96;rgb(${r}, ${g}, ${b})&#96;;\n    }\n\n    function getPaletteColor(index) {\n        if (!currentPalette.length) return \"#888\";\n        return currentPalette[Math.abs(index) % currentPalette.length];\n    }\n\n    function updateTeamColorMap(currentTeams = []) {\n        if (!Array.isArray(currentTeams)) return;\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "function generateStripeCss(groupCount, options = {}) {",
            "lineNumber": 199
          },
          {
            "lineNumber": 214
          },
          {
            "text": "        return css;",
            "lineNumber": 215
          },
          {
            "text": "    }",
            "lineNumber": 216
          },
          {
            "lineNumber": 217
          },
          {
            "text": "    /**",
            "lineNumber": 218
          },
          {
            "text": "     * Injects stripe CSS into the document if not already present.",
            "lineNumber": 219
          },
          {
            "text": "     * @param {number} groupCount - Number of groups",
            "lineNumber": 220
          },
          {
            "text": "     * @param {Object} options - Color options",
            "lineNumber": 221
          },
          {
            "text": "     */",
            "lineNumber": 222
          },
          {
            "text": "    function injectStripeCss(groupCount, options = {}) {",
            "lineNumber": 223
          },
          {
            "text": "        const styleId = \"tabulator-stripe-styles\";",
            "lineNumber": 224
          },
          {
            "text": "        let styleEl = document.getElementById(styleId);",
            "lineNumber": 225
          },
          {
            "text": "        if (!styleEl) {",
            "lineNumber": 226
          },
          {
            "text": "            styleEl = document.createElement(\"style\");",
            "lineNumber": 227
          },
          {
            "text": "            styleEl.id = styleId;",
            "lineNumber": 228
          },
          {
            "text": "            document.head.appendChild(styleEl);",
            "lineNumber": 229
          },
          {
            "text": "        }",
            "lineNumber": 230
          },
          {
            "text": "        styleEl.textContent = generateStripeCss(groupCount, options);",
            "lineNumber": 231
          },
          {
            "text": "    }",
            "lineNumber": 232
          },
          {
            "lineNumber": 233
          },
          {
            "text": "    function interpolateValue(value, minVal, maxVal) {",
            "lineNumber": 234
          },
          {
            "text": "        if (maxVal === minVal) return 0;",
            "lineNumber": 235
          },
          {
            "text": "        return (value - minVal) / (maxVal - minVal);",
            "lineNumber": 236
          },
          {
            "text": "    }",
            "lineNumber": 237
          },
          {
            "lineNumber": 238
          },
          {
            "text": "    function getThemeColor(colorName) {",
            "lineNumber": 239
          },
          {
            "text": "        return THEME_COLORS[colorName] || null;",
            "lineNumber": 240
          },
          {
            "text": "    }",
            "lineNumber": 241
          },
          {
            "lineNumber": 242
          },
          {
            "text": "    function getHeatMapColor(value, minVal, maxVal, options = {}) {",
            "lineNumber": 243
          },
          {
            "text": "        const startColor = options.startColor || THEME_COLORS.heatMapStart;",
            "lineNumber": 244
          },
          {
            "text": "        const endColor = options.endColor || THEME_COLORS.heatMapEnd;",
            "lineNumber": 245
          },
          {
            "lineNumber": 246
          },
          {
            "text": "        const ratio = Math.min(Math.max(interpolateValue(value, minVal, maxVal), 0), 1);",
            "lineNumber": 247
          },
          {
            "text": "        const [r1, g1, b1] = hexToRgb(startColor);",
            "lineNumber": 248
          },
          {
            "text": "        const [r2, g2, b2] = hexToRgb(endColor);",
            "lineNumber": 249
          },
          {
            "lineNumber": 250
          },
          {
            "text": "        const r = Math.round(r1 + (r2 - r1) * ratio);",
            "lineNumber": 251
          },
          {
            "text": "        const g = Math.round(g1 + (g2 - g1) * ratio);",
            "lineNumber": 252
          },
          {
            "text": "        const b = Math.round(b1 + (b2 - b1) * ratio);",
            "lineNumber": 253
          },
          {
            "text": "        return &#96;rgb(${r}, ${g}, ${b})&#96;;",
            "lineNumber": 254
          },
          {
            "text": "    }",
            "lineNumber": 255
          },
          {
            "lineNumber": 256
          },
          {
            "text": "    function getPaletteColor(index) {",
            "lineNumber": 257
          },
          {
            "text": "        if (!currentPalette.length) return \"#888\";",
            "lineNumber": 258
          },
          {
            "text": "        return currentPalette[Math.abs(index) % currentPalette.length];",
            "lineNumber": 259
          },
          {
            "text": "    }",
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    function updateTeamColorMap(currentTeams = []) {",
            "lineNumber": 262
          },
          {
            "text": "        if (!Array.isArray(currentTeams)) return;",
            "lineNumber": 263
          },
          {
            "text": "    }",
            "lineNumber": 277
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.32670339941978455
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 511
          },
          "endPosition": {
            "line": 532
          }
        },
        "contents": "                                \n                                // Last resort: try to get it from the row's opponent_name cell\n                                if (!teamName) {\n                                    try {\n                                        const opponentNameCell = row.getCell('opponent_name');\n                                        if (opponentNameCell) {\n                                            teamName = opponentNameCell.getValue();\n                                        }\n                                    } catch (e) {\n                                        // Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            // Normalize team name (trim whitespace) to ensure it matches the color map\n                            const normalizedTeamName = String(teamName).trim();",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                ",
            "lineNumber": 512
          },
          {
            "text": "                                // Last resort: try to get it from the row's opponent_name cell",
            "lineNumber": 513
          },
          {
            "text": "                                if (!teamName) {",
            "lineNumber": 514
          },
          {
            "text": "                                    try {",
            "lineNumber": 515
          },
          {
            "text": "                                        const opponentNameCell = row.getCell('opponent_name');",
            "lineNumber": 516
          },
          {
            "text": "                                        if (opponentNameCell) {",
            "lineNumber": 517
          },
          {
            "text": "                                            teamName = opponentNameCell.getValue();",
            "lineNumber": 518
          },
          {
            "text": "                                        }",
            "lineNumber": 519
          },
          {
            "text": "                                    } catch (e) {",
            "lineNumber": 520
          },
          {
            "text": "                                        // Cell might not be rendered yet",
            "lineNumber": 521
          },
          {
            "text": "                                    }",
            "lineNumber": 522
          },
          {
            "text": "                                }",
            "lineNumber": 523
          },
          {
            "text": "                            }",
            "lineNumber": 524
          },
          {
            "text": "                        } else {",
            "lineNumber": 525
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 526
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 527
          },
          {
            "text": "                        }",
            "lineNumber": 528
          },
          {
            "text": "                        ",
            "lineNumber": 529
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 530
          },
          {
            "text": "                            // Normalize team name (trim whitespace) to ensure it matches the color map",
            "lineNumber": 531
          },
          {
            "text": "                            const normalizedTeamName = String(teamName).trim();",
            "lineNumber": 532
          }
        ]
      },
      "score": 0.3255104124546051
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 242
          },
          "endPosition": {
            "line": 283
          }
        },
        "contents": "    }\n\n    // If no group titles, flatten to direct columns (no groups)\n    let tabulatorColumns;\n    if (!hasGroupTitles) {\n        // Flatten: extract all columns from all groups and pass directly to Tabulator\n        tabulatorColumns = [];\n        data.columns.forEach((group, groupIndex) =&gt; {\n            if (!Array.isArray(group.columns)) {\n                return;\n            }\n            \n            const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;\n            const isHighlighted = group.highlighted === true;\n            \n            group.columns.forEach((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    }",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "    // If no group titles, flatten to direct columns (no groups)",
            "lineNumber": 245
          },
          {
            "text": "    let tabulatorColumns;",
            "lineNumber": 246
          },
          {
            "text": "    if (!hasGroupTitles) {",
            "lineNumber": 247
          },
          {
            "text": "        // Flatten: extract all columns from all groups and pass directly to Tabulator",
            "lineNumber": 248
          },
          {
            "text": "        tabulatorColumns = [];",
            "lineNumber": 249
          },
          {
            "text": "        data.columns.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 250
          },
          {
            "text": "            if (!Array.isArray(group.columns)) {",
            "lineNumber": 251
          },
          {
            "text": "                return;",
            "lineNumber": 252
          },
          {
            "text": "            }",
            "lineNumber": 253
          },
          {
            "text": "            ",
            "lineNumber": 254
          },
          {
            "text": "            const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;",
            "lineNumber": 255
          },
          {
            "text": "            const isHighlighted = group.highlighted === true;",
            "lineNumber": 256
          },
          {
            "text": "            ",
            "lineNumber": 257
          },
          {
            "text": "            group.columns.forEach((column, columnIndex) =&gt; {",
            "lineNumber": 258
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 259
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 260
          },
          {
            "text": "                    return;",
            "lineNumber": 261
          },
          {
            "text": "                }",
            "lineNumber": 262
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 263
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 264
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 265
          },
          {
            "text": "                ",
            "lineNumber": 266
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 267
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 268
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 269
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 270
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 271
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 274
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 275
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 276
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 277
          },
          {
            "text": "                    }",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 280
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 281
          },
          {
            "lineNumber": 282
          },
          {
            "text": "                    // Cell metadata styles",
            "lineNumber": 283
          }
        ]
      },
      "score": 0.3254880905151367
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:\n\n                )\n            ]\n            \n            # Add totals column group first (after ranking) - matches data order\n            columns.append(\n                ColumnGroup(\n                    title=\"Total\",\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    highlighted=True,  # Highlight the Total group\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"season_points\", format=\"{:,}\", width=\"75px\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"season_score\", format=\"{:,}\", width=\"75px\"),\n                        Column(title=i18n_service.get_text(\"average\"), field=\"season_avg\", format=\"{:.1f}\", width=\"75px\")\n                    ]\n                )\n            )\n\n            # Add weekly column groups after totals\n            for w in weeks_to_show:\n                columns.append(\n                    ColumnGroup(\n                        title=f\"{i18n_service.get_text('week')} {w}\",\n                        columns=[\n                            Column(title=i18n_service.get_text(\"points\"), field=f\"week{w}_points\", format=\"{:.1f}\", width=\"75px\"),\n                            Column(title=i18n_service.get_text(\"score\"), field=f\"week{w}_score\", format=\"{:,}\", width=\"75px\"),\n                            Column(title=i18n_service.get_text(\"average\"), field=f\"week{w}_avg\", format=\"{:.1f}\", width=\"75px\")\n                        ]\n                    )\n                )\n\n            \n            # Prepare the data rows\n            data = []\n            for i, team in enumerate(sorted_teams, 1):\n                team_info = team_data[team]\n                \n                # Start with position and team name\n                row = [i, team]",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1411,
                "column": 5
              },
              "endPosition": {
                "line": 1412,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:",
            "lineNumber": 1411
          },
          {
            "lineNumber": 1569
          },
          {
            "text": "                )",
            "lineNumber": 1570
          },
          {
            "text": "            ]",
            "lineNumber": 1571
          },
          {
            "text": "            ",
            "lineNumber": 1572
          },
          {
            "text": "            # Add totals column group first (after ranking) - matches data order",
            "lineNumber": 1573
          },
          {
            "text": "            columns.append(",
            "lineNumber": 1574
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1575
          },
          {
            "text": "                    title=\"Total\",",
            "lineNumber": 1576
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 1577
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 1578
          },
          {
            "text": "                    highlighted=True,  # Highlight the Total group",
            "lineNumber": 1579
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1580
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"season_points\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1581
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"season_score\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1582
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"average\"), field=\"season_avg\", format=\"{:.1f}\", width=\"75px\")",
            "lineNumber": 1583
          },
          {
            "text": "                    ]",
            "lineNumber": 1584
          },
          {
            "text": "                )",
            "lineNumber": 1585
          },
          {
            "text": "            )",
            "lineNumber": 1586
          },
          {
            "lineNumber": 1587
          },
          {
            "text": "            # Add weekly column groups after totals",
            "lineNumber": 1588
          },
          {
            "text": "            for w in weeks_to_show:",
            "lineNumber": 1589
          },
          {
            "text": "                columns.append(",
            "lineNumber": 1590
          },
          {
            "text": "                    ColumnGroup(",
            "lineNumber": 1591
          },
          {
            "text": "                        title=f\"{i18n_service.get_text('week')} {w}\",",
            "lineNumber": 1592
          },
          {
            "text": "                        columns=[",
            "lineNumber": 1593
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"points\"), field=f\"week{w}_points\", format=\"{:.1f}\", width=\"75px\"),",
            "lineNumber": 1594
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"score\"), field=f\"week{w}_score\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1595
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"average\"), field=f\"week{w}_avg\", format=\"{:.1f}\", width=\"75px\")",
            "lineNumber": 1596
          },
          {
            "text": "                        ]",
            "lineNumber": 1597
          },
          {
            "text": "                    )",
            "lineNumber": 1598
          },
          {
            "text": "                )",
            "lineNumber": 1599
          },
          {
            "lineNumber": 1600
          },
          {
            "text": "            ",
            "lineNumber": 1601
          },
          {
            "text": "            # Prepare the data rows",
            "lineNumber": 1602
          },
          {
            "text": "            data = []",
            "lineNumber": 1603
          },
          {
            "text": "            for i, team in enumerate(sorted_teams, 1):",
            "lineNumber": 1604
          },
          {
            "text": "                team_info = team_data[team]",
            "lineNumber": 1605
          },
          {
            "text": "                ",
            "lineNumber": 1606
          },
          {
            "text": "                # Start with position and team name",
            "lineNumber": 1607
          },
          {
            "text": "                row = [i, team]",
            "lineNumber": 1608
          }
        ]
      },
      "score": 0.31861740350723267
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1731
          },
          "endPosition": {
            "line": 1757
          }
        },
        "contents": "                                    const adjustedColIndex = colIndex - 1; // Adjust for team name column\n                                    // Based on debug output: Col 4 (adjustedColIndex 3) has score 751, Col 5 (adjustedColIndex 4) has points 5\n                                    // So the pattern is: Score (odd adjustedColIndex), Points (even adjustedColIndex)\n                                    const isScoreColumn = adjustedColIndex % 2 === 1; // Score columns are odd positions (1, 3, 5, 7...)\n                                    const isPointsColumn = adjustedColIndex % 2 === 0; // Points columns are even positions (0, 2, 4, 6...)\n                                    \n                                    if (isScoreColumn &amp;&amp; data.metadata.score_range) {\n                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.score_range.min, data.metadata.score_range.max);\n                                        td.style.backgroundColor = color;\n                                    } else if (isPointsColumn &amp;&amp; data.metadata.points_range) {\n                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.points_range.min, data.metadata.points_range.max);\n                                        td.style.backgroundColor = color;\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback to original cell_metadata approach if no metadata available\n                            if (data.cell_metadata &amp;&amp; data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;]) {\n                                const cellMeta = data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;];\n                                Object.entries(cellMeta).forEach(([key, value]) =&gt; {\n                                    td.style[key] = value;\n                                });\n                            }\n                        }\n                        \n                        // Now increment colIndex",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                    const adjustedColIndex = colIndex - 1; // Adjust for team name column",
            "lineNumber": 1732
          },
          {
            "text": "                                    // Based on debug output: Col 4 (adjustedColIndex 3) has score 751, Col 5 (adjustedColIndex 4) has points 5",
            "lineNumber": 1733
          },
          {
            "text": "                                    // So the pattern is: Score (odd adjustedColIndex), Points (even adjustedColIndex)",
            "lineNumber": 1734
          },
          {
            "text": "                                    const isScoreColumn = adjustedColIndex % 2 === 1; // Score columns are odd positions (1, 3, 5, 7...)",
            "lineNumber": 1735
          },
          {
            "text": "                                    const isPointsColumn = adjustedColIndex % 2 === 0; // Points columns are even positions (0, 2, 4, 6...)",
            "lineNumber": 1736
          },
          {
            "text": "                                    ",
            "lineNumber": 1737
          },
          {
            "text": "                                    if (isScoreColumn &amp;&amp; data.metadata.score_range) {",
            "lineNumber": 1738
          },
          {
            "text": "                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.score_range.min, data.metadata.score_range.max);",
            "lineNumber": 1739
          },
          {
            "text": "                                        td.style.backgroundColor = color;",
            "lineNumber": 1740
          },
          {
            "text": "                                    } else if (isPointsColumn &amp;&amp; data.metadata.points_range) {",
            "lineNumber": 1741
          },
          {
            "text": "                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.points_range.min, data.metadata.points_range.max);",
            "lineNumber": 1742
          },
          {
            "text": "                                        td.style.backgroundColor = color;",
            "lineNumber": 1743
          },
          {
            "text": "                                    }",
            "lineNumber": 1744
          },
          {
            "text": "                                }",
            "lineNumber": 1745
          },
          {
            "text": "                            }",
            "lineNumber": 1746
          },
          {
            "text": "                        } else {",
            "lineNumber": 1747
          },
          {
            "text": "                            // Fallback to original cell_metadata approach if no metadata available",
            "lineNumber": 1748
          },
          {
            "text": "                            if (data.cell_metadata &amp;&amp; data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;]) {",
            "lineNumber": 1749
          },
          {
            "text": "                                const cellMeta = data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;];",
            "lineNumber": 1750
          },
          {
            "text": "                                Object.entries(cellMeta).forEach(([key, value]) =&gt; {",
            "lineNumber": 1751
          },
          {
            "text": "                                    td.style[key] = value;",
            "lineNumber": 1752
          },
          {
            "text": "                                });",
            "lineNumber": 1753
          },
          {
            "text": "                            }",
            "lineNumber": 1754
          },
          {
            "text": "                        }",
            "lineNumber": 1755
          },
          {
            "text": "                        ",
            "lineNumber": 1756
          },
          {
            "text": "                        // Now increment colIndex",
            "lineNumber": 1757
          }
        ]
      },
      "score": 0.31754669547080994
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\utils\\color_constants.py",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 57
          }
        },
        "contents": "\"\"\"\nColor constants matching ColorUtils.THEME_COLORS from color-utils.js\nThese should be kept in sync with the JavaScript ColorUtils definitions.\n\"\"\"\n\n# Theme colors - matching ColorUtils.THEME_COLORS\nTHEME_COLORS = {\n    # Primary colors\n    \"primary\": \"#0a9dc7\",           # Dark blue - navbar, card headers\n    \"secondary\": \"#4aa8c2\",         # Light blue - buttons, interactive elements\n    \"accent\": \"#7dcfe6\",             # Lightest blue - highlights, accents\n    \n    # Background colors\n    \"background\": \"#f8f9fa\",        # Main page background\n    \"surface\": \"#ffffff\",           # Card/container background\n    \"surface_alt\": \"#e9ecef\",       # Alternate surface (lighter gray)\n    \"surface_light\": \"#f0f0f0\",     # Light gray variant\n    \n    # Text colors\n    \"text_on_primary\": \"#ffffff\",   # Text on primary background\n    \"text_on_secondary\": \"#ffffff\",  # Text on secondary background\n    \"text_on_light\": \"#0a9dc7\",     # Text on light background\n    \n    # Border colors\n    \"border\": \"#264653\",             # Dark teal/green borders\n    \"border_light\": \"#dee2e6\",      # Light borders\n    \n    # Table colors\n    \"table_header_bg\": \"#eef2f7\",   # Table header background\n    \"table_header_text\": \"#0f172a\", # Table header text\n    \"table_body_text\": \"#1f2933\",   # Table body text\n    \"table_muted_text\": \"#64748b\",  # Muted text\n    \n    # Heat map colors\n    \"heat_map_start\": \"#dddddd\",    # Heat map start color\n    \"heat_map_end\": \"#1b8da7\",      # Heat map end color\n    \"heat_map_low\": \"#d9596a\",      # Heat map low value\n    \"heat_map_high\": \"#1b8da7\",     # Heat map high value\n    \n    # Status colors\n    \"warning\": \"#86e1b3\",            # Warning states\n    \"info\": \"#a1e8c4\",              # Info states\n    \"success\": \"#d4edda\",           # Success states\n    \"danger\": \"#f8d7da\",            # Danger states\n}\n\n\ndef get_theme_color(color_name: str) -&gt; str:\n    \"\"\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "\"\"\"",
            "lineNumber": 1
          },
          {
            "text": "Color constants matching ColorUtils.THEME_COLORS from color-utils.js",
            "lineNumber": 2
          },
          {
            "text": "These should be kept in sync with the JavaScript ColorUtils definitions.",
            "lineNumber": 3
          },
          {
            "text": "\"\"\"",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "# Theme colors - matching ColorUtils.THEME_COLORS",
            "lineNumber": 6
          },
          {
            "text": "THEME_COLORS = {",
            "lineNumber": 7
          },
          {
            "text": "    # Primary colors",
            "lineNumber": 8
          },
          {
            "text": "    \"primary\": \"#0a9dc7\",           # Dark blue - navbar, card headers",
            "lineNumber": 9
          },
          {
            "text": "    \"secondary\": \"#4aa8c2\",         # Light blue - buttons, interactive elements",
            "lineNumber": 10
          },
          {
            "text": "    \"accent\": \"#7dcfe6\",             # Lightest blue - highlights, accents",
            "lineNumber": 11
          },
          {
            "text": "    ",
            "lineNumber": 12
          },
          {
            "text": "    # Background colors",
            "lineNumber": 13
          },
          {
            "text": "    \"background\": \"#f8f9fa\",        # Main page background",
            "lineNumber": 14
          },
          {
            "text": "    \"surface\": \"#ffffff\",           # Card/container background",
            "lineNumber": 15
          },
          {
            "text": "    \"surface_alt\": \"#e9ecef\",       # Alternate surface (lighter gray)",
            "lineNumber": 16
          },
          {
            "text": "    \"surface_light\": \"#f0f0f0\",     # Light gray variant",
            "lineNumber": 17
          },
          {
            "text": "    ",
            "lineNumber": 18
          },
          {
            "text": "    # Text colors",
            "lineNumber": 19
          },
          {
            "text": "    \"text_on_primary\": \"#ffffff\",   # Text on primary background",
            "lineNumber": 20
          },
          {
            "text": "    \"text_on_secondary\": \"#ffffff\",  # Text on secondary background",
            "lineNumber": 21
          },
          {
            "text": "    \"text_on_light\": \"#0a9dc7\",     # Text on light background",
            "lineNumber": 22
          },
          {
            "text": "    ",
            "lineNumber": 23
          },
          {
            "text": "    # Border colors",
            "lineNumber": 24
          },
          {
            "text": "    \"border\": \"#264653\",             # Dark teal/green borders",
            "lineNumber": 25
          },
          {
            "text": "    \"border_light\": \"#dee2e6\",      # Light borders",
            "lineNumber": 26
          },
          {
            "text": "    ",
            "lineNumber": 27
          },
          {
            "text": "    # Table colors",
            "lineNumber": 28
          },
          {
            "text": "    \"table_header_bg\": \"#eef2f7\",   # Table header background",
            "lineNumber": 29
          },
          {
            "text": "    \"table_header_text\": \"#0f172a\", # Table header text",
            "lineNumber": 30
          },
          {
            "text": "    \"table_body_text\": \"#1f2933\",   # Table body text",
            "lineNumber": 31
          },
          {
            "text": "    \"table_muted_text\": \"#64748b\",  # Muted text",
            "lineNumber": 32
          },
          {
            "text": "    ",
            "lineNumber": 33
          },
          {
            "text": "    # Heat map colors",
            "lineNumber": 34
          },
          {
            "text": "    \"heat_map_start\": \"#dddddd\",    # Heat map start color",
            "lineNumber": 35
          },
          {
            "text": "    \"heat_map_end\": \"#1b8da7\",      # Heat map end color",
            "lineNumber": 36
          },
          {
            "text": "    \"heat_map_low\": \"#d9596a\",      # Heat map low value",
            "lineNumber": 37
          },
          {
            "text": "    \"heat_map_high\": \"#1b8da7\",     # Heat map high value",
            "lineNumber": 38
          },
          {
            "text": "    ",
            "lineNumber": 39
          },
          {
            "text": "    # Status colors",
            "lineNumber": 40
          },
          {
            "text": "    \"warning\": \"#86e1b3\",            # Warning states",
            "lineNumber": 41
          },
          {
            "text": "    \"info\": \"#a1e8c4\",              # Info states",
            "lineNumber": 42
          },
          {
            "text": "    \"success\": \"#d4edda\",           # Success states",
            "lineNumber": 43
          },
          {
            "text": "    \"danger\": \"#f8d7da\",            # Danger states",
            "lineNumber": 44
          },
          {
            "text": "}",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "lineNumber": 47
          },
          {
            "text": "def get_theme_color(color_name: str) -&gt; str:",
            "lineNumber": 48,
            "isSignature": true
          },
          {
            "text": "    \"\"\"",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.31715381145477295
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\nconst THEME_COLORS = {\n    // Muted text\n        \n        // Heat map colors\n        heatMapStart: \"#dddddd\",      // Heat map start color\n        heatMapEnd: \"#1b8da7\",        // Heat map end color\n        heatMapLow: \"#d9596a\",        // Heat map low value\n        heatMapHigh: \"#1b8da7\",       // Heat map high value\n        \n        // Status colors\n        warning: \"#86e1b3\",            // Warning states\n        info: \"#a1e8c4\",              // Info states\n        success: \"#d4edda\",           // Success states\n        danger: \"#f8d7da\",            // Danger states\n    };\n\n    // Dark mode theme colors\n    const THEME_COLORS_DARK = {\n        // Primary colors (same as light mode)\n        primary: \"#0a9dc7\",\n        secondary: \"#4aa8c2\",\n        accent: \"#7dcfe6\",\n        \n        // Background colors (dark)\n        background: \"#0f172a\",        // Dark slate background\n        surface: \"#1e293b\",           // Dark surface\n        surfaceAlt: \"#334155\",        // Alternate dark surface\n        surfaceLight: \"#475569\",      // Light dark variant\n        \n        // Text colors (light for dark backgrounds)\n        textOnPrimary: \"#ffffff\",\n        textOnSecondary: \"#ffffff\",\n        textOnLight: \"#e2e8f0\",       // Light text on dark background\n        \n        // Border colors (light for dark mode)\n        border: \"#475569\",            // Lighter border for dark mode\n        borderLight: \"#64748b\",       // Light border\n        borderSoft: \"rgba(226, 232, 240, 0.12)\", // Soft border (dark mode)\n        \n        // Table colors (dark)\n        tableHeaderBg: \"#182645\",     // Dark table header background\n        tableHeaderText: \"#e2e8f0\",   // Light table header text\n        tableBodyText: \"#f1f5f9\",     // Light table body text\n        tableMutedText: \"#94a3b8\",    // Muted text (dark mode)\n        \n        // Heat map colors (same as light mode)\n        heatMapStart: \"#dddddd\",\n        heatMapEnd: \"#1b8da7\",\n        heatMapLow: \"#d9596a\",\n        heatMapHigh: \"#1b8da7\",\n        \n        // Status colors (adjusted for dark mode)\n        warning: \"#86e1b3\"\n,\n    };\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 21,
                "column": 5
              },
              "endPosition": {
                "line": 21,
                "column": 11
              }
            },
            {
              "startPosition": {
                "line": 21,
                "column": 11
              },
              "endPosition": {
                "line": 22,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "const THEME_COLORS = {",
            "lineNumber": 21
          },
          {
            "text": "    // Muted text",
            "lineNumber": 47
          },
          {
            "text": "        ",
            "lineNumber": 48
          },
          {
            "text": "        // Heat map colors",
            "lineNumber": 49
          },
          {
            "text": "        heatMapStart: \"#dddddd\",      // Heat map start color",
            "lineNumber": 50
          },
          {
            "text": "        heatMapEnd: \"#1b8da7\",        // Heat map end color",
            "lineNumber": 51
          },
          {
            "text": "        heatMapLow: \"#d9596a\",        // Heat map low value",
            "lineNumber": 52
          },
          {
            "text": "        heatMapHigh: \"#1b8da7\",       // Heat map high value",
            "lineNumber": 53
          },
          {
            "text": "        ",
            "lineNumber": 54
          },
          {
            "text": "        // Status colors",
            "lineNumber": 55
          },
          {
            "text": "        warning: \"#86e1b3\",            // Warning states",
            "lineNumber": 56
          },
          {
            "text": "        info: \"#a1e8c4\",              // Info states",
            "lineNumber": 57
          },
          {
            "text": "        success: \"#d4edda\",           // Success states",
            "lineNumber": 58
          },
          {
            "text": "        danger: \"#f8d7da\",            // Danger states",
            "lineNumber": 59
          },
          {
            "text": "    };",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "    // Dark mode theme colors",
            "lineNumber": 62
          },
          {
            "text": "    const THEME_COLORS_DARK = {",
            "lineNumber": 63
          },
          {
            "text": "        // Primary colors (same as light mode)",
            "lineNumber": 64
          },
          {
            "text": "        primary: \"#0a9dc7\",",
            "lineNumber": 65
          },
          {
            "text": "        secondary: \"#4aa8c2\",",
            "lineNumber": 66
          },
          {
            "text": "        accent: \"#7dcfe6\",",
            "lineNumber": 67
          },
          {
            "text": "        ",
            "lineNumber": 68
          },
          {
            "text": "        // Background colors (dark)",
            "lineNumber": 69
          },
          {
            "text": "        background: \"#0f172a\",        // Dark slate background",
            "lineNumber": 70
          },
          {
            "text": "        surface: \"#1e293b\",           // Dark surface",
            "lineNumber": 71
          },
          {
            "text": "        surfaceAlt: \"#334155\",        // Alternate dark surface",
            "lineNumber": 72
          },
          {
            "text": "        surfaceLight: \"#475569\",      // Light dark variant",
            "lineNumber": 73
          },
          {
            "text": "        ",
            "lineNumber": 74
          },
          {
            "text": "        // Text colors (light for dark backgrounds)",
            "lineNumber": 75
          },
          {
            "text": "        textOnPrimary: \"#ffffff\",",
            "lineNumber": 76
          },
          {
            "text": "        textOnSecondary: \"#ffffff\",",
            "lineNumber": 77
          },
          {
            "text": "        textOnLight: \"#e2e8f0\",       // Light text on dark background",
            "lineNumber": 78
          },
          {
            "text": "        ",
            "lineNumber": 79
          },
          {
            "text": "        // Border colors (light for dark mode)",
            "lineNumber": 80
          },
          {
            "text": "        border: \"#475569\",            // Lighter border for dark mode",
            "lineNumber": 81
          },
          {
            "text": "        borderLight: \"#64748b\",       // Light border",
            "lineNumber": 82
          },
          {
            "text": "        borderSoft: \"rgba(226, 232, 240, 0.12)\", // Soft border (dark mode)",
            "lineNumber": 83
          },
          {
            "text": "        ",
            "lineNumber": 84
          },
          {
            "text": "        // Table colors (dark)",
            "lineNumber": 85
          },
          {
            "text": "        tableHeaderBg: \"#182645\",     // Dark table header background",
            "lineNumber": 86
          },
          {
            "text": "        tableHeaderText: \"#e2e8f0\",   // Light table header text",
            "lineNumber": 87
          },
          {
            "text": "        tableBodyText: \"#f1f5f9\",     // Light table body text",
            "lineNumber": 88
          },
          {
            "text": "        tableMutedText: \"#94a3b8\",    // Muted text (dark mode)",
            "lineNumber": 89
          },
          {
            "text": "        ",
            "lineNumber": 90
          },
          {
            "text": "        // Heat map colors (same as light mode)",
            "lineNumber": 91
          },
          {
            "text": "        heatMapStart: \"#dddddd\",",
            "lineNumber": 92
          },
          {
            "text": "        heatMapEnd: \"#1b8da7\",",
            "lineNumber": 93
          },
          {
            "text": "        heatMapLow: \"#d9596a\",",
            "lineNumber": 94
          },
          {
            "text": "        heatMapHigh: \"#1b8da7\",",
            "lineNumber": 95
          },
          {
            "text": "        ",
            "lineNumber": 96
          },
          {
            "text": "        // Status colors (adjusted for dark mode)",
            "lineNumber": 97
          },
          {
            "text": "        warning: \"#86e1b3\"",
            "lineNumber": 98
          },
          {
            "text": ",",
            "lineNumber": 101
          },
          {
            "text": "    };",
            "lineNumber": 102
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.3145461976528168
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 213
          },
          "endPosition": {
            "line": 245
          }
        },
        "contents": "    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);\n    const rowMetadataMap = (data.row_metadata || []).reduce((acc, meta, index) =&gt; {\n        acc[index] = meta || {};\n        return acc;\n    }, {});\n\n    const transformedData = data.data.map((row, rowIndex) =&gt; {\n        const rowObject = { __rowIndex: rowIndex };\n        columnOrder.forEach((columnInfo, columnIndex) =&gt; {\n            rowObject[columnInfo.field] = row[columnIndex];\n        });\n        if (rowMetadataMap[rowIndex]) {\n            rowObject.__rowMeta = rowMetadataMap[rowIndex];\n        }\n        return rowObject;\n    });\n\n    // Check if all group titles are empty - if so, flatten structure (no groups)\n    const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');\n    \n    // Apply CSS classes for striped column groups before building column definitions\n    if (useStripedGroups &amp;&amp; data.columns &amp;&amp; hasGroupTitles) {\n        ColorUtils.assignGroupStripeCss(data.columns);\n        ColorUtils.injectStripeCss(data.columns.length, {\n            headerAlpha: isCompactLayout ? 0.55 : 0.4,\n            cellAlpha: 0.25\n        });\n    }\n\n    // If no group titles, flatten to direct columns (no groups)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          },
          {
            "text": "    const rowMetadataMap = (data.row_metadata || []).reduce((acc, meta, index) =&gt; {",
            "lineNumber": 217
          },
          {
            "text": "        acc[index] = meta || {};",
            "lineNumber": 218
          },
          {
            "text": "        return acc;",
            "lineNumber": 219
          },
          {
            "text": "    }, {});",
            "lineNumber": 220
          },
          {
            "lineNumber": 221
          },
          {
            "text": "    const transformedData = data.data.map((row, rowIndex) =&gt; {",
            "lineNumber": 222
          },
          {
            "text": "        const rowObject = { __rowIndex: rowIndex };",
            "lineNumber": 223
          },
          {
            "text": "        columnOrder.forEach((columnInfo, columnIndex) =&gt; {",
            "lineNumber": 224
          },
          {
            "text": "            rowObject[columnInfo.field] = row[columnIndex];",
            "lineNumber": 225
          },
          {
            "text": "        });",
            "lineNumber": 226
          },
          {
            "text": "        if (rowMetadataMap[rowIndex]) {",
            "lineNumber": 227
          },
          {
            "text": "            rowObject.__rowMeta = rowMetadataMap[rowIndex];",
            "lineNumber": 228
          },
          {
            "text": "        }",
            "lineNumber": 229
          },
          {
            "text": "        return rowObject;",
            "lineNumber": 230
          },
          {
            "text": "    });",
            "lineNumber": 231
          },
          {
            "lineNumber": 232
          },
          {
            "text": "    // Check if all group titles are empty - if so, flatten structure (no groups)",
            "lineNumber": 233
          },
          {
            "text": "    const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');",
            "lineNumber": 234
          },
          {
            "text": "    ",
            "lineNumber": 235
          },
          {
            "text": "    // Apply CSS classes for striped column groups before building column definitions",
            "lineNumber": 236
          },
          {
            "text": "    if (useStripedGroups &amp;&amp; data.columns &amp;&amp; hasGroupTitles) {",
            "lineNumber": 237
          },
          {
            "text": "        ColorUtils.assignGroupStripeCss(data.columns);",
            "lineNumber": 238
          },
          {
            "text": "        ColorUtils.injectStripeCss(data.columns.length, {",
            "lineNumber": 239
          },
          {
            "text": "            headerAlpha: isCompactLayout ? 0.55 : 0.4,",
            "lineNumber": 240
          },
          {
            "text": "            cellAlpha: 0.25",
            "lineNumber": 241
          },
          {
            "text": "        });",
            "lineNumber": 242
          },
          {
            "text": "    }",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "    // If no group titles, flatten to direct columns (no groups)",
            "lineNumber": 245
          }
        ]
      },
      "score": 0.31198620796203613
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 96
          },
          "endPosition": {
            "line": 163
          }
        },
        "contents": "        &lt;/table&gt;\n    &#96;;\n}\n\n\nfunction flattenColumnMetadata(columnGroups = []) {\n    const flatColumns = [];\n    columnGroups.forEach((group, groupIndex) =&gt; {\n        if (Array.isArray(group.columns)) {\n            group.columns.forEach((column, columnIndex) =&gt; {\n                const field = column.field || &#96;col_${groupIndex}_${columnIndex}&#96;;\n                flatColumns.push({\n                    group,\n                    column,\n                    groupIndex,\n                    columnIndex,\n                    field\n                });\n            });\n        }\n    });\n    return flatColumns;\n}\n\nfunction mapCellMetadata(cellMetadata = {}, columnOrder = []) {\n    const mapped = {};\n    Object.entries(cellMetadata).forEach(([key, styles]) =&gt; {\n        const [rowIndexStr, colIndexStr] = key.split(':');\n        const rowIndex = parseInt(rowIndexStr, 10);\n        const colIndex = parseInt(colIndexStr, 10);\n        const columnInfo = columnOrder[colIndex];\n        if (!columnInfo || Number.isNaN(rowIndex)) {\n            return;\n        }\n        const field = columnInfo.field;\n        if (!mapped[rowIndex]) {\n            mapped[rowIndex] = {};\n        }\n        mapped[rowIndex][field] = styles;\n    });\n    return mapped;\n}\n\nfunction applyElementStyles(element, styles = {}) {\n    if (!element || !styles) {\n        return;\n    }\n    Object.entries(styles).forEach(([property, value]) =&gt; {\n        if (value !== undefined &amp;&amp; value !== null) {\n            element.style[property] = value;\n        }\n    });\n}\n\nfunction parseColumnWidth(width) {\n    if (!width) {\n        return undefined;\n    }\n    if (typeof width === 'number') {\n        return width;\n    }\n    const parsed = parseInt(width, 10);\n    return Number.isNaN(parsed) ? undefined : parsed;\n}\n\nfunction createTableTabulator(tableId, data, options = {}) {\n    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/table&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &#96;;",
            "lineNumber": 98
          },
          {
            "text": "}",
            "lineNumber": 99
          },
          {
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "function flattenColumnMetadata(columnGroups = []) {",
            "lineNumber": 102
          },
          {
            "text": "    const flatColumns = [];",
            "lineNumber": 103
          },
          {
            "text": "    columnGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 104
          },
          {
            "text": "        if (Array.isArray(group.columns)) {",
            "lineNumber": 105
          },
          {
            "text": "            group.columns.forEach((column, columnIndex) =&gt; {",
            "lineNumber": 106
          },
          {
            "text": "                const field = column.field || &#96;col_${groupIndex}_${columnIndex}&#96;;",
            "lineNumber": 107
          },
          {
            "text": "                flatColumns.push({",
            "lineNumber": 108
          },
          {
            "text": "                    group,",
            "lineNumber": 109
          },
          {
            "text": "                    column,",
            "lineNumber": 110
          },
          {
            "text": "                    groupIndex,",
            "lineNumber": 111
          },
          {
            "text": "                    columnIndex,",
            "lineNumber": 112
          },
          {
            "text": "                    field",
            "lineNumber": 113
          },
          {
            "text": "                });",
            "lineNumber": 114
          },
          {
            "text": "            });",
            "lineNumber": 115
          },
          {
            "text": "        }",
            "lineNumber": 116
          },
          {
            "text": "    });",
            "lineNumber": 117
          },
          {
            "text": "    return flatColumns;",
            "lineNumber": 118
          },
          {
            "text": "}",
            "lineNumber": 119
          },
          {
            "lineNumber": 120
          },
          {
            "text": "function mapCellMetadata(cellMetadata = {}, columnOrder = []) {",
            "lineNumber": 121
          },
          {
            "text": "    const mapped = {};",
            "lineNumber": 122
          },
          {
            "text": "    Object.entries(cellMetadata).forEach(([key, styles]) =&gt; {",
            "lineNumber": 123
          },
          {
            "text": "        const [rowIndexStr, colIndexStr] = key.split(':');",
            "lineNumber": 124
          },
          {
            "text": "        const rowIndex = parseInt(rowIndexStr, 10);",
            "lineNumber": 125
          },
          {
            "text": "        const colIndex = parseInt(colIndexStr, 10);",
            "lineNumber": 126
          },
          {
            "text": "        const columnInfo = columnOrder[colIndex];",
            "lineNumber": 127
          },
          {
            "text": "        if (!columnInfo || Number.isNaN(rowIndex)) {",
            "lineNumber": 128
          },
          {
            "text": "            return;",
            "lineNumber": 129
          },
          {
            "text": "        }",
            "lineNumber": 130
          },
          {
            "text": "        const field = columnInfo.field;",
            "lineNumber": 131
          },
          {
            "text": "        if (!mapped[rowIndex]) {",
            "lineNumber": 132
          },
          {
            "text": "            mapped[rowIndex] = {};",
            "lineNumber": 133
          },
          {
            "text": "        }",
            "lineNumber": 134
          },
          {
            "text": "        mapped[rowIndex][field] = styles;",
            "lineNumber": 135
          },
          {
            "text": "    });",
            "lineNumber": 136
          },
          {
            "text": "    return mapped;",
            "lineNumber": 137
          },
          {
            "text": "}",
            "lineNumber": 138
          },
          {
            "lineNumber": 139
          },
          {
            "text": "function applyElementStyles(element, styles = {}) {",
            "lineNumber": 140
          },
          {
            "text": "    if (!element || !styles) {",
            "lineNumber": 141
          },
          {
            "text": "        return;",
            "lineNumber": 142
          },
          {
            "text": "    }",
            "lineNumber": 143
          },
          {
            "text": "    Object.entries(styles).forEach(([property, value]) =&gt; {",
            "lineNumber": 144
          },
          {
            "text": "        if (value !== undefined &amp;&amp; value !== null) {",
            "lineNumber": 145
          },
          {
            "text": "            element.style[property] = value;",
            "lineNumber": 146
          },
          {
            "text": "        }",
            "lineNumber": 147
          },
          {
            "text": "    });",
            "lineNumber": 148
          },
          {
            "text": "}",
            "lineNumber": 149
          },
          {
            "lineNumber": 150
          },
          {
            "text": "function parseColumnWidth(width) {",
            "lineNumber": 151
          },
          {
            "text": "    if (!width) {",
            "lineNumber": 152
          },
          {
            "text": "        return undefined;",
            "lineNumber": 153
          },
          {
            "text": "    }",
            "lineNumber": 154
          },
          {
            "text": "    if (typeof width === 'number') {",
            "lineNumber": 155
          },
          {
            "text": "        return width;",
            "lineNumber": 156
          },
          {
            "text": "    }",
            "lineNumber": 157
          },
          {
            "text": "    const parsed = parseInt(width, 10);",
            "lineNumber": 158
          },
          {
            "text": "    return Number.isNaN(parsed) ? undefined : parsed;",
            "lineNumber": 159
          },
          {
            "text": "}",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "function createTableTabulator(tableId, data, options = {}) {",
            "lineNumber": 162
          },
          {
            "text": "    ",
            "lineNumber": 163
          }
        ]
      },
      "score": 0.310644268989563
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':\n\n            \n            if not all_scores or not all_points:\n                return TableData(\n                    columns=columns,\n                    data=[],\n                    title=i18n_service.get_text(\"team_vs_team_comparison_matrix\"),\n                    description=\"No match data available\",\n                    config={\"striped\": True, \"hover\": True, \"compact\": True, \"stickyHeader\": True}\n                )\n            \n            score_min, score_max = min(all_scores), max(all_scores)\n            points_min, points_max = min(all_points), max(all_points)\n            \n            # Determine column indices for heat map (same for all rows)\n            # Position: 0, Team: 1, Average: 2-3, then pairs of (score, points) for each opponent\n            num_teams = len(sorted_teams)\n            score_column_indices = []\n            points_column_indices = []\n            \n            # Average columns are first (right after position and team)\n            avg_score_col_idx = 2\n            avg_points_col_idx = 3\n            \n            # Team columns come after averages\n            col_idx = 4  # Start after position (0), team name (1), and averages (2-3)\n            for _ in range(num_teams):\n                score_column_indices.append(col_idx)\n                points_column_indices.append(col_idx + 1)\n                col_idx += 2\n            \n            # Generate rows (using sorted teams)\n            for",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 3026,
                "column": 5
              },
              "endPosition": {
                "line": 3027,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':",
            "lineNumber": 3026
          },
          {
            "lineNumber": 3250
          },
          {
            "text": "            ",
            "lineNumber": 3251
          },
          {
            "text": "            if not all_scores or not all_points:",
            "lineNumber": 3252
          },
          {
            "text": "                return TableData(",
            "lineNumber": 3253
          },
          {
            "text": "                    columns=columns,",
            "lineNumber": 3254
          },
          {
            "text": "                    data=[],",
            "lineNumber": 3255
          },
          {
            "text": "                    title=i18n_service.get_text(\"team_vs_team_comparison_matrix\"),",
            "lineNumber": 3256
          },
          {
            "text": "                    description=\"No match data available\",",
            "lineNumber": 3257
          },
          {
            "text": "                    config={\"striped\": True, \"hover\": True, \"compact\": True, \"stickyHeader\": True}",
            "lineNumber": 3258
          },
          {
            "text": "                )",
            "lineNumber": 3259
          },
          {
            "text": "            ",
            "lineNumber": 3260
          },
          {
            "text": "            score_min, score_max = min(all_scores), max(all_scores)",
            "lineNumber": 3261
          },
          {
            "text": "            points_min, points_max = min(all_points), max(all_points)",
            "lineNumber": 3262
          },
          {
            "text": "            ",
            "lineNumber": 3263
          },
          {
            "text": "            # Determine column indices for heat map (same for all rows)",
            "lineNumber": 3264
          },
          {
            "text": "            # Position: 0, Team: 1, Average: 2-3, then pairs of (score, points) for each opponent",
            "lineNumber": 3265
          },
          {
            "text": "            num_teams = len(sorted_teams)",
            "lineNumber": 3266
          },
          {
            "text": "            score_column_indices = []",
            "lineNumber": 3267
          },
          {
            "text": "            points_column_indices = []",
            "lineNumber": 3268
          },
          {
            "text": "            ",
            "lineNumber": 3269
          },
          {
            "text": "            # Average columns are first (right after position and team)",
            "lineNumber": 3270
          },
          {
            "text": "            avg_score_col_idx = 2",
            "lineNumber": 3271
          },
          {
            "text": "            avg_points_col_idx = 3",
            "lineNumber": 3272
          },
          {
            "text": "            ",
            "lineNumber": 3273
          },
          {
            "text": "            # Team columns come after averages",
            "lineNumber": 3274
          },
          {
            "text": "            col_idx = 4  # Start after position (0), team name (1), and averages (2-3)",
            "lineNumber": 3275
          },
          {
            "text": "            for _ in range(num_teams):",
            "lineNumber": 3276
          },
          {
            "text": "                score_column_indices.append(col_idx)",
            "lineNumber": 3277
          },
          {
            "text": "                points_column_indices.append(col_idx + 1)",
            "lineNumber": 3278
          },
          {
            "text": "                col_idx += 2",
            "lineNumber": 3279
          },
          {
            "text": "            ",
            "lineNumber": 3280
          },
          {
            "text": "            # Generate rows (using sorted teams)",
            "lineNumber": 3281
          },
          {
            "text": "            for",
            "lineNumber": 3282
          }
        ]
      },
      "score": 0.30825409293174744
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\nconst THEME_COLORS_DARK = {\n\n        heatMapHigh: \"#1b8da7\",\n        \n        // Status colors (adjusted for dark mode)\n        warning: \"#86e1b3\",\n        info: \"#a1e8c4\",\n        success: \"#d4edda\",\n        danger: \"#f8d7da\",\n    };\n\n    // First color = base table background, second = accent stripe\n    // This makes one of the stripe colors effectively the \"default\" color.\n    //const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#e9f0ff\"];\n    const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#999999\"];\n\n    let currentPaletteName = \"rainbowPastel\";\n    let currentPalette = TEAM_COLOR_PALETTES[currentPaletteName];\n    const teamColorMap = globalObj.teamColorMap || {};\n\n    function hexToRgb(hex) {\n        if (!hex) return [255, 255, 255];\n        let clean = hex.replace(\"#\", \"\");\n        if (clean.length === 3) {\n            clean = clean.split(\"\").map(c =&gt; c + c).join(\"\");\n        }\n        const bigint = parseInt(clean, 16);\n        return [(bigint &gt;&gt; 16) &amp; 255, (bigint &gt;&gt; 8) &amp; 255, bigint &amp; 255];\n    }\n\n    function toRgba(color, alpha = 1) {\n        if (!color) return &#96;rgba(255,255,255,${alpha})&#96;;\n        if (color.startsWith(\"rgb\")) {\n            return color.replace(\")\", &#96;, ${alpha})&#96;).replace(\"rgb\", \"rgba\");\n        }\n        const [r, g, b] = hexToRgb(color);\n        return &#96;rgba(${r}, ${g}, ${b}, ${alpha})&#96;;\n    }\n\n    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {\n        \n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 21,
                "column": 5
              },
              "endPosition": {
                "line": 21,
                "column": 11
              }
            },
            {
              "startPosition": {
                "line": 21,
                "column": 11
              },
              "endPosition": {
                "line": 22,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "const THEME_COLORS_DARK = {",
            "lineNumber": 63
          },
          {
            "lineNumber": 94
          },
          {
            "text": "        heatMapHigh: \"#1b8da7\",",
            "lineNumber": 95
          },
          {
            "text": "        ",
            "lineNumber": 96
          },
          {
            "text": "        // Status colors (adjusted for dark mode)",
            "lineNumber": 97
          },
          {
            "text": "        warning: \"#86e1b3\",",
            "lineNumber": 98
          },
          {
            "text": "        info: \"#a1e8c4\",",
            "lineNumber": 99
          },
          {
            "text": "        success: \"#d4edda\",",
            "lineNumber": 100
          },
          {
            "text": "        danger: \"#f8d7da\",",
            "lineNumber": 101
          },
          {
            "text": "    };",
            "lineNumber": 102
          },
          {
            "lineNumber": 103
          },
          {
            "text": "    // First color = base table background, second = accent stripe",
            "lineNumber": 104
          },
          {
            "text": "    // This makes one of the stripe colors effectively the \"default\" color.",
            "lineNumber": 105
          },
          {
            "text": "    //const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#e9f0ff\"];",
            "lineNumber": 106
          },
          {
            "text": "    const DEFAULT_STRIPE_PALETTE = [\"#ffffff\", \"#999999\"];",
            "lineNumber": 107
          },
          {
            "lineNumber": 108
          },
          {
            "text": "    let currentPaletteName = \"rainbowPastel\";",
            "lineNumber": 109
          },
          {
            "text": "    let currentPalette = TEAM_COLOR_PALETTES[currentPaletteName];",
            "lineNumber": 110
          },
          {
            "text": "    const teamColorMap = globalObj.teamColorMap || {};",
            "lineNumber": 111
          },
          {
            "lineNumber": 112
          },
          {
            "text": "    function hexToRgb(hex) {",
            "lineNumber": 113
          },
          {
            "text": "        if (!hex) return [255, 255, 255];",
            "lineNumber": 114
          },
          {
            "text": "        let clean = hex.replace(\"#\", \"\");",
            "lineNumber": 115
          },
          {
            "text": "        if (clean.length === 3) {",
            "lineNumber": 116
          },
          {
            "text": "            clean = clean.split(\"\").map(c =&gt; c + c).join(\"\");",
            "lineNumber": 117
          },
          {
            "text": "        }",
            "lineNumber": 118
          },
          {
            "text": "        const bigint = parseInt(clean, 16);",
            "lineNumber": 119
          },
          {
            "text": "        return [(bigint &gt;&gt; 16) &amp; 255, (bigint &gt;&gt; 8) &amp; 255, bigint &amp; 255];",
            "lineNumber": 120
          },
          {
            "text": "    }",
            "lineNumber": 121
          },
          {
            "lineNumber": 122
          },
          {
            "text": "    function toRgba(color, alpha = 1) {",
            "lineNumber": 123
          },
          {
            "text": "        if (!color) return &#96;rgba(255,255,255,${alpha})&#96;;",
            "lineNumber": 124
          },
          {
            "text": "        if (color.startsWith(\"rgb\")) {",
            "lineNumber": 125
          },
          {
            "text": "            return color.replace(\")\", &#96;, ${alpha})&#96;).replace(\"rgb\", \"rgba\");",
            "lineNumber": 126
          },
          {
            "text": "        }",
            "lineNumber": 127
          },
          {
            "text": "        const [r, g, b] = hexToRgb(color);",
            "lineNumber": 128
          },
          {
            "text": "        return &#96;rgba(${r}, ${g}, ${b}, ${alpha})&#96;;",
            "lineNumber": 129
          },
          {
            "text": "    }",
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {",
            "lineNumber": 132
          },
          {
            "text": "        ",
            "lineNumber": 133
          },
          {
            "text": "    }",
            "lineNumber": 148
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.304755300283432
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n\n            \n            # Create columns - two column groups: selected team and opposing team\n            # Order: Player name, Pins, Points | Points, Pins, Player name\n            columns = [\n                ColumnGroup(\n                    title=team,  # Selected team name\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"player\"), field=\"player_name\", width=\"200px\", align=\"left\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"player_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"points\", width=\"80px\", align=\"center\")\n                    ]\n                ),\n                ColumnGroup(\n                    title=opponent_name,  # Opposing team name\n                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"player\"), field=\"opponent_player_name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Build data rows - sort by position\n            data = []\n            if Columns.position not in player_data.columns:\n                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing position column)\"\n                )\n            \n            player_data_sorted = player_data.sort_values(by=Columns.position)",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 250,
                "column": 5
              },
              "endPosition": {
                "line": 251,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 250
          },
          {
            "lineNumber": 356
          },
          {
            "text": "            ",
            "lineNumber": 357
          },
          {
            "text": "            # Create columns - two column groups: selected team and opposing team",
            "lineNumber": 358
          },
          {
            "text": "            # Order: Player name, Pins, Points | Points, Pins, Player name",
            "lineNumber": 359
          },
          {
            "text": "            columns = [",
            "lineNumber": 360
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 361
          },
          {
            "text": "                    title=team,  # Selected team name",
            "lineNumber": 362
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 363
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 364
          },
          {
            "text": "                    columns=[",
            "lineNumber": 365
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"player\"), field=\"player_name\", width=\"200px\", align=\"left\"),",
            "lineNumber": 366
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"player_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 367
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"points\", width=\"80px\", align=\"center\")",
            "lineNumber": 368
          },
          {
            "text": "                    ]",
            "lineNumber": 369
          },
          {
            "text": "                ),",
            "lineNumber": 370
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 371
          },
          {
            "text": "                    title=opponent_name,  # Opposing team name",
            "lineNumber": 372
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},",
            "lineNumber": 373
          },
          {
            "text": "                    columns=[",
            "lineNumber": 374
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 375
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 376
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"player\"), field=\"opponent_player_name\", width=\"200px\", align=\"left\")",
            "lineNumber": 377
          },
          {
            "text": "                    ]",
            "lineNumber": 378
          },
          {
            "text": "                )",
            "lineNumber": 379
          },
          {
            "text": "            ]",
            "lineNumber": 380
          },
          {
            "text": "            ",
            "lineNumber": 381
          },
          {
            "text": "            # Build data rows - sort by position",
            "lineNumber": 382
          },
          {
            "text": "            data = []",
            "lineNumber": 383
          },
          {
            "text": "            if Columns.position not in player_data.columns:",
            "lineNumber": 384
          },
          {
            "text": "                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")",
            "lineNumber": 385
          },
          {
            "text": "                return TableData(",
            "lineNumber": 386
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 387
          },
          {
            "text": "                    data=[],",
            "lineNumber": 388
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing position column)\"",
            "lineNumber": 389
          },
          {
            "text": "                )",
            "lineNumber": 390
          },
          {
            "text": "            ",
            "lineNumber": 391
          },
          {
            "text": "            player_data_sorted = player_data.sort_values(by=Columns.position)",
            "lineNumber": 392
          }
        ]
      },
      "score": 0.2959305942058563
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:\n\n\n            # Helper to build player col group\n            def player_col_group(player, prefix):\n                return ColumnGroup(\n                    title=player,\n                        columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=f\"{prefix}{player}_pos\", width=\"50px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"score\"), field=f\"{prefix}{player}_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=f\"{prefix}{player}_points\", width=\"60px\", align=\"center\"),\n                    ]\n                )\n\n            # Add own team player columns\n            for player in own_players:\n                columns.append(player_col_group(player, \"own_\"))\n            # Add opponent player columns\n            for player in opp_players:\n                columns.append(player_col_group(player, \"opp_\"))\n\n            # Add team column group\n            columns.append(\n                ColumnGroup(\n                    title=i18n_service.get_text(\"team\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"score\"), field=\"team_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")\n                    ]\n                )\n            )\n            \n            # --- Build data rows ---\n            if",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1783,
                "column": 5
              },
              "endPosition": {
                "line": 1784,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:",
            "lineNumber": 1783
          },
          {
            "lineNumber": 1848
          },
          {
            "lineNumber": 1849
          },
          {
            "text": "            # Helper to build player col group",
            "lineNumber": 1850
          },
          {
            "text": "            def player_col_group(player, prefix):",
            "lineNumber": 1851
          },
          {
            "text": "                return ColumnGroup(",
            "lineNumber": 1852
          },
          {
            "text": "                    title=player,",
            "lineNumber": 1853
          },
          {
            "text": "                        columns=[",
            "lineNumber": 1854
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=f\"{prefix}{player}_pos\", width=\"50px\", align=\"center\"),",
            "lineNumber": 1855
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=f\"{prefix}{player}_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 1856
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=f\"{prefix}{player}_points\", width=\"60px\", align=\"center\"),",
            "lineNumber": 1857
          },
          {
            "text": "                    ]",
            "lineNumber": 1858
          },
          {
            "text": "                )",
            "lineNumber": 1859
          },
          {
            "lineNumber": 1860
          },
          {
            "text": "            # Add own team player columns",
            "lineNumber": 1861
          },
          {
            "text": "            for player in own_players:",
            "lineNumber": 1862
          },
          {
            "text": "                columns.append(player_col_group(player, \"own_\"))",
            "lineNumber": 1863
          },
          {
            "text": "            # Add opponent player columns",
            "lineNumber": 1864
          },
          {
            "text": "            for player in opp_players:",
            "lineNumber": 1865
          },
          {
            "text": "                columns.append(player_col_group(player, \"opp_\"))",
            "lineNumber": 1866
          },
          {
            "lineNumber": 1867
          },
          {
            "text": "            # Add team column group",
            "lineNumber": 1868
          },
          {
            "text": "            columns.append(",
            "lineNumber": 1869
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1870
          },
          {
            "text": "                    title=i18n_service.get_text(\"team\"),",
            "lineNumber": 1871
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 1872
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 1873
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1874
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=\"team_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 1875
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")",
            "lineNumber": 1876
          },
          {
            "text": "                    ]",
            "lineNumber": 1877
          },
          {
            "text": "                )",
            "lineNumber": 1878
          },
          {
            "text": "            )",
            "lineNumber": 1879
          },
          {
            "text": "            ",
            "lineNumber": 1880
          },
          {
            "text": "            # --- Build data rows ---",
            "lineNumber": 1881
          },
          {
            "text": "            if",
            "lineNumber": 1882
          }
        ]
      },
      "score": 0.2956245541572571
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3495
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n            \n            # Add game column groups with opponent team names\n            for game in games:\n                opponent_name = game_to_opponent.get(game, f\"{i18n_service.get_text('game')} {game}\")\n                columns.append(\n                    ColumnGroup(\n                        title=opponent_name,\n                        columns=[\n                            Column(title=i18n_service.get_text(\"pins\"), field=f\"game{game}_score\", width=\"80px\", align=\"center\"),\n                            Column(title=i18n_service.get_text(\"points\"), field=f\"game{game}_points\", width=\"60px\", align=\"center\")\n                        ]\n                    )\n                )\n            \n            # Add totals column group\n            columns.append(\n                ColumnGroup(\n                    title=i18n_service.get_text(\"total\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"total_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"score\"), field=\"total_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"avg\"), field=\"average\", width=\"80px\", align=\"center\")\n                    ]\n                )\n            )\n            \n            # Prepare data rows with merged position cells\n            data = []\n            row_metadata = []\n            \n            # Get all unique players who played in this event (same logic as New view)\n            player_identifiers = []\n            for _, row in player_data.iterrows():\n                player_id =",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 772,
                "column": 5
              },
              "endPosition": {
                "line": 773,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 772
          },
          {
            "lineNumber": 848
          },
          {
            "text": "            ",
            "lineNumber": 849
          },
          {
            "text": "            # Add game column groups with opponent team names",
            "lineNumber": 850
          },
          {
            "text": "            for game in games:",
            "lineNumber": 851
          },
          {
            "text": "                opponent_name = game_to_opponent.get(game, f\"{i18n_service.get_text('game')} {game}\")",
            "lineNumber": 852
          },
          {
            "text": "                columns.append(",
            "lineNumber": 853
          },
          {
            "text": "                    ColumnGroup(",
            "lineNumber": 854
          },
          {
            "text": "                        title=opponent_name,",
            "lineNumber": 855
          },
          {
            "text": "                        columns=[",
            "lineNumber": 856
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"pins\"), field=f\"game{game}_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 857
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"points\"), field=f\"game{game}_points\", width=\"60px\", align=\"center\")",
            "lineNumber": 858
          },
          {
            "text": "                        ]",
            "lineNumber": 859
          },
          {
            "text": "                    )",
            "lineNumber": 860
          },
          {
            "text": "                )",
            "lineNumber": 861
          },
          {
            "text": "            ",
            "lineNumber": 862
          },
          {
            "text": "            # Add totals column group",
            "lineNumber": 863
          },
          {
            "text": "            columns.append(",
            "lineNumber": 864
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 865
          },
          {
            "text": "                    title=i18n_service.get_text(\"total\"),",
            "lineNumber": 866
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 867
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 868
          },
          {
            "text": "                    columns=[",
            "lineNumber": 869
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"total_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 870
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=\"total_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 871
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"avg\"), field=\"average\", width=\"80px\", align=\"center\")",
            "lineNumber": 872
          },
          {
            "text": "                    ]",
            "lineNumber": 873
          },
          {
            "text": "                )",
            "lineNumber": 874
          },
          {
            "text": "            )",
            "lineNumber": 875
          },
          {
            "text": "            ",
            "lineNumber": 876
          },
          {
            "text": "            # Prepare data rows with merged position cells",
            "lineNumber": 877
          },
          {
            "text": "            data = []",
            "lineNumber": 878
          },
          {
            "text": "            row_metadata = []",
            "lineNumber": 879
          },
          {
            "text": "            ",
            "lineNumber": 880
          },
          {
            "text": "            # Get all unique players who played in this event (same logic as New view)",
            "lineNumber": 881
          },
          {
            "text": "            player_identifiers = []",
            "lineNumber": 882
          },
          {
            "text": "            for _, row in player_data.iterrows():",
            "lineNumber": 883
          },
          {
            "text": "                player_id =",
            "lineNumber": 884
          }
        ]
      },
      "score": 0.2909437119960785
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "apply_heat_map|heatmap|heat_map",
  "path": "app/services/league_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "apply_heat_map|heatmap|heat_map",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "15:from app.utils.color_constants import get_theme_color, get_heat_map_color",
              "matches": [
                {
                  "lineNumber": 20,
                  "content": "    apply_heat_map_to_columns"
                },
                {
                  "lineNumber": 3009,
                  "content": "    def _apply_heat_map_to_columns(self, table_data: List[List], cell_metadata: Dict[str, Dict],"
                },
                {
                  "lineNumber": 3024,
                  "content": "        return apply_heat_map_to_columns(table_data, cell_metadata, column_indices, min_val, max_val)"
                },
                {
                  "lineNumber": 3330,
                  "content": "            self._apply_heat_map_to_columns(table_data, cell_metadata, score_column_indices, score_min, score_max)"
                },
                {
                  "lineNumber": 3331,
                  "content": "            self._apply_heat_map_to_columns(table_data, cell_metadata, points_column_indices, points_min, points_max)"
                },
                {
                  "lineNumber": 3332,
                  "content": "            self._apply_heat_map_to_columns(table_data, cell_metadata, [avg_score_col_idx], score_min, score_max)"
                },
                {
                  "lineNumber": 3333,
                  "content": "            self._apply_heat_map_to_columns(table_data, cell_metadata, [avg_points_col_idx], points_min, points_max)"
                }
              ]
            }
          ],
          "totalLines": 7,
          "totalMatchedLines": 7
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---



---


Applying heatmaps to the points and pins columns. Checking the current structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "from app.utils.league_utils import",
  "path": "app/services/league_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "from app.utils.league_utils import",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---



---


Checking how cell_metadata is returned in TableData:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "cell_metadata|cellMetadata",
  "path": "app/models/table_data.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "cell_metadata|cellMetadata",
    "path": "app/models/table_data.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "39:    cell_metadata: Optional[Dict[str, Dict[str, Any]]] = field(default_factory=dict)  # Cell-level metadata for styling (format: \"row:col\")",
              "matches": [
                {
                  "lineNumber": 82,
                  "content": "            **({\"cell_metadata\": self.cell_metadata} if self.cell_metadata else {}),"
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\models/table_data.py</summary>

</details>
</tool-use>

---



---


Adding heatmap coloring to the points and pins columns:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "9b41d54f-35f6-4b0a-a67d-242fb8c4d83e"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Applied heatmap coloring to the points and pins columns.

**Changes made:**
1. Created a `cell_metadata` dictionary to store heatmap colors
2. Applied heatmap to pins columns (indices 2 and 5): `team_pins` and `opponent_pins`
3. Applied heatmap to points columns (indices 3 and 4): `team_points` and `opponent_points`
4. Passed `cell_metadata` to the `TableData` constructor

The heatmap uses the same function as the team vs team comparison table, calculating min/max from the data and applying a color gradient from low to high values.

Refresh the page to see the heatmap colors on the points and pins columns. Higher values will be more intense, and lower values will be lighter.

---

_**User (2025-12-06 20:11Z)**_

and finally add col group striping to the table

---

_**Agent (model default, mode Agent)**_



---


Checking how column group striping is configured and applying it to the game overview table:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "stripedColGroups|striped.*group",
  "path": "app/services/league_service.py",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "stripedColGroups|striped.*group",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is column group striping configured in table data?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 438,
            "column": 12
          },
          "endPosition": {
            "line": 482
          }
        },
        "contents": "groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();\n        }\n\n        const groupDefinition = {\n            title: group.title || '',\n            headerHozAlign: 'center',\n            cssClass: groupCssClass,\n            columns: group.columns.map((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return null;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add stripe class for column group coloring; actual colors come from CSS\n                    if (useStripedGroups) {\n                        element.classList.add('col-group-' + groupIndex);\n                    }\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles\n                    const cellMeta = cellMetadataMap[rowIdx]?.[field];\n                    if (cellMeta) {\n                        applyElementStyles(element, cellMeta);\n                    }\n\n                    // Special handling for position columns",
        "signatures": {},
        "detailedLines": [
          {
            "text": "groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();",
            "lineNumber": 439
          },
          {
            "text": "        }",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "        const groupDefinition = {",
            "lineNumber": 442
          },
          {
            "text": "            title: group.title || '',",
            "lineNumber": 443
          },
          {
            "text": "            headerHozAlign: 'center',",
            "lineNumber": 444
          },
          {
            "text": "            cssClass: groupCssClass,",
            "lineNumber": 445
          },
          {
            "text": "            columns: group.columns.map((column, columnIndex) =&gt; {",
            "lineNumber": 446
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 447
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 448
          },
          {
            "text": "                    return null;",
            "lineNumber": 449
          },
          {
            "text": "                }",
            "lineNumber": 450
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 451
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 452
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 453
          },
          {
            "text": "                ",
            "lineNumber": 454
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 455
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 456
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 457
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 458
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 459
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "                    // Add stripe class for column group coloring; actual colors come from CSS",
            "lineNumber": 462
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 463
          },
          {
            "text": "                        element.classList.add('col-group-' + groupIndex);",
            "lineNumber": 464
          },
          {
            "text": "                    }",
            "lineNumber": 465
          },
          {
            "lineNumber": 466
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 467
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 468
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 469
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 470
          },
          {
            "text": "                    }",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 473
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 474
          },
          {
            "lineNumber": 475
          },
          {
            "text": "                    // Cell metadata styles",
            "lineNumber": 476
          },
          {
            "text": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];",
            "lineNumber": 477
          },
          {
            "text": "                    if (cellMeta) {",
            "lineNumber": 478
          },
          {
            "text": "                        applyElementStyles(element, cellMeta);",
            "lineNumber": 479
          },
          {
            "text": "                    }",
            "lineNumber": 480
          },
          {
            "lineNumber": 481
          },
          {
            "text": "                    // Special handling for position columns",
            "lineNumber": 482
          }
        ]
      },
      "score": 0.4915560483932495
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 538
          },
          "endPosition": {
            "line": 568,
            "column": 20
          }
        },
        "contents": "                        }\n                    }\n\n                    return value ?? '';\n                };\n\n                const sampleValue = transformedData.length ? transformedData[0][field] : null;\n                const isNumberColumn = typeof sampleValue === 'number';\n                // Check if it's a string that represents a number (e.g., \"100.0\", \"99.5\")\n                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);\n\n                // Build column cssClass: combine striped class with any existing\n                // cssClass applies to cells, headerClass applies to column headers\n                // If striping is enabled, assignGroupStripeCss already added col-group-N to column.cssClass\n                // But we also need to add it here in case the backend column object wasn't modified\n                let colCssClass = column.cssClass || '';\n                let colHeaderClass = column.headerClass || '';\n                \n                // Ensure stripe class is added if striping is enabled\n                if (useStripedGroups) {\n                    const stripeClass = 'col-group-' + groupIndex;\n                    if (!colCssClass.includes(stripeClass)) {\n                        colCssClass = (colCssClass + ' ' + stripeClass).trim();\n                    }\n                    if (!colHeaderClass.includes(stripeClass)) {\n                        colHeaderClass = (colHeaderClass + ' ' + stripeClass).trim();\n                    }\n                }\n\n                const columnDefinition = {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        }",
            "lineNumber": 539
          },
          {
            "text": "                    }",
            "lineNumber": 540
          },
          {
            "lineNumber": 541
          },
          {
            "text": "                    return value ?? '';",
            "lineNumber": 542
          },
          {
            "text": "                };",
            "lineNumber": 543
          },
          {
            "lineNumber": 544
          },
          {
            "text": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;",
            "lineNumber": 545
          },
          {
            "text": "                const isNumberColumn = typeof sampleValue === 'number';",
            "lineNumber": 546
          },
          {
            "text": "                // Check if it's a string that represents a number (e.g., \"100.0\", \"99.5\")",
            "lineNumber": 547
          },
          {
            "text": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
            "lineNumber": 548
          },
          {
            "lineNumber": 549
          },
          {
            "text": "                // Build column cssClass: combine striped class with any existing",
            "lineNumber": 550
          },
          {
            "text": "                // cssClass applies to cells, headerClass applies to column headers",
            "lineNumber": 551
          },
          {
            "text": "                // If striping is enabled, assignGroupStripeCss already added col-group-N to column.cssClass",
            "lineNumber": 552
          },
          {
            "text": "                // But we also need to add it here in case the backend column object wasn't modified",
            "lineNumber": 553
          },
          {
            "text": "                let colCssClass = column.cssClass || '';",
            "lineNumber": 554
          },
          {
            "text": "                let colHeaderClass = column.headerClass || '';",
            "lineNumber": 555
          },
          {
            "text": "                ",
            "lineNumber": 556
          },
          {
            "text": "                // Ensure stripe class is added if striping is enabled",
            "lineNumber": 557
          },
          {
            "text": "                if (useStripedGroups) {",
            "lineNumber": 558
          },
          {
            "text": "                    const stripeClass = 'col-group-' + groupIndex;",
            "lineNumber": 559
          },
          {
            "text": "                    if (!colCssClass.includes(stripeClass)) {",
            "lineNumber": 560
          },
          {
            "text": "                        colCssClass = (colCssClass + ' ' + stripeClass).trim();",
            "lineNumber": 561
          },
          {
            "text": "                    }",
            "lineNumber": 562
          },
          {
            "text": "                    if (!colHeaderClass.includes(stripeClass)) {",
            "lineNumber": 563
          },
          {
            "text": "                        colHeaderClass = (colHeaderClass + ' ' + stripeClass).trim();",
            "lineNumber": 564
          },
          {
            "text": "                    }",
            "lineNumber": 565
          },
          {
            "text": "                }",
            "lineNumber": 566
          },
          {
            "lineNumber": 567
          },
          {
            "text": "                const columnDefinition = {",
            "lineNumber": 568
          },
          {
            "text": "                    ",
            "lineNumber": 569
          }
        ]
      },
      "score": 0.4723360538482666
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 213
          },
          "endPosition": {
            "line": 245
          }
        },
        "contents": "    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);\n    const rowMetadataMap = (data.row_metadata || []).reduce((acc, meta, index) =&gt; {\n        acc[index] = meta || {};\n        return acc;\n    }, {});\n\n    const transformedData = data.data.map((row, rowIndex) =&gt; {\n        const rowObject = { __rowIndex: rowIndex };\n        columnOrder.forEach((columnInfo, columnIndex) =&gt; {\n            rowObject[columnInfo.field] = row[columnIndex];\n        });\n        if (rowMetadataMap[rowIndex]) {\n            rowObject.__rowMeta = rowMetadataMap[rowIndex];\n        }\n        return rowObject;\n    });\n\n    // Check if all group titles are empty - if so, flatten structure (no groups)\n    const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');\n    \n    // Apply CSS classes for striped column groups before building column definitions\n    if (useStripedGroups &amp;&amp; data.columns &amp;&amp; hasGroupTitles) {\n        ColorUtils.assignGroupStripeCss(data.columns);\n        ColorUtils.injectStripeCss(data.columns.length, {\n            headerAlpha: isCompactLayout ? 0.55 : 0.4,\n            cellAlpha: 0.25\n        });\n    }\n\n    // If no group titles, flatten to direct columns (no groups)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          },
          {
            "text": "    const rowMetadataMap = (data.row_metadata || []).reduce((acc, meta, index) =&gt; {",
            "lineNumber": 217
          },
          {
            "text": "        acc[index] = meta || {};",
            "lineNumber": 218
          },
          {
            "text": "        return acc;",
            "lineNumber": 219
          },
          {
            "text": "    }, {});",
            "lineNumber": 220
          },
          {
            "lineNumber": 221
          },
          {
            "text": "    const transformedData = data.data.map((row, rowIndex) =&gt; {",
            "lineNumber": 222
          },
          {
            "text": "        const rowObject = { __rowIndex: rowIndex };",
            "lineNumber": 223
          },
          {
            "text": "        columnOrder.forEach((columnInfo, columnIndex) =&gt; {",
            "lineNumber": 224
          },
          {
            "text": "            rowObject[columnInfo.field] = row[columnIndex];",
            "lineNumber": 225
          },
          {
            "text": "        });",
            "lineNumber": 226
          },
          {
            "text": "        if (rowMetadataMap[rowIndex]) {",
            "lineNumber": 227
          },
          {
            "text": "            rowObject.__rowMeta = rowMetadataMap[rowIndex];",
            "lineNumber": 228
          },
          {
            "text": "        }",
            "lineNumber": 229
          },
          {
            "text": "        return rowObject;",
            "lineNumber": 230
          },
          {
            "text": "    });",
            "lineNumber": 231
          },
          {
            "lineNumber": 232
          },
          {
            "text": "    // Check if all group titles are empty - if so, flatten structure (no groups)",
            "lineNumber": 233
          },
          {
            "text": "    const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');",
            "lineNumber": 234
          },
          {
            "text": "    ",
            "lineNumber": 235
          },
          {
            "text": "    // Apply CSS classes for striped column groups before building column definitions",
            "lineNumber": 236
          },
          {
            "text": "    if (useStripedGroups &amp;&amp; data.columns &amp;&amp; hasGroupTitles) {",
            "lineNumber": 237
          },
          {
            "text": "        ColorUtils.assignGroupStripeCss(data.columns);",
            "lineNumber": 238
          },
          {
            "text": "        ColorUtils.injectStripeCss(data.columns.length, {",
            "lineNumber": 239
          },
          {
            "text": "            headerAlpha: isCompactLayout ? 0.55 : 0.4,",
            "lineNumber": 240
          },
          {
            "text": "            cellAlpha: 0.25",
            "lineNumber": 241
          },
          {
            "text": "        });",
            "lineNumber": 242
          },
          {
            "text": "    }",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "    // If no group titles, flatten to direct columns (no groups)",
            "lineNumber": 245
          }
        ]
      },
      "score": 0.4707835912704468
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 404
          },
          "endPosition": {
            "line": 443
          }
        },
        "contents": "                    }\n                }\n\n                if (columnWidth !== undefined) {\n                    if (isCompactLayout) {\n                        columnDefinition.width = columnWidth;\n                        columnDefinition.minWidth = columnWidth;\n                        columnDefinition.widthGrow = 0;\n                    } else {\n                        columnDefinition.minWidth = columnWidth;\n                        columnDefinition.widthGrow = 1;\n                    }\n                } else if (isCompactLayout) {\n                    columnDefinition.widthGrow = 0;\n                }\n\n                tabulatorColumns.push(columnDefinition);\n            });\n        });\n    } else {\n        // Normal structure with groups\n        tabulatorColumns = (data.columns || []).map((group, groupIndex) =&gt; {\n        if (!Array.isArray(group.columns)) {\n            return null;\n        }\n\n        const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;\n        \n        // Use backend flag for highlighting\n        const isHighlighted = group.highlighted === true;\n\n        // Build cssClass: combine striped class (already added by assignGroupStripeCss) with highlight class\n        let groupCssClass = group.cssClass || '';\n        if (isHighlighted) {\n            groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();\n        }\n\n        const groupDefinition = {\n            title: group.title || '',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    }",
            "lineNumber": 405
          },
          {
            "text": "                }",
            "lineNumber": 406
          },
          {
            "lineNumber": 407
          },
          {
            "text": "                if (columnWidth !== undefined) {",
            "lineNumber": 408
          },
          {
            "text": "                    if (isCompactLayout) {",
            "lineNumber": 409
          },
          {
            "text": "                        columnDefinition.width = columnWidth;",
            "lineNumber": 410
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth;",
            "lineNumber": 411
          },
          {
            "text": "                        columnDefinition.widthGrow = 0;",
            "lineNumber": 412
          },
          {
            "text": "                    } else {",
            "lineNumber": 413
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth;",
            "lineNumber": 414
          },
          {
            "text": "                        columnDefinition.widthGrow = 1;",
            "lineNumber": 415
          },
          {
            "text": "                    }",
            "lineNumber": 416
          },
          {
            "text": "                } else if (isCompactLayout) {",
            "lineNumber": 417
          },
          {
            "text": "                    columnDefinition.widthGrow = 0;",
            "lineNumber": 418
          },
          {
            "text": "                }",
            "lineNumber": 419
          },
          {
            "lineNumber": 420
          },
          {
            "text": "                tabulatorColumns.push(columnDefinition);",
            "lineNumber": 421
          },
          {
            "text": "            });",
            "lineNumber": 422
          },
          {
            "text": "        });",
            "lineNumber": 423
          },
          {
            "text": "    } else {",
            "lineNumber": 424
          },
          {
            "text": "        // Normal structure with groups",
            "lineNumber": 425
          },
          {
            "text": "        tabulatorColumns = (data.columns || []).map((group, groupIndex) =&gt; {",
            "lineNumber": 426
          },
          {
            "text": "        if (!Array.isArray(group.columns)) {",
            "lineNumber": 427
          },
          {
            "text": "            return null;",
            "lineNumber": 428
          },
          {
            "text": "        }",
            "lineNumber": 429
          },
          {
            "lineNumber": 430
          },
          {
            "text": "        const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;",
            "lineNumber": 431
          },
          {
            "text": "        ",
            "lineNumber": 432
          },
          {
            "text": "        // Use backend flag for highlighting",
            "lineNumber": 433
          },
          {
            "text": "        const isHighlighted = group.highlighted === true;",
            "lineNumber": 434
          },
          {
            "lineNumber": 435
          },
          {
            "text": "        // Build cssClass: combine striped class (already added by assignGroupStripeCss) with highlight class",
            "lineNumber": 436
          },
          {
            "text": "        let groupCssClass = group.cssClass || '';",
            "lineNumber": 437
          },
          {
            "text": "        if (isHighlighted) {",
            "lineNumber": 438
          },
          {
            "text": "            groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();",
            "lineNumber": 439
          },
          {
            "text": "        }",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "        const groupDefinition = {",
            "lineNumber": 442
          },
          {
            "text": "            title: group.title || '',",
            "lineNumber": 443
          }
        ]
      },
      "score": 0.46142375469207764
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\table_data.py",
        "range": {
          "startPosition": {
            "line": 15,
            "column": 67
          },
          "endPosition": {
            "line": 83
          }
        },
        "contents": "@dataclass\nclass ColumnGroup:\n    \"\"\"Column group with a common header.\"\"\"\n    title: str\n    columns: List[Column]\n    frozen: Optional[str] = None  # 'left', 'right', or None\n    style: Optional[Dict[str, str]] = None  # Custom CSS styles for the group\n    header_style: Optional[Dict[str, str]] = None  # Custom CSS for header\n    width: Optional[str] = None  # Width for the entire group\n    highlighted: bool = False  # Whether this group should be visually highlighted\n\n@dataclass\nclass TableData:\n    \"\"\"Complete table data structure.\"\"\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 18
          },
          {
            "text": "class ColumnGroup:",
            "lineNumber": 19,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Column group with a common header.\"\"\"",
            "lineNumber": 20
          },
          {
            "text": "    title: str",
            "lineNumber": 21
          },
          {
            "text": "    columns: List[Column]",
            "lineNumber": 22
          },
          {
            "text": "    frozen: Optional[str] = None  # 'left', 'right', or None",
            "lineNumber": 23
          },
          {
            "text": "    style: Optional[Dict[str, str]] = None  # Custom CSS styles for the group",
            "lineNumber": 24
          },
          {
            "text": "    header_style: Optional[Dict[str, str]] = None  # Custom CSS for header",
            "lineNumber": 25
          },
          {
            "text": "    width: Optional[str] = None  # Width for the entire group",
            "lineNumber": 26
          },
          {
            "text": "    highlighted: bool = False  # Whether this group should be visually highlighted",
            "lineNumber": 27,
            "isSignature": true
          },
          {
            "lineNumber": 28
          },
          {
            "text": "@dataclass",
            "lineNumber": 29
          },
          {
            "text": "class TableData:",
            "lineNumber": 30,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Complete table data structure.\"\"\"",
            "lineNumber": 31
          }
        ]
      },
      "score": 0.43515869975090027
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\n\n\n    function assignLeafColumnCss(columns, groupIndex) {\n        columns.forEach(col =&gt; {\n            if (col.columns) {\n                // Nested group - recurse\n                assignLeafColumnCss(col.columns, groupIndex);\n            } else {\n                // Leaf column - cssClass for cells, headerClass for column headers\n                col.cssClass = ((col.cssClass || \"\") + \" col-group-\" + groupIndex).trim();\n                col.headerClass = ((col.headerClass || \"\") + \" col-group-\" + groupIndex).trim();\n            }\n        });\n    }\n\n    /**\n     * Generates CSS rules for striped column groups.\n     * @param {number} groupCount - Number of groups to generate rules for\n     * @param {Object} options - Options for colors\n     * @returns {string} CSS rules as a string\n     */\n    function generateStripeCss(groupCount, options = {}) {\n        const palette = options.palette || DEFAULT_STRIPE_PALETTE;\n        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;\n        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;\n        \n        let css = \"\";\n        for (let i = 0; i &lt; groupCount; i++) {\n            const color = palette[i % palette.length];\n            const headerBg = toRgba(color, headerAlpha);\n            const cellBg = toRgba(color, cellAlpha);\n            // Body cells (but NOT frozen ones – they use solid row backgrounds to avoid see‑through)\n            css += &#96;.tabulator-cell.col-group-${i}:not(.tabulator-frozen) { background-color: ${cellBg} !important; }\\n&#96;;\n            // Full header cells for this group (no small boxes just behind text), but not frozen headers\n            css += &#96;.tabulator-col.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;\n            css += &#96;.tabulator-col-group.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;\n        }\n        return css;\n    }\n\n    /**\n     * Injects stripe CSS into the document if not already present.\n     * @param {number} groupCount - Number of groups\n     * @param {Object} options - Color options\n     */\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "lineNumber": 178
          },
          {
            "lineNumber": 179
          },
          {
            "text": "    function assignLeafColumnCss(columns, groupIndex) {",
            "lineNumber": 180
          },
          {
            "text": "        columns.forEach(col =&gt; {",
            "lineNumber": 181
          },
          {
            "text": "            if (col.columns) {",
            "lineNumber": 182
          },
          {
            "text": "                // Nested group - recurse",
            "lineNumber": 183
          },
          {
            "text": "                assignLeafColumnCss(col.columns, groupIndex);",
            "lineNumber": 184
          },
          {
            "text": "            } else {",
            "lineNumber": 185
          },
          {
            "text": "                // Leaf column - cssClass for cells, headerClass for column headers",
            "lineNumber": 186
          },
          {
            "text": "                col.cssClass = ((col.cssClass || \"\") + \" col-group-\" + groupIndex).trim();",
            "lineNumber": 187
          },
          {
            "text": "                col.headerClass = ((col.headerClass || \"\") + \" col-group-\" + groupIndex).trim();",
            "lineNumber": 188
          },
          {
            "text": "            }",
            "lineNumber": 189
          },
          {
            "text": "        });",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "lineNumber": 192
          },
          {
            "text": "    /**",
            "lineNumber": 193
          },
          {
            "text": "     * Generates CSS rules for striped column groups.",
            "lineNumber": 194
          },
          {
            "text": "     * @param {number} groupCount - Number of groups to generate rules for",
            "lineNumber": 195
          },
          {
            "text": "     * @param {Object} options - Options for colors",
            "lineNumber": 196
          },
          {
            "text": "     * @returns {string} CSS rules as a string",
            "lineNumber": 197
          },
          {
            "text": "     */",
            "lineNumber": 198
          },
          {
            "text": "    function generateStripeCss(groupCount, options = {}) {",
            "lineNumber": 199
          },
          {
            "text": "        const palette = options.palette || DEFAULT_STRIPE_PALETTE;",
            "lineNumber": 200
          },
          {
            "text": "        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;",
            "lineNumber": 201
          },
          {
            "text": "        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;",
            "lineNumber": 202
          },
          {
            "text": "        ",
            "lineNumber": 203
          },
          {
            "text": "        let css = \"\";",
            "lineNumber": 204
          },
          {
            "text": "        for (let i = 0; i &lt; groupCount; i++) {",
            "lineNumber": 205
          },
          {
            "text": "            const color = palette[i % palette.length];",
            "lineNumber": 206
          },
          {
            "text": "            const headerBg = toRgba(color, headerAlpha);",
            "lineNumber": 207
          },
          {
            "text": "            const cellBg = toRgba(color, cellAlpha);",
            "lineNumber": 208
          },
          {
            "text": "            // Body cells (but NOT frozen ones – they use solid row backgrounds to avoid see‑through)",
            "lineNumber": 209
          },
          {
            "text": "            css += &#96;.tabulator-cell.col-group-${i}:not(.tabulator-frozen) { background-color: ${cellBg} !important; }\\n&#96;;",
            "lineNumber": 210
          },
          {
            "text": "            // Full header cells for this group (no small boxes just behind text), but not frozen headers",
            "lineNumber": 211
          },
          {
            "text": "            css += &#96;.tabulator-col.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;",
            "lineNumber": 212
          },
          {
            "text": "            css += &#96;.tabulator-col-group.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;",
            "lineNumber": 213
          },
          {
            "text": "        }",
            "lineNumber": 214
          },
          {
            "text": "        return css;",
            "lineNumber": 215
          },
          {
            "text": "    }",
            "lineNumber": 216
          },
          {
            "lineNumber": 217
          },
          {
            "text": "    /**",
            "lineNumber": 218
          },
          {
            "text": "     * Injects stripe CSS into the document if not already present.",
            "lineNumber": 219
          },
          {
            "text": "     * @param {number} groupCount - Number of groups",
            "lineNumber": 220
          },
          {
            "text": "     * @param {Object} options - Color options",
            "lineNumber": 221
          },
          {
            "text": "     */",
            "lineNumber": 222
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.4349879026412964
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 159
          },
          "endPosition": {
            "line": 216
          }
        },
        "contents": "}\n\nfunction createTableTabulator(tableId, data, options = {}) {\n    \n    const settings = {\n        disablePositionCircle: false,\n        enableSpecialRowStyling: false,\n        tooltips: true,\n        teamField: null,\n        ...options\n    };\n    const tableConfig = data.config || {};\n    const isCompactLayout = tableConfig.compact === true;\n    const useStripedGroups = tableConfig.stripedColGroups === true;\n    // Highlighting style constants\n    const HIGHLIGHT_STYLES = {\n        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',\n        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',\n        headerFontWeight: '900',\n        cellFontWeight: '700'\n    };\n\n    if (!data || !data.columns || !data.data) {\n        console.error('Invalid data format for Tabulator table');\n        return;\n    }\n\n    const container = document.getElementById(tableId);\n    if (!container) {\n        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);\n        return;\n    }\n    \n    // Ensure container takes full width\n    if (container.style.width === '') {\n        container.style.width = '100%';\n    }\n\n    const columnOrder = flattenColumnMetadata(data.columns);\n    if (!columnOrder.length) {\n        console.warn('No column definitions available for Tabulator table');\n        const container = document.getElementById(tableId);\n        if (container) {\n            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';\n            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;\n        }\n        return;\n    }\n    const columnLookup = columnOrder.reduce((acc, info) =&gt; {\n        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;\n        return acc;\n    }, {});\n\n    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;\n    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "function createTableTabulator(tableId, data, options = {}) {",
            "lineNumber": 162
          },
          {
            "text": "    ",
            "lineNumber": 163
          },
          {
            "text": "    const settings = {",
            "lineNumber": 164
          },
          {
            "text": "        disablePositionCircle: false,",
            "lineNumber": 165
          },
          {
            "text": "        enableSpecialRowStyling: false,",
            "lineNumber": 166
          },
          {
            "text": "        tooltips: true,",
            "lineNumber": 167
          },
          {
            "text": "        teamField: null,",
            "lineNumber": 168
          },
          {
            "text": "        ...options",
            "lineNumber": 169
          },
          {
            "text": "    };",
            "lineNumber": 170
          },
          {
            "text": "    const tableConfig = data.config || {};",
            "lineNumber": 171
          },
          {
            "text": "    const isCompactLayout = tableConfig.compact === true;",
            "lineNumber": 172
          },
          {
            "text": "    const useStripedGroups = tableConfig.stripedColGroups === true;",
            "lineNumber": 173
          },
          {
            "text": "    // Highlighting style constants",
            "lineNumber": 174
          },
          {
            "text": "    const HIGHLIGHT_STYLES = {",
            "lineNumber": 175
          },
          {
            "text": "        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',",
            "lineNumber": 176
          },
          {
            "text": "        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',",
            "lineNumber": 177
          },
          {
            "text": "        headerFontWeight: '900',",
            "lineNumber": 178
          },
          {
            "text": "        cellFontWeight: '700'",
            "lineNumber": 179
          },
          {
            "text": "    };",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 182
          },
          {
            "text": "        console.error('Invalid data format for Tabulator table');",
            "lineNumber": 183
          },
          {
            "text": "        return;",
            "lineNumber": 184
          },
          {
            "text": "    }",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    const container = document.getElementById(tableId);",
            "lineNumber": 187
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 188
          },
          {
            "text": "        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);",
            "lineNumber": 189
          },
          {
            "text": "        return;",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "text": "    ",
            "lineNumber": 192
          },
          {
            "text": "    // Ensure container takes full width",
            "lineNumber": 193
          },
          {
            "text": "    if (container.style.width === '') {",
            "lineNumber": 194
          },
          {
            "text": "        container.style.width = '100%';",
            "lineNumber": 195
          },
          {
            "text": "    }",
            "lineNumber": 196
          },
          {
            "lineNumber": 197
          },
          {
            "text": "    const columnOrder = flattenColumnMetadata(data.columns);",
            "lineNumber": 198
          },
          {
            "text": "    if (!columnOrder.length) {",
            "lineNumber": 199
          },
          {
            "text": "        console.warn('No column definitions available for Tabulator table');",
            "lineNumber": 200
          },
          {
            "text": "        const container = document.getElementById(tableId);",
            "lineNumber": 201
          },
          {
            "text": "        if (container) {",
            "lineNumber": 202
          },
          {
            "text": "            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';",
            "lineNumber": 203
          },
          {
            "text": "            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;",
            "lineNumber": 204
          },
          {
            "text": "        }",
            "lineNumber": 205
          },
          {
            "text": "        return;",
            "lineNumber": 206
          },
          {
            "text": "    }",
            "lineNumber": 207
          },
          {
            "text": "    const columnLookup = columnOrder.reduce((acc, info) =&gt; {",
            "lineNumber": 208
          },
          {
            "text": "        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;",
            "lineNumber": 209
          },
          {
            "text": "        return acc;",
            "lineNumber": 210
          },
          {
            "text": "    }, {});",
            "lineNumber": 211
          },
          {
            "lineNumber": 212
          },
          {
            "text": "    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;",
            "lineNumber": 213
          },
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          }
        ]
      },
      "score": 0.4326920509338379
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\table_data.py",
        "range": {
          "startPosition": {
            "line": 26,
            "column": 82
          },
          "endPosition": {
            "line": 83
          }
        },
        "contents": "@dataclass\nclass TableData:\n    \"\"\"Complete table data structure.\"\"\"\n    columns: Union[List[ColumnGroup], List[Column]]  # Accept either ColumnGroups or bare Columns\n    data: List[List[Any]]\n    title: Optional[str] = None\n    description: Optional[str] = None\n    config: Optional[Dict[str, Any]] = field(default_factory=dict)  # Table-wide configuration\n    metadata: Optional[Dict[str, Any]] = field(default_factory=dict)  # Additional metadata for i18n and UI\n    row_metadata: Optional[List[Dict[str, Any]]] = field(default_factory=list)  # Row-level metadata for styling\n    cell_metadata: Optional[Dict[str, Dict[str, Any]]] = field(default_factory=dict)  # Cell-level metadata for styling (format: \"row:col\")\n    default_sort: Optional[Dict[str, str]] = None  # Default sort: {\"field\": \"average\", \"dir\": \"desc\"}\n    \n    def __post_init__(self):\n        \"\"\"Normalize columns: if bare Columns are provided, wrap them in a ColumnGroup with empty title.\"\"\"\n        if self.columns and len(self.columns) &gt; 0 and isinstance(self.columns[0], Column):\n            # Convert List[Column] to List[ColumnGroup] by wrapping in a single group\n            self.columns = [ColumnGroup(title=\"\", columns=list(self.columns))]\n    \n    def to_dict(self) -&gt; Dict[str, Any]:\n        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 29
          },
          {
            "text": "class TableData:",
            "lineNumber": 30,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Complete table data structure.\"\"\"",
            "lineNumber": 31
          },
          {
            "text": "    columns: Union[List[ColumnGroup], List[Column]]  # Accept either ColumnGroups or bare Columns",
            "lineNumber": 32
          },
          {
            "text": "    data: List[List[Any]]",
            "lineNumber": 33
          },
          {
            "text": "    title: Optional[str] = None",
            "lineNumber": 34
          },
          {
            "text": "    description: Optional[str] = None",
            "lineNumber": 35
          },
          {
            "text": "    config: Optional[Dict[str, Any]] = field(default_factory=dict)  # Table-wide configuration",
            "lineNumber": 36
          },
          {
            "text": "    metadata: Optional[Dict[str, Any]] = field(default_factory=dict)  # Additional metadata for i18n and UI",
            "lineNumber": 37
          },
          {
            "text": "    row_metadata: Optional[List[Dict[str, Any]]] = field(default_factory=list)  # Row-level metadata for styling",
            "lineNumber": 38
          },
          {
            "text": "    cell_metadata: Optional[Dict[str, Dict[str, Any]]] = field(default_factory=dict)  # Cell-level metadata for styling (format: \"row:col\")",
            "lineNumber": 39
          },
          {
            "text": "    default_sort: Optional[Dict[str, str]] = None  # Default sort: {\"field\": \"average\", \"dir\": \"desc\"}",
            "lineNumber": 40
          },
          {
            "text": "    ",
            "lineNumber": 41
          },
          {
            "text": "    def __post_init__(self):",
            "lineNumber": 42
          },
          {
            "text": "        \"\"\"Normalize columns: if bare Columns are provided, wrap them in a ColumnGroup with empty title.\"\"\"",
            "lineNumber": 43
          },
          {
            "text": "        if self.columns and len(self.columns) &gt; 0 and isinstance(self.columns[0], Column):",
            "lineNumber": 44
          },
          {
            "text": "            # Convert List[Column] to List[ColumnGroup] by wrapping in a single group",
            "lineNumber": 45
          },
          {
            "text": "            self.columns = [ColumnGroup(title=\"\", columns=list(self.columns))]",
            "lineNumber": 46
          },
          {
            "text": "    ",
            "lineNumber": 47
          },
          {
            "text": "    def to_dict(self) -&gt; Dict[str, Any]:",
            "lineNumber": 48
          },
          {
            "text": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
            "lineNumber": 49
          }
        ]
      },
      "score": 0.41601884365081787
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\n\n\n    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {\n        if (!count || count &lt;= 1) {\n            return [start];\n        }\n        const startRgb = hexToRgb(start);\n        const endRgb = hexToRgb(end);\n\n        return Array.from({ length: count }, (_, index) =&gt; {\n            if (index === 0) return start;\n            if (index === count - 1) return end;\n            const factor = index / (count - 1);\n            const r = Math.round(startRgb[0] + (endRgb[0] - startRgb[0]) * factor);\n            const g = Math.round(startRgb[1] + (endRgb[1] - startRgb[1]) * factor);\n            const b = Math.round(startRgb[2] + (endRgb[2] - startRgb[2]) * factor);\n            return &#96;rgb(${r}, ${g}, ${b})&#96;;\n        });\n    }\n\n    function getStripeColors(groupIndex, options = {}) {\n        if (options.enabled === false) {\n            return null;\n        }\n        const palette = options.palette || DEFAULT_STRIPE_PALETTE;\n        const color = palette[groupIndex % palette.length];\n        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;\n        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;\n        return {\n            headerBg: toRgba(color, headerAlpha),\n            cellBg: toRgba(color, cellAlpha)\n        };\n    }\n\n    /**\n     * Assigns CSS classes to column groups for striped coloring.\n     * Call this before creating the Tabulator instance.\n     * @param {Array} groups - Array of column group definitions\n     */\n    function assignGroupStripeCss(groups) {\n        groups.forEach((group, index) =&gt; {\n            // Add class to the group itself (for group header)\n            group.cssClass = ((group.cssClass || \"\") + \" col-group-\" + index).trim();\n            // Add class to all leaf columns\n            if (group.columns) {\n                assignLeafColumnCss(group.columns, index);\n            }\n        });\n    }\n\n    function assignLeafColumnCss(columns, groupIndex) {\n        columns.forEach\n\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {",
            "lineNumber": 132
          },
          {
            "text": "        if (!count || count &lt;= 1) {",
            "lineNumber": 133
          },
          {
            "text": "            return [start];",
            "lineNumber": 134
          },
          {
            "text": "        }",
            "lineNumber": 135
          },
          {
            "text": "        const startRgb = hexToRgb(start);",
            "lineNumber": 136
          },
          {
            "text": "        const endRgb = hexToRgb(end);",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "        return Array.from({ length: count }, (_, index) =&gt; {",
            "lineNumber": 139
          },
          {
            "text": "            if (index === 0) return start;",
            "lineNumber": 140
          },
          {
            "text": "            if (index === count - 1) return end;",
            "lineNumber": 141
          },
          {
            "text": "            const factor = index / (count - 1);",
            "lineNumber": 142
          },
          {
            "text": "            const r = Math.round(startRgb[0] + (endRgb[0] - startRgb[0]) * factor);",
            "lineNumber": 143
          },
          {
            "text": "            const g = Math.round(startRgb[1] + (endRgb[1] - startRgb[1]) * factor);",
            "lineNumber": 144
          },
          {
            "text": "            const b = Math.round(startRgb[2] + (endRgb[2] - startRgb[2]) * factor);",
            "lineNumber": 145
          },
          {
            "text": "            return &#96;rgb(${r}, ${g}, ${b})&#96;;",
            "lineNumber": 146
          },
          {
            "text": "        });",
            "lineNumber": 147
          },
          {
            "text": "    }",
            "lineNumber": 148
          },
          {
            "lineNumber": 149
          },
          {
            "text": "    function getStripeColors(groupIndex, options = {}) {",
            "lineNumber": 150
          },
          {
            "text": "        if (options.enabled === false) {",
            "lineNumber": 151
          },
          {
            "text": "            return null;",
            "lineNumber": 152
          },
          {
            "text": "        }",
            "lineNumber": 153
          },
          {
            "text": "        const palette = options.palette || DEFAULT_STRIPE_PALETTE;",
            "lineNumber": 154
          },
          {
            "text": "        const color = palette[groupIndex % palette.length];",
            "lineNumber": 155
          },
          {
            "text": "        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;",
            "lineNumber": 156
          },
          {
            "text": "        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;",
            "lineNumber": 157
          },
          {
            "text": "        return {",
            "lineNumber": 158
          },
          {
            "text": "            headerBg: toRgba(color, headerAlpha),",
            "lineNumber": 159
          },
          {
            "text": "            cellBg: toRgba(color, cellAlpha)",
            "lineNumber": 160
          },
          {
            "text": "        };",
            "lineNumber": 161
          },
          {
            "text": "    }",
            "lineNumber": 162
          },
          {
            "lineNumber": 163
          },
          {
            "text": "    /**",
            "lineNumber": 164
          },
          {
            "text": "     * Assigns CSS classes to column groups for striped coloring.",
            "lineNumber": 165
          },
          {
            "text": "     * Call this before creating the Tabulator instance.",
            "lineNumber": 166
          },
          {
            "text": "     * @param {Array} groups - Array of column group definitions",
            "lineNumber": 167
          },
          {
            "text": "     */",
            "lineNumber": 168
          },
          {
            "text": "    function assignGroupStripeCss(groups) {",
            "lineNumber": 169
          },
          {
            "text": "        groups.forEach((group, index) =&gt; {",
            "lineNumber": 170
          },
          {
            "text": "            // Add class to the group itself (for group header)",
            "lineNumber": 171
          },
          {
            "text": "            group.cssClass = ((group.cssClass || \"\") + \" col-group-\" + index).trim();",
            "lineNumber": 172
          },
          {
            "text": "            // Add class to all leaf columns",
            "lineNumber": 173
          },
          {
            "text": "            if (group.columns) {",
            "lineNumber": 174
          },
          {
            "text": "                assignLeafColumnCss(group.columns, index);",
            "lineNumber": 175
          },
          {
            "text": "            }",
            "lineNumber": 176
          },
          {
            "text": "        });",
            "lineNumber": 177
          },
          {
            "text": "    }",
            "lineNumber": 178
          },
          {
            "lineNumber": 179
          },
          {
            "text": "    function assignLeafColumnCss(columns, groupIndex) {",
            "lineNumber": 180
          },
          {
            "text": "        columns.forEach",
            "lineNumber": 181
          },
          {
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.4118277430534363
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 707,
            "column": 12
          },
          "endPosition": {
            "line": 747,
            "column": 28
          }
        },
        "contents": "window.updateTeamColorMap(teams);\n        }\n    }\n\n    const tabulatorOptions = {\n        data: transformedData,\n        columns: tabulatorColumns,\n        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",\n        responsiveLayout: false,\n        pagination: false,\n        movableColumns: false,\n        tooltips: tooltipOption,\n        height: \"auto\",\n        rowHeight: 40,\n        theme: \"semanticui\",\n        cssClass: \"custom-tabulator\",\n        columnHeaderVertAlign: \"middle\",\n        width: \"100%\", // Ensure table takes full width of container\n        ...(initialSort ? { initialSort: initialSort } : {}),\n        tableBuilt: function() {\n            try {\n                // Apply highlighting and fix header separator\n                // Use requestAnimationFrame for better timing\n                requestAnimationFrame(() =&gt; {\n                    requestAnimationFrame(() =&gt; {\n                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);\n                    if (!tableElement) {\n                        return;\n                    }\n                    \n                    // Set CSS custom properties for highlighting styles\n                    tableElement.style.setProperty('--highlight-header-bg', HIGHLIGHT_STYLES.headerBackgroundColor);\n                    tableElement.style.setProperty('--highlight-cell-bg', HIGHLIGHT_STYLES.cellBackgroundColor);\n                    tableElement.style.setProperty('--highlight-header-weight', HIGHLIGHT_STYLES.headerFontWeight);\n                    tableElement.style.setProperty('--highlight-cell-weight', HIGHLIGHT_STYLES.cellFontWeight);\n                    \n                    // Stripe coloring: assign group classes to column group headers\n                    // (cells and column headers get classes via cssClass/headerClass in column definitions)\n                    if (useStripedGroups) {\n                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {\n                            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "window.updateTeamColorMap(teams);",
            "lineNumber": 708
          },
          {
            "text": "        }",
            "lineNumber": 709
          },
          {
            "text": "    }",
            "lineNumber": 710
          },
          {
            "lineNumber": 711
          },
          {
            "text": "    const tabulatorOptions = {",
            "lineNumber": 712
          },
          {
            "text": "        data: transformedData,",
            "lineNumber": 713
          },
          {
            "text": "        columns: tabulatorColumns,",
            "lineNumber": 714
          },
          {
            "text": "        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",",
            "lineNumber": 715
          },
          {
            "text": "        responsiveLayout: false,",
            "lineNumber": 716
          },
          {
            "text": "        pagination: false,",
            "lineNumber": 717
          },
          {
            "text": "        movableColumns: false,",
            "lineNumber": 718
          },
          {
            "text": "        tooltips: tooltipOption,",
            "lineNumber": 719
          },
          {
            "text": "        height: \"auto\",",
            "lineNumber": 720
          },
          {
            "text": "        rowHeight: 40,",
            "lineNumber": 721
          },
          {
            "text": "        theme: \"semanticui\",",
            "lineNumber": 722
          },
          {
            "text": "        cssClass: \"custom-tabulator\",",
            "lineNumber": 723
          },
          {
            "text": "        columnHeaderVertAlign: \"middle\",",
            "lineNumber": 724
          },
          {
            "text": "        width: \"100%\", // Ensure table takes full width of container",
            "lineNumber": 725
          },
          {
            "text": "        ...(initialSort ? { initialSort: initialSort } : {}),",
            "lineNumber": 726
          },
          {
            "text": "        tableBuilt: function() {",
            "lineNumber": 727
          },
          {
            "text": "            try {",
            "lineNumber": 728
          },
          {
            "text": "                // Apply highlighting and fix header separator",
            "lineNumber": 729
          },
          {
            "text": "                // Use requestAnimationFrame for better timing",
            "lineNumber": 730
          },
          {
            "text": "                requestAnimationFrame(() =&gt; {",
            "lineNumber": 731
          },
          {
            "text": "                    requestAnimationFrame(() =&gt; {",
            "lineNumber": 732
          },
          {
            "text": "                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
            "lineNumber": 733
          },
          {
            "text": "                    if (!tableElement) {",
            "lineNumber": 734
          },
          {
            "text": "                        return;",
            "lineNumber": 735
          },
          {
            "text": "                    }",
            "lineNumber": 736
          },
          {
            "text": "                    ",
            "lineNumber": 737
          },
          {
            "text": "                    // Set CSS custom properties for highlighting styles",
            "lineNumber": 738
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-header-bg', HIGHLIGHT_STYLES.headerBackgroundColor);",
            "lineNumber": 739
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-cell-bg', HIGHLIGHT_STYLES.cellBackgroundColor);",
            "lineNumber": 740
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-header-weight', HIGHLIGHT_STYLES.headerFontWeight);",
            "lineNumber": 741
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-cell-weight', HIGHLIGHT_STYLES.cellFontWeight);",
            "lineNumber": 742
          },
          {
            "text": "                    ",
            "lineNumber": 743
          },
          {
            "text": "                    // Stripe coloring: assign group classes to column group headers",
            "lineNumber": 744
          },
          {
            "text": "                    // (cells and column headers get classes via cssClass/headerClass in column definitions)",
            "lineNumber": 745
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 746
          },
          {
            "text": "                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {",
            "lineNumber": 747
          },
          {
            "text": "                            ",
            "lineNumber": 748
          }
        ]
      },
      "score": 0.4106070101261139
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 54,
            "column": 8
          }
        },
        "contents": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;\n&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\nfunction createTable(config) {\n    const {\n        data,\n        columns,\n        headerGroups = [],  // This contains the actual colspan values\n        rowNumbering = true,\n        positionChange = false\n    } = config;\n\n    let currentData = [...data];\n\n    const colors = ColorUtils.getGradientColors(\n        headerGroups.length, \n        ColorUtils.getThemeColor('surface') || '#ffffff', \n        ColorUtils.getThemeColor('accent') || '#7ec2f8'\n    );\n\n    // Create mappings for column colors and last group columns\n    const columnColors = {};\n    const lastGroupColumns = {};\n    let currentColumn = 0;\n    headerGroups.forEach((group, groupIndex) =&gt; {\n        const isLastGroup = groupIndex === headerGroups.length - 1;\n        const colspan = group.colspan || 1;  // Get actual colspan from the group\n        for (let i = 0; i &lt; colspan; i++) {\n            columnColors[currentColumn] = colors[groupIndex];\n            lastGroupColumns[currentColumn] = isLastGroup;\n            currentColumn++;\n        }\n    });\n\n    const createHeaderGroups = () =&gt; {\n        if (!headerGroups || headerGroups.length === 0) return '';\n        \n        return &#96;\n            &lt;tr&gt;\n                ${headerGroups.map((group, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        colspan=\"${group.colspan || 1}\" \n                        style=\"background-color: ${colors[index]}; \n                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;\n                        ${group.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;",
            "lineNumber": 1
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 2
          },
          {
            "text": "&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 5
          },
          {
            "text": "function createTable(config) {",
            "lineNumber": 6
          },
          {
            "text": "    const {",
            "lineNumber": 7
          },
          {
            "text": "        data,",
            "lineNumber": 8
          },
          {
            "text": "        columns,",
            "lineNumber": 9
          },
          {
            "text": "        headerGroups = [],  // This contains the actual colspan values",
            "lineNumber": 10
          },
          {
            "text": "        rowNumbering = true,",
            "lineNumber": 11
          },
          {
            "text": "        positionChange = false",
            "lineNumber": 12
          },
          {
            "text": "    } = config;",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "    let currentData = [...data];",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "    const colors = ColorUtils.getGradientColors(",
            "lineNumber": 17
          },
          {
            "text": "        headerGroups.length, ",
            "lineNumber": 18
          },
          {
            "text": "        ColorUtils.getThemeColor('surface') || '#ffffff', ",
            "lineNumber": 19
          },
          {
            "text": "        ColorUtils.getThemeColor('accent') || '#7ec2f8'",
            "lineNumber": 20
          },
          {
            "text": "    );",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "    // Create mappings for column colors and last group columns",
            "lineNumber": 23
          },
          {
            "text": "    const columnColors = {};",
            "lineNumber": 24
          },
          {
            "text": "    const lastGroupColumns = {};",
            "lineNumber": 25
          },
          {
            "text": "    let currentColumn = 0;",
            "lineNumber": 26
          },
          {
            "text": "    headerGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 27
          },
          {
            "text": "        const isLastGroup = groupIndex === headerGroups.length - 1;",
            "lineNumber": 28
          },
          {
            "text": "        const colspan = group.colspan || 1;  // Get actual colspan from the group",
            "lineNumber": 29
          },
          {
            "text": "        for (let i = 0; i &lt; colspan; i++) {",
            "lineNumber": 30
          },
          {
            "text": "            columnColors[currentColumn] = colors[groupIndex];",
            "lineNumber": 31
          },
          {
            "text": "            lastGroupColumns[currentColumn] = isLastGroup;",
            "lineNumber": 32
          },
          {
            "text": "            currentColumn++;",
            "lineNumber": 33
          },
          {
            "text": "        }",
            "lineNumber": 34
          },
          {
            "text": "    });",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "    const createHeaderGroups = () =&gt; {",
            "lineNumber": 37
          },
          {
            "text": "        if (!headerGroups || headerGroups.length === 0) return '';",
            "lineNumber": 38
          },
          {
            "text": "        ",
            "lineNumber": 39
          },
          {
            "text": "        return &#96;",
            "lineNumber": 40
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 41
          },
          {
            "text": "                ${headerGroups.map((group, index) =&gt; &#96;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 43
          },
          {
            "text": "                        colspan=\"${group.colspan || 1}\" ",
            "lineNumber": 44
          },
          {
            "text": "                        style=\"background-color: ${colors[index]}; ",
            "lineNumber": 45
          },
          {
            "text": "                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                        ${group.title || ''}",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        ",
            "lineNumber": 55
          }
        ]
      },
      "score": 0.389019250869751
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 745
          },
          "endPosition": {
            "line": 768
          }
        },
        "contents": "                    if (useStripedGroups) {\n                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {\n                            el.classList.add('col-group-' + idx);\n                        });\n                    }\n                    \n                    // Build map of highlighted fields and groups\n                    const highlightedFields = new Set();\n                    const highlightedGroupTitles = new Set();\n                    data.columns.forEach((group, groupIndex) =&gt; {\n                        if (group.highlighted === true &amp;&amp; group.columns) {\n                            highlightedGroupTitles.add(group.title || '');\n                            group.columns.forEach(col =&gt; {\n                                if (col.field) {\n                                    highlightedFields.add(col.field);\n                                }\n                            });\n                        }\n                    });\n                    \n                    const header = tableElement.querySelector('.tabulator-header');\n                    if (header) {\n                        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 746
          },
          {
            "text": "                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {",
            "lineNumber": 747
          },
          {
            "text": "                            el.classList.add('col-group-' + idx);",
            "lineNumber": 748
          },
          {
            "text": "                        });",
            "lineNumber": 749
          },
          {
            "text": "                    }",
            "lineNumber": 750
          },
          {
            "text": "                    ",
            "lineNumber": 751
          },
          {
            "text": "                    // Build map of highlighted fields and groups",
            "lineNumber": 752
          },
          {
            "text": "                    const highlightedFields = new Set();",
            "lineNumber": 753
          },
          {
            "text": "                    const highlightedGroupTitles = new Set();",
            "lineNumber": 754
          },
          {
            "text": "                    data.columns.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 755
          },
          {
            "text": "                        if (group.highlighted === true &amp;&amp; group.columns) {",
            "lineNumber": 756
          },
          {
            "text": "                            highlightedGroupTitles.add(group.title || '');",
            "lineNumber": 757
          },
          {
            "text": "                            group.columns.forEach(col =&gt; {",
            "lineNumber": 758
          },
          {
            "text": "                                if (col.field) {",
            "lineNumber": 759
          },
          {
            "text": "                                    highlightedFields.add(col.field);",
            "lineNumber": 760
          },
          {
            "text": "                                }",
            "lineNumber": 761
          },
          {
            "text": "                            });",
            "lineNumber": 762
          },
          {
            "text": "                        }",
            "lineNumber": 763
          },
          {
            "text": "                    });",
            "lineNumber": 764
          },
          {
            "text": "                    ",
            "lineNumber": 765
          },
          {
            "text": "                    const header = tableElement.querySelector('.tabulator-header');",
            "lineNumber": 766
          },
          {
            "text": "                    if (header) {",
            "lineNumber": 767
          },
          {
            "text": "                        ",
            "lineNumber": 768
          }
        ]
      },
      "score": 0.3630402684211731
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3503
          }
        },
        "contents": "class LeagueService:\ndef get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:\n\n                )\n            ]\n            \n            # Add totals column group first (after ranking) - matches data order\n            columns.append(\n                ColumnGroup(\n                    title=\"Total\",\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    highlighted=True,  # Highlight the Total group\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"season_points\", format=\"{:,}\", width=\"75px\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"season_score\", format=\"{:,}\", width=\"75px\"),\n                        Column(title=i18n_service.get_text(\"average\"), field=\"season_avg\", format=\"{:.1f}\", width=\"75px\")\n                    ]\n                )\n            )\n\n            # Add weekly column groups after totals\n            for w in weeks_to_show:\n                columns.append(\n                    ColumnGroup(\n                        title=f\"{i18n_service.get_text('week')} {w}\",\n                        columns=[\n                            Column(title=i18n_service.get_text(\"points\"), field=f\"week{w}_points\", format=\"{:.1f}\", width=\"75px\"),\n                            Column(title=i18n_service.get_text(\"score\"), field=f\"week{w}_score\", format=\"{:,}\", width=\"75px\"),\n                            Column(title=i18n_service.get_text(\"average\"), field=f\"week{w}_avg\", format=\"{:.1f}\", width=\"75px\")\n                        ]\n                    )\n                )\n\n            \n            # Prepare the data rows\n            data = []\n            for i, team in enumerate(sorted_teams, 1):\n                team_info = team_data[team]\n                \n                # Start with position and team name\n                row = [i, team]",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1419,
                "column": 5
              },
              "endPosition": {
                "line": 1420,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:",
            "lineNumber": 1419
          },
          {
            "lineNumber": 1577
          },
          {
            "text": "                )",
            "lineNumber": 1578
          },
          {
            "text": "            ]",
            "lineNumber": 1579
          },
          {
            "text": "            ",
            "lineNumber": 1580
          },
          {
            "text": "            # Add totals column group first (after ranking) - matches data order",
            "lineNumber": 1581
          },
          {
            "text": "            columns.append(",
            "lineNumber": 1582
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1583
          },
          {
            "text": "                    title=\"Total\",",
            "lineNumber": 1584
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 1585
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 1586
          },
          {
            "text": "                    highlighted=True,  # Highlight the Total group",
            "lineNumber": 1587
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1588
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"season_points\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1589
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"season_score\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1590
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"average\"), field=\"season_avg\", format=\"{:.1f}\", width=\"75px\")",
            "lineNumber": 1591
          },
          {
            "text": "                    ]",
            "lineNumber": 1592
          },
          {
            "text": "                )",
            "lineNumber": 1593
          },
          {
            "text": "            )",
            "lineNumber": 1594
          },
          {
            "lineNumber": 1595
          },
          {
            "text": "            # Add weekly column groups after totals",
            "lineNumber": 1596
          },
          {
            "text": "            for w in weeks_to_show:",
            "lineNumber": 1597
          },
          {
            "text": "                columns.append(",
            "lineNumber": 1598
          },
          {
            "text": "                    ColumnGroup(",
            "lineNumber": 1599
          },
          {
            "text": "                        title=f\"{i18n_service.get_text('week')} {w}\",",
            "lineNumber": 1600
          },
          {
            "text": "                        columns=[",
            "lineNumber": 1601
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"points\"), field=f\"week{w}_points\", format=\"{:.1f}\", width=\"75px\"),",
            "lineNumber": 1602
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"score\"), field=f\"week{w}_score\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1603
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"average\"), field=f\"week{w}_avg\", format=\"{:.1f}\", width=\"75px\")",
            "lineNumber": 1604
          },
          {
            "text": "                        ]",
            "lineNumber": 1605
          },
          {
            "text": "                    )",
            "lineNumber": 1606
          },
          {
            "text": "                )",
            "lineNumber": 1607
          },
          {
            "lineNumber": 1608
          },
          {
            "text": "            ",
            "lineNumber": 1609
          },
          {
            "text": "            # Prepare the data rows",
            "lineNumber": 1610
          },
          {
            "text": "            data = []",
            "lineNumber": 1611
          },
          {
            "text": "            for i, team in enumerate(sorted_teams, 1):",
            "lineNumber": 1612
          },
          {
            "text": "                team_info = team_data[team]",
            "lineNumber": 1613
          },
          {
            "text": "                ",
            "lineNumber": 1614
          },
          {
            "text": "                # Start with position and team name",
            "lineNumber": 1615
          },
          {
            "text": "                row = [i, team]",
            "lineNumber": 1616
          }
        ]
      },
      "score": 0.3589726686477661
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1108
          },
          "endPosition": {
            "line": 1152
          }
        },
        "contents": "            columns: data.columns\n        }];\n    }\n\n    // Get table configuration\n    const config = data.config || {};\n    \n    // Get options with defaults\n    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;\n    \n    // Initialize team colors if this is a table with team data\n    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {\n        // Extract team names from the data\n        // For most tables, team name is in the second column (row[1])\n        // For team vs team comparison, team name is in the first column (row[0])\n        let teams = [];\n        \n        \n        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)\n        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {\n            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        } else {\n            // Standard tables with team names in second column\n            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        }\n        \n        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {\n            window.updateTeamColorMap(teams);\n        }\n    }\n    \n    // Create table wrapper for horizontal scroll\n    const tableWrapper = document.createElement('div');\n    tableWrapper.className = 'table-responsive';\n\n    // Create table\n    const table = document.createElement('table');\n    table.className = 'table';\n    if (config.striped) table.classList.add('table-striped');\n    if (config.hover) table.classList.add('table-hover');\n    if (config.compact) table.classList.add('table-sm');\n    table.style.borderCollapse = 'collapse';\n\n    // Add title and description if provided",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            columns: data.columns",
            "lineNumber": 1109
          },
          {
            "text": "        }];",
            "lineNumber": 1110
          },
          {
            "text": "    }",
            "lineNumber": 1111
          },
          {
            "lineNumber": 1112
          },
          {
            "text": "    // Get table configuration",
            "lineNumber": 1113
          },
          {
            "text": "    const config = data.config || {};",
            "lineNumber": 1114
          },
          {
            "text": "    ",
            "lineNumber": 1115
          },
          {
            "text": "    // Get options with defaults",
            "lineNumber": 1116
          },
          {
            "text": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;",
            "lineNumber": 1117
          },
          {
            "text": "    ",
            "lineNumber": 1118
          },
          {
            "text": "    // Initialize team colors if this is a table with team data",
            "lineNumber": 1119
          },
          {
            "text": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
            "lineNumber": 1120
          },
          {
            "text": "        // Extract team names from the data",
            "lineNumber": 1121
          },
          {
            "text": "        // For most tables, team name is in the second column (row[1])",
            "lineNumber": 1122
          },
          {
            "text": "        // For team vs team comparison, team name is in the first column (row[0])",
            "lineNumber": 1123
          },
          {
            "text": "        let teams = [];",
            "lineNumber": 1124
          },
          {
            "text": "        ",
            "lineNumber": 1125
          },
          {
            "text": "        ",
            "lineNumber": 1126
          },
          {
            "text": "        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)",
            "lineNumber": 1127
          },
          {
            "text": "        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {",
            "lineNumber": 1128
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1129
          },
          {
            "text": "        } else {",
            "lineNumber": 1130
          },
          {
            "text": "            // Standard tables with team names in second column",
            "lineNumber": 1131
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1132
          },
          {
            "text": "        }",
            "lineNumber": 1133
          },
          {
            "text": "        ",
            "lineNumber": 1134
          },
          {
            "text": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
            "lineNumber": 1135
          },
          {
            "text": "            window.updateTeamColorMap(teams);",
            "lineNumber": 1136
          },
          {
            "text": "        }",
            "lineNumber": 1137
          },
          {
            "text": "    }",
            "lineNumber": 1138
          },
          {
            "text": "    ",
            "lineNumber": 1139
          },
          {
            "text": "    // Create table wrapper for horizontal scroll",
            "lineNumber": 1140
          },
          {
            "text": "    const tableWrapper = document.createElement('div');",
            "lineNumber": 1141
          },
          {
            "text": "    tableWrapper.className = 'table-responsive';",
            "lineNumber": 1142
          },
          {
            "lineNumber": 1143
          },
          {
            "text": "    // Create table",
            "lineNumber": 1144
          },
          {
            "text": "    const table = document.createElement('table');",
            "lineNumber": 1145
          },
          {
            "text": "    table.className = 'table';",
            "lineNumber": 1146
          },
          {
            "text": "    if (config.striped) table.classList.add('table-striped');",
            "lineNumber": 1147
          },
          {
            "text": "    if (config.hover) table.classList.add('table-hover');",
            "lineNumber": 1148
          },
          {
            "text": "    if (config.compact) table.classList.add('table-sm');",
            "lineNumber": 1149
          },
          {
            "text": "    table.style.borderCollapse = 'collapse';",
            "lineNumber": 1150
          },
          {
            "lineNumber": 1151
          },
          {
            "text": "    // Add title and description if provided",
            "lineNumber": 1152
          }
        ]
      },
      "score": 0.35616350173950195
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 616,
            "column": 20
          },
          "endPosition": {
            "line": 684
          }
        },
        "contents": "columnDefinition.widthGrow = 0;\n                }\n\n                // Build CSS classes\n                let cssClasses = [];\n                if (column.align === 'right') {\n                    cssClasses.push('text-end');\n                } else if (column.align === 'left') {\n                    cssClasses.push('text-start');\n                } else {\n                    cssClasses.push('text-center');\n                }\n                \n                // Add highlighting class if group is highlighted\n                if (isHighlighted) {\n                    cssClasses.push('tab-col-highlighted');\n                }\n                \n                columnDefinition.cssClass = cssClasses.join(' ');\n\n                return columnDefinition;\n            }).filter(Boolean)\n        };\n\n        // Set frozen on the parent group, not individual columns\n        if (groupFrozenDirection) {\n            groupDefinition.frozen = groupFrozenDirection;\n        }\n\n        return groupDefinition;\n        }).filter(Boolean);\n    }\n\n    if (!tabulatorColumns.length) {\n        console.warn('No Tabulator column definitions could be created');\n        return;\n    }\n\n    if (window[tableId + 'Instance']) {\n        window[tableId + 'Instance'].destroy();\n    }\n\n    const tooltipOption = settings.tooltips\n        ? function(cell) {\n            const value = cell.getValue();\n            if (value === null || value === undefined) {\n                return '';\n            }\n            if (typeof value === 'object') {\n                try {\n                    return JSON.stringify(value);\n                } catch (e) {\n                    return '';\n                }\n            }\n            return String(value);\n        }\n        : false;\n\n    // Set up initial sort if specified\n    const initialSort = data.default_sort ? [\n        {\n            column: data.default_sort.field,\n            dir: data.default_sort.dir || \"desc\"  // Default to descending\n        }\n    ] : undefined;\n\n    // Extract teams from data and update team color map",
        "signatures": {},
        "detailedLines": [
          {
            "text": "columnDefinition.widthGrow = 0;",
            "lineNumber": 617
          },
          {
            "text": "                }",
            "lineNumber": 618
          },
          {
            "lineNumber": 619
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 620
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 621
          },
          {
            "text": "                if (column.align === 'right') {",
            "lineNumber": 622
          },
          {
            "text": "                    cssClasses.push('text-end');",
            "lineNumber": 623
          },
          {
            "text": "                } else if (column.align === 'left') {",
            "lineNumber": 624
          },
          {
            "text": "                    cssClasses.push('text-start');",
            "lineNumber": 625
          },
          {
            "text": "                } else {",
            "lineNumber": 626
          },
          {
            "text": "                    cssClasses.push('text-center');",
            "lineNumber": 627
          },
          {
            "text": "                }",
            "lineNumber": 628
          },
          {
            "text": "                ",
            "lineNumber": 629
          },
          {
            "text": "                // Add highlighting class if group is highlighted",
            "lineNumber": 630
          },
          {
            "text": "                if (isHighlighted) {",
            "lineNumber": 631
          },
          {
            "text": "                    cssClasses.push('tab-col-highlighted');",
            "lineNumber": 632
          },
          {
            "text": "                }",
            "lineNumber": 633
          },
          {
            "text": "                ",
            "lineNumber": 634
          },
          {
            "text": "                columnDefinition.cssClass = cssClasses.join(' ');",
            "lineNumber": 635
          },
          {
            "lineNumber": 636
          },
          {
            "text": "                return columnDefinition;",
            "lineNumber": 637
          },
          {
            "text": "            }).filter(Boolean)",
            "lineNumber": 638
          },
          {
            "text": "        };",
            "lineNumber": 639
          },
          {
            "lineNumber": 640
          },
          {
            "text": "        // Set frozen on the parent group, not individual columns",
            "lineNumber": 641
          },
          {
            "text": "        if (groupFrozenDirection) {",
            "lineNumber": 642
          },
          {
            "text": "            groupDefinition.frozen = groupFrozenDirection;",
            "lineNumber": 643
          },
          {
            "text": "        }",
            "lineNumber": 644
          },
          {
            "lineNumber": 645
          },
          {
            "text": "        return groupDefinition;",
            "lineNumber": 646
          },
          {
            "text": "        }).filter(Boolean);",
            "lineNumber": 647
          },
          {
            "text": "    }",
            "lineNumber": 648
          },
          {
            "lineNumber": 649
          },
          {
            "text": "    if (!tabulatorColumns.length) {",
            "lineNumber": 650
          },
          {
            "text": "        console.warn('No Tabulator column definitions could be created');",
            "lineNumber": 651
          },
          {
            "text": "        return;",
            "lineNumber": 652
          },
          {
            "text": "    }",
            "lineNumber": 653
          },
          {
            "lineNumber": 654
          },
          {
            "text": "    if (window[tableId + 'Instance']) {",
            "lineNumber": 655
          },
          {
            "text": "        window[tableId + 'Instance'].destroy();",
            "lineNumber": 656
          },
          {
            "text": "    }",
            "lineNumber": 657
          },
          {
            "lineNumber": 658
          },
          {
            "text": "    const tooltipOption = settings.tooltips",
            "lineNumber": 659
          },
          {
            "text": "        ? function(cell) {",
            "lineNumber": 660
          },
          {
            "text": "            const value = cell.getValue();",
            "lineNumber": 661
          },
          {
            "text": "            if (value === null || value === undefined) {",
            "lineNumber": 662
          },
          {
            "text": "                return '';",
            "lineNumber": 663
          },
          {
            "text": "            }",
            "lineNumber": 664
          },
          {
            "text": "            if (typeof value === 'object') {",
            "lineNumber": 665
          },
          {
            "text": "                try {",
            "lineNumber": 666
          },
          {
            "text": "                    return JSON.stringify(value);",
            "lineNumber": 667
          },
          {
            "text": "                } catch (e) {",
            "lineNumber": 668
          },
          {
            "text": "                    return '';",
            "lineNumber": 669
          },
          {
            "text": "                }",
            "lineNumber": 670
          },
          {
            "text": "            }",
            "lineNumber": 671
          },
          {
            "text": "            return String(value);",
            "lineNumber": 672
          },
          {
            "text": "        }",
            "lineNumber": 673
          },
          {
            "text": "        : false;",
            "lineNumber": 674
          },
          {
            "lineNumber": 675
          },
          {
            "text": "    // Set up initial sort if specified",
            "lineNumber": 676
          },
          {
            "text": "    const initialSort = data.default_sort ? [",
            "lineNumber": 677
          },
          {
            "text": "        {",
            "lineNumber": 678
          },
          {
            "text": "            column: data.default_sort.field,",
            "lineNumber": 679
          },
          {
            "text": "            dir: data.default_sort.dir || \"desc\"  // Default to descending",
            "lineNumber": 680
          },
          {
            "text": "        }",
            "lineNumber": 681
          },
          {
            "text": "    ] : undefined;",
            "lineNumber": 682
          },
          {
            "lineNumber": 683
          },
          {
            "text": "    // Extract teams from data and update team color map",
            "lineNumber": 684
          }
        ]
      },
      "score": 0.35308194160461426
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 242
          },
          "endPosition": {
            "line": 283
          }
        },
        "contents": "    }\n\n    // If no group titles, flatten to direct columns (no groups)\n    let tabulatorColumns;\n    if (!hasGroupTitles) {\n        // Flatten: extract all columns from all groups and pass directly to Tabulator\n        tabulatorColumns = [];\n        data.columns.forEach((group, groupIndex) =&gt; {\n            if (!Array.isArray(group.columns)) {\n                return;\n            }\n            \n            const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;\n            const isHighlighted = group.highlighted === true;\n            \n            group.columns.forEach((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    }",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "    // If no group titles, flatten to direct columns (no groups)",
            "lineNumber": 245
          },
          {
            "text": "    let tabulatorColumns;",
            "lineNumber": 246
          },
          {
            "text": "    if (!hasGroupTitles) {",
            "lineNumber": 247
          },
          {
            "text": "        // Flatten: extract all columns from all groups and pass directly to Tabulator",
            "lineNumber": 248
          },
          {
            "text": "        tabulatorColumns = [];",
            "lineNumber": 249
          },
          {
            "text": "        data.columns.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 250
          },
          {
            "text": "            if (!Array.isArray(group.columns)) {",
            "lineNumber": 251
          },
          {
            "text": "                return;",
            "lineNumber": 252
          },
          {
            "text": "            }",
            "lineNumber": 253
          },
          {
            "text": "            ",
            "lineNumber": 254
          },
          {
            "text": "            const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;",
            "lineNumber": 255
          },
          {
            "text": "            const isHighlighted = group.highlighted === true;",
            "lineNumber": 256
          },
          {
            "text": "            ",
            "lineNumber": 257
          },
          {
            "text": "            group.columns.forEach((column, columnIndex) =&gt; {",
            "lineNumber": 258
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 259
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 260
          },
          {
            "text": "                    return;",
            "lineNumber": 261
          },
          {
            "text": "                }",
            "lineNumber": 262
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 263
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 264
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 265
          },
          {
            "text": "                ",
            "lineNumber": 266
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 267
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 268
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 269
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 270
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 271
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 274
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 275
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 276
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 277
          },
          {
            "text": "                    }",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 280
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 281
          },
          {
            "lineNumber": 282
          },
          {
            "text": "                    // Cell metadata styles",
            "lineNumber": 283
          }
        ]
      },
      "score": 0.3423886299133301
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3503
          }
        },
        "contents": "class LeagueService:\ndef get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:\n\n            \n            # Create columns - two column groups: selected team and opposing team\n            # Order: Player name, Pins, Points | Points, Pins, Player name\n            columns = [\n                ColumnGroup(\n                    title=team,  # Selected team name\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"player\"), field=\"player_name\", width=\"200px\", align=\"left\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"player_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"points\", width=\"80px\", align=\"center\")\n                    ]\n                ),\n                ColumnGroup(\n                    title=opponent_name,  # Opposing team name\n                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"player\"), field=\"opponent_player_name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Build data rows - sort by position\n            data = []\n            if Columns.position not in player_data.columns:\n                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing position column)\"\n                )\n            \n            player_data_sorted = player_data.sort_values(by=Columns.position)",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 258,
                "column": 5
              },
              "endPosition": {
                "line": 259,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:",
            "lineNumber": 258
          },
          {
            "lineNumber": 364
          },
          {
            "text": "            ",
            "lineNumber": 365
          },
          {
            "text": "            # Create columns - two column groups: selected team and opposing team",
            "lineNumber": 366
          },
          {
            "text": "            # Order: Player name, Pins, Points | Points, Pins, Player name",
            "lineNumber": 367
          },
          {
            "text": "            columns = [",
            "lineNumber": 368
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 369
          },
          {
            "text": "                    title=team,  # Selected team name",
            "lineNumber": 370
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 371
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 372
          },
          {
            "text": "                    columns=[",
            "lineNumber": 373
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"player\"), field=\"player_name\", width=\"200px\", align=\"left\"),",
            "lineNumber": 374
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"player_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 375
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"points\", width=\"80px\", align=\"center\")",
            "lineNumber": 376
          },
          {
            "text": "                    ]",
            "lineNumber": 377
          },
          {
            "text": "                ),",
            "lineNumber": 378
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 379
          },
          {
            "text": "                    title=opponent_name,  # Opposing team name",
            "lineNumber": 380
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},",
            "lineNumber": 381
          },
          {
            "text": "                    columns=[",
            "lineNumber": 382
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 383
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 384
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"player\"), field=\"opponent_player_name\", width=\"200px\", align=\"left\")",
            "lineNumber": 385
          },
          {
            "text": "                    ]",
            "lineNumber": 386
          },
          {
            "text": "                )",
            "lineNumber": 387
          },
          {
            "text": "            ]",
            "lineNumber": 388
          },
          {
            "text": "            ",
            "lineNumber": 389
          },
          {
            "text": "            # Build data rows - sort by position",
            "lineNumber": 390
          },
          {
            "text": "            data = []",
            "lineNumber": 391
          },
          {
            "text": "            if Columns.position not in player_data.columns:",
            "lineNumber": 392
          },
          {
            "text": "                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")",
            "lineNumber": 393
          },
          {
            "text": "                return TableData(",
            "lineNumber": 394
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 395
          },
          {
            "text": "                    data=[],",
            "lineNumber": 396
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number} (missing position column)\"",
            "lineNumber": 397
          },
          {
            "text": "                )",
            "lineNumber": 398
          },
          {
            "text": "            ",
            "lineNumber": 399
          },
          {
            "text": "            player_data_sorted = player_data.sort_values(by=Columns.position)",
            "lineNumber": 400
          }
        ]
      },
      "score": 0.33671051263809204
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1179
          },
          "endPosition": {
            "line": 1224,
            "column": 20
          }
        },
        "contents": "        thead.style.backgroundColor = '#fff';\n    }\n\n    // Check if any group has a non-empty title - only show group header row if at least one title exists\n    const hasGroupTitles = data.columns.some(colGroup =&gt; colGroup.title &amp;&amp; colGroup.title.trim() !== '');\n    \n    // Add group headers (only if at least one group has a title)\n    if (hasGroupTitles) {\n        const groupHeaderRow = document.createElement('tr');\n        data.columns.forEach((colGroup, groupIndex) =&gt; {\n            const th = document.createElement('th');\n            th.textContent = colGroup.title || '';\n            th.colSpan = colGroup.columns ? colGroup.columns.length : 1;\n            th.style.padding = '8px';\n            th.style.textAlign = 'center';\n            th.className = 'align-middle';\n            \n            // Add vertical borders between groups\n            if (groupIndex &gt; 0) {\n                th.style.borderLeft = &#96;2px solid ${ColorUtils.getThemeColor('border') || '#264653'}&#96;;\n            }\n            \n            // Apply group styles\n            if (colGroup.style) {\n                Object.entries(colGroup.style).forEach(([key, value]) =&gt; {\n                    th.style[key] = value;\n                });\n            }\n            \n            // Apply header styles\n            if (colGroup.headerStyle) {\n                Object.entries(colGroup.headerStyle).forEach(([key, value]) =&gt; {\n                    th.style[key] = value;\n                });\n            }\n            \n            // Apply group width\n            if (colGroup.width) {\n                th.style.width = colGroup.width;\n            }\n            \n            // Freeze column group headers if the group is frozen\n            if (colGroup.frozen) {\n                th.style.position = 'sticky';\n                if (colGroup.frozen === 'left') {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        thead.style.backgroundColor = '#fff';",
            "lineNumber": 1180
          },
          {
            "text": "    }",
            "lineNumber": 1181
          },
          {
            "lineNumber": 1182
          },
          {
            "text": "    // Check if any group has a non-empty title - only show group header row if at least one title exists",
            "lineNumber": 1183
          },
          {
            "text": "    const hasGroupTitles = data.columns.some(colGroup =&gt; colGroup.title &amp;&amp; colGroup.title.trim() !== '');",
            "lineNumber": 1184
          },
          {
            "text": "    ",
            "lineNumber": 1185
          },
          {
            "text": "    // Add group headers (only if at least one group has a title)",
            "lineNumber": 1186
          },
          {
            "text": "    if (hasGroupTitles) {",
            "lineNumber": 1187
          },
          {
            "text": "        const groupHeaderRow = document.createElement('tr');",
            "lineNumber": 1188
          },
          {
            "text": "        data.columns.forEach((colGroup, groupIndex) =&gt; {",
            "lineNumber": 1189
          },
          {
            "text": "            const th = document.createElement('th');",
            "lineNumber": 1190
          },
          {
            "text": "            th.textContent = colGroup.title || '';",
            "lineNumber": 1191
          },
          {
            "text": "            th.colSpan = colGroup.columns ? colGroup.columns.length : 1;",
            "lineNumber": 1192
          },
          {
            "text": "            th.style.padding = '8px';",
            "lineNumber": 1193
          },
          {
            "text": "            th.style.textAlign = 'center';",
            "lineNumber": 1194
          },
          {
            "text": "            th.className = 'align-middle';",
            "lineNumber": 1195
          },
          {
            "text": "            ",
            "lineNumber": 1196
          },
          {
            "text": "            // Add vertical borders between groups",
            "lineNumber": 1197
          },
          {
            "text": "            if (groupIndex &gt; 0) {",
            "lineNumber": 1198
          },
          {
            "text": "                th.style.borderLeft = &#96;2px solid ${ColorUtils.getThemeColor('border') || '#264653'}&#96;;",
            "lineNumber": 1199
          },
          {
            "text": "            }",
            "lineNumber": 1200
          },
          {
            "text": "            ",
            "lineNumber": 1201
          },
          {
            "text": "            // Apply group styles",
            "lineNumber": 1202
          },
          {
            "text": "            if (colGroup.style) {",
            "lineNumber": 1203
          },
          {
            "text": "                Object.entries(colGroup.style).forEach(([key, value]) =&gt; {",
            "lineNumber": 1204
          },
          {
            "text": "                    th.style[key] = value;",
            "lineNumber": 1205
          },
          {
            "text": "                });",
            "lineNumber": 1206
          },
          {
            "text": "            }",
            "lineNumber": 1207
          },
          {
            "text": "            ",
            "lineNumber": 1208
          },
          {
            "text": "            // Apply header styles",
            "lineNumber": 1209
          },
          {
            "text": "            if (colGroup.headerStyle) {",
            "lineNumber": 1210
          },
          {
            "text": "                Object.entries(colGroup.headerStyle).forEach(([key, value]) =&gt; {",
            "lineNumber": 1211
          },
          {
            "text": "                    th.style[key] = value;",
            "lineNumber": 1212
          },
          {
            "text": "                });",
            "lineNumber": 1213
          },
          {
            "text": "            }",
            "lineNumber": 1214
          },
          {
            "text": "            ",
            "lineNumber": 1215
          },
          {
            "text": "            // Apply group width",
            "lineNumber": 1216
          },
          {
            "text": "            if (colGroup.width) {",
            "lineNumber": 1217
          },
          {
            "text": "                th.style.width = colGroup.width;",
            "lineNumber": 1218
          },
          {
            "text": "            }",
            "lineNumber": 1219
          },
          {
            "text": "            ",
            "lineNumber": 1220
          },
          {
            "text": "            // Freeze column group headers if the group is frozen",
            "lineNumber": 1221
          },
          {
            "text": "            if (colGroup.frozen) {",
            "lineNumber": 1222
          },
          {
            "text": "                th.style.position = 'sticky';",
            "lineNumber": 1223
          },
          {
            "text": "                if (colGroup.frozen === 'left') {",
            "lineNumber": 1224
          },
          {
            "text": "                    ",
            "lineNumber": 1225
          }
        ]
      },
      "score": 0.33535268902778625
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3503
          }
        },
        "contents": "class LeagueService:\ndef get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n\n            \n            # Create column groups\n            columns = [\n                ColumnGroup(\n                    title=i18n_service.get_text(\"team\"),\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),\n                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")\n                    ]\n                ),\n                ColumnGroup(\n                    title=i18n_service.get_text(\"opponent\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),\n                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Get individual player points for this round to add to team points",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 92,
                "column": 5
              },
              "endPosition": {
                "line": 93,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "lineNumber": 130
          },
          {
            "text": "            ",
            "lineNumber": 131
          },
          {
            "text": "            # Create column groups",
            "lineNumber": 132
          },
          {
            "text": "            columns = [",
            "lineNumber": 133
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 134
          },
          {
            "text": "                    title=i18n_service.get_text(\"team\"),",
            "lineNumber": 135
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 136
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 137
          },
          {
            "text": "                    columns=[",
            "lineNumber": 138
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),",
            "lineNumber": 139
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),",
            "lineNumber": 140
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 141
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")",
            "lineNumber": 142
          },
          {
            "text": "                    ]",
            "lineNumber": 143
          },
          {
            "text": "                ),",
            "lineNumber": 144
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 145
          },
          {
            "text": "                    title=i18n_service.get_text(\"opponent\"),",
            "lineNumber": 146
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},",
            "lineNumber": 147
          },
          {
            "text": "                    columns=[",
            "lineNumber": 148
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 149
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 150
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),",
            "lineNumber": 151
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")",
            "lineNumber": 152
          },
          {
            "text": "                    ]",
            "lineNumber": 153
          },
          {
            "text": "                )",
            "lineNumber": 154
          },
          {
            "text": "            ]",
            "lineNumber": 155
          },
          {
            "text": "            ",
            "lineNumber": 156
          },
          {
            "text": "            # Get individual player points for this round to add to team points",
            "lineNumber": 157
          }
        ]
      },
      "score": 0.3346881866455078
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3503
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:\n\n\n            # Helper to build player col group\n            def player_col_group(player, prefix):\n                return ColumnGroup(\n                    title=player,\n                        columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=f\"{prefix}{player}_pos\", width=\"50px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"score\"), field=f\"{prefix}{player}_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=f\"{prefix}{player}_points\", width=\"60px\", align=\"center\"),\n                    ]\n                )\n\n            # Add own team player columns\n            for player in own_players:\n                columns.append(player_col_group(player, \"own_\"))\n            # Add opponent player columns\n            for player in opp_players:\n                columns.append(player_col_group(player, \"opp_\"))\n\n            # Add team column group\n            columns.append(\n                ColumnGroup(\n                    title=i18n_service.get_text(\"team\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"score\"), field=\"team_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")\n                    ]\n                )\n            )\n            \n            # --- Build data rows ---\n            if",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1791,
                "column": 5
              },
              "endPosition": {
                "line": 1792,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:",
            "lineNumber": 1791
          },
          {
            "lineNumber": 1856
          },
          {
            "lineNumber": 1857
          },
          {
            "text": "            # Helper to build player col group",
            "lineNumber": 1858
          },
          {
            "text": "            def player_col_group(player, prefix):",
            "lineNumber": 1859
          },
          {
            "text": "                return ColumnGroup(",
            "lineNumber": 1860
          },
          {
            "text": "                    title=player,",
            "lineNumber": 1861
          },
          {
            "text": "                        columns=[",
            "lineNumber": 1862
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=f\"{prefix}{player}_pos\", width=\"50px\", align=\"center\"),",
            "lineNumber": 1863
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=f\"{prefix}{player}_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 1864
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=f\"{prefix}{player}_points\", width=\"60px\", align=\"center\"),",
            "lineNumber": 1865
          },
          {
            "text": "                    ]",
            "lineNumber": 1866
          },
          {
            "text": "                )",
            "lineNumber": 1867
          },
          {
            "lineNumber": 1868
          },
          {
            "text": "            # Add own team player columns",
            "lineNumber": 1869
          },
          {
            "text": "            for player in own_players:",
            "lineNumber": 1870
          },
          {
            "text": "                columns.append(player_col_group(player, \"own_\"))",
            "lineNumber": 1871
          },
          {
            "text": "            # Add opponent player columns",
            "lineNumber": 1872
          },
          {
            "text": "            for player in opp_players:",
            "lineNumber": 1873
          },
          {
            "text": "                columns.append(player_col_group(player, \"opp_\"))",
            "lineNumber": 1874
          },
          {
            "lineNumber": 1875
          },
          {
            "text": "            # Add team column group",
            "lineNumber": 1876
          },
          {
            "text": "            columns.append(",
            "lineNumber": 1877
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1878
          },
          {
            "text": "                    title=i18n_service.get_text(\"team\"),",
            "lineNumber": 1879
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 1880
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 1881
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1882
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=\"team_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 1883
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")",
            "lineNumber": 1884
          },
          {
            "text": "                    ]",
            "lineNumber": 1885
          },
          {
            "text": "                )",
            "lineNumber": 1886
          },
          {
            "text": "            )",
            "lineNumber": 1887
          },
          {
            "text": "            ",
            "lineNumber": 1888
          },
          {
            "text": "            # --- Build data rows ---",
            "lineNumber": 1889
          },
          {
            "text": "            if",
            "lineNumber": 1890
          }
        ]
      },
      "score": 0.33210599422454834
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1827
          },
          "endPosition": {
            "line": 1870
          }
        },
        "contents": "                        if (colGroup.frozen) {\n                            td.style.position = 'sticky';\n                            if (colGroup.frozen === 'left') {\n                                // Calculate left position based on previous frozen columns\n                                let leftPos = 0;\n                                for (let g = 0; g &lt; groupIndex; g++) {\n                                    if (data.columns[g].frozen === 'left') {\n                                        data.columns[g].columns.forEach(c =&gt; {\n                                            leftPos += parseInt(c.width || '100px');\n                                        });\n                                    }\n                                }\n                                // Add offset for current group's previous columns\n                                for (let i = 0; i &lt; index; i++) {\n                                    leftPos += parseInt(colGroup.columns[i].width || '100px');\n                                }\n                                td.style.left = &#96;${leftPos}px&#96;;\n                                \n                                // Remove ALL visual separation\n                                td.style.boxShadow = 'none';\n                                td.style.borderRight = 'none';\n                                td.style.borderLeft = 'none';\n                            }\n                            td.style.zIndex = '1';\n                            td.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');\n                        }\n                        \n                        tr.appendChild(td);\n                    });\n                }\n            });\n            \n            tbody.appendChild(tr);\n        });\n    }\n    \n    // Initial population of table body\n    updateTableBody(data.data, enableSpecialRowStyling);\n    \n    tableWrapper.appendChild(table);\n    document.getElementById(tableId).innerHTML = '';  // Clear existing content\n    document.getElementById(tableId).appendChild(tableWrapper);\n    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        if (colGroup.frozen) {",
            "lineNumber": 1828
          },
          {
            "text": "                            td.style.position = 'sticky';",
            "lineNumber": 1829
          },
          {
            "text": "                            if (colGroup.frozen === 'left') {",
            "lineNumber": 1830
          },
          {
            "text": "                                // Calculate left position based on previous frozen columns",
            "lineNumber": 1831
          },
          {
            "text": "                                let leftPos = 0;",
            "lineNumber": 1832
          },
          {
            "text": "                                for (let g = 0; g &lt; groupIndex; g++) {",
            "lineNumber": 1833
          },
          {
            "text": "                                    if (data.columns[g].frozen === 'left') {",
            "lineNumber": 1834
          },
          {
            "text": "                                        data.columns[g].columns.forEach(c =&gt; {",
            "lineNumber": 1835
          },
          {
            "text": "                                            leftPos += parseInt(c.width || '100px');",
            "lineNumber": 1836
          },
          {
            "text": "                                        });",
            "lineNumber": 1837
          },
          {
            "text": "                                    }",
            "lineNumber": 1838
          },
          {
            "text": "                                }",
            "lineNumber": 1839
          },
          {
            "text": "                                // Add offset for current group's previous columns",
            "lineNumber": 1840
          },
          {
            "text": "                                for (let i = 0; i &lt; index; i++) {",
            "lineNumber": 1841
          },
          {
            "text": "                                    leftPos += parseInt(colGroup.columns[i].width || '100px');",
            "lineNumber": 1842
          },
          {
            "text": "                                }",
            "lineNumber": 1843
          },
          {
            "text": "                                td.style.left = &#96;${leftPos}px&#96;;",
            "lineNumber": 1844
          },
          {
            "text": "                                ",
            "lineNumber": 1845
          },
          {
            "text": "                                // Remove ALL visual separation",
            "lineNumber": 1846
          },
          {
            "text": "                                td.style.boxShadow = 'none';",
            "lineNumber": 1847
          },
          {
            "text": "                                td.style.borderRight = 'none';",
            "lineNumber": 1848
          },
          {
            "text": "                                td.style.borderLeft = 'none';",
            "lineNumber": 1849
          },
          {
            "text": "                            }",
            "lineNumber": 1850
          },
          {
            "text": "                            td.style.zIndex = '1';",
            "lineNumber": 1851
          },
          {
            "text": "                            td.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');",
            "lineNumber": 1852
          },
          {
            "text": "                        }",
            "lineNumber": 1853
          },
          {
            "text": "                        ",
            "lineNumber": 1854
          },
          {
            "text": "                        tr.appendChild(td);",
            "lineNumber": 1855
          },
          {
            "text": "                    });",
            "lineNumber": 1856
          },
          {
            "text": "                }",
            "lineNumber": 1857
          },
          {
            "text": "            });",
            "lineNumber": 1858
          },
          {
            "text": "            ",
            "lineNumber": 1859
          },
          {
            "text": "            tbody.appendChild(tr);",
            "lineNumber": 1860
          },
          {
            "text": "        });",
            "lineNumber": 1861
          },
          {
            "text": "    }",
            "lineNumber": 1862
          },
          {
            "text": "    ",
            "lineNumber": 1863
          },
          {
            "text": "    // Initial population of table body",
            "lineNumber": 1864
          },
          {
            "text": "    updateTableBody(data.data, enableSpecialRowStyling);",
            "lineNumber": 1865
          },
          {
            "text": "    ",
            "lineNumber": 1866
          },
          {
            "text": "    tableWrapper.appendChild(table);",
            "lineNumber": 1867
          },
          {
            "text": "    document.getElementById(tableId).innerHTML = '';  // Clear existing content",
            "lineNumber": 1868
          },
          {
            "text": "    document.getElementById(tableId).appendChild(tableWrapper);",
            "lineNumber": 1869
          },
          {
            "text": "    ",
            "lineNumber": 1870
          }
        ]
      },
      "score": 0.33138519525527954
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3503
          }
        },
        "contents": "class LeagueService:\ndef get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n\n        # Build columns\n        columns = [\n            ColumnGroup(\n                title=i18n_service.get_text(\"match\"),\n                columns=[\n                    Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent\", width=\"120px\", align=\"left\", sortable=False),\n                    Column(title=i18n_service.get_text(\"total_points\"), field=\"team_total_points\", width=\"100px\", align=\"center\", sortable=False,\n                           style={\"fontWeight\": \"bold\"}),\n                ]\n                #style={\"borderRight\": \"2px solid #264653\"}  # Vertical bar after Opponents group (same color as other borders)\n            ),\n            ColumnGroup(\n                title=team,\n                columns=[\n                    Column(title=i18n_service.get_text(\"pins\"), field=\"team_score\", width=\"80px\", align=\"center\", sortable=False),\n                    Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\", sortable=False),\n                      # Make Total Points column bold\n                ]\n            )\n        ]\n        for player_info in player_identifiers:\n            player_name = player_info['player_name']\n            columns.append(\n                ColumnGroup(\n                    title=player_name,\n                    columns=[\n                        Column(title=i18n_service.get_text(\"pins\"), field=f\"{player_info['identifier']}_score\", width=\"80px\", align=\"center\", sortable=False),\n                        Column(title=i18n_service.get_text(\"points\"), field=f\"{player_info['identifier']}_points\", width=\"50px\", align=\"center\", sortable=False),\n                        Column(title=i18n_service.get_text(\"position\"), field=f\"{player_info['identifier']}_pos\", width=\"50px\", align=\"center\", sortable=False),\n                        \n                    ]\n                )\n            )\n\n        # Build data rows (one per round)\n        data = []\n        row_metadata = []\n        for rnd in rounds:\n            row = []\n            # Opponent name for this round\n            round_data",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2029,
                "column": 5
              },
              "endPosition": {
                "line": 2030,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 2029
          },
          {
            "lineNumber": 2083
          },
          {
            "lineNumber": 2084
          },
          {
            "text": "        # Build columns",
            "lineNumber": 2085
          },
          {
            "text": "        columns = [",
            "lineNumber": 2086
          },
          {
            "text": "            ColumnGroup(",
            "lineNumber": 2087
          },
          {
            "text": "                title=i18n_service.get_text(\"match\"),",
            "lineNumber": 2088
          },
          {
            "text": "                columns=[",
            "lineNumber": 2089
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent\", width=\"120px\", align=\"left\", sortable=False),",
            "lineNumber": 2090
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"total_points\"), field=\"team_total_points\", width=\"100px\", align=\"center\", sortable=False,",
            "lineNumber": 2091
          },
          {
            "text": "                           style={\"fontWeight\": \"bold\"}),",
            "lineNumber": 2092
          },
          {
            "text": "                ]",
            "lineNumber": 2093
          },
          {
            "text": "                #style={\"borderRight\": \"2px solid #264653\"}  # Vertical bar after Opponents group (same color as other borders)",
            "lineNumber": 2094
          },
          {
            "text": "            ),",
            "lineNumber": 2095
          },
          {
            "text": "            ColumnGroup(",
            "lineNumber": 2096
          },
          {
            "text": "                title=team,",
            "lineNumber": 2097
          },
          {
            "text": "                columns=[",
            "lineNumber": 2098
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"pins\"), field=\"team_score\", width=\"80px\", align=\"center\", sortable=False),",
            "lineNumber": 2099
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\", sortable=False),",
            "lineNumber": 2100
          },
          {
            "text": "                      # Make Total Points column bold",
            "lineNumber": 2101
          },
          {
            "text": "                ]",
            "lineNumber": 2102
          },
          {
            "text": "            )",
            "lineNumber": 2103
          },
          {
            "text": "        ]",
            "lineNumber": 2104
          },
          {
            "text": "        for player_info in player_identifiers:",
            "lineNumber": 2105
          },
          {
            "text": "            player_name = player_info['player_name']",
            "lineNumber": 2106
          },
          {
            "text": "            columns.append(",
            "lineNumber": 2107
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 2108
          },
          {
            "text": "                    title=player_name,",
            "lineNumber": 2109
          },
          {
            "text": "                    columns=[",
            "lineNumber": 2110
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=f\"{player_info['identifier']}_score\", width=\"80px\", align=\"center\", sortable=False),",
            "lineNumber": 2111
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=f\"{player_info['identifier']}_points\", width=\"50px\", align=\"center\", sortable=False),",
            "lineNumber": 2112
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=f\"{player_info['identifier']}_pos\", width=\"50px\", align=\"center\", sortable=False),",
            "lineNumber": 2113
          },
          {
            "text": "                        ",
            "lineNumber": 2114
          },
          {
            "text": "                    ]",
            "lineNumber": 2115
          },
          {
            "text": "                )",
            "lineNumber": 2116
          },
          {
            "text": "            )",
            "lineNumber": 2117
          },
          {
            "lineNumber": 2118
          },
          {
            "text": "        # Build data rows (one per round)",
            "lineNumber": 2119
          },
          {
            "text": "        data = []",
            "lineNumber": 2120
          },
          {
            "text": "        row_metadata = []",
            "lineNumber": 2121
          },
          {
            "text": "        for rnd in rounds:",
            "lineNumber": 2122
          },
          {
            "text": "            row = []",
            "lineNumber": 2123
          },
          {
            "text": "            # Opponent name for this round",
            "lineNumber": 2124
          },
          {
            "text": "            round_data",
            "lineNumber": 2125
          }
        ]
      },
      "score": 0.3228336572647095
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 48
          },
          "endPosition": {
            "line": 104,
            "column": 8
          }
        },
        "contents": "                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        return &#96;\n            &lt;tr&gt;\n                ${columns.map((col, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        style=\"background-color: ${columnColors[index]};\n                               color: ${lastGroupColumns[index] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;\n                        ${col.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createTableRows = () =&gt; {\n        return currentData.map((row, rowIndex) =&gt; &#96;\n            &lt;tr&gt;\n                ${columns.map((col, colIndex) =&gt; &#96;\n                    &lt;td class=\"text-center\" \n                        style=\"background-color: ${columnColors[colIndex]};\n                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};\n                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; \n                                              columnColors[colIndex] !== columnColors[colIndex + 1]) \n                                             ? '2px solid #dee2e6' \n                                             : '1px solid #dee2e6'};\"&gt;\n                        ${row[colIndex] !== undefined ? row[colIndex] : ''}\n                    &lt;/td&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;).join('');\n    };\n\n    return &#96;\n        &lt;table class=\"table\"&gt;\n            &lt;thead&gt;\n                ${createHeaderGroups()}\n                ${createColumnHeaders()}\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                ${createTableRows()}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &#96;;\n}\n\n\nfunction flattenColumnMetadata(columnGroups = []) {\n    const flatColumns = [];\n    columnGroups.forEach((group, groupIndex) =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        return &#96;",
            "lineNumber": 55
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 56
          },
          {
            "text": "                ${columns.map((col, index) =&gt; &#96;",
            "lineNumber": 57
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 58
          },
          {
            "text": "                        style=\"background-color: ${columnColors[index]};",
            "lineNumber": 59
          },
          {
            "text": "                               color: ${lastGroupColumns[index] ? 'white' : 'black'};",
            "lineNumber": 60
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                        ${col.title || ''}",
            "lineNumber": 62
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 63
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 64
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 65
          },
          {
            "text": "        &#96;;",
            "lineNumber": 66
          },
          {
            "text": "    };",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "    const createTableRows = () =&gt; {",
            "lineNumber": 69
          },
          {
            "text": "        return currentData.map((row, rowIndex) =&gt; &#96;",
            "lineNumber": 70
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 71
          },
          {
            "text": "                ${columns.map((col, colIndex) =&gt; &#96;",
            "lineNumber": 72
          },
          {
            "text": "                    &lt;td class=\"text-center\" ",
            "lineNumber": 73
          },
          {
            "text": "                        style=\"background-color: ${columnColors[colIndex]};",
            "lineNumber": 74
          },
          {
            "text": "                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};",
            "lineNumber": 75
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};",
            "lineNumber": 76
          },
          {
            "text": "                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; ",
            "lineNumber": 77
          },
          {
            "text": "                                              columnColors[colIndex] !== columnColors[colIndex + 1]) ",
            "lineNumber": 78
          },
          {
            "text": "                                             ? '2px solid #dee2e6' ",
            "lineNumber": 79
          },
          {
            "text": "                                             : '1px solid #dee2e6'};\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "                        ${row[colIndex] !== undefined ? row[colIndex] : ''}",
            "lineNumber": 81
          },
          {
            "text": "                    &lt;/td&gt;",
            "lineNumber": 82
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 83
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 84
          },
          {
            "text": "        &#96;).join('');",
            "lineNumber": 85
          },
          {
            "text": "    };",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "    return &#96;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;table class=\"table\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;thead&gt;",
            "lineNumber": 90
          },
          {
            "text": "                ${createHeaderGroups()}",
            "lineNumber": 91
          },
          {
            "text": "                ${createColumnHeaders()}",
            "lineNumber": 92
          },
          {
            "text": "            &lt;/thead&gt;",
            "lineNumber": 93
          },
          {
            "text": "            &lt;tbody&gt;",
            "lineNumber": 94
          },
          {
            "text": "                ${createTableRows()}",
            "lineNumber": 95
          },
          {
            "text": "            &lt;/tbody&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;/table&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &#96;;",
            "lineNumber": 98
          },
          {
            "text": "}",
            "lineNumber": 99
          },
          {
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "function flattenColumnMetadata(columnGroups = []) {",
            "lineNumber": 102
          },
          {
            "text": "    const flatColumns = [];",
            "lineNumber": 103
          },
          {
            "text": "    columnGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 104
          },
          {
            "text": "        ",
            "lineNumber": 105
          }
        ]
      },
      "score": 0.3215338885784149
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 373,
            "column": 20
          },
          "endPosition": {
            "line": 408,
            "column": 20
          }
        },
        "contents": "cssClasses.push(colCssClass);\n                }\n\n                const columnDefinition = {\n                    title: column.title || '',\n                    field,\n                    hozAlign: headerAlign,\n                    headerHozAlign: headerAlign,\n                    headerSort: column.sortable !== false,\n                    sorter: column.sortable === false ? undefined : (isNumberColumn || isStringNumber ? 'number' : 'string'),\n                    formatter,\n                    tooltip: settings.tooltips ? true : false,\n                    // Add header tooltip: use explicit tooltip if provided, otherwise default to title\n                    headerTooltip: (column.tooltip !== undefined &amp;&amp; column.tooltip !== null &amp;&amp; column.tooltip !== '') \n                        ? column.tooltip \n                        : (column.title || ''),\n                    cssClass: cssClasses.join(' ') || undefined\n                };\n\n                // Set frozen on individual column if group was frozen\n                if (groupFrozenDirection) {\n                    columnDefinition.frozen = groupFrozenDirection;\n                }\n\n                // Column widths\n                let columnWidth = parseColumnWidth(column.width);\n                if (columnWidth === undefined) {\n                    if (groupIndex === 0) {\n                        columnWidth = 120;\n                    } else {\n                        columnWidth = 100;\n                    }\n                }\n\n                if (columnWidth !== undefined) {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "cssClasses.push(colCssClass);",
            "lineNumber": 374
          },
          {
            "text": "                }",
            "lineNumber": 375
          },
          {
            "lineNumber": 376
          },
          {
            "text": "                const columnDefinition = {",
            "lineNumber": 377
          },
          {
            "text": "                    title: column.title || '',",
            "lineNumber": 378
          },
          {
            "text": "                    field,",
            "lineNumber": 379
          },
          {
            "text": "                    hozAlign: headerAlign,",
            "lineNumber": 380
          },
          {
            "text": "                    headerHozAlign: headerAlign,",
            "lineNumber": 381
          },
          {
            "text": "                    headerSort: column.sortable !== false,",
            "lineNumber": 382
          },
          {
            "text": "                    sorter: column.sortable === false ? undefined : (isNumberColumn || isStringNumber ? 'number' : 'string'),",
            "lineNumber": 383
          },
          {
            "text": "                    formatter,",
            "lineNumber": 384
          },
          {
            "text": "                    tooltip: settings.tooltips ? true : false,",
            "lineNumber": 385
          },
          {
            "text": "                    // Add header tooltip: use explicit tooltip if provided, otherwise default to title",
            "lineNumber": 386
          },
          {
            "text": "                    headerTooltip: (column.tooltip !== undefined &amp;&amp; column.tooltip !== null &amp;&amp; column.tooltip !== '') ",
            "lineNumber": 387
          },
          {
            "text": "                        ? column.tooltip ",
            "lineNumber": 388
          },
          {
            "text": "                        : (column.title || ''),",
            "lineNumber": 389
          },
          {
            "text": "                    cssClass: cssClasses.join(' ') || undefined",
            "lineNumber": 390
          },
          {
            "text": "                };",
            "lineNumber": 391
          },
          {
            "lineNumber": 392
          },
          {
            "text": "                // Set frozen on individual column if group was frozen",
            "lineNumber": 393
          },
          {
            "text": "                if (groupFrozenDirection) {",
            "lineNumber": 394
          },
          {
            "text": "                    columnDefinition.frozen = groupFrozenDirection;",
            "lineNumber": 395
          },
          {
            "text": "                }",
            "lineNumber": 396
          },
          {
            "lineNumber": 397
          },
          {
            "text": "                // Column widths",
            "lineNumber": 398
          },
          {
            "text": "                let columnWidth = parseColumnWidth(column.width);",
            "lineNumber": 399
          },
          {
            "text": "                if (columnWidth === undefined) {",
            "lineNumber": 400
          },
          {
            "text": "                    if (groupIndex === 0) {",
            "lineNumber": 401
          },
          {
            "text": "                        columnWidth = 120;",
            "lineNumber": 402
          },
          {
            "text": "                    } else {",
            "lineNumber": 403
          },
          {
            "text": "                        columnWidth = 100;",
            "lineNumber": 404
          },
          {
            "text": "                    }",
            "lineNumber": 405
          },
          {
            "text": "                }",
            "lineNumber": 406
          },
          {
            "lineNumber": 407
          },
          {
            "text": "                if (columnWidth !== undefined) {",
            "lineNumber": 408
          },
          {
            "text": "                    ",
            "lineNumber": 409
          }
        ]
      },
      "score": 0.32152295112609863
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 581
          },
          "endPosition": {
            "line": 621
          }
        },
        "contents": "                    cssClass: colCssClass || undefined\n                };\n\n                // Adjust column widths based on group\n                // First group (Rang/Position) should be wider, week/total groups should be compressed\n                let columnWidth = parseColumnWidth(column.width);\n                \n                if (columnWidth === undefined) {\n                    // Apply default widths based on group\n                    const groupTitle = (group.title || '').toLowerCase();\n                    const isWeekGroup = groupTitle.includes('week') || groupTitle.includes('woche');\n                    const isTotalGroup = groupTitle.includes('total') || groupTitle.includes('gesamt') || groupTitle.includes('summe');\n                    \n                    if (groupIndex === 0) {\n                        // First group (Rang) - make it wider\n                        columnWidth = 120;\n                    } else if (isWeekGroup || isTotalGroup) {\n                        // Week and Total groups - compress them\n                        columnWidth = 80;\n                    } else {\n                        // Default width for other groups\n                        columnWidth = 100;\n                    }\n                }\n\n                if (columnWidth !== undefined) {\n                    if (isCompactLayout) {\n                        columnDefinition.width = columnWidth;\n                        columnDefinition.minWidth = columnWidth;\n                        columnDefinition.widthGrow = 0;\n                    } else {\n                        columnDefinition.minWidth = columnWidth; // Set minimum width, allow expansion\n                        columnDefinition.widthGrow = 1; // Allow column to grow proportionally\n                    }\n                } else if (isCompactLayout) {\n                    columnDefinition.widthGrow = 0;\n                }\n\n                // Build CSS classes\n                let cssClasses = [];",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    cssClass: colCssClass || undefined",
            "lineNumber": 582
          },
          {
            "text": "                };",
            "lineNumber": 583
          },
          {
            "lineNumber": 584
          },
          {
            "text": "                // Adjust column widths based on group",
            "lineNumber": 585
          },
          {
            "text": "                // First group (Rang/Position) should be wider, week/total groups should be compressed",
            "lineNumber": 586
          },
          {
            "text": "                let columnWidth = parseColumnWidth(column.width);",
            "lineNumber": 587
          },
          {
            "text": "                ",
            "lineNumber": 588
          },
          {
            "text": "                if (columnWidth === undefined) {",
            "lineNumber": 589
          },
          {
            "text": "                    // Apply default widths based on group",
            "lineNumber": 590
          },
          {
            "text": "                    const groupTitle = (group.title || '').toLowerCase();",
            "lineNumber": 591
          },
          {
            "text": "                    const isWeekGroup = groupTitle.includes('week') || groupTitle.includes('woche');",
            "lineNumber": 592
          },
          {
            "text": "                    const isTotalGroup = groupTitle.includes('total') || groupTitle.includes('gesamt') || groupTitle.includes('summe');",
            "lineNumber": 593
          },
          {
            "text": "                    ",
            "lineNumber": 594
          },
          {
            "text": "                    if (groupIndex === 0) {",
            "lineNumber": 595
          },
          {
            "text": "                        // First group (Rang) - make it wider",
            "lineNumber": 596
          },
          {
            "text": "                        columnWidth = 120;",
            "lineNumber": 597
          },
          {
            "text": "                    } else if (isWeekGroup || isTotalGroup) {",
            "lineNumber": 598
          },
          {
            "text": "                        // Week and Total groups - compress them",
            "lineNumber": 599
          },
          {
            "text": "                        columnWidth = 80;",
            "lineNumber": 600
          },
          {
            "text": "                    } else {",
            "lineNumber": 601
          },
          {
            "text": "                        // Default width for other groups",
            "lineNumber": 602
          },
          {
            "text": "                        columnWidth = 100;",
            "lineNumber": 603
          },
          {
            "text": "                    }",
            "lineNumber": 604
          },
          {
            "text": "                }",
            "lineNumber": 605
          },
          {
            "lineNumber": 606
          },
          {
            "text": "                if (columnWidth !== undefined) {",
            "lineNumber": 607
          },
          {
            "text": "                    if (isCompactLayout) {",
            "lineNumber": 608
          },
          {
            "text": "                        columnDefinition.width = columnWidth;",
            "lineNumber": 609
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth;",
            "lineNumber": 610
          },
          {
            "text": "                        columnDefinition.widthGrow = 0;",
            "lineNumber": 611
          },
          {
            "text": "                    } else {",
            "lineNumber": 612
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth; // Set minimum width, allow expansion",
            "lineNumber": 613
          },
          {
            "text": "                        columnDefinition.widthGrow = 1; // Allow column to grow proportionally",
            "lineNumber": 614
          },
          {
            "text": "                    }",
            "lineNumber": 615
          },
          {
            "text": "                } else if (isCompactLayout) {",
            "lineNumber": 616
          },
          {
            "text": "                    columnDefinition.widthGrow = 0;",
            "lineNumber": 617
          },
          {
            "text": "                }",
            "lineNumber": 618
          },
          {
            "lineNumber": 619
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 620
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 621
          }
        ]
      },
      "score": 0.3204633891582489
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---



---


Checking how striped column groups are configured in the config:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "stripedColGroups",
  "path": "app",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "stripedColGroups",
    "path": "app",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 1655,
                  "content": "                    \"stripedColGroups\": True"
                }
              ]
            },
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 173,
                  "content": "    const useStripedGroups = tableConfig.stripedColGroups === true;"
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---



---


Checking the exact config structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---



---


Adding `stripedColGroups` to the game overview table config:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "f5369e56-415d-4905-8dc8-9620cfe5aa5d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Added column group striping to the game overview table.

**Changes made:**
- Added `"stripedColGroups": True` to the table config

This enables alternating background colors for the "Team" and "Opponent" column groups, making them easier to distinguish. The frontend applies CSS classes and styling based on this flag.

Refresh the page to see:
1. Heatmap coloring on the points and pins columns
2. Column group striping with alternating backgrounds for the Team and Opponent groups

The table should now be easier to read with these visual enhancements.

---

_**User (2025-12-06 20:11Z)**_

can we change the order of coloring: heatmap > striping?

---

_**Agent (model default, mode Agent)**_



---

Checking how styling is applied in the frontend to ensure heatmap colors take precedence over column group striping:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "applyElementStyles|cellMeta|cellMetadata",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "applyElementStyles|cellMeta|cellMetadata",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "121:function mapCellMetadata(cellMetadata = {}, columnOrder = []) {",
              "matches": [
                {
                  "lineNumber": 123,
                  "content": "    Object.entries(cellMetadata).forEach(([key, styles]) =&gt; {"
                },
                {
                  "lineNumber": 140,
                  "content": "function applyElementStyles(element, styles = {}) {"
                },
                {
                  "lineNumber": 216,
                  "content": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);"
                },
                {
                  "lineNumber": 281,
                  "content": "                    applyElementStyles(element, columnStyles);"
                },
                {
                  "lineNumber": 284,
                  "content": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];"
                },
                {
                  "lineNumber": 285,
                  "content": "                    if (cellMeta) {"
                },
                {
                  "lineNumber": 286,
                  "content": "                        applyElementStyles(element, cellMeta);"
                },
                {
                  "lineNumber": 474,
                  "content": "                    applyElementStyles(element, columnStyles);"
                },
                {
                  "lineNumber": 477,
                  "content": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];"
                },
                {
                  "lineNumber": 478,
                  "content": "                    if (cellMeta) {"
                },
                {
                  "lineNumber": 479,
                  "content": "                        applyElementStyles(element, cellMeta);"
                },
                {
                  "lineNumber": 926,
                  "content": "                applyElementStyles(row.getElement(), styling);"
                },
                {
                  "lineNumber": 1750,
                  "content": "                                const cellMeta = data.cell_metadata[&#96;${rowIndex}:${colIndex}&#96;];"
                },
                {
                  "lineNumber": 1751,
                  "content": "                                Object.entries(cellMeta).forEach(([key, value]) =&gt; {"
                }
              ]
            }
          ],
          "totalLines": 14,
          "totalMatchedLines": 14
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking how `applyElementStyles` works and whether we need to use `!important` for heatmap colors:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "col-group-|stripedColGroups|\\.col-group",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "col-group-|stripedColGroups|\\.col-group",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "173:    const useStripedGroups = tableConfig.stripedColGroups === true;",
              "matches": [
                {
                  "lineNumber": 464,
                  "content": "                        element.classList.add('col-group-' + groupIndex);"
                },
                {
                  "lineNumber": 552,
                  "content": "                // If striping is enabled, assignGroupStripeCss already added col-group-N to column.cssClass"
                },
                {
                  "lineNumber": 559,
                  "content": "                    const stripeClass = 'col-group-' + groupIndex;"
                },
                {
                  "lineNumber": 748,
                  "content": "                            el.classList.add('col-group-' + idx);"
                },
                {
                  "lineNumber": 869,
                  "content": "                                    const titleEl = colGroup.querySelector('.tabulator-col-group-title, .tabulator-col-title');"
                },
                {
                  "lineNumber": 989,
                  "content": "                                            const titleEl = colGroup.querySelector('.tabulator-col-group-title');"
                },
                {
                  "lineNumber": 1010,
                  "content": "                                const groupTitleEl = colGroup.querySelector('.tabulator-col-group-title');"
                },
                {
                  "lineNumber": 2156,
                  "content": ".custom-tabulator .tabulator-col-group .tabulator-col-group-title {"
                }
              ]
            }
          ],
          "totalLines": 8,
          "totalMatchedLines": 8
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are CSS classes for column group striping styled with background colors?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\n\n\n    function assignLeafColumnCss(columns, groupIndex) {\n        columns.forEach(col =&gt; {\n            if (col.columns) {\n                // Nested group - recurse\n                assignLeafColumnCss(col.columns, groupIndex);\n            } else {\n                // Leaf column - cssClass for cells, headerClass for column headers\n                col.cssClass = ((col.cssClass || \"\") + \" col-group-\" + groupIndex).trim();\n                col.headerClass = ((col.headerClass || \"\") + \" col-group-\" + groupIndex).trim();\n            }\n        });\n    }\n\n    /**\n     * Generates CSS rules for striped column groups.\n     * @param {number} groupCount - Number of groups to generate rules for\n     * @param {Object} options - Options for colors\n     * @returns {string} CSS rules as a string\n     */\n    function generateStripeCss(groupCount, options = {}) {\n        const palette = options.palette || DEFAULT_STRIPE_PALETTE;\n        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;\n        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;\n        \n        let css = \"\";\n        for (let i = 0; i &lt; groupCount; i++) {\n            const color = palette[i % palette.length];\n            const headerBg = toRgba(color, headerAlpha);\n            const cellBg = toRgba(color, cellAlpha);\n            // Body cells (but NOT frozen ones – they use solid row backgrounds to avoid see‑through)\n            css += &#96;.tabulator-cell.col-group-${i}:not(.tabulator-frozen) { background-color: ${cellBg} !important; }\\n&#96;;\n            // Full header cells for this group (no small boxes just behind text), but not frozen headers\n            css += &#96;.tabulator-col.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;\n            css += &#96;.tabulator-col-group.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;\n        }\n        return css;\n    }\n\n    /**\n     * Injects stripe CSS into the document if not already present.\n     * @param {number} groupCount - Number of groups\n     * @param {Object} options - Color options\n     */\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "lineNumber": 178
          },
          {
            "lineNumber": 179
          },
          {
            "text": "    function assignLeafColumnCss(columns, groupIndex) {",
            "lineNumber": 180
          },
          {
            "text": "        columns.forEach(col =&gt; {",
            "lineNumber": 181
          },
          {
            "text": "            if (col.columns) {",
            "lineNumber": 182
          },
          {
            "text": "                // Nested group - recurse",
            "lineNumber": 183
          },
          {
            "text": "                assignLeafColumnCss(col.columns, groupIndex);",
            "lineNumber": 184
          },
          {
            "text": "            } else {",
            "lineNumber": 185
          },
          {
            "text": "                // Leaf column - cssClass for cells, headerClass for column headers",
            "lineNumber": 186
          },
          {
            "text": "                col.cssClass = ((col.cssClass || \"\") + \" col-group-\" + groupIndex).trim();",
            "lineNumber": 187
          },
          {
            "text": "                col.headerClass = ((col.headerClass || \"\") + \" col-group-\" + groupIndex).trim();",
            "lineNumber": 188
          },
          {
            "text": "            }",
            "lineNumber": 189
          },
          {
            "text": "        });",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "lineNumber": 192
          },
          {
            "text": "    /**",
            "lineNumber": 193
          },
          {
            "text": "     * Generates CSS rules for striped column groups.",
            "lineNumber": 194
          },
          {
            "text": "     * @param {number} groupCount - Number of groups to generate rules for",
            "lineNumber": 195
          },
          {
            "text": "     * @param {Object} options - Options for colors",
            "lineNumber": 196
          },
          {
            "text": "     * @returns {string} CSS rules as a string",
            "lineNumber": 197
          },
          {
            "text": "     */",
            "lineNumber": 198
          },
          {
            "text": "    function generateStripeCss(groupCount, options = {}) {",
            "lineNumber": 199
          },
          {
            "text": "        const palette = options.palette || DEFAULT_STRIPE_PALETTE;",
            "lineNumber": 200
          },
          {
            "text": "        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;",
            "lineNumber": 201
          },
          {
            "text": "        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;",
            "lineNumber": 202
          },
          {
            "text": "        ",
            "lineNumber": 203
          },
          {
            "text": "        let css = \"\";",
            "lineNumber": 204
          },
          {
            "text": "        for (let i = 0; i &lt; groupCount; i++) {",
            "lineNumber": 205
          },
          {
            "text": "            const color = palette[i % palette.length];",
            "lineNumber": 206
          },
          {
            "text": "            const headerBg = toRgba(color, headerAlpha);",
            "lineNumber": 207
          },
          {
            "text": "            const cellBg = toRgba(color, cellAlpha);",
            "lineNumber": 208
          },
          {
            "text": "            // Body cells (but NOT frozen ones – they use solid row backgrounds to avoid see‑through)",
            "lineNumber": 209
          },
          {
            "text": "            css += &#96;.tabulator-cell.col-group-${i}:not(.tabulator-frozen) { background-color: ${cellBg} !important; }\\n&#96;;",
            "lineNumber": 210
          },
          {
            "text": "            // Full header cells for this group (no small boxes just behind text), but not frozen headers",
            "lineNumber": 211
          },
          {
            "text": "            css += &#96;.tabulator-col.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;",
            "lineNumber": 212
          },
          {
            "text": "            css += &#96;.tabulator-col-group.col-group-${i}:not(.tabulator-frozen) { background-color: ${headerBg} !important; }\\n&#96;;",
            "lineNumber": 213
          },
          {
            "text": "        }",
            "lineNumber": 214
          },
          {
            "text": "        return css;",
            "lineNumber": 215
          },
          {
            "text": "    }",
            "lineNumber": 216
          },
          {
            "lineNumber": 217
          },
          {
            "text": "    /**",
            "lineNumber": 218
          },
          {
            "text": "     * Injects stripe CSS into the document if not already present.",
            "lineNumber": 219
          },
          {
            "text": "     * @param {number} groupCount - Number of groups",
            "lineNumber": 220
          },
          {
            "text": "     * @param {Object} options - Color options",
            "lineNumber": 221
          },
          {
            "text": "     */",
            "lineNumber": 222
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.5813754796981812
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 438,
            "column": 12
          },
          "endPosition": {
            "line": 482
          }
        },
        "contents": "groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();\n        }\n\n        const groupDefinition = {\n            title: group.title || '',\n            headerHozAlign: 'center',\n            cssClass: groupCssClass,\n            columns: group.columns.map((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return null;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add stripe class for column group coloring; actual colors come from CSS\n                    if (useStripedGroups) {\n                        element.classList.add('col-group-' + groupIndex);\n                    }\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles\n                    const cellMeta = cellMetadataMap[rowIdx]?.[field];\n                    if (cellMeta) {\n                        applyElementStyles(element, cellMeta);\n                    }\n\n                    // Special handling for position columns",
        "signatures": {},
        "detailedLines": [
          {
            "text": "groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();",
            "lineNumber": 439
          },
          {
            "text": "        }",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "        const groupDefinition = {",
            "lineNumber": 442
          },
          {
            "text": "            title: group.title || '',",
            "lineNumber": 443
          },
          {
            "text": "            headerHozAlign: 'center',",
            "lineNumber": 444
          },
          {
            "text": "            cssClass: groupCssClass,",
            "lineNumber": 445
          },
          {
            "text": "            columns: group.columns.map((column, columnIndex) =&gt; {",
            "lineNumber": 446
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 447
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 448
          },
          {
            "text": "                    return null;",
            "lineNumber": 449
          },
          {
            "text": "                }",
            "lineNumber": 450
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 451
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 452
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 453
          },
          {
            "text": "                ",
            "lineNumber": 454
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 455
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 456
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 457
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 458
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 459
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 460
          },
          {
            "lineNumber": 461
          },
          {
            "text": "                    // Add stripe class for column group coloring; actual colors come from CSS",
            "lineNumber": 462
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 463
          },
          {
            "text": "                        element.classList.add('col-group-' + groupIndex);",
            "lineNumber": 464
          },
          {
            "text": "                    }",
            "lineNumber": 465
          },
          {
            "lineNumber": 466
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 467
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 468
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 469
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 470
          },
          {
            "text": "                    }",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 473
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 474
          },
          {
            "lineNumber": 475
          },
          {
            "text": "                    // Cell metadata styles",
            "lineNumber": 476
          },
          {
            "text": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];",
            "lineNumber": 477
          },
          {
            "text": "                    if (cellMeta) {",
            "lineNumber": 478
          },
          {
            "text": "                        applyElementStyles(element, cellMeta);",
            "lineNumber": 479
          },
          {
            "text": "                    }",
            "lineNumber": 480
          },
          {
            "lineNumber": 481
          },
          {
            "text": "                    // Special handling for position columns",
            "lineNumber": 482
          }
        ]
      },
      "score": 0.5242353081703186
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 433,
            "column": 1
          }
        },
        "contents": "() =&gt; {\n\n\n    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {\n        if (!count || count &lt;= 1) {\n            return [start];\n        }\n        const startRgb = hexToRgb(start);\n        const endRgb = hexToRgb(end);\n\n        return Array.from({ length: count }, (_, index) =&gt; {\n            if (index === 0) return start;\n            if (index === count - 1) return end;\n            const factor = index / (count - 1);\n            const r = Math.round(startRgb[0] + (endRgb[0] - startRgb[0]) * factor);\n            const g = Math.round(startRgb[1] + (endRgb[1] - startRgb[1]) * factor);\n            const b = Math.round(startRgb[2] + (endRgb[2] - startRgb[2]) * factor);\n            return &#96;rgb(${r}, ${g}, ${b})&#96;;\n        });\n    }\n\n    function getStripeColors(groupIndex, options = {}) {\n        if (options.enabled === false) {\n            return null;\n        }\n        const palette = options.palette || DEFAULT_STRIPE_PALETTE;\n        const color = palette[groupIndex % palette.length];\n        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;\n        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;\n        return {\n            headerBg: toRgba(color, headerAlpha),\n            cellBg: toRgba(color, cellAlpha)\n        };\n    }\n\n    /**\n     * Assigns CSS classes to column groups for striped coloring.\n     * Call this before creating the Tabulator instance.\n     * @param {Array} groups - Array of column group definitions\n     */\n    function assignGroupStripeCss(groups) {\n        groups.forEach((group, index) =&gt; {\n            // Add class to the group itself (for group header)\n            group.cssClass = ((group.cssClass || \"\") + \" col-group-\" + index).trim();\n            // Add class to all leaf columns\n            if (group.columns) {\n                assignLeafColumnCss(group.columns, index);\n            }\n        });\n    }\n\n    function assignLeafColumnCss(columns, groupIndex) {\n        columns.forEach\n\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "lineNumber": 130
          },
          {
            "lineNumber": 131
          },
          {
            "text": "    function getGradientColors(count, start = \"#ffffff\", end = \"#2196F3\") {",
            "lineNumber": 132
          },
          {
            "text": "        if (!count || count &lt;= 1) {",
            "lineNumber": 133
          },
          {
            "text": "            return [start];",
            "lineNumber": 134
          },
          {
            "text": "        }",
            "lineNumber": 135
          },
          {
            "text": "        const startRgb = hexToRgb(start);",
            "lineNumber": 136
          },
          {
            "text": "        const endRgb = hexToRgb(end);",
            "lineNumber": 137
          },
          {
            "lineNumber": 138
          },
          {
            "text": "        return Array.from({ length: count }, (_, index) =&gt; {",
            "lineNumber": 139
          },
          {
            "text": "            if (index === 0) return start;",
            "lineNumber": 140
          },
          {
            "text": "            if (index === count - 1) return end;",
            "lineNumber": 141
          },
          {
            "text": "            const factor = index / (count - 1);",
            "lineNumber": 142
          },
          {
            "text": "            const r = Math.round(startRgb[0] + (endRgb[0] - startRgb[0]) * factor);",
            "lineNumber": 143
          },
          {
            "text": "            const g = Math.round(startRgb[1] + (endRgb[1] - startRgb[1]) * factor);",
            "lineNumber": 144
          },
          {
            "text": "            const b = Math.round(startRgb[2] + (endRgb[2] - startRgb[2]) * factor);",
            "lineNumber": 145
          },
          {
            "text": "            return &#96;rgb(${r}, ${g}, ${b})&#96;;",
            "lineNumber": 146
          },
          {
            "text": "        });",
            "lineNumber": 147
          },
          {
            "text": "    }",
            "lineNumber": 148
          },
          {
            "lineNumber": 149
          },
          {
            "text": "    function getStripeColors(groupIndex, options = {}) {",
            "lineNumber": 150
          },
          {
            "text": "        if (options.enabled === false) {",
            "lineNumber": 151
          },
          {
            "text": "            return null;",
            "lineNumber": 152
          },
          {
            "text": "        }",
            "lineNumber": 153
          },
          {
            "text": "        const palette = options.palette || DEFAULT_STRIPE_PALETTE;",
            "lineNumber": 154
          },
          {
            "text": "        const color = palette[groupIndex % palette.length];",
            "lineNumber": 155
          },
          {
            "text": "        const headerAlpha = typeof options.headerAlpha === \"number\" ? options.headerAlpha : 0.55;",
            "lineNumber": 156
          },
          {
            "text": "        const cellAlpha = typeof options.cellAlpha === \"number\" ? options.cellAlpha : 0.25;",
            "lineNumber": 157
          },
          {
            "text": "        return {",
            "lineNumber": 158
          },
          {
            "text": "            headerBg: toRgba(color, headerAlpha),",
            "lineNumber": 159
          },
          {
            "text": "            cellBg: toRgba(color, cellAlpha)",
            "lineNumber": 160
          },
          {
            "text": "        };",
            "lineNumber": 161
          },
          {
            "text": "    }",
            "lineNumber": 162
          },
          {
            "lineNumber": 163
          },
          {
            "text": "    /**",
            "lineNumber": 164
          },
          {
            "text": "     * Assigns CSS classes to column groups for striped coloring.",
            "lineNumber": 165
          },
          {
            "text": "     * Call this before creating the Tabulator instance.",
            "lineNumber": 166
          },
          {
            "text": "     * @param {Array} groups - Array of column group definitions",
            "lineNumber": 167
          },
          {
            "text": "     */",
            "lineNumber": 168
          },
          {
            "text": "    function assignGroupStripeCss(groups) {",
            "lineNumber": 169
          },
          {
            "text": "        groups.forEach((group, index) =&gt; {",
            "lineNumber": 170
          },
          {
            "text": "            // Add class to the group itself (for group header)",
            "lineNumber": 171
          },
          {
            "text": "            group.cssClass = ((group.cssClass || \"\") + \" col-group-\" + index).trim();",
            "lineNumber": 172
          },
          {
            "text": "            // Add class to all leaf columns",
            "lineNumber": 173
          },
          {
            "text": "            if (group.columns) {",
            "lineNumber": 174
          },
          {
            "text": "                assignLeafColumnCss(group.columns, index);",
            "lineNumber": 175
          },
          {
            "text": "            }",
            "lineNumber": 176
          },
          {
            "text": "        });",
            "lineNumber": 177
          },
          {
            "text": "    }",
            "lineNumber": 178
          },
          {
            "lineNumber": 179
          },
          {
            "text": "    function assignLeafColumnCss(columns, groupIndex) {",
            "lineNumber": 180
          },
          {
            "text": "        columns.forEach",
            "lineNumber": 181
          },
          {
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "text": "}",
            "lineNumber": 434
          }
        ]
      },
      "score": 0.5183361172676086
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 538
          },
          "endPosition": {
            "line": 568,
            "column": 20
          }
        },
        "contents": "                        }\n                    }\n\n                    return value ?? '';\n                };\n\n                const sampleValue = transformedData.length ? transformedData[0][field] : null;\n                const isNumberColumn = typeof sampleValue === 'number';\n                // Check if it's a string that represents a number (e.g., \"100.0\", \"99.5\")\n                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);\n\n                // Build column cssClass: combine striped class with any existing\n                // cssClass applies to cells, headerClass applies to column headers\n                // If striping is enabled, assignGroupStripeCss already added col-group-N to column.cssClass\n                // But we also need to add it here in case the backend column object wasn't modified\n                let colCssClass = column.cssClass || '';\n                let colHeaderClass = column.headerClass || '';\n                \n                // Ensure stripe class is added if striping is enabled\n                if (useStripedGroups) {\n                    const stripeClass = 'col-group-' + groupIndex;\n                    if (!colCssClass.includes(stripeClass)) {\n                        colCssClass = (colCssClass + ' ' + stripeClass).trim();\n                    }\n                    if (!colHeaderClass.includes(stripeClass)) {\n                        colHeaderClass = (colHeaderClass + ' ' + stripeClass).trim();\n                    }\n                }\n\n                const columnDefinition = {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        }",
            "lineNumber": 539
          },
          {
            "text": "                    }",
            "lineNumber": 540
          },
          {
            "lineNumber": 541
          },
          {
            "text": "                    return value ?? '';",
            "lineNumber": 542
          },
          {
            "text": "                };",
            "lineNumber": 543
          },
          {
            "lineNumber": 544
          },
          {
            "text": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;",
            "lineNumber": 545
          },
          {
            "text": "                const isNumberColumn = typeof sampleValue === 'number';",
            "lineNumber": 546
          },
          {
            "text": "                // Check if it's a string that represents a number (e.g., \"100.0\", \"99.5\")",
            "lineNumber": 547
          },
          {
            "text": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
            "lineNumber": 548
          },
          {
            "lineNumber": 549
          },
          {
            "text": "                // Build column cssClass: combine striped class with any existing",
            "lineNumber": 550
          },
          {
            "text": "                // cssClass applies to cells, headerClass applies to column headers",
            "lineNumber": 551
          },
          {
            "text": "                // If striping is enabled, assignGroupStripeCss already added col-group-N to column.cssClass",
            "lineNumber": 552
          },
          {
            "text": "                // But we also need to add it here in case the backend column object wasn't modified",
            "lineNumber": 553
          },
          {
            "text": "                let colCssClass = column.cssClass || '';",
            "lineNumber": 554
          },
          {
            "text": "                let colHeaderClass = column.headerClass || '';",
            "lineNumber": 555
          },
          {
            "text": "                ",
            "lineNumber": 556
          },
          {
            "text": "                // Ensure stripe class is added if striping is enabled",
            "lineNumber": 557
          },
          {
            "text": "                if (useStripedGroups) {",
            "lineNumber": 558
          },
          {
            "text": "                    const stripeClass = 'col-group-' + groupIndex;",
            "lineNumber": 559
          },
          {
            "text": "                    if (!colCssClass.includes(stripeClass)) {",
            "lineNumber": 560
          },
          {
            "text": "                        colCssClass = (colCssClass + ' ' + stripeClass).trim();",
            "lineNumber": 561
          },
          {
            "text": "                    }",
            "lineNumber": 562
          },
          {
            "text": "                    if (!colHeaderClass.includes(stripeClass)) {",
            "lineNumber": 563
          },
          {
            "text": "                        colHeaderClass = (colHeaderClass + ' ' + stripeClass).trim();",
            "lineNumber": 564
          },
          {
            "text": "                    }",
            "lineNumber": 565
          },
          {
            "text": "                }",
            "lineNumber": 566
          },
          {
            "lineNumber": 567
          },
          {
            "text": "                const columnDefinition = {",
            "lineNumber": 568
          },
          {
            "text": "                    ",
            "lineNumber": 569
          }
        ]
      },
      "score": 0.5098974108695984
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 404
          },
          "endPosition": {
            "line": 443
          }
        },
        "contents": "                    }\n                }\n\n                if (columnWidth !== undefined) {\n                    if (isCompactLayout) {\n                        columnDefinition.width = columnWidth;\n                        columnDefinition.minWidth = columnWidth;\n                        columnDefinition.widthGrow = 0;\n                    } else {\n                        columnDefinition.minWidth = columnWidth;\n                        columnDefinition.widthGrow = 1;\n                    }\n                } else if (isCompactLayout) {\n                    columnDefinition.widthGrow = 0;\n                }\n\n                tabulatorColumns.push(columnDefinition);\n            });\n        });\n    } else {\n        // Normal structure with groups\n        tabulatorColumns = (data.columns || []).map((group, groupIndex) =&gt; {\n        if (!Array.isArray(group.columns)) {\n            return null;\n        }\n\n        const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;\n        \n        // Use backend flag for highlighting\n        const isHighlighted = group.highlighted === true;\n\n        // Build cssClass: combine striped class (already added by assignGroupStripeCss) with highlight class\n        let groupCssClass = group.cssClass || '';\n        if (isHighlighted) {\n            groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();\n        }\n\n        const groupDefinition = {\n            title: group.title || '',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    }",
            "lineNumber": 405
          },
          {
            "text": "                }",
            "lineNumber": 406
          },
          {
            "lineNumber": 407
          },
          {
            "text": "                if (columnWidth !== undefined) {",
            "lineNumber": 408
          },
          {
            "text": "                    if (isCompactLayout) {",
            "lineNumber": 409
          },
          {
            "text": "                        columnDefinition.width = columnWidth;",
            "lineNumber": 410
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth;",
            "lineNumber": 411
          },
          {
            "text": "                        columnDefinition.widthGrow = 0;",
            "lineNumber": 412
          },
          {
            "text": "                    } else {",
            "lineNumber": 413
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth;",
            "lineNumber": 414
          },
          {
            "text": "                        columnDefinition.widthGrow = 1;",
            "lineNumber": 415
          },
          {
            "text": "                    }",
            "lineNumber": 416
          },
          {
            "text": "                } else if (isCompactLayout) {",
            "lineNumber": 417
          },
          {
            "text": "                    columnDefinition.widthGrow = 0;",
            "lineNumber": 418
          },
          {
            "text": "                }",
            "lineNumber": 419
          },
          {
            "lineNumber": 420
          },
          {
            "text": "                tabulatorColumns.push(columnDefinition);",
            "lineNumber": 421
          },
          {
            "text": "            });",
            "lineNumber": 422
          },
          {
            "text": "        });",
            "lineNumber": 423
          },
          {
            "text": "    } else {",
            "lineNumber": 424
          },
          {
            "text": "        // Normal structure with groups",
            "lineNumber": 425
          },
          {
            "text": "        tabulatorColumns = (data.columns || []).map((group, groupIndex) =&gt; {",
            "lineNumber": 426
          },
          {
            "text": "        if (!Array.isArray(group.columns)) {",
            "lineNumber": 427
          },
          {
            "text": "            return null;",
            "lineNumber": 428
          },
          {
            "text": "        }",
            "lineNumber": 429
          },
          {
            "lineNumber": 430
          },
          {
            "text": "        const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;",
            "lineNumber": 431
          },
          {
            "text": "        ",
            "lineNumber": 432
          },
          {
            "text": "        // Use backend flag for highlighting",
            "lineNumber": 433
          },
          {
            "text": "        const isHighlighted = group.highlighted === true;",
            "lineNumber": 434
          },
          {
            "lineNumber": 435
          },
          {
            "text": "        // Build cssClass: combine striped class (already added by assignGroupStripeCss) with highlight class",
            "lineNumber": 436
          },
          {
            "text": "        let groupCssClass = group.cssClass || '';",
            "lineNumber": 437
          },
          {
            "text": "        if (isHighlighted) {",
            "lineNumber": 438
          },
          {
            "text": "            groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();",
            "lineNumber": 439
          },
          {
            "text": "        }",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "        const groupDefinition = {",
            "lineNumber": 442
          },
          {
            "text": "            title: group.title || '',",
            "lineNumber": 443
          }
        ]
      },
      "score": 0.43431058526039124
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 707,
            "column": 12
          },
          "endPosition": {
            "line": 747,
            "column": 28
          }
        },
        "contents": "window.updateTeamColorMap(teams);\n        }\n    }\n\n    const tabulatorOptions = {\n        data: transformedData,\n        columns: tabulatorColumns,\n        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",\n        responsiveLayout: false,\n        pagination: false,\n        movableColumns: false,\n        tooltips: tooltipOption,\n        height: \"auto\",\n        rowHeight: 40,\n        theme: \"semanticui\",\n        cssClass: \"custom-tabulator\",\n        columnHeaderVertAlign: \"middle\",\n        width: \"100%\", // Ensure table takes full width of container\n        ...(initialSort ? { initialSort: initialSort } : {}),\n        tableBuilt: function() {\n            try {\n                // Apply highlighting and fix header separator\n                // Use requestAnimationFrame for better timing\n                requestAnimationFrame(() =&gt; {\n                    requestAnimationFrame(() =&gt; {\n                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);\n                    if (!tableElement) {\n                        return;\n                    }\n                    \n                    // Set CSS custom properties for highlighting styles\n                    tableElement.style.setProperty('--highlight-header-bg', HIGHLIGHT_STYLES.headerBackgroundColor);\n                    tableElement.style.setProperty('--highlight-cell-bg', HIGHLIGHT_STYLES.cellBackgroundColor);\n                    tableElement.style.setProperty('--highlight-header-weight', HIGHLIGHT_STYLES.headerFontWeight);\n                    tableElement.style.setProperty('--highlight-cell-weight', HIGHLIGHT_STYLES.cellFontWeight);\n                    \n                    // Stripe coloring: assign group classes to column group headers\n                    // (cells and column headers get classes via cssClass/headerClass in column definitions)\n                    if (useStripedGroups) {\n                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {\n                            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "window.updateTeamColorMap(teams);",
            "lineNumber": 708
          },
          {
            "text": "        }",
            "lineNumber": 709
          },
          {
            "text": "    }",
            "lineNumber": 710
          },
          {
            "lineNumber": 711
          },
          {
            "text": "    const tabulatorOptions = {",
            "lineNumber": 712
          },
          {
            "text": "        data: transformedData,",
            "lineNumber": 713
          },
          {
            "text": "        columns: tabulatorColumns,",
            "lineNumber": 714
          },
          {
            "text": "        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",",
            "lineNumber": 715
          },
          {
            "text": "        responsiveLayout: false,",
            "lineNumber": 716
          },
          {
            "text": "        pagination: false,",
            "lineNumber": 717
          },
          {
            "text": "        movableColumns: false,",
            "lineNumber": 718
          },
          {
            "text": "        tooltips: tooltipOption,",
            "lineNumber": 719
          },
          {
            "text": "        height: \"auto\",",
            "lineNumber": 720
          },
          {
            "text": "        rowHeight: 40,",
            "lineNumber": 721
          },
          {
            "text": "        theme: \"semanticui\",",
            "lineNumber": 722
          },
          {
            "text": "        cssClass: \"custom-tabulator\",",
            "lineNumber": 723
          },
          {
            "text": "        columnHeaderVertAlign: \"middle\",",
            "lineNumber": 724
          },
          {
            "text": "        width: \"100%\", // Ensure table takes full width of container",
            "lineNumber": 725
          },
          {
            "text": "        ...(initialSort ? { initialSort: initialSort } : {}),",
            "lineNumber": 726
          },
          {
            "text": "        tableBuilt: function() {",
            "lineNumber": 727
          },
          {
            "text": "            try {",
            "lineNumber": 728
          },
          {
            "text": "                // Apply highlighting and fix header separator",
            "lineNumber": 729
          },
          {
            "text": "                // Use requestAnimationFrame for better timing",
            "lineNumber": 730
          },
          {
            "text": "                requestAnimationFrame(() =&gt; {",
            "lineNumber": 731
          },
          {
            "text": "                    requestAnimationFrame(() =&gt; {",
            "lineNumber": 732
          },
          {
            "text": "                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
            "lineNumber": 733
          },
          {
            "text": "                    if (!tableElement) {",
            "lineNumber": 734
          },
          {
            "text": "                        return;",
            "lineNumber": 735
          },
          {
            "text": "                    }",
            "lineNumber": 736
          },
          {
            "text": "                    ",
            "lineNumber": 737
          },
          {
            "text": "                    // Set CSS custom properties for highlighting styles",
            "lineNumber": 738
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-header-bg', HIGHLIGHT_STYLES.headerBackgroundColor);",
            "lineNumber": 739
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-cell-bg', HIGHLIGHT_STYLES.cellBackgroundColor);",
            "lineNumber": 740
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-header-weight', HIGHLIGHT_STYLES.headerFontWeight);",
            "lineNumber": 741
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-cell-weight', HIGHLIGHT_STYLES.cellFontWeight);",
            "lineNumber": 742
          },
          {
            "text": "                    ",
            "lineNumber": 743
          },
          {
            "text": "                    // Stripe coloring: assign group classes to column group headers",
            "lineNumber": 744
          },
          {
            "text": "                    // (cells and column headers get classes via cssClass/headerClass in column definitions)",
            "lineNumber": 745
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 746
          },
          {
            "text": "                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {",
            "lineNumber": 747
          },
          {
            "text": "                            ",
            "lineNumber": 748
          }
        ]
      },
      "score": 0.43013569712638855
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 213
          },
          "endPosition": {
            "line": 245
          }
        },
        "contents": "    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);\n    const rowMetadataMap = (data.row_metadata || []).reduce((acc, meta, index) =&gt; {\n        acc[index] = meta || {};\n        return acc;\n    }, {});\n\n    const transformedData = data.data.map((row, rowIndex) =&gt; {\n        const rowObject = { __rowIndex: rowIndex };\n        columnOrder.forEach((columnInfo, columnIndex) =&gt; {\n            rowObject[columnInfo.field] = row[columnIndex];\n        });\n        if (rowMetadataMap[rowIndex]) {\n            rowObject.__rowMeta = rowMetadataMap[rowIndex];\n        }\n        return rowObject;\n    });\n\n    // Check if all group titles are empty - if so, flatten structure (no groups)\n    const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');\n    \n    // Apply CSS classes for striped column groups before building column definitions\n    if (useStripedGroups &amp;&amp; data.columns &amp;&amp; hasGroupTitles) {\n        ColorUtils.assignGroupStripeCss(data.columns);\n        ColorUtils.injectStripeCss(data.columns.length, {\n            headerAlpha: isCompactLayout ? 0.55 : 0.4,\n            cellAlpha: 0.25\n        });\n    }\n\n    // If no group titles, flatten to direct columns (no groups)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          },
          {
            "text": "    const rowMetadataMap = (data.row_metadata || []).reduce((acc, meta, index) =&gt; {",
            "lineNumber": 217
          },
          {
            "text": "        acc[index] = meta || {};",
            "lineNumber": 218
          },
          {
            "text": "        return acc;",
            "lineNumber": 219
          },
          {
            "text": "    }, {});",
            "lineNumber": 220
          },
          {
            "lineNumber": 221
          },
          {
            "text": "    const transformedData = data.data.map((row, rowIndex) =&gt; {",
            "lineNumber": 222
          },
          {
            "text": "        const rowObject = { __rowIndex: rowIndex };",
            "lineNumber": 223
          },
          {
            "text": "        columnOrder.forEach((columnInfo, columnIndex) =&gt; {",
            "lineNumber": 224
          },
          {
            "text": "            rowObject[columnInfo.field] = row[columnIndex];",
            "lineNumber": 225
          },
          {
            "text": "        });",
            "lineNumber": 226
          },
          {
            "text": "        if (rowMetadataMap[rowIndex]) {",
            "lineNumber": 227
          },
          {
            "text": "            rowObject.__rowMeta = rowMetadataMap[rowIndex];",
            "lineNumber": 228
          },
          {
            "text": "        }",
            "lineNumber": 229
          },
          {
            "text": "        return rowObject;",
            "lineNumber": 230
          },
          {
            "text": "    });",
            "lineNumber": 231
          },
          {
            "lineNumber": 232
          },
          {
            "text": "    // Check if all group titles are empty - if so, flatten structure (no groups)",
            "lineNumber": 233
          },
          {
            "text": "    const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');",
            "lineNumber": 234
          },
          {
            "text": "    ",
            "lineNumber": 235
          },
          {
            "text": "    // Apply CSS classes for striped column groups before building column definitions",
            "lineNumber": 236
          },
          {
            "text": "    if (useStripedGroups &amp;&amp; data.columns &amp;&amp; hasGroupTitles) {",
            "lineNumber": 237
          },
          {
            "text": "        ColorUtils.assignGroupStripeCss(data.columns);",
            "lineNumber": 238
          },
          {
            "text": "        ColorUtils.injectStripeCss(data.columns.length, {",
            "lineNumber": 239
          },
          {
            "text": "            headerAlpha: isCompactLayout ? 0.55 : 0.4,",
            "lineNumber": 240
          },
          {
            "text": "            cellAlpha: 0.25",
            "lineNumber": 241
          },
          {
            "text": "        });",
            "lineNumber": 242
          },
          {
            "text": "    }",
            "lineNumber": 243
          },
          {
            "lineNumber": 244
          },
          {
            "text": "    // If no group titles, flatten to direct columns (no groups)",
            "lineNumber": 245
          }
        ]
      },
      "score": 0.42832624912261963
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1968
          },
          "endPosition": {
            "line": 2038
          }
        },
        "contents": "/* Dark mode styles are now applied via ColorUtils.applyDarkMode() */\n/* This selector is kept for compatibility but colors come from CSS variables */\nbody.dark-mode,\nbody[data-theme=\"dark\"],\n:root[data-theme=\"dark\"] {\n    /* Colors are set via CSS variables by ColorUtils */\n}\n\n.custom-tabulator {\n    border: none;\n    background: transparent;\n    font-family: \"Inter\", \"Segoe UI\", system-ui, -apple-system, sans-serif;\n    color: var(--table-body-text);\n}\n\n.custom-tabulator .tabulator-tableHolder {\n    border-radius: 16px;\n    background: var(--table-surface);\n    box-shadow: var(--table-shadow);\n    border: 1px solid var(--table-border-soft);\n    overflow: hidden;\n}\n\n.custom-tabulator .tabulator-header {\n    background: linear-gradient(120deg, var(--table-header-bg), transparent);\n    color: var(--table-header-text);\n    border: none;\n    border-bottom: none !important; /* Remove full-width separator */\n    padding: 4px 0;\n}\n\n/* Semantic UI theme customizations - black borders for column groups and columns */\n.custom-tabulator .tabulator-header .tabulator-col-group,\n.custom-tabulator .tabulator-header .tabulator-col {\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n.custom-tabulator .tabulator-col {\n    border: none;\n    background: transparent;\n}\n\n.custom-tabulator .tabulator-col .tabulator-col-content {\n    padding: 0.85rem 0.75rem;\n    font-weight: 600;\n    letter-spacing: 0.02em;\n}\n\n.custom-tabulator .tabulator-row {\n    background: var(--table-surface);\n    border: none;\n    color: var(--table-body-text);\n    transition: background 160ms ease;\n    position: relative;\n    overflow: hidden;\n}\n\n.custom-tabulator .tabulator-row:nth-child(even) {\n    background: var(--table-surface-alt);\n}\n\n.custom-tabulator .tabulator-row .tabulator-cell {\n    border: none;\n    padding: 0.85rem 0.75rem;\n    font-size: 0.95rem;\n}\n\n.custom-tabulator .tabulator-row:hover {\n    background: var(--table-hover-bg);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/* Dark mode styles are now applied via ColorUtils.applyDarkMode() */",
            "lineNumber": 1969
          },
          {
            "text": "/* This selector is kept for compatibility but colors come from CSS variables */",
            "lineNumber": 1970
          },
          {
            "text": "body.dark-mode,",
            "lineNumber": 1971
          },
          {
            "text": "body[data-theme=\"dark\"],",
            "lineNumber": 1972
          },
          {
            "text": ":root[data-theme=\"dark\"] {",
            "lineNumber": 1973
          },
          {
            "text": "    /* Colors are set via CSS variables by ColorUtils */",
            "lineNumber": 1974
          },
          {
            "text": "}",
            "lineNumber": 1975
          },
          {
            "lineNumber": 1976
          },
          {
            "text": ".custom-tabulator {",
            "lineNumber": 1977
          },
          {
            "text": "    border: none;",
            "lineNumber": 1978
          },
          {
            "text": "    background: transparent;",
            "lineNumber": 1979
          },
          {
            "text": "    font-family: \"Inter\", \"Segoe UI\", system-ui, -apple-system, sans-serif;",
            "lineNumber": 1980
          },
          {
            "text": "    color: var(--table-body-text);",
            "lineNumber": 1981
          },
          {
            "text": "}",
            "lineNumber": 1982
          },
          {
            "lineNumber": 1983
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder {",
            "lineNumber": 1984
          },
          {
            "text": "    border-radius: 16px;",
            "lineNumber": 1985
          },
          {
            "text": "    background: var(--table-surface);",
            "lineNumber": 1986
          },
          {
            "text": "    box-shadow: var(--table-shadow);",
            "lineNumber": 1987
          },
          {
            "text": "    border: 1px solid var(--table-border-soft);",
            "lineNumber": 1988
          },
          {
            "text": "    overflow: hidden;",
            "lineNumber": 1989
          },
          {
            "text": "}",
            "lineNumber": 1990
          },
          {
            "lineNumber": 1991
          },
          {
            "text": ".custom-tabulator .tabulator-header {",
            "lineNumber": 1992
          },
          {
            "text": "    background: linear-gradient(120deg, var(--table-header-bg), transparent);",
            "lineNumber": 1993
          },
          {
            "text": "    color: var(--table-header-text);",
            "lineNumber": 1994
          },
          {
            "text": "    border: none;",
            "lineNumber": 1995
          },
          {
            "text": "    border-bottom: none !important; /* Remove full-width separator */",
            "lineNumber": 1996
          },
          {
            "text": "    padding: 4px 0;",
            "lineNumber": 1997
          },
          {
            "text": "}",
            "lineNumber": 1998
          },
          {
            "lineNumber": 1999
          },
          {
            "text": "/* Semantic UI theme customizations - black borders for column groups and columns */",
            "lineNumber": 2000
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group,",
            "lineNumber": 2001
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col {",
            "lineNumber": 2002
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2003
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2004
          },
          {
            "text": "}",
            "lineNumber": 2005
          },
          {
            "lineNumber": 2006
          },
          {
            "text": ".custom-tabulator .tabulator-col {",
            "lineNumber": 2007
          },
          {
            "text": "    border: none;",
            "lineNumber": 2008
          },
          {
            "text": "    background: transparent;",
            "lineNumber": 2009
          },
          {
            "text": "}",
            "lineNumber": 2010
          },
          {
            "lineNumber": 2011
          },
          {
            "text": ".custom-tabulator .tabulator-col .tabulator-col-content {",
            "lineNumber": 2012
          },
          {
            "text": "    padding: 0.85rem 0.75rem;",
            "lineNumber": 2013
          },
          {
            "text": "    font-weight: 600;",
            "lineNumber": 2014
          },
          {
            "text": "    letter-spacing: 0.02em;",
            "lineNumber": 2015
          },
          {
            "text": "}",
            "lineNumber": 2016
          },
          {
            "lineNumber": 2017
          },
          {
            "text": ".custom-tabulator .tabulator-row {",
            "lineNumber": 2018
          },
          {
            "text": "    background: var(--table-surface);",
            "lineNumber": 2019
          },
          {
            "text": "    border: none;",
            "lineNumber": 2020
          },
          {
            "text": "    color: var(--table-body-text);",
            "lineNumber": 2021
          },
          {
            "text": "    transition: background 160ms ease;",
            "lineNumber": 2022
          },
          {
            "text": "    position: relative;",
            "lineNumber": 2023
          },
          {
            "text": "    overflow: hidden;",
            "lineNumber": 2024
          },
          {
            "text": "}",
            "lineNumber": 2025
          },
          {
            "lineNumber": 2026
          },
          {
            "text": ".custom-tabulator .tabulator-row:nth-child(even) {",
            "lineNumber": 2027
          },
          {
            "text": "    background: var(--table-surface-alt);",
            "lineNumber": 2028
          },
          {
            "text": "}",
            "lineNumber": 2029
          },
          {
            "lineNumber": 2030
          },
          {
            "text": ".custom-tabulator .tabulator-row .tabulator-cell {",
            "lineNumber": 2031
          },
          {
            "text": "    border: none;",
            "lineNumber": 2032
          },
          {
            "text": "    padding: 0.85rem 0.75rem;",
            "lineNumber": 2033
          },
          {
            "text": "    font-size: 0.95rem;",
            "lineNumber": 2034
          },
          {
            "text": "}",
            "lineNumber": 2035
          },
          {
            "lineNumber": 2036
          },
          {
            "text": ".custom-tabulator .tabulator-row:hover {",
            "lineNumber": 2037
          },
          {
            "text": "    background: var(--table-hover-bg);",
            "lineNumber": 2038
          }
        ]
      },
      "score": 0.4135470390319824
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2227
          },
          "endPosition": {
            "line": 2258
          }
        },
        "contents": "/* Highlighted column group - Option 1: Subtle background + bold (CURRENT) */\n/* Use high specificity to override Semantic UI theme */\n/* CSS variables are set from JavaScript HIGHLIGHT_STYLES constants */\n.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted,\n.custom-tabulator.tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted,\n.tabulator.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted,\n#testTableHighlight .tabulator-header .tabulator-col-group.tab-group-highlighted {\n    background-color: var(--highlight-header-bg, rgba(0, 0, 0, 0.05)) !important;\n}\n\n/* Group title - only font-weight, background comes from parent */\n.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-title,\n.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-content .tabulator-col-title,\n.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tab-group-title,\n.tabulator.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-title,\n#testTableHighlight .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-title {\n    font-weight: var(--highlight-header-weight, 900) !important;\n    color: inherit !important;\n}\n\n.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted,\n.custom-tabulator.tabulator .tabulator-header .tabulator-col.tab-col-highlighted,\n.tabulator.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted {\n    background-color: inherit !important;\n}\n\n/* Column title - only font-weight */\n.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-title,\n.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-content .tabulator-col-title,\n.tabulator.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-title {\n    font-weight: var(--highlight-header-weight, 900) !important;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/* Highlighted column group - Option 1: Subtle background + bold (CURRENT) */",
            "lineNumber": 2228
          },
          {
            "text": "/* Use high specificity to override Semantic UI theme */",
            "lineNumber": 2229
          },
          {
            "text": "/* CSS variables are set from JavaScript HIGHLIGHT_STYLES constants */",
            "lineNumber": 2230
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted,",
            "lineNumber": 2231
          },
          {
            "text": ".custom-tabulator.tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted,",
            "lineNumber": 2232
          },
          {
            "text": ".tabulator.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted,",
            "lineNumber": 2233
          },
          {
            "text": "#testTableHighlight .tabulator-header .tabulator-col-group.tab-group-highlighted {",
            "lineNumber": 2234
          },
          {
            "text": "    background-color: var(--highlight-header-bg, rgba(0, 0, 0, 0.05)) !important;",
            "lineNumber": 2235
          },
          {
            "text": "}",
            "lineNumber": 2236
          },
          {
            "lineNumber": 2237
          },
          {
            "text": "/* Group title - only font-weight, background comes from parent */",
            "lineNumber": 2238
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-title,",
            "lineNumber": 2239
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-content .tabulator-col-title,",
            "lineNumber": 2240
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tab-group-title,",
            "lineNumber": 2241
          },
          {
            "text": ".tabulator.custom-tabulator .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-title,",
            "lineNumber": 2242
          },
          {
            "text": "#testTableHighlight .tabulator-header .tabulator-col-group.tab-group-highlighted .tabulator-col-title {",
            "lineNumber": 2243
          },
          {
            "text": "    font-weight: var(--highlight-header-weight, 900) !important;",
            "lineNumber": 2244
          },
          {
            "text": "    color: inherit !important;",
            "lineNumber": 2245
          },
          {
            "text": "}",
            "lineNumber": 2246
          },
          {
            "lineNumber": 2247
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted,",
            "lineNumber": 2248
          },
          {
            "text": ".custom-tabulator.tabulator .tabulator-header .tabulator-col.tab-col-highlighted,",
            "lineNumber": 2249
          },
          {
            "text": ".tabulator.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted {",
            "lineNumber": 2250
          },
          {
            "text": "    background-color: inherit !important;",
            "lineNumber": 2251
          },
          {
            "text": "}",
            "lineNumber": 2252
          },
          {
            "lineNumber": 2253
          },
          {
            "text": "/* Column title - only font-weight */",
            "lineNumber": 2254
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-title,",
            "lineNumber": 2255
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-content .tabulator-col-title,",
            "lineNumber": 2256
          },
          {
            "text": ".tabulator.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-title {",
            "lineNumber": 2257
          },
          {
            "text": "    font-weight: var(--highlight-header-weight, 900) !important;",
            "lineNumber": 2258
          }
        ]
      },
      "score": 0.41328009963035583
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 54,
            "column": 8
          }
        },
        "contents": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;\n&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\nfunction createTable(config) {\n    const {\n        data,\n        columns,\n        headerGroups = [],  // This contains the actual colspan values\n        rowNumbering = true,\n        positionChange = false\n    } = config;\n\n    let currentData = [...data];\n\n    const colors = ColorUtils.getGradientColors(\n        headerGroups.length, \n        ColorUtils.getThemeColor('surface') || '#ffffff', \n        ColorUtils.getThemeColor('accent') || '#7ec2f8'\n    );\n\n    // Create mappings for column colors and last group columns\n    const columnColors = {};\n    const lastGroupColumns = {};\n    let currentColumn = 0;\n    headerGroups.forEach((group, groupIndex) =&gt; {\n        const isLastGroup = groupIndex === headerGroups.length - 1;\n        const colspan = group.colspan || 1;  // Get actual colspan from the group\n        for (let i = 0; i &lt; colspan; i++) {\n            columnColors[currentColumn] = colors[groupIndex];\n            lastGroupColumns[currentColumn] = isLastGroup;\n            currentColumn++;\n        }\n    });\n\n    const createHeaderGroups = () =&gt; {\n        if (!headerGroups || headerGroups.length === 0) return '';\n        \n        return &#96;\n            &lt;tr&gt;\n                ${headerGroups.map((group, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        colspan=\"${group.colspan || 1}\" \n                        style=\"background-color: ${colors[index]}; \n                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;\n                        ${group.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;",
            "lineNumber": 1
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 2
          },
          {
            "text": "&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 5
          },
          {
            "text": "function createTable(config) {",
            "lineNumber": 6
          },
          {
            "text": "    const {",
            "lineNumber": 7
          },
          {
            "text": "        data,",
            "lineNumber": 8
          },
          {
            "text": "        columns,",
            "lineNumber": 9
          },
          {
            "text": "        headerGroups = [],  // This contains the actual colspan values",
            "lineNumber": 10
          },
          {
            "text": "        rowNumbering = true,",
            "lineNumber": 11
          },
          {
            "text": "        positionChange = false",
            "lineNumber": 12
          },
          {
            "text": "    } = config;",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "    let currentData = [...data];",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "    const colors = ColorUtils.getGradientColors(",
            "lineNumber": 17
          },
          {
            "text": "        headerGroups.length, ",
            "lineNumber": 18
          },
          {
            "text": "        ColorUtils.getThemeColor('surface') || '#ffffff', ",
            "lineNumber": 19
          },
          {
            "text": "        ColorUtils.getThemeColor('accent') || '#7ec2f8'",
            "lineNumber": 20
          },
          {
            "text": "    );",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "    // Create mappings for column colors and last group columns",
            "lineNumber": 23
          },
          {
            "text": "    const columnColors = {};",
            "lineNumber": 24
          },
          {
            "text": "    const lastGroupColumns = {};",
            "lineNumber": 25
          },
          {
            "text": "    let currentColumn = 0;",
            "lineNumber": 26
          },
          {
            "text": "    headerGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 27
          },
          {
            "text": "        const isLastGroup = groupIndex === headerGroups.length - 1;",
            "lineNumber": 28
          },
          {
            "text": "        const colspan = group.colspan || 1;  // Get actual colspan from the group",
            "lineNumber": 29
          },
          {
            "text": "        for (let i = 0; i &lt; colspan; i++) {",
            "lineNumber": 30
          },
          {
            "text": "            columnColors[currentColumn] = colors[groupIndex];",
            "lineNumber": 31
          },
          {
            "text": "            lastGroupColumns[currentColumn] = isLastGroup;",
            "lineNumber": 32
          },
          {
            "text": "            currentColumn++;",
            "lineNumber": 33
          },
          {
            "text": "        }",
            "lineNumber": 34
          },
          {
            "text": "    });",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "    const createHeaderGroups = () =&gt; {",
            "lineNumber": 37
          },
          {
            "text": "        if (!headerGroups || headerGroups.length === 0) return '';",
            "lineNumber": 38
          },
          {
            "text": "        ",
            "lineNumber": 39
          },
          {
            "text": "        return &#96;",
            "lineNumber": 40
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 41
          },
          {
            "text": "                ${headerGroups.map((group, index) =&gt; &#96;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 43
          },
          {
            "text": "                        colspan=\"${group.colspan || 1}\" ",
            "lineNumber": 44
          },
          {
            "text": "                        style=\"background-color: ${colors[index]}; ",
            "lineNumber": 45
          },
          {
            "text": "                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                        ${group.title || ''}",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        ",
            "lineNumber": 55
          }
        ]
      },
      "score": 0.40192630887031555
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2097
          },
          "endPosition": {
            "line": 2162
          }
        },
        "contents": ".tab-position-circle {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    font-weight: 600;\n    margin: 0 auto;\n    font-size: 0.85rem;\n}\n\n/* Hover Effects */\n.custom-tabulator .tabulator-row:hover {\n    background-color: rgba(38, 70, 83, 0.1); /* Light hover effect */\n}\n\n/* Frozen Column Styles */\n.custom-tabulator .tabulator-frozen {\n    background-color: var(--theme-surface, #ffffff); /* Background for frozen columns */\n    z-index: 10; /* Ensure frozen columns are above others */\n}\n\n/* Scrollbar Styles */\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar {\n    width: 8px; /* Width of the scrollbar */\n}\n\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-track {\n    background: #f1f1f1; /* Track color */\n}\n\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb {\n    background: var(--theme-border, #264653); /* Thumb color */\n    border-radius: 4px; /* Rounded corners */\n}\n\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb:hover {\n    background: rgba(38, 70, 83, 0.8); /* Darker thumb on hover */\n}\n\n/* Column group styling */\n.custom-tabulator .tabulator-col-group {\n    background-color: var(--table-header-bg) !important;\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n.custom-tabulator .tabulator-col-group[data-group-index=\"0\"],\n.custom-tabulator .tabulator-col-group[data-group-index=\"1\"],\n.custom-tabulator .tabulator-col-group[data-group-index=\"2\"] {\n    background-color: var(--table-header-bg) !important;\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n/* Column group titles */\n.custom-tabulator .tabulator-col-group .tabulator-col-group-title {\n    color: var(--table-header-text) !important;\n}\n\n\n.border-right {\n    border-right: 1px solid var(--theme-border, #264653); /* Bootstrap's default border color */",
        "signatures": {},
        "detailedLines": [
          {
            "text": ".tab-position-circle {",
            "lineNumber": 2098
          },
          {
            "text": "    width: 24px;",
            "lineNumber": 2099
          },
          {
            "text": "    height: 24px;",
            "lineNumber": 2100
          },
          {
            "text": "    border-radius: 50%;",
            "lineNumber": 2101
          },
          {
            "text": "    display: flex;",
            "lineNumber": 2102
          },
          {
            "text": "    align-items: center;",
            "lineNumber": 2103
          },
          {
            "text": "    justify-content: center;",
            "lineNumber": 2104
          },
          {
            "text": "    color: #fff;",
            "lineNumber": 2105
          },
          {
            "text": "    font-weight: 600;",
            "lineNumber": 2106
          },
          {
            "text": "    margin: 0 auto;",
            "lineNumber": 2107
          },
          {
            "text": "    font-size: 0.85rem;",
            "lineNumber": 2108
          },
          {
            "text": "}",
            "lineNumber": 2109
          },
          {
            "lineNumber": 2110
          },
          {
            "text": "/* Hover Effects */",
            "lineNumber": 2111
          },
          {
            "text": ".custom-tabulator .tabulator-row:hover {",
            "lineNumber": 2112
          },
          {
            "text": "    background-color: rgba(38, 70, 83, 0.1); /* Light hover effect */",
            "lineNumber": 2113
          },
          {
            "text": "}",
            "lineNumber": 2114
          },
          {
            "lineNumber": 2115
          },
          {
            "text": "/* Frozen Column Styles */",
            "lineNumber": 2116
          },
          {
            "text": ".custom-tabulator .tabulator-frozen {",
            "lineNumber": 2117
          },
          {
            "text": "    background-color: var(--theme-surface, #ffffff); /* Background for frozen columns */",
            "lineNumber": 2118
          },
          {
            "text": "    z-index: 10; /* Ensure frozen columns are above others */",
            "lineNumber": 2119
          },
          {
            "text": "}",
            "lineNumber": 2120
          },
          {
            "lineNumber": 2121
          },
          {
            "text": "/* Scrollbar Styles */",
            "lineNumber": 2122
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar {",
            "lineNumber": 2123
          },
          {
            "text": "    width: 8px; /* Width of the scrollbar */",
            "lineNumber": 2124
          },
          {
            "text": "}",
            "lineNumber": 2125
          },
          {
            "lineNumber": 2126
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-track {",
            "lineNumber": 2127
          },
          {
            "text": "    background: #f1f1f1; /* Track color */",
            "lineNumber": 2128
          },
          {
            "text": "}",
            "lineNumber": 2129
          },
          {
            "lineNumber": 2130
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb {",
            "lineNumber": 2131
          },
          {
            "text": "    background: var(--theme-border, #264653); /* Thumb color */",
            "lineNumber": 2132
          },
          {
            "text": "    border-radius: 4px; /* Rounded corners */",
            "lineNumber": 2133
          },
          {
            "text": "}",
            "lineNumber": 2134
          },
          {
            "lineNumber": 2135
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb:hover {",
            "lineNumber": 2136
          },
          {
            "text": "    background: rgba(38, 70, 83, 0.8); /* Darker thumb on hover */",
            "lineNumber": 2137
          },
          {
            "text": "}",
            "lineNumber": 2138
          },
          {
            "lineNumber": 2139
          },
          {
            "text": "/* Column group styling */",
            "lineNumber": 2140
          },
          {
            "text": ".custom-tabulator .tabulator-col-group {",
            "lineNumber": 2141
          },
          {
            "text": "    background-color: var(--table-header-bg) !important;",
            "lineNumber": 2142
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2143
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2144
          },
          {
            "text": "}",
            "lineNumber": 2145
          },
          {
            "lineNumber": 2146
          },
          {
            "text": ".custom-tabulator .tabulator-col-group[data-group-index=\"0\"],",
            "lineNumber": 2147
          },
          {
            "text": ".custom-tabulator .tabulator-col-group[data-group-index=\"1\"],",
            "lineNumber": 2148
          },
          {
            "text": ".custom-tabulator .tabulator-col-group[data-group-index=\"2\"] {",
            "lineNumber": 2149
          },
          {
            "text": "    background-color: var(--table-header-bg) !important;",
            "lineNumber": 2150
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2151
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2152
          },
          {
            "text": "}",
            "lineNumber": 2153
          },
          {
            "lineNumber": 2154
          },
          {
            "text": "/* Column group titles */",
            "lineNumber": 2155
          },
          {
            "text": ".custom-tabulator .tabulator-col-group .tabulator-col-group-title {",
            "lineNumber": 2156
          },
          {
            "text": "    color: var(--table-header-text) !important;",
            "lineNumber": 2157
          },
          {
            "text": "}",
            "lineNumber": 2158
          },
          {
            "lineNumber": 2159
          },
          {
            "lineNumber": 2160
          },
          {
            "text": ".border-right {",
            "lineNumber": 2161
          },
          {
            "text": "    border-right: 1px solid var(--theme-border, #264653); /* Bootstrap's default border color */",
            "lineNumber": 2162
          }
        ]
      },
      "score": 0.4011200964450836
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 48
          },
          "endPosition": {
            "line": 104,
            "column": 8
          }
        },
        "contents": "                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        return &#96;\n            &lt;tr&gt;\n                ${columns.map((col, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        style=\"background-color: ${columnColors[index]};\n                               color: ${lastGroupColumns[index] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;\n                        ${col.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createTableRows = () =&gt; {\n        return currentData.map((row, rowIndex) =&gt; &#96;\n            &lt;tr&gt;\n                ${columns.map((col, colIndex) =&gt; &#96;\n                    &lt;td class=\"text-center\" \n                        style=\"background-color: ${columnColors[colIndex]};\n                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};\n                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; \n                                              columnColors[colIndex] !== columnColors[colIndex + 1]) \n                                             ? '2px solid #dee2e6' \n                                             : '1px solid #dee2e6'};\"&gt;\n                        ${row[colIndex] !== undefined ? row[colIndex] : ''}\n                    &lt;/td&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;).join('');\n    };\n\n    return &#96;\n        &lt;table class=\"table\"&gt;\n            &lt;thead&gt;\n                ${createHeaderGroups()}\n                ${createColumnHeaders()}\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                ${createTableRows()}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &#96;;\n}\n\n\nfunction flattenColumnMetadata(columnGroups = []) {\n    const flatColumns = [];\n    columnGroups.forEach((group, groupIndex) =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        return &#96;",
            "lineNumber": 55
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 56
          },
          {
            "text": "                ${columns.map((col, index) =&gt; &#96;",
            "lineNumber": 57
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 58
          },
          {
            "text": "                        style=\"background-color: ${columnColors[index]};",
            "lineNumber": 59
          },
          {
            "text": "                               color: ${lastGroupColumns[index] ? 'white' : 'black'};",
            "lineNumber": 60
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                        ${col.title || ''}",
            "lineNumber": 62
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 63
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 64
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 65
          },
          {
            "text": "        &#96;;",
            "lineNumber": 66
          },
          {
            "text": "    };",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "    const createTableRows = () =&gt; {",
            "lineNumber": 69
          },
          {
            "text": "        return currentData.map((row, rowIndex) =&gt; &#96;",
            "lineNumber": 70
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 71
          },
          {
            "text": "                ${columns.map((col, colIndex) =&gt; &#96;",
            "lineNumber": 72
          },
          {
            "text": "                    &lt;td class=\"text-center\" ",
            "lineNumber": 73
          },
          {
            "text": "                        style=\"background-color: ${columnColors[colIndex]};",
            "lineNumber": 74
          },
          {
            "text": "                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};",
            "lineNumber": 75
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};",
            "lineNumber": 76
          },
          {
            "text": "                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; ",
            "lineNumber": 77
          },
          {
            "text": "                                              columnColors[colIndex] !== columnColors[colIndex + 1]) ",
            "lineNumber": 78
          },
          {
            "text": "                                             ? '2px solid #dee2e6' ",
            "lineNumber": 79
          },
          {
            "text": "                                             : '1px solid #dee2e6'};\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "                        ${row[colIndex] !== undefined ? row[colIndex] : ''}",
            "lineNumber": 81
          },
          {
            "text": "                    &lt;/td&gt;",
            "lineNumber": 82
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 83
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 84
          },
          {
            "text": "        &#96;).join('');",
            "lineNumber": 85
          },
          {
            "text": "    };",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "    return &#96;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;table class=\"table\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;thead&gt;",
            "lineNumber": 90
          },
          {
            "text": "                ${createHeaderGroups()}",
            "lineNumber": 91
          },
          {
            "text": "                ${createColumnHeaders()}",
            "lineNumber": 92
          },
          {
            "text": "            &lt;/thead&gt;",
            "lineNumber": 93
          },
          {
            "text": "            &lt;tbody&gt;",
            "lineNumber": 94
          },
          {
            "text": "                ${createTableRows()}",
            "lineNumber": 95
          },
          {
            "text": "            &lt;/tbody&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;/table&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &#96;;",
            "lineNumber": 98
          },
          {
            "text": "}",
            "lineNumber": 99
          },
          {
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "function flattenColumnMetadata(columnGroups = []) {",
            "lineNumber": 102
          },
          {
            "text": "    const flatColumns = [];",
            "lineNumber": 103
          },
          {
            "text": "    columnGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 104
          },
          {
            "text": "        ",
            "lineNumber": 105
          }
        ]
      },
      "score": 0.39609411358833313
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\models\\table_data.py",
        "range": {
          "startPosition": {
            "line": 15,
            "column": 67
          },
          "endPosition": {
            "line": 83
          }
        },
        "contents": "@dataclass\nclass ColumnGroup:\n    \"\"\"Column group with a common header.\"\"\"\n    title: str\n    columns: List[Column]\n    frozen: Optional[str] = None  # 'left', 'right', or None\n    style: Optional[Dict[str, str]] = None  # Custom CSS styles for the group\n    header_style: Optional[Dict[str, str]] = None  # Custom CSS for header\n    width: Optional[str] = None  # Width for the entire group\n    highlighted: bool = False  # Whether this group should be visually highlighted\n\n@dataclass\nclass TableData:\n    \"\"\"Complete table data structure.\"\"\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "@dataclass",
            "lineNumber": 18
          },
          {
            "text": "class ColumnGroup:",
            "lineNumber": 19,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Column group with a common header.\"\"\"",
            "lineNumber": 20
          },
          {
            "text": "    title: str",
            "lineNumber": 21
          },
          {
            "text": "    columns: List[Column]",
            "lineNumber": 22
          },
          {
            "text": "    frozen: Optional[str] = None  # 'left', 'right', or None",
            "lineNumber": 23
          },
          {
            "text": "    style: Optional[Dict[str, str]] = None  # Custom CSS styles for the group",
            "lineNumber": 24
          },
          {
            "text": "    header_style: Optional[Dict[str, str]] = None  # Custom CSS for header",
            "lineNumber": 25
          },
          {
            "text": "    width: Optional[str] = None  # Width for the entire group",
            "lineNumber": 26
          },
          {
            "text": "    highlighted: bool = False  # Whether this group should be visually highlighted",
            "lineNumber": 27,
            "isSignature": true
          },
          {
            "lineNumber": 28
          },
          {
            "text": "@dataclass",
            "lineNumber": 29
          },
          {
            "text": "class TableData:",
            "lineNumber": 30,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Complete table data structure.\"\"\"",
            "lineNumber": 31
          }
        ]
      },
      "score": 0.3952065110206604
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 780
          },
          "endPosition": {
            "line": 808
          }
        },
        "contents": "                        if (highlightedFields.size &gt; 0) {\n                            // Strategy 1: Find groups by data-highlighted attribute in title\n                            header.querySelectorAll('.tabulator-col-group').forEach((colGroup, groupIndex) =&gt; {\n                                const groupTitle = colGroup.querySelector('.tab-group-title[data-highlighted=\"true\"]');\n                                if (groupTitle || highlightedGroupTitles.has(colGroup.getAttribute('aria-title') || '')) {\n                                    colGroup.classList.add('tab-group-highlighted');\n                                    \n                                    // Style all columns within this group\n                                    const cols = colGroup.querySelectorAll('.tabulator-col');\n                                    cols.forEach(col =&gt; {\n                                        col.classList.add('tab-col-highlighted');\n                                        const colTitle = col.querySelector('.tabulator-col-title');\n                                        if (colTitle) {\n                                            colTitle.style.setProperty('font-weight', HIGHLIGHT_STYLES.headerFontWeight, 'important');\n                                        }\n                                    });\n                                    \n                                    // Style group title - only font-weight, no background\n                                    const titleElement = colGroup.querySelector('.tabulator-col-title, .tab-group-title');\n                                    if (titleElement) {\n                                        titleElement.style.setProperty('font-weight', HIGHLIGHT_STYLES.headerFontWeight, 'important');\n                                    }\n                                }\n                            });\n                            \n                            // Strategy 2: Find columns by field attribute\n                            header.querySelectorAll('.tabulator-col[tabulator-field]').forEach(col =&gt; {\n                                const field = col.getAttribute('tabulator-field');",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        if (highlightedFields.size &gt; 0) {",
            "lineNumber": 781
          },
          {
            "text": "                            // Strategy 1: Find groups by data-highlighted attribute in title",
            "lineNumber": 782
          },
          {
            "text": "                            header.querySelectorAll('.tabulator-col-group').forEach((colGroup, groupIndex) =&gt; {",
            "lineNumber": 783
          },
          {
            "text": "                                const groupTitle = colGroup.querySelector('.tab-group-title[data-highlighted=\"true\"]');",
            "lineNumber": 784
          },
          {
            "text": "                                if (groupTitle || highlightedGroupTitles.has(colGroup.getAttribute('aria-title') || '')) {",
            "lineNumber": 785
          },
          {
            "text": "                                    colGroup.classList.add('tab-group-highlighted');",
            "lineNumber": 786
          },
          {
            "text": "                                    ",
            "lineNumber": 787
          },
          {
            "text": "                                    // Style all columns within this group",
            "lineNumber": 788
          },
          {
            "text": "                                    const cols = colGroup.querySelectorAll('.tabulator-col');",
            "lineNumber": 789
          },
          {
            "text": "                                    cols.forEach(col =&gt; {",
            "lineNumber": 790
          },
          {
            "text": "                                        col.classList.add('tab-col-highlighted');",
            "lineNumber": 791
          },
          {
            "text": "                                        const colTitle = col.querySelector('.tabulator-col-title');",
            "lineNumber": 792
          },
          {
            "text": "                                        if (colTitle) {",
            "lineNumber": 793
          },
          {
            "text": "                                            colTitle.style.setProperty('font-weight', HIGHLIGHT_STYLES.headerFontWeight, 'important');",
            "lineNumber": 794
          },
          {
            "text": "                                        }",
            "lineNumber": 795
          },
          {
            "text": "                                    });",
            "lineNumber": 796
          },
          {
            "text": "                                    ",
            "lineNumber": 797
          },
          {
            "text": "                                    // Style group title - only font-weight, no background",
            "lineNumber": 798
          },
          {
            "text": "                                    const titleElement = colGroup.querySelector('.tabulator-col-title, .tab-group-title');",
            "lineNumber": 799
          },
          {
            "text": "                                    if (titleElement) {",
            "lineNumber": 800
          },
          {
            "text": "                                        titleElement.style.setProperty('font-weight', HIGHLIGHT_STYLES.headerFontWeight, 'important');",
            "lineNumber": 801
          },
          {
            "text": "                                    }",
            "lineNumber": 802
          },
          {
            "text": "                                }",
            "lineNumber": 803
          },
          {
            "text": "                            });",
            "lineNumber": 804
          },
          {
            "text": "                            ",
            "lineNumber": 805
          },
          {
            "text": "                            // Strategy 2: Find columns by field attribute",
            "lineNumber": 806
          },
          {
            "text": "                            header.querySelectorAll('.tabulator-col[tabulator-field]').forEach(col =&gt; {",
            "lineNumber": 807
          },
          {
            "text": "                                const field = col.getAttribute('tabulator-field');",
            "lineNumber": 808
          }
        ]
      },
      "score": 0.38630959391593933
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 745
          },
          "endPosition": {
            "line": 768
          }
        },
        "contents": "                    if (useStripedGroups) {\n                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {\n                            el.classList.add('col-group-' + idx);\n                        });\n                    }\n                    \n                    // Build map of highlighted fields and groups\n                    const highlightedFields = new Set();\n                    const highlightedGroupTitles = new Set();\n                    data.columns.forEach((group, groupIndex) =&gt; {\n                        if (group.highlighted === true &amp;&amp; group.columns) {\n                            highlightedGroupTitles.add(group.title || '');\n                            group.columns.forEach(col =&gt; {\n                                if (col.field) {\n                                    highlightedFields.add(col.field);\n                                }\n                            });\n                        }\n                    });\n                    \n                    const header = tableElement.querySelector('.tabulator-header');\n                    if (header) {\n                        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 746
          },
          {
            "text": "                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {",
            "lineNumber": 747
          },
          {
            "text": "                            el.classList.add('col-group-' + idx);",
            "lineNumber": 748
          },
          {
            "text": "                        });",
            "lineNumber": 749
          },
          {
            "text": "                    }",
            "lineNumber": 750
          },
          {
            "text": "                    ",
            "lineNumber": 751
          },
          {
            "text": "                    // Build map of highlighted fields and groups",
            "lineNumber": 752
          },
          {
            "text": "                    const highlightedFields = new Set();",
            "lineNumber": 753
          },
          {
            "text": "                    const highlightedGroupTitles = new Set();",
            "lineNumber": 754
          },
          {
            "text": "                    data.columns.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 755
          },
          {
            "text": "                        if (group.highlighted === true &amp;&amp; group.columns) {",
            "lineNumber": 756
          },
          {
            "text": "                            highlightedGroupTitles.add(group.title || '');",
            "lineNumber": 757
          },
          {
            "text": "                            group.columns.forEach(col =&gt; {",
            "lineNumber": 758
          },
          {
            "text": "                                if (col.field) {",
            "lineNumber": 759
          },
          {
            "text": "                                    highlightedFields.add(col.field);",
            "lineNumber": 760
          },
          {
            "text": "                                }",
            "lineNumber": 761
          },
          {
            "text": "                            });",
            "lineNumber": 762
          },
          {
            "text": "                        }",
            "lineNumber": 763
          },
          {
            "text": "                    });",
            "lineNumber": 764
          },
          {
            "text": "                    ",
            "lineNumber": 765
          },
          {
            "text": "                    const header = tableElement.querySelector('.tabulator-header');",
            "lineNumber": 766
          },
          {
            "text": "                    if (header) {",
            "lineNumber": 767
          },
          {
            "text": "                        ",
            "lineNumber": 768
          }
        ]
      },
      "score": 0.3728750944137573
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2256
          },
          "endPosition": {
            "line": 2299
          }
        },
        "contents": ".tabulator.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-title {\n    font-weight: var(--highlight-header-weight, 900) !important;\n    color: inherit !important;\n}\n\n.custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted,\n.custom-tabulator.tabulator .tabulator-row .tabulator-cell.tab-col-highlighted,\n.tabulator.custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted {\n    background-color: inherit !important;\n    font-weight: var(--highlight-cell-weight, 700) !important;\n    color: inherit !important;\n}\n\n.custom-tabulator .tabulator-col-group,\n.custom-tabulator .tabulator-col {\n    background-color: var(--theme-surface, #ffffff);\n}\n\n/* Alternative highlighting options (uncomment to use):\n   \n   Option 2: Left border accent\n   .custom-tabulator .tabulator-col-group.tab-group-highlighted {\n       border-left: 4px solid #000000 !important;\n   }\n   .custom-tabulator .tabulator-col.tab-col-highlighted {\n       border-left: 4px solid #000000 !important;\n   }\n   \n   Option 3: Darker background with white text\n   .custom-tabulator .tabulator-col-group.tab-group-highlighted,\n   .custom-tabulator .tabulator-col-group.tab-group-highlighted .tabulator-col-title {\n       background-color: var(--theme-table-body-text, #1f2933) !important;\n       color: var(--theme-text-on-primary, #ffffff) !important;\n       font-weight: 700 !important;\n   }\n   .custom-tabulator .tabulator-col.tab-col-highlighted,\n   .custom-tabulator .tabulator-col.tab-col-highlighted .tabulator-col-title {\n       background-color: var(--theme-table-body-text, #1f2933) !important;\n       color: var(--theme-text-on-primary, #ffffff) !important;\n       font-weight: 700 !important;\n   }\n   .custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted {\n       background-color: var(--theme-table-body-text, #1f2933) !important;",
        "signatures": {},
        "detailedLines": [
          {
            "text": ".tabulator.custom-tabulator .tabulator-header .tabulator-col.tab-col-highlighted .tabulator-col-title {",
            "lineNumber": 2257
          },
          {
            "text": "    font-weight: var(--highlight-header-weight, 900) !important;",
            "lineNumber": 2258
          },
          {
            "text": "    color: inherit !important;",
            "lineNumber": 2259
          },
          {
            "text": "}",
            "lineNumber": 2260
          },
          {
            "lineNumber": 2261
          },
          {
            "text": ".custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted,",
            "lineNumber": 2262
          },
          {
            "text": ".custom-tabulator.tabulator .tabulator-row .tabulator-cell.tab-col-highlighted,",
            "lineNumber": 2263
          },
          {
            "text": ".tabulator.custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted {",
            "lineNumber": 2264
          },
          {
            "text": "    background-color: inherit !important;",
            "lineNumber": 2265
          },
          {
            "text": "    font-weight: var(--highlight-cell-weight, 700) !important;",
            "lineNumber": 2266
          },
          {
            "text": "    color: inherit !important;",
            "lineNumber": 2267
          },
          {
            "text": "}",
            "lineNumber": 2268
          },
          {
            "lineNumber": 2269
          },
          {
            "text": ".custom-tabulator .tabulator-col-group,",
            "lineNumber": 2270
          },
          {
            "text": ".custom-tabulator .tabulator-col {",
            "lineNumber": 2271
          },
          {
            "text": "    background-color: var(--theme-surface, #ffffff);",
            "lineNumber": 2272
          },
          {
            "text": "}",
            "lineNumber": 2273
          },
          {
            "lineNumber": 2274
          },
          {
            "text": "/* Alternative highlighting options (uncomment to use):",
            "lineNumber": 2275
          },
          {
            "text": "   ",
            "lineNumber": 2276
          },
          {
            "text": "   Option 2: Left border accent",
            "lineNumber": 2277
          },
          {
            "text": "   .custom-tabulator .tabulator-col-group.tab-group-highlighted {",
            "lineNumber": 2278
          },
          {
            "text": "       border-left: 4px solid #000000 !important;",
            "lineNumber": 2279
          },
          {
            "text": "   }",
            "lineNumber": 2280
          },
          {
            "text": "   .custom-tabulator .tabulator-col.tab-col-highlighted {",
            "lineNumber": 2281
          },
          {
            "text": "       border-left: 4px solid #000000 !important;",
            "lineNumber": 2282
          },
          {
            "text": "   }",
            "lineNumber": 2283
          },
          {
            "text": "   ",
            "lineNumber": 2284
          },
          {
            "text": "   Option 3: Darker background with white text",
            "lineNumber": 2285
          },
          {
            "text": "   .custom-tabulator .tabulator-col-group.tab-group-highlighted,",
            "lineNumber": 2286
          },
          {
            "text": "   .custom-tabulator .tabulator-col-group.tab-group-highlighted .tabulator-col-title {",
            "lineNumber": 2287
          },
          {
            "text": "       background-color: var(--theme-table-body-text, #1f2933) !important;",
            "lineNumber": 2288
          },
          {
            "text": "       color: var(--theme-text-on-primary, #ffffff) !important;",
            "lineNumber": 2289
          },
          {
            "text": "       font-weight: 700 !important;",
            "lineNumber": 2290
          },
          {
            "text": "   }",
            "lineNumber": 2291
          },
          {
            "text": "   .custom-tabulator .tabulator-col.tab-col-highlighted,",
            "lineNumber": 2292
          },
          {
            "text": "   .custom-tabulator .tabulator-col.tab-col-highlighted .tabulator-col-title {",
            "lineNumber": 2293
          },
          {
            "text": "       background-color: var(--theme-table-body-text, #1f2933) !important;",
            "lineNumber": 2294
          },
          {
            "text": "       color: var(--theme-text-on-primary, #ffffff) !important;",
            "lineNumber": 2295
          },
          {
            "text": "       font-weight: 700 !important;",
            "lineNumber": 2296
          },
          {
            "text": "   }",
            "lineNumber": 2297
          },
          {
            "text": "   .custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted {",
            "lineNumber": 2298
          },
          {
            "text": "       background-color: var(--theme-table-body-text, #1f2933) !important;",
            "lineNumber": 2299
          }
        ]
      },
      "score": 0.36422765254974365
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 882
          },
          "endPosition": {
            "line": 923
          }
        },
        "contents": "            }\n            \n            const highlightedFields = new Set();\n            data.columns.forEach((group) =&gt; {\n                if (group.highlighted === true &amp;&amp; group.columns) {\n                    group.columns.forEach(col =&gt; {\n                        if (col.field) {\n                            highlightedFields.add(col.field);\n                        }\n                    });\n                }\n            });\n            \n            if (highlightedFields.size &gt; 0) {\n                const table = tableElement.querySelector('.tabulator-table');\n                if (table) {\n                    const rows = table.querySelectorAll('.tabulator-row');\n                    rows.forEach(row =&gt; {\n                        const cells = row.querySelectorAll('.tabulator-cell');\n                        cells.forEach(cell =&gt; {\n                            const field = cell.getAttribute('tabulator-field');\n                                if (field &amp;&amp; highlightedFields.has(field)) {\n                                    cell.classList.add('tab-col-highlighted');\n                                    cell.style.setProperty('background-color', HIGHLIGHT_STYLES.cellBackgroundColor, 'important');\n                                    cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                                    cell.style.setProperty('color', 'inherit', 'important');\n                                }\n                        });\n                    });\n                }\n            }\n        },\n        rowFormatter: function(row) {\n            if (!settings.enableSpecialRowStyling) {\n                const element = row.getElement();\n                element.classList.remove('tab-row-accent');\n                element.style.removeProperty('--row-accent-color');\n                element.style.removeProperty('--row-accent-overlay');\n            }\n\n            const rowData = row.getData();",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            }",
            "lineNumber": 883
          },
          {
            "text": "            ",
            "lineNumber": 884
          },
          {
            "text": "            const highlightedFields = new Set();",
            "lineNumber": 885
          },
          {
            "text": "            data.columns.forEach((group) =&gt; {",
            "lineNumber": 886
          },
          {
            "text": "                if (group.highlighted === true &amp;&amp; group.columns) {",
            "lineNumber": 887
          },
          {
            "text": "                    group.columns.forEach(col =&gt; {",
            "lineNumber": 888
          },
          {
            "text": "                        if (col.field) {",
            "lineNumber": 889
          },
          {
            "text": "                            highlightedFields.add(col.field);",
            "lineNumber": 890
          },
          {
            "text": "                        }",
            "lineNumber": 891
          },
          {
            "text": "                    });",
            "lineNumber": 892
          },
          {
            "text": "                }",
            "lineNumber": 893
          },
          {
            "text": "            });",
            "lineNumber": 894
          },
          {
            "text": "            ",
            "lineNumber": 895
          },
          {
            "text": "            if (highlightedFields.size &gt; 0) {",
            "lineNumber": 896
          },
          {
            "text": "                const table = tableElement.querySelector('.tabulator-table');",
            "lineNumber": 897
          },
          {
            "text": "                if (table) {",
            "lineNumber": 898
          },
          {
            "text": "                    const rows = table.querySelectorAll('.tabulator-row');",
            "lineNumber": 899
          },
          {
            "text": "                    rows.forEach(row =&gt; {",
            "lineNumber": 900
          },
          {
            "text": "                        const cells = row.querySelectorAll('.tabulator-cell');",
            "lineNumber": 901
          },
          {
            "text": "                        cells.forEach(cell =&gt; {",
            "lineNumber": 902
          },
          {
            "text": "                            const field = cell.getAttribute('tabulator-field');",
            "lineNumber": 903
          },
          {
            "text": "                                if (field &amp;&amp; highlightedFields.has(field)) {",
            "lineNumber": 904
          },
          {
            "text": "                                    cell.classList.add('tab-col-highlighted');",
            "lineNumber": 905
          },
          {
            "text": "                                    cell.style.setProperty('background-color', HIGHLIGHT_STYLES.cellBackgroundColor, 'important');",
            "lineNumber": 906
          },
          {
            "text": "                                    cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 907
          },
          {
            "text": "                                    cell.style.setProperty('color', 'inherit', 'important');",
            "lineNumber": 908
          },
          {
            "text": "                                }",
            "lineNumber": 909
          },
          {
            "text": "                        });",
            "lineNumber": 910
          },
          {
            "text": "                    });",
            "lineNumber": 911
          },
          {
            "text": "                }",
            "lineNumber": 912
          },
          {
            "text": "            }",
            "lineNumber": 913
          },
          {
            "text": "        },",
            "lineNumber": 914
          },
          {
            "text": "        rowFormatter: function(row) {",
            "lineNumber": 915
          },
          {
            "text": "            if (!settings.enableSpecialRowStyling) {",
            "lineNumber": 916
          },
          {
            "text": "                const element = row.getElement();",
            "lineNumber": 917
          },
          {
            "text": "                element.classList.remove('tab-row-accent');",
            "lineNumber": 918
          },
          {
            "text": "                element.style.removeProperty('--row-accent-color');",
            "lineNumber": 919
          },
          {
            "text": "                element.style.removeProperty('--row-accent-overlay');",
            "lineNumber": 920
          },
          {
            "text": "            }",
            "lineNumber": 921
          },
          {
            "lineNumber": 922
          },
          {
            "text": "            const rowData = row.getData();",
            "lineNumber": 923
          }
        ]
      },
      "score": 0.3638124465942383
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1179
          },
          "endPosition": {
            "line": 1224,
            "column": 20
          }
        },
        "contents": "        thead.style.backgroundColor = '#fff';\n    }\n\n    // Check if any group has a non-empty title - only show group header row if at least one title exists\n    const hasGroupTitles = data.columns.some(colGroup =&gt; colGroup.title &amp;&amp; colGroup.title.trim() !== '');\n    \n    // Add group headers (only if at least one group has a title)\n    if (hasGroupTitles) {\n        const groupHeaderRow = document.createElement('tr');\n        data.columns.forEach((colGroup, groupIndex) =&gt; {\n            const th = document.createElement('th');\n            th.textContent = colGroup.title || '';\n            th.colSpan = colGroup.columns ? colGroup.columns.length : 1;\n            th.style.padding = '8px';\n            th.style.textAlign = 'center';\n            th.className = 'align-middle';\n            \n            // Add vertical borders between groups\n            if (groupIndex &gt; 0) {\n                th.style.borderLeft = &#96;2px solid ${ColorUtils.getThemeColor('border') || '#264653'}&#96;;\n            }\n            \n            // Apply group styles\n            if (colGroup.style) {\n                Object.entries(colGroup.style).forEach(([key, value]) =&gt; {\n                    th.style[key] = value;\n                });\n            }\n            \n            // Apply header styles\n            if (colGroup.headerStyle) {\n                Object.entries(colGroup.headerStyle).forEach(([key, value]) =&gt; {\n                    th.style[key] = value;\n                });\n            }\n            \n            // Apply group width\n            if (colGroup.width) {\n                th.style.width = colGroup.width;\n            }\n            \n            // Freeze column group headers if the group is frozen\n            if (colGroup.frozen) {\n                th.style.position = 'sticky';\n                if (colGroup.frozen === 'left') {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        thead.style.backgroundColor = '#fff';",
            "lineNumber": 1180
          },
          {
            "text": "    }",
            "lineNumber": 1181
          },
          {
            "lineNumber": 1182
          },
          {
            "text": "    // Check if any group has a non-empty title - only show group header row if at least one title exists",
            "lineNumber": 1183
          },
          {
            "text": "    const hasGroupTitles = data.columns.some(colGroup =&gt; colGroup.title &amp;&amp; colGroup.title.trim() !== '');",
            "lineNumber": 1184
          },
          {
            "text": "    ",
            "lineNumber": 1185
          },
          {
            "text": "    // Add group headers (only if at least one group has a title)",
            "lineNumber": 1186
          },
          {
            "text": "    if (hasGroupTitles) {",
            "lineNumber": 1187
          },
          {
            "text": "        const groupHeaderRow = document.createElement('tr');",
            "lineNumber": 1188
          },
          {
            "text": "        data.columns.forEach((colGroup, groupIndex) =&gt; {",
            "lineNumber": 1189
          },
          {
            "text": "            const th = document.createElement('th');",
            "lineNumber": 1190
          },
          {
            "text": "            th.textContent = colGroup.title || '';",
            "lineNumber": 1191
          },
          {
            "text": "            th.colSpan = colGroup.columns ? colGroup.columns.length : 1;",
            "lineNumber": 1192
          },
          {
            "text": "            th.style.padding = '8px';",
            "lineNumber": 1193
          },
          {
            "text": "            th.style.textAlign = 'center';",
            "lineNumber": 1194
          },
          {
            "text": "            th.className = 'align-middle';",
            "lineNumber": 1195
          },
          {
            "text": "            ",
            "lineNumber": 1196
          },
          {
            "text": "            // Add vertical borders between groups",
            "lineNumber": 1197
          },
          {
            "text": "            if (groupIndex &gt; 0) {",
            "lineNumber": 1198
          },
          {
            "text": "                th.style.borderLeft = &#96;2px solid ${ColorUtils.getThemeColor('border') || '#264653'}&#96;;",
            "lineNumber": 1199
          },
          {
            "text": "            }",
            "lineNumber": 1200
          },
          {
            "text": "            ",
            "lineNumber": 1201
          },
          {
            "text": "            // Apply group styles",
            "lineNumber": 1202
          },
          {
            "text": "            if (colGroup.style) {",
            "lineNumber": 1203
          },
          {
            "text": "                Object.entries(colGroup.style).forEach(([key, value]) =&gt; {",
            "lineNumber": 1204
          },
          {
            "text": "                    th.style[key] = value;",
            "lineNumber": 1205
          },
          {
            "text": "                });",
            "lineNumber": 1206
          },
          {
            "text": "            }",
            "lineNumber": 1207
          },
          {
            "text": "            ",
            "lineNumber": 1208
          },
          {
            "text": "            // Apply header styles",
            "lineNumber": 1209
          },
          {
            "text": "            if (colGroup.headerStyle) {",
            "lineNumber": 1210
          },
          {
            "text": "                Object.entries(colGroup.headerStyle).forEach(([key, value]) =&gt; {",
            "lineNumber": 1211
          },
          {
            "text": "                    th.style[key] = value;",
            "lineNumber": 1212
          },
          {
            "text": "                });",
            "lineNumber": 1213
          },
          {
            "text": "            }",
            "lineNumber": 1214
          },
          {
            "text": "            ",
            "lineNumber": 1215
          },
          {
            "text": "            // Apply group width",
            "lineNumber": 1216
          },
          {
            "text": "            if (colGroup.width) {",
            "lineNumber": 1217
          },
          {
            "text": "                th.style.width = colGroup.width;",
            "lineNumber": 1218
          },
          {
            "text": "            }",
            "lineNumber": 1219
          },
          {
            "text": "            ",
            "lineNumber": 1220
          },
          {
            "text": "            // Freeze column group headers if the group is frozen",
            "lineNumber": 1221
          },
          {
            "text": "            if (colGroup.frozen) {",
            "lineNumber": 1222
          },
          {
            "text": "                th.style.position = 'sticky';",
            "lineNumber": 1223
          },
          {
            "text": "                if (colGroup.frozen === 'left') {",
            "lineNumber": 1224
          },
          {
            "text": "                    ",
            "lineNumber": 1225
          }
        ]
      },
      "score": 0.359765887260437
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1827
          },
          "endPosition": {
            "line": 1870
          }
        },
        "contents": "                        if (colGroup.frozen) {\n                            td.style.position = 'sticky';\n                            if (colGroup.frozen === 'left') {\n                                // Calculate left position based on previous frozen columns\n                                let leftPos = 0;\n                                for (let g = 0; g &lt; groupIndex; g++) {\n                                    if (data.columns[g].frozen === 'left') {\n                                        data.columns[g].columns.forEach(c =&gt; {\n                                            leftPos += parseInt(c.width || '100px');\n                                        });\n                                    }\n                                }\n                                // Add offset for current group's previous columns\n                                for (let i = 0; i &lt; index; i++) {\n                                    leftPos += parseInt(colGroup.columns[i].width || '100px');\n                                }\n                                td.style.left = &#96;${leftPos}px&#96;;\n                                \n                                // Remove ALL visual separation\n                                td.style.boxShadow = 'none';\n                                td.style.borderRight = 'none';\n                                td.style.borderLeft = 'none';\n                            }\n                            td.style.zIndex = '1';\n                            td.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');\n                        }\n                        \n                        tr.appendChild(td);\n                    });\n                }\n            });\n            \n            tbody.appendChild(tr);\n        });\n    }\n    \n    // Initial population of table body\n    updateTableBody(data.data, enableSpecialRowStyling);\n    \n    tableWrapper.appendChild(table);\n    document.getElementById(tableId).innerHTML = '';  // Clear existing content\n    document.getElementById(tableId).appendChild(tableWrapper);\n    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        if (colGroup.frozen) {",
            "lineNumber": 1828
          },
          {
            "text": "                            td.style.position = 'sticky';",
            "lineNumber": 1829
          },
          {
            "text": "                            if (colGroup.frozen === 'left') {",
            "lineNumber": 1830
          },
          {
            "text": "                                // Calculate left position based on previous frozen columns",
            "lineNumber": 1831
          },
          {
            "text": "                                let leftPos = 0;",
            "lineNumber": 1832
          },
          {
            "text": "                                for (let g = 0; g &lt; groupIndex; g++) {",
            "lineNumber": 1833
          },
          {
            "text": "                                    if (data.columns[g].frozen === 'left') {",
            "lineNumber": 1834
          },
          {
            "text": "                                        data.columns[g].columns.forEach(c =&gt; {",
            "lineNumber": 1835
          },
          {
            "text": "                                            leftPos += parseInt(c.width || '100px');",
            "lineNumber": 1836
          },
          {
            "text": "                                        });",
            "lineNumber": 1837
          },
          {
            "text": "                                    }",
            "lineNumber": 1838
          },
          {
            "text": "                                }",
            "lineNumber": 1839
          },
          {
            "text": "                                // Add offset for current group's previous columns",
            "lineNumber": 1840
          },
          {
            "text": "                                for (let i = 0; i &lt; index; i++) {",
            "lineNumber": 1841
          },
          {
            "text": "                                    leftPos += parseInt(colGroup.columns[i].width || '100px');",
            "lineNumber": 1842
          },
          {
            "text": "                                }",
            "lineNumber": 1843
          },
          {
            "text": "                                td.style.left = &#96;${leftPos}px&#96;;",
            "lineNumber": 1844
          },
          {
            "text": "                                ",
            "lineNumber": 1845
          },
          {
            "text": "                                // Remove ALL visual separation",
            "lineNumber": 1846
          },
          {
            "text": "                                td.style.boxShadow = 'none';",
            "lineNumber": 1847
          },
          {
            "text": "                                td.style.borderRight = 'none';",
            "lineNumber": 1848
          },
          {
            "text": "                                td.style.borderLeft = 'none';",
            "lineNumber": 1849
          },
          {
            "text": "                            }",
            "lineNumber": 1850
          },
          {
            "text": "                            td.style.zIndex = '1';",
            "lineNumber": 1851
          },
          {
            "text": "                            td.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');",
            "lineNumber": 1852
          },
          {
            "text": "                        }",
            "lineNumber": 1853
          },
          {
            "text": "                        ",
            "lineNumber": 1854
          },
          {
            "text": "                        tr.appendChild(td);",
            "lineNumber": 1855
          },
          {
            "text": "                    });",
            "lineNumber": 1856
          },
          {
            "text": "                }",
            "lineNumber": 1857
          },
          {
            "text": "            });",
            "lineNumber": 1858
          },
          {
            "text": "            ",
            "lineNumber": 1859
          },
          {
            "text": "            tbody.appendChild(tr);",
            "lineNumber": 1860
          },
          {
            "text": "        });",
            "lineNumber": 1861
          },
          {
            "text": "    }",
            "lineNumber": 1862
          },
          {
            "text": "    ",
            "lineNumber": 1863
          },
          {
            "text": "    // Initial population of table body",
            "lineNumber": 1864
          },
          {
            "text": "    updateTableBody(data.data, enableSpecialRowStyling);",
            "lineNumber": 1865
          },
          {
            "text": "    ",
            "lineNumber": 1866
          },
          {
            "text": "    tableWrapper.appendChild(table);",
            "lineNumber": 1867
          },
          {
            "text": "    document.getElementById(tableId).innerHTML = '';  // Clear existing content",
            "lineNumber": 1868
          },
          {
            "text": "    document.getElementById(tableId).appendChild(tableWrapper);",
            "lineNumber": 1869
          },
          {
            "text": "    ",
            "lineNumber": 1870
          }
        ]
      },
      "score": 0.35713666677474976
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1108
          },
          "endPosition": {
            "line": 1152
          }
        },
        "contents": "            columns: data.columns\n        }];\n    }\n\n    // Get table configuration\n    const config = data.config || {};\n    \n    // Get options with defaults\n    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;\n    \n    // Initialize team colors if this is a table with team data\n    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {\n        // Extract team names from the data\n        // For most tables, team name is in the second column (row[1])\n        // For team vs team comparison, team name is in the first column (row[0])\n        let teams = [];\n        \n        \n        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)\n        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {\n            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        } else {\n            // Standard tables with team names in second column\n            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        }\n        \n        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {\n            window.updateTeamColorMap(teams);\n        }\n    }\n    \n    // Create table wrapper for horizontal scroll\n    const tableWrapper = document.createElement('div');\n    tableWrapper.className = 'table-responsive';\n\n    // Create table\n    const table = document.createElement('table');\n    table.className = 'table';\n    if (config.striped) table.classList.add('table-striped');\n    if (config.hover) table.classList.add('table-hover');\n    if (config.compact) table.classList.add('table-sm');\n    table.style.borderCollapse = 'collapse';\n\n    // Add title and description if provided",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            columns: data.columns",
            "lineNumber": 1109
          },
          {
            "text": "        }];",
            "lineNumber": 1110
          },
          {
            "text": "    }",
            "lineNumber": 1111
          },
          {
            "lineNumber": 1112
          },
          {
            "text": "    // Get table configuration",
            "lineNumber": 1113
          },
          {
            "text": "    const config = data.config || {};",
            "lineNumber": 1114
          },
          {
            "text": "    ",
            "lineNumber": 1115
          },
          {
            "text": "    // Get options with defaults",
            "lineNumber": 1116
          },
          {
            "text": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;",
            "lineNumber": 1117
          },
          {
            "text": "    ",
            "lineNumber": 1118
          },
          {
            "text": "    // Initialize team colors if this is a table with team data",
            "lineNumber": 1119
          },
          {
            "text": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
            "lineNumber": 1120
          },
          {
            "text": "        // Extract team names from the data",
            "lineNumber": 1121
          },
          {
            "text": "        // For most tables, team name is in the second column (row[1])",
            "lineNumber": 1122
          },
          {
            "text": "        // For team vs team comparison, team name is in the first column (row[0])",
            "lineNumber": 1123
          },
          {
            "text": "        let teams = [];",
            "lineNumber": 1124
          },
          {
            "text": "        ",
            "lineNumber": 1125
          },
          {
            "text": "        ",
            "lineNumber": 1126
          },
          {
            "text": "        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)",
            "lineNumber": 1127
          },
          {
            "text": "        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {",
            "lineNumber": 1128
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1129
          },
          {
            "text": "        } else {",
            "lineNumber": 1130
          },
          {
            "text": "            // Standard tables with team names in second column",
            "lineNumber": 1131
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1132
          },
          {
            "text": "        }",
            "lineNumber": 1133
          },
          {
            "text": "        ",
            "lineNumber": 1134
          },
          {
            "text": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
            "lineNumber": 1135
          },
          {
            "text": "            window.updateTeamColorMap(teams);",
            "lineNumber": 1136
          },
          {
            "text": "        }",
            "lineNumber": 1137
          },
          {
            "text": "    }",
            "lineNumber": 1138
          },
          {
            "text": "    ",
            "lineNumber": 1139
          },
          {
            "text": "    // Create table wrapper for horizontal scroll",
            "lineNumber": 1140
          },
          {
            "text": "    const tableWrapper = document.createElement('div');",
            "lineNumber": 1141
          },
          {
            "text": "    tableWrapper.className = 'table-responsive';",
            "lineNumber": 1142
          },
          {
            "lineNumber": 1143
          },
          {
            "text": "    // Create table",
            "lineNumber": 1144
          },
          {
            "text": "    const table = document.createElement('table');",
            "lineNumber": 1145
          },
          {
            "text": "    table.className = 'table';",
            "lineNumber": 1146
          },
          {
            "text": "    if (config.striped) table.classList.add('table-striped');",
            "lineNumber": 1147
          },
          {
            "text": "    if (config.hover) table.classList.add('table-hover');",
            "lineNumber": 1148
          },
          {
            "text": "    if (config.compact) table.classList.add('table-sm');",
            "lineNumber": 1149
          },
          {
            "text": "    table.style.borderCollapse = 'collapse';",
            "lineNumber": 1150
          },
          {
            "lineNumber": 1151
          },
          {
            "text": "    // Add title and description if provided",
            "lineNumber": 1152
          }
        ]
      },
      "score": 0.34924715757369995
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1363
          },
          "endPosition": {
            "line": 1402
          }
        },
        "contents": "                if (index === 0 &amp;&amp; groupIndex &gt; 0) {\n                    th.style.borderLeft = &#96;2px solid ${ColorUtils.getThemeColor('border') || '#264653'}&#96;;\n                }\n                \n                // Freeze column headers if the group is frozen\n                if (colGroup.frozen) {\n                    th.style.position = 'sticky';\n                    if (colGroup.frozen === 'left') {\n                        // Calculate left position based on previous frozen columns\n                        let leftPos = 0;\n                        for (let g = 0; g &lt; groupIndex; g++) {\n                            if (data.columns[g].frozen === 'left') {\n                                data.columns[g].columns.forEach(c =&gt; {\n                                    leftPos += parseInt(c.width || '100px');\n                                });\n                            }\n                        }\n                        // Add offset for current group's previous columns\n                        for (let i = 0; i &lt; index; i++) {\n                            leftPos += parseInt(colGroup.columns[i].width || '100px');\n                        }\n                        th.style.left = &#96;${leftPos}px&#96;;\n                    }\n                    th.style.zIndex = '2';  // Higher than regular cells\n                    th.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');\n                }\n                \n                subHeaderRow.appendChild(th);\n            });\n        }\n    });\n    thead.appendChild(subHeaderRow);\n    table.appendChild(thead);\n\n    // Create body\n    const tbody = document.createElement('tbody');\n    table.appendChild(tbody);\n\n    // Helper function to get flat column index",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                if (index === 0 &amp;&amp; groupIndex &gt; 0) {",
            "lineNumber": 1364
          },
          {
            "text": "                    th.style.borderLeft = &#96;2px solid ${ColorUtils.getThemeColor('border') || '#264653'}&#96;;",
            "lineNumber": 1365
          },
          {
            "text": "                }",
            "lineNumber": 1366
          },
          {
            "text": "                ",
            "lineNumber": 1367
          },
          {
            "text": "                // Freeze column headers if the group is frozen",
            "lineNumber": 1368
          },
          {
            "text": "                if (colGroup.frozen) {",
            "lineNumber": 1369
          },
          {
            "text": "                    th.style.position = 'sticky';",
            "lineNumber": 1370
          },
          {
            "text": "                    if (colGroup.frozen === 'left') {",
            "lineNumber": 1371
          },
          {
            "text": "                        // Calculate left position based on previous frozen columns",
            "lineNumber": 1372
          },
          {
            "text": "                        let leftPos = 0;",
            "lineNumber": 1373
          },
          {
            "text": "                        for (let g = 0; g &lt; groupIndex; g++) {",
            "lineNumber": 1374
          },
          {
            "text": "                            if (data.columns[g].frozen === 'left') {",
            "lineNumber": 1375
          },
          {
            "text": "                                data.columns[g].columns.forEach(c =&gt; {",
            "lineNumber": 1376
          },
          {
            "text": "                                    leftPos += parseInt(c.width || '100px');",
            "lineNumber": 1377
          },
          {
            "text": "                                });",
            "lineNumber": 1378
          },
          {
            "text": "                            }",
            "lineNumber": 1379
          },
          {
            "text": "                        }",
            "lineNumber": 1380
          },
          {
            "text": "                        // Add offset for current group's previous columns",
            "lineNumber": 1381
          },
          {
            "text": "                        for (let i = 0; i &lt; index; i++) {",
            "lineNumber": 1382
          },
          {
            "text": "                            leftPos += parseInt(colGroup.columns[i].width || '100px');",
            "lineNumber": 1383
          },
          {
            "text": "                        }",
            "lineNumber": 1384
          },
          {
            "text": "                        th.style.left = &#96;${leftPos}px&#96;;",
            "lineNumber": 1385
          },
          {
            "text": "                    }",
            "lineNumber": 1386
          },
          {
            "text": "                    th.style.zIndex = '2';  // Higher than regular cells",
            "lineNumber": 1387
          },
          {
            "text": "                    th.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');",
            "lineNumber": 1388
          },
          {
            "text": "                }",
            "lineNumber": 1389
          },
          {
            "text": "                ",
            "lineNumber": 1390
          },
          {
            "text": "                subHeaderRow.appendChild(th);",
            "lineNumber": 1391
          },
          {
            "text": "            });",
            "lineNumber": 1392
          },
          {
            "text": "        }",
            "lineNumber": 1393
          },
          {
            "text": "    });",
            "lineNumber": 1394
          },
          {
            "text": "    thead.appendChild(subHeaderRow);",
            "lineNumber": 1395
          },
          {
            "text": "    table.appendChild(thead);",
            "lineNumber": 1396
          },
          {
            "lineNumber": 1397
          },
          {
            "text": "    // Create body",
            "lineNumber": 1398
          },
          {
            "text": "    const tbody = document.createElement('tbody');",
            "lineNumber": 1399
          },
          {
            "text": "    table.appendChild(tbody);",
            "lineNumber": 1400
          },
          {
            "lineNumber": 1401
          },
          {
            "text": "    // Helper function to get flat column index",
            "lineNumber": 1402
          }
        ]
      },
      "score": 0.3435620665550232
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2297
          },
          "endPosition": {
            "line": 2311,
            "column": 9
          }
        },
        "contents": "   .custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted {\n       background-color: var(--theme-table-body-text, #1f2933) !important;\n       color: var(--theme-text-on-primary, #ffffff) !important;\n       font-weight: 600 !important;\n   }\n   \n   Option 4: Thicker border\n   .custom-tabulator .tabulator-col-group.tab-group-highlighted,\n   .custom-tabulator .tabulator-col.tab-col-highlighted {\n       border-bottom: 3px solid #000000 !important;\n       border-top: 2px solid #000000 !important;\n   }\n*/\n\n&lt;/style&gt; ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "   .custom-tabulator .tabulator-row .tabulator-cell.tab-col-highlighted {",
            "lineNumber": 2298
          },
          {
            "text": "       background-color: var(--theme-table-body-text, #1f2933) !important;",
            "lineNumber": 2299
          },
          {
            "text": "       color: var(--theme-text-on-primary, #ffffff) !important;",
            "lineNumber": 2300
          },
          {
            "text": "       font-weight: 600 !important;",
            "lineNumber": 2301
          },
          {
            "text": "   }",
            "lineNumber": 2302
          },
          {
            "text": "   ",
            "lineNumber": 2303
          },
          {
            "text": "   Option 4: Thicker border",
            "lineNumber": 2304
          },
          {
            "text": "   .custom-tabulator .tabulator-col-group.tab-group-highlighted,",
            "lineNumber": 2305
          },
          {
            "text": "   .custom-tabulator .tabulator-col.tab-col-highlighted {",
            "lineNumber": 2306
          },
          {
            "text": "       border-bottom: 3px solid #000000 !important;",
            "lineNumber": 2307
          },
          {
            "text": "       border-top: 2px solid #000000 !important;",
            "lineNumber": 2308
          },
          {
            "text": "   }",
            "lineNumber": 2309
          },
          {
            "text": "*/",
            "lineNumber": 2310
          },
          {
            "lineNumber": 2311
          },
          {
            "text": "&lt;/style&gt; ",
            "lineNumber": 2312
          }
        ]
      },
      "score": 0.3388792872428894
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 159
          },
          "endPosition": {
            "line": 216
          }
        },
        "contents": "}\n\nfunction createTableTabulator(tableId, data, options = {}) {\n    \n    const settings = {\n        disablePositionCircle: false,\n        enableSpecialRowStyling: false,\n        tooltips: true,\n        teamField: null,\n        ...options\n    };\n    const tableConfig = data.config || {};\n    const isCompactLayout = tableConfig.compact === true;\n    const useStripedGroups = tableConfig.stripedColGroups === true;\n    // Highlighting style constants\n    const HIGHLIGHT_STYLES = {\n        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',\n        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',\n        headerFontWeight: '900',\n        cellFontWeight: '700'\n    };\n\n    if (!data || !data.columns || !data.data) {\n        console.error('Invalid data format for Tabulator table');\n        return;\n    }\n\n    const container = document.getElementById(tableId);\n    if (!container) {\n        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);\n        return;\n    }\n    \n    // Ensure container takes full width\n    if (container.style.width === '') {\n        container.style.width = '100%';\n    }\n\n    const columnOrder = flattenColumnMetadata(data.columns);\n    if (!columnOrder.length) {\n        console.warn('No column definitions available for Tabulator table');\n        const container = document.getElementById(tableId);\n        if (container) {\n            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';\n            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;\n        }\n        return;\n    }\n    const columnLookup = columnOrder.reduce((acc, info) =&gt; {\n        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;\n        return acc;\n    }, {});\n\n    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;\n    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "function createTableTabulator(tableId, data, options = {}) {",
            "lineNumber": 162
          },
          {
            "text": "    ",
            "lineNumber": 163
          },
          {
            "text": "    const settings = {",
            "lineNumber": 164
          },
          {
            "text": "        disablePositionCircle: false,",
            "lineNumber": 165
          },
          {
            "text": "        enableSpecialRowStyling: false,",
            "lineNumber": 166
          },
          {
            "text": "        tooltips: true,",
            "lineNumber": 167
          },
          {
            "text": "        teamField: null,",
            "lineNumber": 168
          },
          {
            "text": "        ...options",
            "lineNumber": 169
          },
          {
            "text": "    };",
            "lineNumber": 170
          },
          {
            "text": "    const tableConfig = data.config || {};",
            "lineNumber": 171
          },
          {
            "text": "    const isCompactLayout = tableConfig.compact === true;",
            "lineNumber": 172
          },
          {
            "text": "    const useStripedGroups = tableConfig.stripedColGroups === true;",
            "lineNumber": 173
          },
          {
            "text": "    // Highlighting style constants",
            "lineNumber": 174
          },
          {
            "text": "    const HIGHLIGHT_STYLES = {",
            "lineNumber": 175
          },
          {
            "text": "        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',",
            "lineNumber": 176
          },
          {
            "text": "        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',",
            "lineNumber": 177
          },
          {
            "text": "        headerFontWeight: '900',",
            "lineNumber": 178
          },
          {
            "text": "        cellFontWeight: '700'",
            "lineNumber": 179
          },
          {
            "text": "    };",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 182
          },
          {
            "text": "        console.error('Invalid data format for Tabulator table');",
            "lineNumber": 183
          },
          {
            "text": "        return;",
            "lineNumber": 184
          },
          {
            "text": "    }",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    const container = document.getElementById(tableId);",
            "lineNumber": 187
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 188
          },
          {
            "text": "        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);",
            "lineNumber": 189
          },
          {
            "text": "        return;",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "text": "    ",
            "lineNumber": 192
          },
          {
            "text": "    // Ensure container takes full width",
            "lineNumber": 193
          },
          {
            "text": "    if (container.style.width === '') {",
            "lineNumber": 194
          },
          {
            "text": "        container.style.width = '100%';",
            "lineNumber": 195
          },
          {
            "text": "    }",
            "lineNumber": 196
          },
          {
            "lineNumber": 197
          },
          {
            "text": "    const columnOrder = flattenColumnMetadata(data.columns);",
            "lineNumber": 198
          },
          {
            "text": "    if (!columnOrder.length) {",
            "lineNumber": 199
          },
          {
            "text": "        console.warn('No column definitions available for Tabulator table');",
            "lineNumber": 200
          },
          {
            "text": "        const container = document.getElementById(tableId);",
            "lineNumber": 201
          },
          {
            "text": "        if (container) {",
            "lineNumber": 202
          },
          {
            "text": "            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';",
            "lineNumber": 203
          },
          {
            "text": "            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;",
            "lineNumber": 204
          },
          {
            "text": "        }",
            "lineNumber": 205
          },
          {
            "text": "        return;",
            "lineNumber": 206
          },
          {
            "text": "    }",
            "lineNumber": 207
          },
          {
            "text": "    const columnLookup = columnOrder.reduce((acc, info) =&gt; {",
            "lineNumber": 208
          },
          {
            "text": "        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;",
            "lineNumber": 209
          },
          {
            "text": "        return acc;",
            "lineNumber": 210
          },
          {
            "text": "    }, {});",
            "lineNumber": 211
          },
          {
            "lineNumber": 212
          },
          {
            "text": "    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;",
            "lineNumber": 213
          },
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          }
        ]
      },
      "score": 0.3346670866012573
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2160
          },
          "endPosition": {
            "line": 2229
          }
        },
        "contents": ".border-right {\n    border-right: 1px solid var(--theme-border, #264653); /* Bootstrap's default border color */\n}\n\n.table-responsive {\n    overflow-x: auto; /* Enable horizontal scrolling */\n}\n\nth {\n    position: relative; /* Required for sticky positioning */\n    background-color: var(--theme-background, #f8f9fa); /* Header background color */\n}\n/* Add more rules based on your number of groups */\n\n/* Remove ALL visual separation between frozen and non-frozen columns\n   for custom sticky layouts (Bootstrap tables etc.) */\n[style*=\"position: sticky\"] {\n    box-shadow: none !important;\n    border-right: none !important;\n    border-left: none !important;\n}\n\n/* Remove any nth-child selectors that might be adding shadows */\ntr &gt; td:nth-child(2)[style*=\"position: sticky\"],\ntr &gt; th:nth-child(2)[style*=\"position: sticky\"] {\n    box-shadow: none !important;\n}\n\n/* Ensure no borders between position and team columns */\ntr &gt; td:first-child,\ntr &gt; th:first-child {\n    border-right: none !important;\n}\n\ntr &gt; td:nth-child(2),\ntr &gt; th:nth-child(2) {\n    border-left: none !important;\n}\n\n/* Semantic UI theme - prevent header separator from expanding */\n.custom-tabulator .tabulator-header,\n.custom-tabulator .tabulator-header-contents,\n.custom-tabulator .tabulator-headers {\n    border-bottom: none !important;\n    width: 100% !important; /* Ensure header takes full width */\n}\n\n/* Only individual columns should have borders */\n.custom-tabulator .tabulator-header .tabulator-col-group,\n.custom-tabulator .tabulator-header .tabulator-col {\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n/* Ensure table and table holder take full width */\n.custom-tabulator {\n    width: 100% !important;\n}\n\n.custom-tabulator .tabulator-tableHolder {\n    width: 100% !important;\n}\n\n.custom-tabulator .tabulator-table {\n    width: 100% !important;\n}\n\n/* Highlighted column group - Option 1: Subtle background + bold (CURRENT) */\n/* Use high specificity to override Semantic UI theme */",
        "signatures": {},
        "detailedLines": [
          {
            "text": ".border-right {",
            "lineNumber": 2161
          },
          {
            "text": "    border-right: 1px solid var(--theme-border, #264653); /* Bootstrap's default border color */",
            "lineNumber": 2162
          },
          {
            "text": "}",
            "lineNumber": 2163
          },
          {
            "lineNumber": 2164
          },
          {
            "text": ".table-responsive {",
            "lineNumber": 2165
          },
          {
            "text": "    overflow-x: auto; /* Enable horizontal scrolling */",
            "lineNumber": 2166
          },
          {
            "text": "}",
            "lineNumber": 2167
          },
          {
            "lineNumber": 2168
          },
          {
            "text": "th {",
            "lineNumber": 2169
          },
          {
            "text": "    position: relative; /* Required for sticky positioning */",
            "lineNumber": 2170
          },
          {
            "text": "    background-color: var(--theme-background, #f8f9fa); /* Header background color */",
            "lineNumber": 2171
          },
          {
            "text": "}",
            "lineNumber": 2172
          },
          {
            "text": "/* Add more rules based on your number of groups */",
            "lineNumber": 2173
          },
          {
            "lineNumber": 2174
          },
          {
            "text": "/* Remove ALL visual separation between frozen and non-frozen columns",
            "lineNumber": 2175
          },
          {
            "text": "   for custom sticky layouts (Bootstrap tables etc.) */",
            "lineNumber": 2176
          },
          {
            "text": "[style*=\"position: sticky\"] {",
            "lineNumber": 2177
          },
          {
            "text": "    box-shadow: none !important;",
            "lineNumber": 2178
          },
          {
            "text": "    border-right: none !important;",
            "lineNumber": 2179
          },
          {
            "text": "    border-left: none !important;",
            "lineNumber": 2180
          },
          {
            "text": "}",
            "lineNumber": 2181
          },
          {
            "lineNumber": 2182
          },
          {
            "text": "/* Remove any nth-child selectors that might be adding shadows */",
            "lineNumber": 2183
          },
          {
            "text": "tr &gt; td:nth-child(2)[style*=\"position: sticky\"],",
            "lineNumber": 2184
          },
          {
            "text": "tr &gt; th:nth-child(2)[style*=\"position: sticky\"] {",
            "lineNumber": 2185
          },
          {
            "text": "    box-shadow: none !important;",
            "lineNumber": 2186
          },
          {
            "text": "}",
            "lineNumber": 2187
          },
          {
            "lineNumber": 2188
          },
          {
            "text": "/* Ensure no borders between position and team columns */",
            "lineNumber": 2189
          },
          {
            "text": "tr &gt; td:first-child,",
            "lineNumber": 2190
          },
          {
            "text": "tr &gt; th:first-child {",
            "lineNumber": 2191
          },
          {
            "text": "    border-right: none !important;",
            "lineNumber": 2192
          },
          {
            "text": "}",
            "lineNumber": 2193
          },
          {
            "lineNumber": 2194
          },
          {
            "text": "tr &gt; td:nth-child(2),",
            "lineNumber": 2195
          },
          {
            "text": "tr &gt; th:nth-child(2) {",
            "lineNumber": 2196
          },
          {
            "text": "    border-left: none !important;",
            "lineNumber": 2197
          },
          {
            "text": "}",
            "lineNumber": 2198
          },
          {
            "lineNumber": 2199
          },
          {
            "text": "/* Semantic UI theme - prevent header separator from expanding */",
            "lineNumber": 2200
          },
          {
            "text": ".custom-tabulator .tabulator-header,",
            "lineNumber": 2201
          },
          {
            "text": ".custom-tabulator .tabulator-header-contents,",
            "lineNumber": 2202
          },
          {
            "text": ".custom-tabulator .tabulator-headers {",
            "lineNumber": 2203
          },
          {
            "text": "    border-bottom: none !important;",
            "lineNumber": 2204
          },
          {
            "text": "    width: 100% !important; /* Ensure header takes full width */",
            "lineNumber": 2205
          },
          {
            "text": "}",
            "lineNumber": 2206
          },
          {
            "lineNumber": 2207
          },
          {
            "text": "/* Only individual columns should have borders */",
            "lineNumber": 2208
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group,",
            "lineNumber": 2209
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col {",
            "lineNumber": 2210
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2211
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2212
          },
          {
            "text": "}",
            "lineNumber": 2213
          },
          {
            "lineNumber": 2214
          },
          {
            "text": "/* Ensure table and table holder take full width */",
            "lineNumber": 2215
          },
          {
            "text": ".custom-tabulator {",
            "lineNumber": 2216
          },
          {
            "text": "    width: 100% !important;",
            "lineNumber": 2217
          },
          {
            "text": "}",
            "lineNumber": 2218
          },
          {
            "lineNumber": 2219
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder {",
            "lineNumber": 2220
          },
          {
            "text": "    width: 100% !important;",
            "lineNumber": 2221
          },
          {
            "text": "}",
            "lineNumber": 2222
          },
          {
            "lineNumber": 2223
          },
          {
            "text": ".custom-tabulator .tabulator-table {",
            "lineNumber": 2224
          },
          {
            "text": "    width: 100% !important;",
            "lineNumber": 2225
          },
          {
            "text": "}",
            "lineNumber": 2226
          },
          {
            "lineNumber": 2227
          },
          {
            "text": "/* Highlighted column group - Option 1: Subtle background + bold (CURRENT) */",
            "lineNumber": 2228
          },
          {
            "text": "/* Use high specificity to override Semantic UI theme */",
            "lineNumber": 2229
          }
        ]
      },
      "score": 0.33423495292663574
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1221
          },
          "endPosition": {
            "line": 1251,
            "column": 8
          }
        },
        "contents": "            if (colGroup.frozen) {\n                th.style.position = 'sticky';\n                if (colGroup.frozen === 'left') {\n                    // Calculate left position based on previous frozen groups\n                    let leftPos = 0;\n                    for (let g = 0; g &lt; groupIndex; g++) {\n                        if (data.columns[g].frozen === 'left') {\n                            // Sum up widths of all columns in previous frozen groups\n                            data.columns[g].columns.forEach(c =&gt; {\n                                leftPos += parseInt(c.width || '100px');\n                            });\n                        }\n                    }\n                    th.style.left = &#96;${leftPos}px&#96;;\n                }\n                th.style.zIndex = '2';  // Higher than regular cells\n                th.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');\n            }\n            \n            groupHeaderRow.appendChild(th);\n        });\n        thead.appendChild(groupHeaderRow);\n    }\n\n    // Add sub-headers with sort functionality\n    const subHeaderRow = document.createElement('tr');\n    let sortState = {};  // Track sort state for each column\n    const lastGroupIndex = data.columns.length - 1;  // Get the index of the last group\n\n    data.columns.forEach((colGroup, groupIndex) =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            if (colGroup.frozen) {",
            "lineNumber": 1222
          },
          {
            "text": "                th.style.position = 'sticky';",
            "lineNumber": 1223
          },
          {
            "text": "                if (colGroup.frozen === 'left') {",
            "lineNumber": 1224
          },
          {
            "text": "                    // Calculate left position based on previous frozen groups",
            "lineNumber": 1225
          },
          {
            "text": "                    let leftPos = 0;",
            "lineNumber": 1226
          },
          {
            "text": "                    for (let g = 0; g &lt; groupIndex; g++) {",
            "lineNumber": 1227
          },
          {
            "text": "                        if (data.columns[g].frozen === 'left') {",
            "lineNumber": 1228
          },
          {
            "text": "                            // Sum up widths of all columns in previous frozen groups",
            "lineNumber": 1229
          },
          {
            "text": "                            data.columns[g].columns.forEach(c =&gt; {",
            "lineNumber": 1230
          },
          {
            "text": "                                leftPos += parseInt(c.width || '100px');",
            "lineNumber": 1231
          },
          {
            "text": "                            });",
            "lineNumber": 1232
          },
          {
            "text": "                        }",
            "lineNumber": 1233
          },
          {
            "text": "                    }",
            "lineNumber": 1234
          },
          {
            "text": "                    th.style.left = &#96;${leftPos}px&#96;;",
            "lineNumber": 1235
          },
          {
            "text": "                }",
            "lineNumber": 1236
          },
          {
            "text": "                th.style.zIndex = '2';  // Higher than regular cells",
            "lineNumber": 1237
          },
          {
            "text": "                th.style.backgroundColor = colGroup.style?.backgroundColor || (ColorUtils.getThemeColor('surface') || '#fff');",
            "lineNumber": 1238
          },
          {
            "text": "            }",
            "lineNumber": 1239
          },
          {
            "text": "            ",
            "lineNumber": 1240
          },
          {
            "text": "            groupHeaderRow.appendChild(th);",
            "lineNumber": 1241
          },
          {
            "text": "        });",
            "lineNumber": 1242
          },
          {
            "text": "        thead.appendChild(groupHeaderRow);",
            "lineNumber": 1243
          },
          {
            "text": "    }",
            "lineNumber": 1244
          },
          {
            "lineNumber": 1245
          },
          {
            "text": "    // Add sub-headers with sort functionality",
            "lineNumber": 1246
          },
          {
            "text": "    const subHeaderRow = document.createElement('tr');",
            "lineNumber": 1247
          },
          {
            "text": "    let sortState = {};  // Track sort state for each column",
            "lineNumber": 1248
          },
          {
            "text": "    const lastGroupIndex = data.columns.length - 1;  // Get the index of the last group",
            "lineNumber": 1249
          },
          {
            "lineNumber": 1250
          },
          {
            "text": "    data.columns.forEach((colGroup, groupIndex) =&gt; {",
            "lineNumber": 1251
          },
          {
            "text": "        ",
            "lineNumber": 1252
          }
        ]
      },
      "score": 0.33273160457611084
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---

The striping CSS uses `!important`, so it overrides inline styles. Updating the code to apply heatmap colors with `!important` so they take precedence:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "a42d3098-3359-4c31-ab69-6b0753d608b7"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---

Verifying both formatter locations were updated:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/tables.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/tables.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking the second location to confirm it was updated:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---

Both formatter locations are updated. Heatmap colors now take precedence over column group striping.

**Changes made:**
1. Updated the cell metadata styling logic to apply `backgroundColor` with `!important` using `element.style.setProperty('background-color', value, 'important')`
2. Applied this in both formatter functions (for tables with and without column groups)
3. Other cell metadata styles (non-background-color) are still applied normally

**How it works:**
- The striping CSS uses `!important` for background colors
- Heatmap colors are now also applied with `!important`
- Since heatmap colors are applied after the stripe class is added, they take precedence
- The heatmap background color will override the striping background color

Refresh the page to see heatmap colors on the points and pins columns, with striping visible only on columns without heatmap colors (position, team name, opponent name).

---

_**User (2025-12-07 21:24Z)**_

lets move to the s view. the frontend shows the latest league standings for all leagues that have registered data in the selected season. it is meant as a colleciton of all the league overvirew cards we see on top of the slw view. reuse that card and make sure it uses tabular tables

---

_**Agent (model default, mode Agent)**_



---


Exploring the season (s) view to locate the league standings cards and understand their structure:


---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What is the season view and where are league standings cards displayed?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    generateHTML(state) {\n        const leagueName = state.league_long || state.league || '';\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;${leagueName} - ${typeof t === 'function' ? t('season', 'Season') : 'Season'} ${state.season}&lt;/h5&gt;\n                    &lt;!--&lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('season_overview', 'Season Overview') : 'Season Overview'}&lt;/p&gt;--&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;!-- 1st Row: League Standings (Full Width) --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;\n                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('standings', 'Standings') : 'Standings'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"leagueStandingsTable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 2nd Row: Timetable + Position in Season Progress --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('season_timetable', 'Season Timetable') : 'Season Timetable'}&lt;/h6&gt;\n                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('match_schedule', 'Match Schedule') : 'Match Schedule'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "        const leagueName = state.league_long || state.league || '';",
            "lineNumber": 52
          },
          {
            "text": "        return &#96;",
            "lineNumber": 53
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 54
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 55
          },
          {
            "text": "                    &lt;h5&gt;${leagueName} - ${typeof t === 'function' ? t('season', 'Season') : 'Season'} ${state.season}&lt;/h5&gt;",
            "lineNumber": 56
          },
          {
            "text": "                    &lt;!--&lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('season_overview', 'Season Overview') : 'Season Overview'}&lt;/p&gt;--&gt;",
            "lineNumber": 57
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 58
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 59
          },
          {
            "text": "                    &lt;!-- 1st Row: League Standings (Full Width) --&gt;",
            "lineNumber": 60
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 62
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 63
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 64
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;",
            "lineNumber": 65
          },
          {
            "text": "                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('standings', 'Standings') : 'Standings'}&lt;/p&gt;--&gt;",
            "lineNumber": 66
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 67
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 68
          },
          {
            "text": "                                    &lt;div id=\"leagueStandingsTable\"&gt;&lt;/div&gt;",
            "lineNumber": 69
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 70
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 71
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "                    &lt;!-- 2nd Row: Timetable + Position in Season Progress --&gt;",
            "lineNumber": 75
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 78
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('season_timetable', 'Season Timetable') : 'Season Timetable'}&lt;/h6&gt;",
            "lineNumber": 80
          },
          {
            "text": "                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('match_schedule', 'Match Schedule') : 'Match Schedule'}&lt;/p&gt;--&gt;",
            "lineNumber": 81
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 82
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 85
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 87
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                    &lt;h6&gt;",
            "lineNumber": 91
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          }
        ]
      },
      "score": 0.5304157733917236
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "renderSeasonLeagueStandings(data, season) {\nleagueData =&gt; {\nconst  = leagueData;\n            \n            html += &#96;\n                &lt;div class=\"card mb-3\"&gt;\n                    &lt;div class=\"card-header\"&gt;\n                        &lt;h6 class=\"mb-0\"&gt;${league} - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&lt;/h6&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-md-8\"&gt;\n                                &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;\n                                &lt;div id=\"tableSeasonLeagueStandings_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-md-4\"&gt;\n                                &lt;div class=\"card\"&gt;\n                                    &lt;div class=\"card-header\"&gt;\n                                        &lt;h6&gt;${typeof t === 'function' ? t('honor_scores', 'Honor Scores') : 'Honor Scores'}&lt;/h6&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"card-body\"&gt;\n                                        &lt;!-- Individual Scores --&gt;\n                                        &lt;div class=\"mb-3\" id=\"individualScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;\n                                            &lt;h6&gt;${typeof t === 'function' ? t('top_individual_scores', 'Top Individual Scores') : 'Top Individual Scores'}&lt;/h6&gt;\n                                            &lt;div id=\"individualScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                        &lt;!-- Team Scores --&gt;\n                                        &lt;div class=\"mb-3\" id=\"teamScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;\n                                            &lt;h6&gt;${typeof t === 'function' ? t('top_team_scores', 'Top Team Scores') : 'Top Team Scores'}&lt;/h6&gt;\n                                            &lt;div id=\"teamScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                        &lt;!-- Individual Averages --&gt;\n                                        &lt;div class=\"mb-3\" id=\"individualAveragesSection_\n        }\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 93,
                "column": 5
              },
              "endPosition": {
                "line": 94,
                "column": 9
              }
            },
            {
              "startPosition": {
                "line": 109,
                "column": 9
              },
              "endPosition": {
                "line": 109,
                "column": 9
              }
            },
            {
              "startPosition": {
                "line": 109,
                "column": 30
              },
              "endPosition": {
                "line": 110,
                "column": 13
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "text": "leagueData =&gt; {",
            "lineNumber": 109
          },
          {
            "text": "const  = leagueData;",
            "lineNumber": 110
          },
          {
            "text": "            ",
            "lineNumber": 111
          },
          {
            "text": "            html += &#96;",
            "lineNumber": 112
          },
          {
            "text": "                &lt;div class=\"card mb-3\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 114
          },
          {
            "text": "                        &lt;h6 class=\"mb-0\"&gt;${league} - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                        &lt;div class=\"row\"&gt;",
            "lineNumber": 118
          },
          {
            "text": "                            &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 119
          },
          {
            "text": "                                &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;",
            "lineNumber": 120
          },
          {
            "text": "                                &lt;div id=\"tableSeasonLeagueStandings_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "text": "                            &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 123
          },
          {
            "text": "                                &lt;div class=\"card\"&gt;",
            "lineNumber": 124
          },
          {
            "text": "                                    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                                        &lt;h6&gt;${typeof t === 'function' ? t('honor_scores', 'Honor Scores') : 'Honor Scores'}&lt;/h6&gt;",
            "lineNumber": 126
          },
          {
            "text": "                                    &lt;/div&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                        &lt;!-- Individual Scores --&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"individualScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;",
            "lineNumber": 130
          },
          {
            "text": "                                            &lt;h6&gt;${typeof t === 'function' ? t('top_individual_scores', 'Top Individual Scores') : 'Top Individual Scores'}&lt;/h6&gt;",
            "lineNumber": 131
          },
          {
            "text": "                                            &lt;div id=\"individualScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 132
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 133
          },
          {
            "text": "                                        &lt;!-- Team Scores --&gt;",
            "lineNumber": 134
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"teamScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;",
            "lineNumber": 135
          },
          {
            "text": "                                            &lt;h6&gt;${typeof t === 'function' ? t('top_team_scores', 'Top Team Scores') : 'Top Team Scores'}&lt;/h6&gt;",
            "lineNumber": 136
          },
          {
            "text": "                                            &lt;div id=\"teamScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 137
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 138
          },
          {
            "text": "                                        &lt;!-- Individual Averages --&gt;",
            "lineNumber": 139
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"individualAveragesSection_",
            "lineNumber": 140
          },
          {
            "text": "        }",
            "lineNumber": 156
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          }
        ]
      },
      "score": 0.47428610920906067
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "class SeasonLeagueStandingsBlock extends BaseContentBlock {\n\n\n    renderSeasonLeagueStandings(data, season) {\n        const contentContainer = document.getElementById('seasonLeagueStandingsContent');\n        \n        if (!data || !data.leagues || data.leagues.length === 0) {\n            contentContainer.innerHTML = &#96;\n                &lt;div class=\"alert alert-info\"&gt;\n                    &lt;h6&gt;${typeof t === 'function' ? t('no_league_data_available', 'No league data available') : 'No league data available'}&lt;/h6&gt;\n                    &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${season}.&lt;/p&gt;\n                &lt;/div&gt;\n            &#96;;\n            return;\n        }\n\n        let html = '';\n        \n        // Create a card for each league\n        data.leagues.forEach(leagueData =&gt; {\n            const { league, week, standings, honor_scores } = leagueData;\n            \n            html +=\n        }\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 91
          },
          {
            "lineNumber": 92
          },
          {
            "text": "    renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "text": "        const contentContainer = document.getElementById('seasonLeagueStandingsContent');",
            "lineNumber": 94
          },
          {
            "text": "        ",
            "lineNumber": 95
          },
          {
            "text": "        if (!data || !data.leagues || data.leagues.length === 0) {",
            "lineNumber": 96
          },
          {
            "text": "            contentContainer.innerHTML = &#96;",
            "lineNumber": 97
          },
          {
            "text": "                &lt;div class=\"alert alert-info\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                    &lt;h6&gt;${typeof t === 'function' ? t('no_league_data_available', 'No league data available') : 'No league data available'}&lt;/h6&gt;",
            "lineNumber": 99
          },
          {
            "text": "                    &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${season}.&lt;/p&gt;",
            "lineNumber": 100
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "            &#96;;",
            "lineNumber": 102
          },
          {
            "text": "            return;",
            "lineNumber": 103
          },
          {
            "text": "        }",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "        let html = '';",
            "lineNumber": 106
          },
          {
            "text": "        ",
            "lineNumber": 107
          },
          {
            "text": "        // Create a card for each league",
            "lineNumber": 108
          },
          {
            "text": "        data.leagues.forEach(leagueData =&gt; {",
            "lineNumber": 109
          },
          {
            "text": "            const { league, week, standings, honor_scores } = leagueData;",
            "lineNumber": 110
          },
          {
            "text": "            ",
            "lineNumber": 111
          },
          {
            "text": "            html +=",
            "lineNumber": 112
          },
          {
            "text": "        }",
            "lineNumber": 156
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          }
        ]
      },
      "score": 0.44523361325263977
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "shouldRender(state) {\n\n    }\n\n    generateHTML(state) {\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;\n                &lt;/div&gt;\n                \n                &lt;!-- League History Table --&gt;\n                &lt;div id=\"leagueTableHistory\"&gt;\n                    &lt;div class=\"text-center py-3\"&gt;\n                        &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                            &lt;span class=\"visually-hidden\"&gt;Loading table...&lt;/span&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"card-body\"&gt;\n                    &lt;!-- Position Charts --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;!-- Positions over the course of the season --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;            \n                        &lt;!-- Points over the course of the season --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"points_in_season_progress\"&gt;Points in Season Progress&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Shared Legend --&gt;\n                    &lt;div class=\"row mt-3\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"sharedLegend\" class=\"d-flex justify-content-center flex-wrap\"&gt;\n                                &lt;!-- Legend will be dynamically inserted here --&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Points Charts --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;!-- Points per Week Chart --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"points_per_match_day\"&gt;Points per Match Day&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Average per Week Chart --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"average_per_match_day\"&gt;Average per Match Day&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamAverageScoreWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Shared Legend --&gt;\n                    &lt;div class=\"row mt-3\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"sharedLegendMiddle\" class=\"d-flex justify-content-center flex-wrap\"&gt;\n                                &lt;!-- Legend will be dynamically inserted here --&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    renderSelectionMessage() {\n        return\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "shouldRender(state) {",
            "lineNumber": 62,
            "isSignature": true
          },
          {
            "lineNumber": 64
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          },
          {
            "lineNumber": 66
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 67,
            "isSignature": true
          },
          {
            "text": "        return &#96;",
            "lineNumber": 68
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 69
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 70
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;",
            "lineNumber": 71
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "                ",
            "lineNumber": 73
          },
          {
            "text": "                &lt;!-- League History Table --&gt;",
            "lineNumber": 74
          },
          {
            "text": "                &lt;div id=\"leagueTableHistory\"&gt;",
            "lineNumber": 75
          },
          {
            "text": "                    &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "                        &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;span class=\"visually-hidden\"&gt;Loading table...&lt;/span&gt;",
            "lineNumber": 78
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 81
          },
          {
            "lineNumber": 82
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                    &lt;!-- Position Charts --&gt;",
            "lineNumber": 84
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                        &lt;!-- Positions over the course of the season --&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 93
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                        &lt;/div&gt;            ",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;!-- Points over the course of the season --&gt;",
            "lineNumber": 97
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 99
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 100
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"points_in_season_progress\"&gt;Points in Season Progress&lt;/h5&gt;",
            "lineNumber": 101
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 105
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 107
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                    ",
            "lineNumber": 109
          },
          {
            "text": "                    &lt;!-- Shared Legend --&gt;",
            "lineNumber": 110
          },
          {
            "text": "                    &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                            &lt;div id=\"sharedLegend\" class=\"d-flex justify-content-center flex-wrap\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                &lt;!-- Legend will be dynamically inserted here --&gt;",
            "lineNumber": 114
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 115
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "                    ",
            "lineNumber": 118
          },
          {
            "text": "                    &lt;!-- Points Charts --&gt;",
            "lineNumber": 119
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;!-- Points per Week Chart --&gt;",
            "lineNumber": 121
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 122
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 123
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 124
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"points_per_match_day\"&gt;Points per Match Day&lt;/h5&gt;",
            "lineNumber": 125
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 126
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 129
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 130
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 131
          },
          {
            "text": "                        &lt;!-- Average per Week Chart --&gt;",
            "lineNumber": 132
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 133
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 134
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 135
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"average_per_match_day\"&gt;Average per Match Day&lt;/h5&gt;",
            "lineNumber": 136
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 137
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 138
          },
          {
            "text": "                                    &lt;div id=\"chartTeamAverageScoreWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 139
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 140
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 141
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 142
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 143
          },
          {
            "text": "                    ",
            "lineNumber": 144
          },
          {
            "text": "                    &lt;!-- Shared Legend --&gt;",
            "lineNumber": 145
          },
          {
            "text": "                    &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 146
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 147
          },
          {
            "text": "                            &lt;div id=\"sharedLegendMiddle\" class=\"d-flex justify-content-center flex-wrap\"&gt;",
            "lineNumber": 148
          },
          {
            "text": "                                &lt;!-- Legend will be dynamically inserted here --&gt;",
            "lineNumber": 149
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 151
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 152
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 153
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 154
          },
          {
            "text": "        &#96;;",
            "lineNumber": 155
          },
          {
            "text": "    }",
            "lineNumber": 156,
            "isSignature": true
          },
          {
            "lineNumber": 157
          },
          {
            "text": "    renderSelectionMessage() {",
            "lineNumber": 158,
            "isSignature": true
          },
          {
            "text": "        return",
            "lineNumber": 159
          },
          {
            "text": "    }",
            "lineNumber": 169,
            "isSignature": true
          }
        ]
      },
      "score": 0.4428546130657196
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 47
          },
          "endPosition": {
            "line": 86
          }
        },
        "contents": "                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Season League Standings Block (Season only) --&gt;\n    &lt;div id=\"seasonLeagueStandingsContainer\"&gt;\n        &lt;!-- Season league standings content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_league_standings\"&gt;Initializing season league standings...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- League Aggregation Block (League only) --&gt;\n    &lt;div id=\"leagueAggregationContainer\"&gt;\n        &lt;!-- League aggregation content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_aggregation\"&gt;Initializing league aggregation...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- League Season Overview Block (League + Season) --&gt;\n    &lt;div id=\"leagueSeasonOverviewContainer\"&gt;\n        &lt;!-- League season overview content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_season_overview\"&gt;Initializing season overview...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 48
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 49
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "    &lt;!-- Season League Standings Block (Season only) --&gt;",
            "lineNumber": 53
          },
          {
            "text": "    &lt;div id=\"seasonLeagueStandingsContainer\"&gt;",
            "lineNumber": 54
          },
          {
            "text": "        &lt;!-- Season league standings content will be rendered here --&gt;",
            "lineNumber": 55
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 56
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 57
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 58
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 59
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_league_standings\"&gt;Initializing season league standings...&lt;/p&gt;",
            "lineNumber": 60
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 61
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "    &lt;!-- League Aggregation Block (League only) --&gt;",
            "lineNumber": 64
          },
          {
            "text": "    &lt;div id=\"leagueAggregationContainer\"&gt;",
            "lineNumber": 65
          },
          {
            "text": "        &lt;!-- League aggregation content will be rendered here --&gt;",
            "lineNumber": 66
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 67
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 68
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 69
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 70
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_aggregation\"&gt;Initializing league aggregation...&lt;/p&gt;",
            "lineNumber": 71
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "    &lt;!-- League Season Overview Block (League + Season) --&gt;",
            "lineNumber": 75
          },
          {
            "text": "    &lt;div id=\"leagueSeasonOverviewContainer\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "        &lt;!-- League season overview content will be rendered here --&gt;",
            "lineNumber": 77
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 78
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 80
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 81
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_season_overview\"&gt;Initializing season overview...&lt;/p&gt;",
            "lineNumber": 82
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 83
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;",
            "lineNumber": 86
          }
        ]
      },
      "score": 0.44089651107788086
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "class SeasonLeagueStandingsBlock extends BaseContentBlock {\n\n\n    generateHTML(state) {\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'} – ${typeof t === 'function' ? t('through_week', 'Through Week') : 'Through Week'} (${state.season})&lt;/h5&gt;\n                    &lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('week_results', 'Week Results &amp; Season Totals') : 'Week Results &amp; Season Totals'}&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div id=\"seasonLeagueStandingsContent\"&gt;\n                        &lt;div class=\"text-center py-4\"&gt;\n                            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading...') : 'Loading...'}&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;p class=\"text-muted mt-2\"&gt;${typeof t === 'function' ? t('loading_data', 'Loading data...') : 'Loading data...'}&lt;/p&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    async loadSeasonLeagueStandings(state) {\n        const { season } = state;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 47
          },
          {
            "lineNumber": 48
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "        return &#96;",
            "lineNumber": 50
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 51
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 52
          },
          {
            "text": "                    &lt;h5&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'} – ${typeof t === 'function' ? t('through_week', 'Through Week') : 'Through Week'} (${state.season})&lt;/h5&gt;",
            "lineNumber": 53
          },
          {
            "text": "                    &lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('week_results', 'Week Results &amp; Season Totals') : 'Week Results &amp; Season Totals'}&lt;/p&gt;",
            "lineNumber": 54
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 55
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 56
          },
          {
            "text": "                    &lt;div id=\"seasonLeagueStandingsContent\"&gt;",
            "lineNumber": 57
          },
          {
            "text": "                        &lt;div class=\"text-center py-4\"&gt;",
            "lineNumber": 58
          },
          {
            "text": "                            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 59
          },
          {
            "text": "                                &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading...') : 'Loading...'}&lt;/span&gt;",
            "lineNumber": 60
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 61
          },
          {
            "text": "                            &lt;p class=\"text-muted mt-2\"&gt;${typeof t === 'function' ? t('loading_data', 'Loading data...') : 'Loading data...'}&lt;/p&gt;",
            "lineNumber": 62
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 63
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 64
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 65
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 66
          },
          {
            "text": "        &#96;;",
            "lineNumber": 67
          },
          {
            "text": "    }",
            "lineNumber": 68,
            "isSignature": true
          },
          {
            "lineNumber": 69
          },
          {
            "text": "    async loadSeasonLeagueStandings(state) {",
            "lineNumber": 70,
            "isSignature": true
          },
          {
            "text": "        const { season } = state;",
            "lineNumber": 71
          },
          {
            "text": "    }",
            "lineNumber": 91,
            "isSignature": true
          }
        ]
      },
      "score": 0.4242902100086212
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "/**\n * SeasonLeagueStandingsBlock - Shows latest week standings for all leagues in a season\n * Displays when: Season is selected but no League\n */\nclass SeasonLeagueStandingsBlock extends BaseContentBlock {\n    constructor() {\n        super({\n            id: 'season-league-standings',\n            containerId: 'seasonLeagueStandingsContainer',\n            dataEndpoint: '/league/get_season_league_standings',\n            requiredFilters: ['season'],\n            title: typeof t === 'function' ? t('league_standings', 'Season League Standings') : 'Season League Standings'\n        });\n        this.dependencies = ['season'];\n        this.container = document.getElementById(this.containerId);\n    }\n\n    async render(state = {}) {\n        try\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * SeasonLeagueStandingsBlock - Shows latest week standings for all leagues in a season",
            "lineNumber": 2
          },
          {
            "text": " * Displays when: Season is selected but no League",
            "lineNumber": 3
          },
          {
            "text": " */",
            "lineNumber": 4
          },
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "text": "    constructor() {",
            "lineNumber": 6,
            "isSignature": true
          },
          {
            "text": "        super({",
            "lineNumber": 7
          },
          {
            "text": "            id: 'season-league-standings',",
            "lineNumber": 8
          },
          {
            "text": "            containerId: 'seasonLeagueStandingsContainer',",
            "lineNumber": 9
          },
          {
            "text": "            dataEndpoint: '/league/get_season_league_standings',",
            "lineNumber": 10
          },
          {
            "text": "            requiredFilters: ['season'],",
            "lineNumber": 11
          },
          {
            "text": "            title: typeof t === 'function' ? t('league_standings', 'Season League Standings') : 'Season League Standings'",
            "lineNumber": 12
          },
          {
            "text": "        });",
            "lineNumber": 13
          },
          {
            "text": "        this.dependencies = ['season'];",
            "lineNumber": 14
          },
          {
            "text": "        this.container = document.getElementById(this.containerId);",
            "lineNumber": 15
          },
          {
            "text": "    }",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "lineNumber": 17
          },
          {
            "text": "    async render(state = {}) {",
            "lineNumber": 18,
            "isSignature": true
          },
          {
            "text": "        try",
            "lineNumber": 19
          },
          {
            "text": "    }",
            "lineNumber": 38,
            "isSignature": true
          }
        ]
      },
      "score": 0.42064300179481506
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "renderSeasonLeagueStandings(data, season) {\n\n        \n        // Create tables and honor scores for each league\n        data.leagues.forEach(leagueData =&gt; {\n            const { league, standings, honor_scores } = leagueData;\n            const tableId = &#96;tableSeasonLeagueStandings_${league.replace(/\\s+/g, '_')}&#96;;\n            const honorScoresId = &#96;honorScoresSeasonLeague_${league.replace(/\\s+/g, '_')}&#96;;\n            \n            // Create standings table\n            if (standings &amp;&amp; typeof createTableBootstrap3 === 'function') {\n                console.log(&#96;Creating table for league ${league} with ${standings.data ? standings.data.length : 0} rows&#96;);\n                createTableBootstrap3(tableId, standings, {\n                    disablePositionCircle: false, // Show position circles for league standings\n                    enableSpecialRowStyling: true,\n                    compact: true\n                });\n            } else {\n                document.getElementById(tableId).innerHTML = &#96;\n                    &lt;div class=\"alert alert-warning\"&gt;\n                        &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${league}.&lt;/p&gt;\n                    &lt;/div&gt;\n                &#96;;\n            }\n            \n            // Populate honor scores\n            this.populateHonorScores(honor_scores, null, league);\n        });\n    }\n\n    populateHonorScores(honorScoresData, containerId, league) {\n        const leagueId = league.replace(/\\s+/g, '_');\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 93,
                "column": 5
              },
              "endPosition": {
                "line": 94,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "lineNumber": 158
          },
          {
            "text": "        ",
            "lineNumber": 159
          },
          {
            "text": "        // Create tables and honor scores for each league",
            "lineNumber": 160
          },
          {
            "text": "        data.leagues.forEach(leagueData =&gt; {",
            "lineNumber": 161
          },
          {
            "text": "            const { league, standings, honor_scores } = leagueData;",
            "lineNumber": 162
          },
          {
            "text": "            const tableId = &#96;tableSeasonLeagueStandings_${league.replace(/\\s+/g, '_')}&#96;;",
            "lineNumber": 163
          },
          {
            "text": "            const honorScoresId = &#96;honorScoresSeasonLeague_${league.replace(/\\s+/g, '_')}&#96;;",
            "lineNumber": 164
          },
          {
            "text": "            ",
            "lineNumber": 165
          },
          {
            "text": "            // Create standings table",
            "lineNumber": 166
          },
          {
            "text": "            if (standings &amp;&amp; typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 167
          },
          {
            "text": "                console.log(&#96;Creating table for league ${league} with ${standings.data ? standings.data.length : 0} rows&#96;);",
            "lineNumber": 168
          },
          {
            "text": "                createTableBootstrap3(tableId, standings, {",
            "lineNumber": 169
          },
          {
            "text": "                    disablePositionCircle: false, // Show position circles for league standings",
            "lineNumber": 170
          },
          {
            "text": "                    enableSpecialRowStyling: true,",
            "lineNumber": 171
          },
          {
            "text": "                    compact: true",
            "lineNumber": 172
          },
          {
            "text": "                });",
            "lineNumber": 173
          },
          {
            "text": "            } else {",
            "lineNumber": 174
          },
          {
            "text": "                document.getElementById(tableId).innerHTML = &#96;",
            "lineNumber": 175
          },
          {
            "text": "                    &lt;div class=\"alert alert-warning\"&gt;",
            "lineNumber": 176
          },
          {
            "text": "                        &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${league}.&lt;/p&gt;",
            "lineNumber": 177
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 178
          },
          {
            "text": "                &#96;;",
            "lineNumber": 179
          },
          {
            "text": "            }",
            "lineNumber": 180
          },
          {
            "text": "            ",
            "lineNumber": 181
          },
          {
            "text": "            // Populate honor scores",
            "lineNumber": 182
          },
          {
            "text": "            this.populateHonorScores(honor_scores, null, league);",
            "lineNumber": 183
          },
          {
            "text": "        });",
            "lineNumber": 184
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    populateHonorScores(honorScoresData, containerId, league) {",
            "lineNumber": 187,
            "isSignature": true
          },
          {
            "text": "        const leagueId = league.replace(/\\s+/g, '_');",
            "lineNumber": 188
          },
          {
            "text": "    }",
            "lineNumber": 279,
            "isSignature": true
          }
        ]
      },
      "score": 0.42006760835647583
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block content %}\n    {% include \"components/tables.html\" %}\n    {% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n\n    &lt;!-- Filter Controls --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;!-- Selection Area --&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;\n                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row mt-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;\n                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Rounds/Games will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-8\"&gt;\n                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block content %}",
            "lineNumber": 3
          },
          {
            "text": "    {% include \"components/tables.html\" %}",
            "lineNumber": 4
          },
          {
            "text": "    {% include \"components/charts.html\" %}",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "    &lt;!-- Filter Controls --&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;div class=\"card\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 11
          },
          {
            "text": "            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;",
            "lineNumber": 12
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;!-- Selection Area --&gt;",
            "lineNumber": 15
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;",
            "lineNumber": 18
          },
          {
            "text": "                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 21
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 23
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;",
            "lineNumber": 24
          },
          {
            "text": "                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 27
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 28
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;",
            "lineNumber": 30
          },
          {
            "text": "                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 33
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 34
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "            &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 36
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 37
          },
          {
            "text": "                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;",
            "lineNumber": 38
          },
          {
            "text": "                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                        &lt;!-- Rounds/Games will be inserted here --&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 41
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 42
          },
          {
            "text": "                &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 43
          },
          {
            "text": "                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;",
            "lineNumber": 44
          },
          {
            "text": "                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 45
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 46
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 48
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 49
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.41009360551834106
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "class SeasonLeagueStandingsBlock extends BaseContentBlock {\n\n\n    async render(state = {}) {\n        try {\n            // Check if required dependencies are met and no league is selected\n            if (!this.shouldRender(state)) {\n                this.hide();\n                return;\n            }\n\n            this.show();\n            const html = this.generateHTML(state);\n            this.container.innerHTML = html;\n            \n            // Load season league standings data\n            await this.loadSeasonLeagueStandings(state);\n            \n            console.log('season-league-standings: Season league standings rendered');\n        } catch (error) {\n            console.error('Error rendering season league standings:', error);\n            this.container.innerHTML = this.renderError('Failed to load season league standings data');\n        }\n    }\n\n    shouldRender(state) {\n        // Show only when season is selected but no league (handle both null and string \"null\")\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 16
          },
          {
            "lineNumber": 17
          },
          {
            "text": "    async render(state = {}) {",
            "lineNumber": 18,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 19
          },
          {
            "text": "            // Check if required dependencies are met and no league is selected",
            "lineNumber": 20
          },
          {
            "text": "            if (!this.shouldRender(state)) {",
            "lineNumber": 21
          },
          {
            "text": "                this.hide();",
            "lineNumber": 22
          },
          {
            "text": "                return;",
            "lineNumber": 23
          },
          {
            "text": "            }",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "text": "            this.show();",
            "lineNumber": 26
          },
          {
            "text": "            const html = this.generateHTML(state);",
            "lineNumber": 27
          },
          {
            "text": "            this.container.innerHTML = html;",
            "lineNumber": 28
          },
          {
            "text": "            ",
            "lineNumber": 29
          },
          {
            "text": "            // Load season league standings data",
            "lineNumber": 30
          },
          {
            "text": "            await this.loadSeasonLeagueStandings(state);",
            "lineNumber": 31
          },
          {
            "text": "            ",
            "lineNumber": 32
          },
          {
            "text": "            console.log('season-league-standings: Season league standings rendered');",
            "lineNumber": 33
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 34
          },
          {
            "text": "            console.error('Error rendering season league standings:', error);",
            "lineNumber": 35
          },
          {
            "text": "            this.container.innerHTML = this.renderError('Failed to load season league standings data');",
            "lineNumber": 36
          },
          {
            "text": "        }",
            "lineNumber": 37
          },
          {
            "text": "    }",
            "lineNumber": 38,
            "isSignature": true
          },
          {
            "lineNumber": 39
          },
          {
            "text": "    shouldRender(state) {",
            "lineNumber": 40,
            "isSignature": true
          },
          {
            "text": "        // Show only when season is selected but no league (handle both null and string \"null\")",
            "lineNumber": 41
          },
          {
            "text": "    }",
            "lineNumber": 47,
            "isSignature": true
          }
        ]
      },
      "score": 0.39010488986968994
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\content.html",
        "range": {
          "startPosition": {
            "line": 64
          },
          "endPosition": {
            "line": 126
          }
        },
        "contents": "            &lt;div class=\"col-md-4\"&gt;\n                &lt;div class=\"card\"&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;h5 class=\"card-title\"&gt;Season Records&lt;/h5&gt;\n                        &lt;table class=\"table table-sm\"&gt;\n                            &lt;tbody&gt;\n                                &lt;tr&gt;&lt;th&gt;Best Season:&lt;/th&gt;&lt;td id=\"bestSeason\"&gt;-&lt;/td&gt;&lt;/tr&gt;\n                                &lt;tr&gt;&lt;th&gt;Most Improved:&lt;/th&gt;&lt;td id=\"mostImproved\"&gt;-&lt;/td&gt;&lt;/tr&gt;\n                            &lt;/tbody&gt;\n                        &lt;/table&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;!-- Season Stats Card --&gt;\n&lt;div class=\"card mb-4\"&gt;\n    &lt;div class=\"card-header\"&gt;\n        &lt;h4&gt;Season Statistics&lt;/h4&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-body\"&gt;\n        &lt;div id=\"seasonStats\"&gt;\n            &lt;table class=\"table table-striped\"&gt;\n                &lt;thead&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;Season&lt;/th&gt;\n                        &lt;th&gt;Games&lt;/th&gt;\n                        &lt;th&gt;Total Pins&lt;/th&gt;\n                        &lt;th&gt;Average&lt;/th&gt;\n                        &lt;th&gt;Dev. from Avg&lt;/th&gt;\n                        &lt;th&gt;vs Last Season&lt;/th&gt;\n                        &lt;th&gt;Best Game&lt;/th&gt;\n                        &lt;th&gt;Worst Game&lt;/th&gt;\n                    &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody id=\"seasonStatsBody\"&gt;\n                    &lt;!-- Season stats will be populated here --&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;!-- Existing trend chart card --&gt;\n&lt;div class=\"card mt-4\"&gt;\n    &lt;div class=\"card-header\"&gt;\n        &lt;h5&gt;Performance Trend&lt;/h5&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-body\"&gt;\n        &lt;canvas id=\"trendChart\" height=\"300\"&gt;&lt;/canvas&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endblock %}\n\n{% block scripts %}\n&lt;script src=\"https://cdn.jsdelivr.net/npm/chart.js\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\ndocument.addEventListener('DOMContentLoaded', function() {\n    const playerInput = document.getElementById('playerInput');",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 65
          },
          {
            "text": "                &lt;div class=\"card\"&gt;",
            "lineNumber": 66
          },
          {
            "text": "                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 67
          },
          {
            "text": "                        &lt;h5 class=\"card-title\"&gt;Season Records&lt;/h5&gt;",
            "lineNumber": 68
          },
          {
            "text": "                        &lt;table class=\"table table-sm\"&gt;",
            "lineNumber": 69
          },
          {
            "text": "                            &lt;tbody&gt;",
            "lineNumber": 70
          },
          {
            "text": "                                &lt;tr&gt;&lt;th&gt;Best Season:&lt;/th&gt;&lt;td id=\"bestSeason\"&gt;-&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 71
          },
          {
            "text": "                                &lt;tr&gt;&lt;th&gt;Most Improved:&lt;/th&gt;&lt;td id=\"mostImproved\"&gt;-&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 72
          },
          {
            "text": "                            &lt;/tbody&gt;",
            "lineNumber": 73
          },
          {
            "text": "                        &lt;/table&gt;",
            "lineNumber": 74
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 75
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 76
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 77
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 78
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "&lt;!-- Season Stats Card --&gt;",
            "lineNumber": 82
          },
          {
            "text": "&lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 84
          },
          {
            "text": "        &lt;h4&gt;Season Statistics&lt;/h4&gt;",
            "lineNumber": 85
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "        &lt;div id=\"seasonStats\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "            &lt;table class=\"table table-striped\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                &lt;thead&gt;",
            "lineNumber": 90
          },
          {
            "text": "                    &lt;tr&gt;",
            "lineNumber": 91
          },
          {
            "text": "                        &lt;th&gt;Season&lt;/th&gt;",
            "lineNumber": 92
          },
          {
            "text": "                        &lt;th&gt;Games&lt;/th&gt;",
            "lineNumber": 93
          },
          {
            "text": "                        &lt;th&gt;Total Pins&lt;/th&gt;",
            "lineNumber": 94
          },
          {
            "text": "                        &lt;th&gt;Average&lt;/th&gt;",
            "lineNumber": 95
          },
          {
            "text": "                        &lt;th&gt;Dev. from Avg&lt;/th&gt;",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;th&gt;vs Last Season&lt;/th&gt;",
            "lineNumber": 97
          },
          {
            "text": "                        &lt;th&gt;Best Game&lt;/th&gt;",
            "lineNumber": 98
          },
          {
            "text": "                        &lt;th&gt;Worst Game&lt;/th&gt;",
            "lineNumber": 99
          },
          {
            "text": "                    &lt;/tr&gt;",
            "lineNumber": 100
          },
          {
            "text": "                &lt;/thead&gt;",
            "lineNumber": 101
          },
          {
            "text": "                &lt;tbody id=\"seasonStatsBody\"&gt;",
            "lineNumber": 102
          },
          {
            "text": "                    &lt;!-- Season stats will be populated here --&gt;",
            "lineNumber": 103
          },
          {
            "text": "                &lt;/tbody&gt;",
            "lineNumber": 104
          },
          {
            "text": "            &lt;/table&gt;",
            "lineNumber": 105
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 107
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "lineNumber": 109
          },
          {
            "text": "&lt;!-- Existing trend chart card --&gt;",
            "lineNumber": 110
          },
          {
            "text": "&lt;div class=\"card mt-4\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "        &lt;h5&gt;Performance Trend&lt;/h5&gt;",
            "lineNumber": 113
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 114
          },
          {
            "text": "    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 115
          },
          {
            "text": "        &lt;canvas id=\"trendChart\" height=\"300\"&gt;&lt;/canvas&gt;",
            "lineNumber": 116
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "{% endblock %}",
            "lineNumber": 119
          },
          {
            "lineNumber": 120
          },
          {
            "text": "{% block scripts %}",
            "lineNumber": 121
          },
          {
            "text": "&lt;script src=\"https://cdn.jsdelivr.net/npm/chart.js\"&gt;&lt;/script&gt;",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 124
          },
          {
            "text": "document.addEventListener('DOMContentLoaded', function() {",
            "lineNumber": 125
          },
          {
            "text": "    const playerInput = document.getElementById('playerInput');",
            "lineNumber": 126
          }
        ]
      },
      "score": 0.3873789310455322
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "class SeasonLeagueStandingsBlock extends BaseContentBlock {\n\n\n    shouldRender(state) {\n        // Show only when season is selected but no league (handle both null and string \"null\")\n        const hasSeason = state.season &amp;&amp; state.season !== '' &amp;&amp; state.season !== 'null';\n        const hasLeague = state.league &amp;&amp; state.league !== '' &amp;&amp; state.league !== 'null';\n        const shouldShow = hasSeason &amp;&amp; !hasLeague;\n        console.log(&#96;SeasonLeagueStandingsBlock shouldRender: season=\"${state.season}\", league=\"${state.league}\", result=${shouldShow}&#96;);\n        return shouldShow;\n    }\n\n    generateHTML(state) {\n        return\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "    shouldRender(state) {",
            "lineNumber": 40,
            "isSignature": true
          },
          {
            "text": "        // Show only when season is selected but no league (handle both null and string \"null\")",
            "lineNumber": 41
          },
          {
            "text": "        const hasSeason = state.season &amp;&amp; state.season !== '' &amp;&amp; state.season !== 'null';",
            "lineNumber": 42
          },
          {
            "text": "        const hasLeague = state.league &amp;&amp; state.league !== '' &amp;&amp; state.league !== 'null';",
            "lineNumber": 43
          },
          {
            "text": "        const shouldShow = hasSeason &amp;&amp; !hasLeague;",
            "lineNumber": 44
          },
          {
            "text": "        console.log(&#96;SeasonLeagueStandingsBlock shouldRender: season=\"${state.season}\", league=\"${state.league}\", result=${shouldShow}&#96;);",
            "lineNumber": 45
          },
          {
            "text": "        return shouldShow;",
            "lineNumber": 46
          },
          {
            "text": "    }",
            "lineNumber": 47,
            "isSignature": true
          },
          {
            "lineNumber": 48
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "        return",
            "lineNumber": 50
          },
          {
            "text": "    }",
            "lineNumber": 68,
            "isSignature": true
          }
        ]
      },
      "score": 0.3858771324157715
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n 'Match Schedule'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('position_in_season_progress', 'Position in Season Progress') : 'Position in Season Progress'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 3rd Row: Points per Match Day + Points in Season Progress --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('points_in_season_progress', 'Points in Season Progress') : 'Points in Season Progress'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"individualAveragesCard\"&gt;\n                                &lt;div class=\"text-center py-3\"&gt;\n                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                        &lt;span class=\"visually-hidden\"&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 51,
                "column": 5
              },
              "endPosition": {
                "line": 52,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": " 'Match Schedule'}&lt;/p&gt;--&gt;",
            "lineNumber": 81
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 82
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 85
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 87
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('position_in_season_progress', 'Position in Season Progress') : 'Position in Season Progress'}&lt;/h6&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 93
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 97
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 98
          },
          {
            "lineNumber": 99
          },
          {
            "text": "                    &lt;!-- 3rd Row: Points per Match Day + Points in Season Progress --&gt;",
            "lineNumber": 100
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 101
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 102
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 104
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'}&lt;/h6&gt;",
            "lineNumber": 105
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 109
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 110
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 111
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 114
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('points_in_season_progress', 'Points in Season Progress') : 'Points in Season Progress'}&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 119
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;",
            "lineNumber": 124
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 126
          },
          {
            "text": "                            &lt;div id=\"individualAveragesCard\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;span class=\"visually-hidden\"&gt;",
            "lineNumber": 130
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          }
        ]
      },
      "score": 0.3765074908733368
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "class SeasonLeagueStandingsBlock extends BaseContentBlock {\n\n\n    async loadSeasonLeagueStandings(state) {\n        const { season } = state;\n        \n        try {\n            console.log(&#96;Loading season league standings for season: ${season}&#96;);\n            \n            const response = await fetchWithDatabase(&#96;/league/get_season_league_standings?season=${season}&#96;);\n            \n            if (!response.ok) {\n                throw new Error(&#96;HTTP ${response.status}: ${response.statusText}&#96;);\n            }\n            \n            const data = await response.json();\n            console.log('Season league standings data received:', data);\n            \n            this.renderSeasonLeagueStandings(data, season);\n            \n        } catch (error) {\n            console.error('Error loading season league standings:', error);\n            this.renderError('Failed to load season league standings data');\n        }\n    }\n\n    renderSeasonLeagueStandings(data, season) {\n        const contentContainer = document.getElementById('seasonLeagueStandingsContent');\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 68
          },
          {
            "lineNumber": 69
          },
          {
            "text": "    async loadSeasonLeagueStandings(state) {",
            "lineNumber": 70,
            "isSignature": true
          },
          {
            "text": "        const { season } = state;",
            "lineNumber": 71
          },
          {
            "text": "        ",
            "lineNumber": 72
          },
          {
            "text": "        try {",
            "lineNumber": 73
          },
          {
            "text": "            console.log(&#96;Loading season league standings for season: ${season}&#96;);",
            "lineNumber": 74
          },
          {
            "text": "            ",
            "lineNumber": 75
          },
          {
            "text": "            const response = await fetchWithDatabase(&#96;/league/get_season_league_standings?season=${season}&#96;);",
            "lineNumber": 76
          },
          {
            "text": "            ",
            "lineNumber": 77
          },
          {
            "text": "            if (!response.ok) {",
            "lineNumber": 78
          },
          {
            "text": "                throw new Error(&#96;HTTP ${response.status}: ${response.statusText}&#96;);",
            "lineNumber": 79
          },
          {
            "text": "            }",
            "lineNumber": 80
          },
          {
            "text": "            ",
            "lineNumber": 81
          },
          {
            "text": "            const data = await response.json();",
            "lineNumber": 82
          },
          {
            "text": "            console.log('Season league standings data received:', data);",
            "lineNumber": 83
          },
          {
            "text": "            ",
            "lineNumber": 84
          },
          {
            "text": "            this.renderSeasonLeagueStandings(data, season);",
            "lineNumber": 85
          },
          {
            "text": "            ",
            "lineNumber": 86
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 87
          },
          {
            "text": "            console.error('Error loading season league standings:', error);",
            "lineNumber": 88
          },
          {
            "text": "            this.renderError('Failed to load season league standings data');",
            "lineNumber": 89
          },
          {
            "text": "        }",
            "lineNumber": 90
          },
          {
            "text": "    }",
            "lineNumber": 91,
            "isSignature": true
          },
          {
            "lineNumber": 92
          },
          {
            "text": "    renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "text": "        const contentContainer = document.getElementById('seasonLeagueStandingsContent');",
            "lineNumber": 94
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          }
        ]
      },
      "score": 0.376134991645813
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\content.html",
        "range": {
          "startPosition": {
            "line": 249
          },
          "endPosition": {
            "line": 286
          }
        },
        "contents": "        if (stats.most_improved &amp;&amp; stats.most_improved.season &amp;&amp; stats.most_improved.improvement !== null) {\n            document.getElementById('mostImproved').textContent = \n                &#96;${stats.most_improved.season} (+${stats.most_improved.improvement.toFixed(2)})&#96;;\n        } else {\n            document.getElementById('mostImproved').textContent = 'N/A';\n        }\n    }\n\n    function displaySeasonStats(seasons) {\n        const tbody = document.getElementById('seasonStatsBody');\n        if (!seasons || !Array.isArray(seasons) || seasons.length === 0) {\n            tbody.innerHTML = '&lt;tr&gt;&lt;td colspan=\"8\" class=\"text-center text-muted\"&gt;No season data available&lt;/td&gt;&lt;/tr&gt;';\n            return;\n        }\n        \n        tbody.innerHTML = seasons.map(season =&gt; &#96;\n            &lt;tr&gt;\n                &lt;td&gt;${season.season || '-'}&lt;/td&gt;\n                &lt;td&gt;${season.games || 0}&lt;/td&gt;\n                &lt;td&gt;${(season.total_pins || 0).toLocaleString()}&lt;/td&gt;\n                &lt;td&gt;${(season.average || 0).toFixed(2)}&lt;/td&gt;\n                &lt;td&gt;${(season.dev_from_avg || 0) &gt; 0 ? '+' : ''}${(season.dev_from_avg || 0).toFixed(2)}&lt;/td&gt;\n                &lt;td&gt;${season.vs_last_season !== null ? (season.vs_last_season &gt; 0 ? '+' : '') + season.vs_last_season.toFixed(2) : '-'}&lt;/td&gt;\n                &lt;td title=\"${season.best_game?.date || ''} - ${season.best_game?.event || ''}\"&gt;${season.best_game?.score || '-'}&lt;/td&gt;\n                &lt;td title=\"${season.worst_game?.date || ''} - ${season.worst_game?.event || ''}\"&gt;${season.worst_game?.score || '-'}&lt;/td&gt;\n            &lt;/tr&gt;\n        &#96;).join('');\n    }\n\n    function updateTrendChart(data) {\n        const ctx = document.getElementById('trendChart');\n        const existingChart = Chart.getChart(ctx);\n        if (existingChart) {\n            existingChart.destroy();\n        }\n\n        // Check if we have valid data for the chart",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        if (stats.most_improved &amp;&amp; stats.most_improved.season &amp;&amp; stats.most_improved.improvement !== null) {",
            "lineNumber": 250
          },
          {
            "text": "            document.getElementById('mostImproved').textContent = ",
            "lineNumber": 251
          },
          {
            "text": "                &#96;${stats.most_improved.season} (+${stats.most_improved.improvement.toFixed(2)})&#96;;",
            "lineNumber": 252
          },
          {
            "text": "        } else {",
            "lineNumber": 253
          },
          {
            "text": "            document.getElementById('mostImproved').textContent = 'N/A';",
            "lineNumber": 254
          },
          {
            "text": "        }",
            "lineNumber": 255
          },
          {
            "text": "    }",
            "lineNumber": 256
          },
          {
            "lineNumber": 257
          },
          {
            "text": "    function displaySeasonStats(seasons) {",
            "lineNumber": 258
          },
          {
            "text": "        const tbody = document.getElementById('seasonStatsBody');",
            "lineNumber": 259
          },
          {
            "text": "        if (!seasons || !Array.isArray(seasons) || seasons.length === 0) {",
            "lineNumber": 260
          },
          {
            "text": "            tbody.innerHTML = '&lt;tr&gt;&lt;td colspan=\"8\" class=\"text-center text-muted\"&gt;No season data available&lt;/td&gt;&lt;/tr&gt;';",
            "lineNumber": 261
          },
          {
            "text": "            return;",
            "lineNumber": 262
          },
          {
            "text": "        }",
            "lineNumber": 263
          },
          {
            "text": "        ",
            "lineNumber": 264
          },
          {
            "text": "        tbody.innerHTML = seasons.map(season =&gt; &#96;",
            "lineNumber": 265
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 266
          },
          {
            "text": "                &lt;td&gt;${season.season || '-'}&lt;/td&gt;",
            "lineNumber": 267
          },
          {
            "text": "                &lt;td&gt;${season.games || 0}&lt;/td&gt;",
            "lineNumber": 268
          },
          {
            "text": "                &lt;td&gt;${(season.total_pins || 0).toLocaleString()}&lt;/td&gt;",
            "lineNumber": 269
          },
          {
            "text": "                &lt;td&gt;${(season.average || 0).toFixed(2)}&lt;/td&gt;",
            "lineNumber": 270
          },
          {
            "text": "                &lt;td&gt;${(season.dev_from_avg || 0) &gt; 0 ? '+' : ''}${(season.dev_from_avg || 0).toFixed(2)}&lt;/td&gt;",
            "lineNumber": 271
          },
          {
            "text": "                &lt;td&gt;${season.vs_last_season !== null ? (season.vs_last_season &gt; 0 ? '+' : '') + season.vs_last_season.toFixed(2) : '-'}&lt;/td&gt;",
            "lineNumber": 272
          },
          {
            "text": "                &lt;td title=\"${season.best_game?.date || ''} - ${season.best_game?.event || ''}\"&gt;${season.best_game?.score || '-'}&lt;/td&gt;",
            "lineNumber": 273
          },
          {
            "text": "                &lt;td title=\"${season.worst_game?.date || ''} - ${season.worst_game?.event || ''}\"&gt;${season.worst_game?.score || '-'}&lt;/td&gt;",
            "lineNumber": 274
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 275
          },
          {
            "text": "        &#96;).join('');",
            "lineNumber": 276
          },
          {
            "text": "    }",
            "lineNumber": 277
          },
          {
            "lineNumber": 278
          },
          {
            "text": "    function updateTrendChart(data) {",
            "lineNumber": 279
          },
          {
            "text": "        const ctx = document.getElementById('trendChart');",
            "lineNumber": 280
          },
          {
            "text": "        const existingChart = Chart.getChart(ctx);",
            "lineNumber": 281
          },
          {
            "text": "        if (existingChart) {",
            "lineNumber": 282
          },
          {
            "text": "            existingChart.destroy();",
            "lineNumber": 283
          },
          {
            "text": "        }",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "        // Check if we have valid data for the chart",
            "lineNumber": 286
          }
        ]
      },
      "score": 0.3738104999065399
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    async loadSeasonData(state) {\n        const { league, season } = state;\n        \n        try {\n            // Load existing endpoints first, handle missing ones gracefully\n            const dataPromises = [];\n            \n            // Always try to load league standings (existing endpoint)\n            dataPromises.push(\n                this.loadLeagueStandings(league, season).catch(error =&gt; {\n                    console.warn('Could not load league standings:', error);\n                    return null;\n                })\n            );\n            \n            // Always try to load team points (existing endpoint)\n            dataPromises.push(\n                this.loadTeamPoints(league, season).catch(error =&gt; {\n                    console.warn('Could not load team points:', error);\n                    return null;\n                })\n            );\n            \n            // Always try to load team positions (existing endpoint)\n            dataPromises.push(\n                this.loadTeamPositions(league, season).catch(error =&gt; {\n                    console.warn('Could not load team positions:', error);\n                    return null;\n                })\n            );\n            \n            // Try optional endpoints with fallbacks\n            dataPromises.push(\n                this.loadTimetable(league, season).catch(error =&gt; {\n                    console.warn('Timetable endpoint not available, creating placeholder');\n                    return this.createMockTimetable(season);\n                })\n            );\n            \n            const [standingsData, pointsData, positionsData, timetableData] = await Promise.all(dataPromises);\n\n            // Create components with available data\n            if (timetableData) this.createTimetable(timetableData);\n            if (standingsData) this.createStandingsTable(standingsData);\n            if (pointsData) {\n                this.createPointsChart(pointsData);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    async loadSeasonData(state) {",
            "lineNumber": 148,
            "isSignature": true
          },
          {
            "text": "        const { league, season } = state;",
            "lineNumber": 149
          },
          {
            "text": "        ",
            "lineNumber": 150
          },
          {
            "text": "        try {",
            "lineNumber": 151
          },
          {
            "text": "            // Load existing endpoints first, handle missing ones gracefully",
            "lineNumber": 152
          },
          {
            "text": "            const dataPromises = [];",
            "lineNumber": 153
          },
          {
            "text": "            ",
            "lineNumber": 154
          },
          {
            "text": "            // Always try to load league standings (existing endpoint)",
            "lineNumber": 155
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 156
          },
          {
            "text": "                this.loadLeagueStandings(league, season).catch(error =&gt; {",
            "lineNumber": 157
          },
          {
            "text": "                    console.warn('Could not load league standings:', error);",
            "lineNumber": 158
          },
          {
            "text": "                    return null;",
            "lineNumber": 159
          },
          {
            "text": "                })",
            "lineNumber": 160
          },
          {
            "text": "            );",
            "lineNumber": 161
          },
          {
            "text": "            ",
            "lineNumber": 162
          },
          {
            "text": "            // Always try to load team points (existing endpoint)",
            "lineNumber": 163
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 164
          },
          {
            "text": "                this.loadTeamPoints(league, season).catch(error =&gt; {",
            "lineNumber": 165
          },
          {
            "text": "                    console.warn('Could not load team points:', error);",
            "lineNumber": 166
          },
          {
            "text": "                    return null;",
            "lineNumber": 167
          },
          {
            "text": "                })",
            "lineNumber": 168
          },
          {
            "text": "            );",
            "lineNumber": 169
          },
          {
            "text": "            ",
            "lineNumber": 170
          },
          {
            "text": "            // Always try to load team positions (existing endpoint)",
            "lineNumber": 171
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 172
          },
          {
            "text": "                this.loadTeamPositions(league, season).catch(error =&gt; {",
            "lineNumber": 173
          },
          {
            "text": "                    console.warn('Could not load team positions:', error);",
            "lineNumber": 174
          },
          {
            "text": "                    return null;",
            "lineNumber": 175
          },
          {
            "text": "                })",
            "lineNumber": 176
          },
          {
            "text": "            );",
            "lineNumber": 177
          },
          {
            "text": "            ",
            "lineNumber": 178
          },
          {
            "text": "            // Try optional endpoints with fallbacks",
            "lineNumber": 179
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 180
          },
          {
            "text": "                this.loadTimetable(league, season).catch(error =&gt; {",
            "lineNumber": 181
          },
          {
            "text": "                    console.warn('Timetable endpoint not available, creating placeholder');",
            "lineNumber": 182
          },
          {
            "text": "                    return this.createMockTimetable(season);",
            "lineNumber": 183
          },
          {
            "text": "                })",
            "lineNumber": 184
          },
          {
            "text": "            );",
            "lineNumber": 185
          },
          {
            "text": "            ",
            "lineNumber": 186
          },
          {
            "text": "            const [standingsData, pointsData, positionsData, timetableData] = await Promise.all(dataPromises);",
            "lineNumber": 187
          },
          {
            "lineNumber": 188
          },
          {
            "text": "            // Create components with available data",
            "lineNumber": 189
          },
          {
            "text": "            if (timetableData) this.createTimetable(timetableData);",
            "lineNumber": 190
          },
          {
            "text": "            if (standingsData) this.createStandingsTable(standingsData);",
            "lineNumber": 191
          },
          {
            "text": "            if (pointsData) {",
            "lineNumber": 192
          },
          {
            "text": "                this.createPointsChart(pointsData);",
            "lineNumber": 193
          },
          {
            "text": "    }",
            "lineNumber": 207,
            "isSignature": true
          }
        ]
      },
      "score": 0.3713817000389099
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": "class LeagueService:\ndef get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':\n\n            )\n\n    def get_season_league_standings(self, season: str) -&gt; Dict[str, Any]:\n        \"\"\"\n        Get latest week standings for all leagues in a season.\n        \n        Args:\n            season: The season identifier\n            \n        Returns:\n            Dictionary with leagues and their latest week standings\n        \"\"\"\n        try:\n            # Get all leagues that have data for this season\n            league_filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.computed_data: {'value': False, 'operator': 'eq'}\n            }\n            \n            # Get all leagues for this season\n            leagues_data = self.adapter.get_filtered_data(\n                columns=[Columns.league_name], \n                filters=league_filters\n            )\n            \n            if leagues_data.empty:\n                return {\"leagues\": []}\n            \n            leagues = sorted(leagues_data[Columns.league_name].unique())\n            \n            # Get standings for each league's latest week\n            league_standings = []\n            \n            for league in",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':",
            "lineNumber": 3035
          },
          {
            "lineNumber": 3371
          },
          {
            "text": "            )",
            "lineNumber": 3372
          },
          {
            "lineNumber": 3373
          },
          {
            "text": "    def get_season_league_standings(self, season: str) -&gt; Dict[str, Any]:",
            "lineNumber": 3374
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 3375
          },
          {
            "text": "        Get latest week standings for all leagues in a season.",
            "lineNumber": 3376
          },
          {
            "text": "        ",
            "lineNumber": 3377
          },
          {
            "text": "        Args:",
            "lineNumber": 3378
          },
          {
            "text": "            season: The season identifier",
            "lineNumber": 3379
          },
          {
            "text": "            ",
            "lineNumber": 3380
          },
          {
            "text": "        Returns:",
            "lineNumber": 3381
          },
          {
            "text": "            Dictionary with leagues and their latest week standings",
            "lineNumber": 3382
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 3383
          },
          {
            "text": "        try:",
            "lineNumber": 3384
          },
          {
            "text": "            # Get all leagues that have data for this season",
            "lineNumber": 3385
          },
          {
            "text": "            league_filters = {",
            "lineNumber": 3386
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 3387
          },
          {
            "text": "                Columns.computed_data: {'value': False, 'operator': 'eq'}",
            "lineNumber": 3388
          },
          {
            "text": "            }",
            "lineNumber": 3389
          },
          {
            "text": "            ",
            "lineNumber": 3390
          },
          {
            "text": "            # Get all leagues for this season",
            "lineNumber": 3391
          },
          {
            "text": "            leagues_data = self.adapter.get_filtered_data(",
            "lineNumber": 3392
          },
          {
            "text": "                columns=[Columns.league_name], ",
            "lineNumber": 3393
          },
          {
            "text": "                filters=league_filters",
            "lineNumber": 3394
          },
          {
            "text": "            )",
            "lineNumber": 3395
          },
          {
            "text": "            ",
            "lineNumber": 3396
          },
          {
            "text": "            if leagues_data.empty:",
            "lineNumber": 3397
          },
          {
            "text": "                return {\"leagues\": []}",
            "lineNumber": 3398
          },
          {
            "text": "            ",
            "lineNumber": 3399
          },
          {
            "text": "            leagues = sorted(leagues_data[Columns.league_name].unique())",
            "lineNumber": 3400
          },
          {
            "text": "            ",
            "lineNumber": 3401
          },
          {
            "text": "            # Get standings for each league's latest week",
            "lineNumber": 3402
          },
          {
            "text": "            league_standings = []",
            "lineNumber": 3403
          },
          {
            "text": "            ",
            "lineNumber": 3404
          },
          {
            "text": "            for league in",
            "lineNumber": 3405
          }
        ]
      },
      "score": 0.3683125972747803
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\test.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 51,
            "column": 12
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block title %}API Test Page{% endblock %}\n\n{% block content %}\n{% include \"components/tables.html\" %}\n{% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n    &lt;h1 class=\"mb-4\"&gt;API Test Page&lt;/h1&gt;\n    \n    &lt;!-- Selection Area --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4&gt;Selection Controls&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;div class=\"row mb-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"seasonSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;League&lt;/h5&gt;\n                    &lt;div id=\"leagueSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"weekSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-12\"&gt;\n                    &lt;h5&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"teamSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    \n    &lt;!-- League Routes Card --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block title %}API Test Page{% endblock %}",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "{% block content %}",
            "lineNumber": 5
          },
          {
            "text": "{% include \"components/tables.html\" %}",
            "lineNumber": 6
          },
          {
            "text": "{% include \"components/charts.html\" %}",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;h1 class=\"mb-4\"&gt;API Test Page&lt;/h1&gt;",
            "lineNumber": 10
          },
          {
            "text": "    ",
            "lineNumber": 11
          },
          {
            "text": "    &lt;!-- Selection Area --&gt;",
            "lineNumber": 12
          },
          {
            "text": "    &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;h4&gt;Selection Controls&lt;/h4&gt;",
            "lineNumber": 15
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 16
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "            &lt;div class=\"row mb-3\"&gt;",
            "lineNumber": 18
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                    &lt;h5&gt;Season&lt;/h5&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;div id=\"seasonSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 21
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 22
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 23
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 24
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                    &lt;h5&gt;League&lt;/h5&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;div id=\"leagueSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 27
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 28
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 29
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 30
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                    &lt;h5&gt;Week&lt;/h5&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;div id=\"weekSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 33
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 34
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 36
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 37
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 38
          },
          {
            "text": "                &lt;div class=\"col-md-12\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                    &lt;h5&gt;Team&lt;/h5&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;div id=\"teamSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 43
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 44
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 45
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 46
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "    ",
            "lineNumber": 48
          },
          {
            "text": "    &lt;!-- League Routes Card --&gt;",
            "lineNumber": 49
          },
          {
            "text": "    &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;",
            "lineNumber": 51
          },
          {
            "text": "            ",
            "lineNumber": 52
          }
        ]
      },
      "score": 0.35628339648246765
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\league-content-renderer.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 236,
            "column": 1
          }
        },
        "contents": "/**\n * League Content Renderer\n * \n * Orchestrates league content rendering based on filter state\n * Uses different filter hierarchy than team stats: Season → League → Week → Team\n */\n\nclass LeagueContentRenderer {\n    constructor(urlStateManager, eventBus = null) {\n        this.urlStateManager = urlStateManager;\n        this.eventBus = eventBus || window.EventBus;\n        this.lastRenderedState = {};\n        this.isRendering = false;\n        \n        // Content blocks registry (will be populated in Phase 3)\n        this.contentBlocks = {};\n        \n        // Initialize content blocks (placeholder for now)\n        this.initializeContentBlocks();\n        \n        // League content modes based on filter combinations\n        this.contentModes = {\n            'no-selection': {\n                title: 'League Statistics',\n                description: 'Select season and league to view statistics',\n                blocks: []\n            },\n            'season-only': {\n                title: 'Season Overview',\n                description: 'Historical data across all leagues',\n                blocks: ['season-overview', 'honor-scores']\n            },\n            'season-league': {\n                title: 'League Analysis',\n                description: 'Comprehensive league performance analysis',\n                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']\n            },\n            'season-league-week': {\n                title: 'Week Analysis', \n                description: 'Current week standings and performance',\n                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']\n            },\n            'season-league-week-team': {\n                title: 'Team Analysis',\n                description: 'Detailed team performance analysis',\n                blocks: ['team-details', 'week-standings', 'points-vs-average']\n            }\n        };\n    }\n    \n    /**\n     * Initialize content blocks (placeholder for Phase 3)\n     */\n    initializeContentBlocks() {\n        console.log('League content blocks will be initialized in Phase 3...');\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * League Content Renderer",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Orchestrates league content rendering based on filter state",
            "lineNumber": 4
          },
          {
            "text": " * Uses different filter hierarchy than team stats: Season → League → Week → Team",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class LeagueContentRenderer {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor(urlStateManager, eventBus = null) {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = urlStateManager;",
            "lineNumber": 10
          },
          {
            "text": "        this.eventBus = eventBus || window.EventBus;",
            "lineNumber": 11
          },
          {
            "text": "        this.lastRenderedState = {};",
            "lineNumber": 12
          },
          {
            "text": "        this.isRendering = false;",
            "lineNumber": 13
          },
          {
            "text": "        ",
            "lineNumber": 14
          },
          {
            "text": "        // Content blocks registry (will be populated in Phase 3)",
            "lineNumber": 15
          },
          {
            "text": "        this.contentBlocks = {};",
            "lineNumber": 16
          },
          {
            "text": "        ",
            "lineNumber": 17
          },
          {
            "text": "        // Initialize content blocks (placeholder for now)",
            "lineNumber": 18
          },
          {
            "text": "        this.initializeContentBlocks();",
            "lineNumber": 19
          },
          {
            "text": "        ",
            "lineNumber": 20
          },
          {
            "text": "        // League content modes based on filter combinations",
            "lineNumber": 21
          },
          {
            "text": "        this.contentModes = {",
            "lineNumber": 22
          },
          {
            "text": "            'no-selection': {",
            "lineNumber": 23
          },
          {
            "text": "                title: 'League Statistics',",
            "lineNumber": 24
          },
          {
            "text": "                description: 'Select season and league to view statistics',",
            "lineNumber": 25
          },
          {
            "text": "                blocks: []",
            "lineNumber": 26
          },
          {
            "text": "            },",
            "lineNumber": 27
          },
          {
            "text": "            'season-only': {",
            "lineNumber": 28
          },
          {
            "text": "                title: 'Season Overview',",
            "lineNumber": 29
          },
          {
            "text": "                description: 'Historical data across all leagues',",
            "lineNumber": 30
          },
          {
            "text": "                blocks: ['season-overview', 'honor-scores']",
            "lineNumber": 31
          },
          {
            "text": "            },",
            "lineNumber": 32
          },
          {
            "text": "            'season-league': {",
            "lineNumber": 33
          },
          {
            "text": "                title: 'League Analysis',",
            "lineNumber": 34
          },
          {
            "text": "                description: 'Comprehensive league performance analysis',",
            "lineNumber": 35
          },
          {
            "text": "                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']",
            "lineNumber": 36
          },
          {
            "text": "            },",
            "lineNumber": 37
          },
          {
            "text": "            'season-league-week': {",
            "lineNumber": 38
          },
          {
            "text": "                title: 'Week Analysis', ",
            "lineNumber": 39
          },
          {
            "text": "                description: 'Current week standings and performance',",
            "lineNumber": 40
          },
          {
            "text": "                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']",
            "lineNumber": 41
          },
          {
            "text": "            },",
            "lineNumber": 42
          },
          {
            "text": "            'season-league-week-team': {",
            "lineNumber": 43
          },
          {
            "text": "                title: 'Team Analysis',",
            "lineNumber": 44
          },
          {
            "text": "                description: 'Detailed team performance analysis',",
            "lineNumber": 45
          },
          {
            "text": "                blocks: ['team-details', 'week-standings', 'points-vs-average']",
            "lineNumber": 46
          },
          {
            "text": "            }",
            "lineNumber": 47
          },
          {
            "text": "        };",
            "lineNumber": 48
          },
          {
            "text": "    }",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    /**",
            "lineNumber": 51
          },
          {
            "text": "     * Initialize content blocks (placeholder for Phase 3)",
            "lineNumber": 52
          },
          {
            "text": "     */",
            "lineNumber": 53
          },
          {
            "text": "    initializeContentBlocks() {",
            "lineNumber": 54,
            "isSignature": true
          },
          {
            "text": "        console.log('League content blocks will be initialized in Phase 3...');",
            "lineNumber": 55
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          }
        ]
      },
      "score": 0.3532576560974121
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "/**\n * SeasonOverviewBlock - Shows league table and season-wide charts\n * Displays when: Season + League are selected\n */\nclass SeasonOverviewBlock extends BaseContentBlock {\n    constructor() {\n        super({\n            id: 'season-overview',\n            containerId: 'seasonOverviewContainer',\n            dataEndpoint: '/league/get_league_history',\n            requiredFilters: ['season', 'league'],\n            title: 'Season Overview'\n        });\n        this.dependencies = ['season', 'league'];\n        this.container = document.getElementById(this.containerId);\n    }\n\n    hide() {\n        if (this.container)\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * SeasonOverviewBlock - Shows league table and season-wide charts",
            "lineNumber": 2
          },
          {
            "text": " * Displays when: Season + League are selected",
            "lineNumber": 3
          },
          {
            "text": " */",
            "lineNumber": 4
          },
          {
            "text": "class SeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "text": "    constructor() {",
            "lineNumber": 6,
            "isSignature": true
          },
          {
            "text": "        super({",
            "lineNumber": 7
          },
          {
            "text": "            id: 'season-overview',",
            "lineNumber": 8
          },
          {
            "text": "            containerId: 'seasonOverviewContainer',",
            "lineNumber": 9
          },
          {
            "text": "            dataEndpoint: '/league/get_league_history',",
            "lineNumber": 10
          },
          {
            "text": "            requiredFilters: ['season', 'league'],",
            "lineNumber": 11
          },
          {
            "text": "            title: 'Season Overview'",
            "lineNumber": 12
          },
          {
            "text": "        });",
            "lineNumber": 13
          },
          {
            "text": "        this.dependencies = ['season', 'league'];",
            "lineNumber": 14
          },
          {
            "text": "        this.container = document.getElementById(this.containerId);",
            "lineNumber": 15
          },
          {
            "text": "    }",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "lineNumber": 17
          },
          {
            "text": "    hide() {",
            "lineNumber": 18,
            "isSignature": true
          },
          {
            "text": "        if (this.container)",
            "lineNumber": 19
          },
          {
            "text": "    }",
            "lineNumber": 22,
            "isSignature": true
          }
        ]
      },
      "score": 0.3528507947921753
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\league\\league-data-utils.js",
        "range": {
          "startPosition": {
            "line": 110,
            "column": 1
          },
          "endPosition": {
            "line": 181,
            "column": 1
          }
        },
        "contents": "/**\n * Update league week standings table\n */\nfunction updateTableLeagueWeek() {\n    const selectedSeason = currentState?.season || document.querySelector('input[name=\"season\"]:checked')?.value;\n    const selectedLeague = currentState?.league || document.querySelector('input[name=\"league\"]:checked')?.value;\n    const selectedWeek = currentState?.week || document.querySelector('input[name=\"week\"]:checked')?.value;\n    \n    if (!selectedSeason || !selectedLeague) {\n        return;\n    }\n    \n    if (!selectedWeek) {\n        // Show message when no week is selected\n        const messageArea = document.getElementById('weekMessage');\n        const standingsTable = document.getElementById('tableLeagueWeek');\n        \n        if (messageArea) {\n            messageArea.style.display = 'block';\n            messageArea.innerHTML = window.translations ? \n                (window.translations['please_select_match_day'] || 'Please select a match day.') : \n                'Please select a match day.';\n        }\n        if (standingsTable) standingsTable.style.display = 'none';\n        return;\n    }\n    \n    // Show the table and hide the message\n    const messageArea = document.getElementById('weekMessage');\n    const standingsTable = document.getElementById('tableLeagueWeek');\n    \n    if (messageArea) messageArea.style.display = 'none';\n    if (standingsTable) standingsTable.style.display = 'block';\n    \n    // Fetch and display table\n    fetchAndRenderTable('tableLeagueWeek', '/league/get_league_week_table', {\n        season: selectedSeason,\n        league: selectedLeague,\n        week: selectedWeek\n    });\n}\n\n/**\n * Update league history table\n */\nfunction updateTableLeagueHistory() {\n    const selectedSeason = currentState?.season;\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 113
          },
          {
            "text": " * Update league week standings table",
            "lineNumber": 114
          },
          {
            "text": " */",
            "lineNumber": 115
          },
          {
            "text": "function updateTableLeagueWeek() {",
            "lineNumber": 116,
            "isSignature": true
          },
          {
            "text": "    const selectedSeason = currentState?.season || document.querySelector('input[name=\"season\"]:checked')?.value;",
            "lineNumber": 117
          },
          {
            "text": "    const selectedLeague = currentState?.league || document.querySelector('input[name=\"league\"]:checked')?.value;",
            "lineNumber": 118
          },
          {
            "text": "    const selectedWeek = currentState?.week || document.querySelector('input[name=\"week\"]:checked')?.value;",
            "lineNumber": 119
          },
          {
            "text": "    ",
            "lineNumber": 120
          },
          {
            "text": "    if (!selectedSeason || !selectedLeague) {",
            "lineNumber": 121
          },
          {
            "text": "        return;",
            "lineNumber": 122
          },
          {
            "text": "    }",
            "lineNumber": 123
          },
          {
            "text": "    ",
            "lineNumber": 124
          },
          {
            "text": "    if (!selectedWeek) {",
            "lineNumber": 125
          },
          {
            "text": "        // Show message when no week is selected",
            "lineNumber": 126
          },
          {
            "text": "        const messageArea = document.getElementById('weekMessage');",
            "lineNumber": 127
          },
          {
            "text": "        const standingsTable = document.getElementById('tableLeagueWeek');",
            "lineNumber": 128
          },
          {
            "text": "        ",
            "lineNumber": 129
          },
          {
            "text": "        if (messageArea) {",
            "lineNumber": 130
          },
          {
            "text": "            messageArea.style.display = 'block';",
            "lineNumber": 131
          },
          {
            "text": "            messageArea.innerHTML = window.translations ? ",
            "lineNumber": 132
          },
          {
            "text": "                (window.translations['please_select_match_day'] || 'Please select a match day.') : ",
            "lineNumber": 133
          },
          {
            "text": "                'Please select a match day.';",
            "lineNumber": 134
          },
          {
            "text": "        }",
            "lineNumber": 135
          },
          {
            "text": "        if (standingsTable) standingsTable.style.display = 'none';",
            "lineNumber": 136
          },
          {
            "text": "        return;",
            "lineNumber": 137
          },
          {
            "text": "    }",
            "lineNumber": 138
          },
          {
            "text": "    ",
            "lineNumber": 139
          },
          {
            "text": "    // Show the table and hide the message",
            "lineNumber": 140
          },
          {
            "text": "    const messageArea = document.getElementById('weekMessage');",
            "lineNumber": 141
          },
          {
            "text": "    const standingsTable = document.getElementById('tableLeagueWeek');",
            "lineNumber": 142
          },
          {
            "text": "    ",
            "lineNumber": 143
          },
          {
            "text": "    if (messageArea) messageArea.style.display = 'none';",
            "lineNumber": 144
          },
          {
            "text": "    if (standingsTable) standingsTable.style.display = 'block';",
            "lineNumber": 145
          },
          {
            "text": "    ",
            "lineNumber": 146
          },
          {
            "text": "    // Fetch and display table",
            "lineNumber": 147
          },
          {
            "text": "    fetchAndRenderTable('tableLeagueWeek', '/league/get_league_week_table', {",
            "lineNumber": 148
          },
          {
            "text": "        season: selectedSeason,",
            "lineNumber": 149
          },
          {
            "text": "        league: selectedLeague,",
            "lineNumber": 150
          },
          {
            "text": "        week: selectedWeek",
            "lineNumber": 151
          },
          {
            "text": "    });",
            "lineNumber": 152
          },
          {
            "text": "}",
            "lineNumber": 153,
            "isSignature": true
          },
          {
            "lineNumber": 154
          },
          {
            "text": "/**",
            "lineNumber": 155
          },
          {
            "text": " * Update league history table",
            "lineNumber": 156
          },
          {
            "text": " */",
            "lineNumber": 157
          },
          {
            "text": "function updateTableLeagueHistory() {",
            "lineNumber": 158,
            "isSignature": true
          },
          {
            "text": "    const selectedSeason = currentState?.season;",
            "lineNumber": 159
          },
          {
            "text": "}",
            "lineNumber": 182,
            "isSignature": true
          }
        ]
      },
      "score": 0.35164904594421387
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "renderSeasonLeagueStandings(data, season) {\nleagueData =&gt; {\n 'Top Team Scores'}&lt;/h6&gt;\n                                            &lt;div id=\"teamScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                        &lt;!-- Individual Averages --&gt;\n                                        &lt;div class=\"mb-3\" id=\"individualAveragesSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;\n                                            &lt;h6&gt;${typeof t === 'function' ? t('best_individual_averages', 'Best Individual Averages') : 'Best Individual Averages'}&lt;/h6&gt;\n                                            &lt;div id=\"individualAverages_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                        &lt;!-- Team Averages --&gt;\n                                        &lt;div class=\"mb-3\" id=\"teamAveragesSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;\n                                            &lt;h6&gt;${typeof t === 'function' ? t('best_team_averages', 'Best Team Averages') : 'Best Team Averages'}&lt;/h6&gt;\n                                            &lt;div id=\"teamAverages_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &#96;;\n        });\n        \n        contentContainer.innerHTML = html;\n        \n        // Create tables and honor scores for each league\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 93,
                "column": 5
              },
              "endPosition": {
                "line": 94,
                "column": 9
              }
            },
            {
              "startPosition": {
                "line": 109,
                "column": 9
              },
              "endPosition": {
                "line": 109,
                "column": 9
              }
            },
            {
              "startPosition": {
                "line": 109,
                "column": 30
              },
              "endPosition": {
                "line": 110,
                "column": 13
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "text": "leagueData =&gt; {",
            "lineNumber": 109
          },
          {
            "text": " 'Top Team Scores'}&lt;/h6&gt;",
            "lineNumber": 136
          },
          {
            "text": "                                            &lt;div id=\"teamScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 137
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 138
          },
          {
            "text": "                                        &lt;!-- Individual Averages --&gt;",
            "lineNumber": 139
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"individualAveragesSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;",
            "lineNumber": 140
          },
          {
            "text": "                                            &lt;h6&gt;${typeof t === 'function' ? t('best_individual_averages', 'Best Individual Averages') : 'Best Individual Averages'}&lt;/h6&gt;",
            "lineNumber": 141
          },
          {
            "text": "                                            &lt;div id=\"individualAverages_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 142
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 143
          },
          {
            "text": "                                        &lt;!-- Team Averages --&gt;",
            "lineNumber": 144
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"teamAveragesSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;",
            "lineNumber": 145
          },
          {
            "text": "                                            &lt;h6&gt;${typeof t === 'function' ? t('best_team_averages', 'Best Team Averages') : 'Best Team Averages'}&lt;/h6&gt;",
            "lineNumber": 146
          },
          {
            "text": "                                            &lt;div id=\"teamAverages_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 147
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 148
          },
          {
            "text": "                                    &lt;/div&gt;",
            "lineNumber": 149
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 151
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 152
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 153
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 154
          },
          {
            "text": "            &#96;;",
            "lineNumber": 155
          },
          {
            "text": "        });",
            "lineNumber": 156
          },
          {
            "text": "        ",
            "lineNumber": 157
          },
          {
            "text": "        contentContainer.innerHTML = html;",
            "lineNumber": 158
          },
          {
            "text": "        ",
            "lineNumber": 159
          },
          {
            "text": "        // Create tables and honor scores for each league",
            "lineNumber": 160
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          }
        ]
      },
      "score": 0.34891149401664734
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 82
          },
          "endPosition": {
            "line": 119
          }
        },
        "contents": "        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;\n    &lt;div id=\"seasonOverviewContainer\"&gt;\n        &lt;!-- Season overview content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_overview\"&gt;Initializing detailed overview...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Match Day Block --&gt;\n    &lt;div id=\"matchdayContainer\"&gt;\n        &lt;!-- Match day content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.matchday\"&gt;Initializing match day content...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team Details Block --&gt;\n    &lt;div id=\"teamDetailsContainer\"&gt;\n        &lt;!-- Team details content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_details\"&gt;Initializing team details...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team Performance Analysis Block (League + Season + Team) --&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 83
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;",
            "lineNumber": 86
          },
          {
            "text": "    &lt;div id=\"seasonOverviewContainer\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "        &lt;!-- Season overview content will be rendered here --&gt;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 91
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_overview\"&gt;Initializing detailed overview...&lt;/p&gt;",
            "lineNumber": 93
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "lineNumber": 96
          },
          {
            "text": "    &lt;!-- Match Day Block --&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &lt;div id=\"matchdayContainer\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "        &lt;!-- Match day content will be rendered here --&gt;",
            "lineNumber": 99
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 100
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 101
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 102
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.matchday\"&gt;Initializing match day content...&lt;/p&gt;",
            "lineNumber": 104
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 105
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "lineNumber": 107
          },
          {
            "text": "    &lt;!-- Team Details Block --&gt;",
            "lineNumber": 108
          },
          {
            "text": "    &lt;div id=\"teamDetailsContainer\"&gt;",
            "lineNumber": 109
          },
          {
            "text": "        &lt;!-- Team details content will be rendered here --&gt;",
            "lineNumber": 110
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 113
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 114
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_details\"&gt;Initializing team details...&lt;/p&gt;",
            "lineNumber": 115
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "    &lt;!-- Team Performance Analysis Block (League + Season + Team) --&gt;",
            "lineNumber": 119
          }
        ]
      },
      "score": 0.348486065864563
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\team\\stats.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 47,
            "column": 16
          }
        },
        "contents": "{% extends \"base.html\" %}\n{% block content %}\n    {% include \"components/tables.html\" %}\n    {% include \"components/charts.html\" %}\n\n    &lt;style&gt;\n        /* Ensure Bootstrap button styling works properly */\n        .btn-check:checked + .btn-outline-primary {\n            background-color: var(--theme-primary, #0d6efd) !important;\n            border-color: var(--theme-primary, #0d6efd) !important;\n            color: white !important;\n        }\n        \n        .btn-check:focus + .btn-outline-primary {\n            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important;\n        }\n    &lt;/style&gt;\n\n    &lt;!-- Selection Message --&gt;\n    &lt;div id=\"selectionMessage\" class=\"alert alert-danger fs-4\"&gt;\n        Bitte wählen Sie ein Team.\n    &lt;/div&gt;\n\n    &lt;!-- Filter Controls --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4&gt;Team Statistics&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;!-- Selection Area --&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-3\"&gt;\n                    &lt;h5&gt;Team&lt;/h5&gt;\n                    &lt;select id=\"teamSelect\" class=\"form-select\"&gt;\n                        &lt;option value=\"\"&gt;Bitte wählen...&lt;/option&gt;\n                    &lt;/select&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-9\"&gt;\n                    &lt;h5&gt;Saison&lt;/h5&gt;\n                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-3\"&gt;\n                ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "text": "{% block content %}",
            "lineNumber": 2
          },
          {
            "text": "    {% include \"components/tables.html\" %}",
            "lineNumber": 3
          },
          {
            "text": "    {% include \"components/charts.html\" %}",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "    &lt;style&gt;",
            "lineNumber": 6
          },
          {
            "text": "        /* Ensure Bootstrap button styling works properly */",
            "lineNumber": 7
          },
          {
            "text": "        .btn-check:checked + .btn-outline-primary {",
            "lineNumber": 8
          },
          {
            "text": "            background-color: var(--theme-primary, #0d6efd) !important;",
            "lineNumber": 9
          },
          {
            "text": "            border-color: var(--theme-primary, #0d6efd) !important;",
            "lineNumber": 10
          },
          {
            "text": "            color: white !important;",
            "lineNumber": 11
          },
          {
            "text": "        }",
            "lineNumber": 12
          },
          {
            "text": "        ",
            "lineNumber": 13
          },
          {
            "text": "        .btn-check:focus + .btn-outline-primary {",
            "lineNumber": 14
          },
          {
            "text": "            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important;",
            "lineNumber": 15
          },
          {
            "text": "        }",
            "lineNumber": 16
          },
          {
            "text": "    &lt;/style&gt;",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "    &lt;!-- Selection Message --&gt;",
            "lineNumber": 19
          },
          {
            "text": "    &lt;div id=\"selectionMessage\" class=\"alert alert-danger fs-4\"&gt;",
            "lineNumber": 20
          },
          {
            "text": "        Bitte wählen Sie ein Team.",
            "lineNumber": 21
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "    &lt;!-- Filter Controls --&gt;",
            "lineNumber": 24
          },
          {
            "text": "    &lt;div class=\"card\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 26
          },
          {
            "text": "            &lt;h4&gt;Team Statistics&lt;/h4&gt;",
            "lineNumber": 27
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 28
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "            &lt;!-- Selection Area --&gt;",
            "lineNumber": 30
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                &lt;div class=\"col-md-3\"&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;h5&gt;Team&lt;/h5&gt;",
            "lineNumber": 33
          },
          {
            "text": "                    &lt;select id=\"teamSelect\" class=\"form-select\"&gt;",
            "lineNumber": 34
          },
          {
            "text": "                        &lt;option value=\"\"&gt;Bitte wählen...&lt;/option&gt;",
            "lineNumber": 35
          },
          {
            "text": "                    &lt;/select&gt;",
            "lineNumber": 36
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 37
          },
          {
            "text": "                &lt;div class=\"col-md-9\"&gt;",
            "lineNumber": 38
          },
          {
            "text": "                    &lt;h5&gt;Saison&lt;/h5&gt;",
            "lineNumber": 39
          },
          {
            "text": "                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 40
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 41
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 42
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 43
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 44
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 45
          },
          {
            "text": "        &lt;div class=\"row\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "            &lt;div class=\"col-md-3\"&gt;",
            "lineNumber": 47
          },
          {
            "text": "                ",
            "lineNumber": 48
          }
        ]
      },
      "score": 0.34022295475006104
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\routes\\league_routes.py",
        "range": {
          "startPosition": {
            "line": 237,
            "column": 46
          },
          "endPosition": {
            "line": 296
          }
        },
        "contents": "@bp.route('/league/get_season_league_standings')\ndef get_season_league_standings():\n    try:\n        params = dict(request.args)\n        debug_config.log_route('league.get_season_league_standings', params)\n        \n        season = request.args.get('season')\n        \n        if not season:\n            return jsonify({\"error\": i18n_service.get_text(\"season_required\")}), 400\n\n        league_service = get_league_service()\n        standings_data = league_service.get_season_league_standings(season=season)\n        \n        if not standings_data:\n            return jsonify({\"message\": \"No data found for this season\"}), 404\n        \n        response_size = sys.getsizeof(str(standings_data))\n        debug_config.log_route('league.get_season_league_standings', params, response_size)\n        \n        return jsonify(standings_data)\n    except Exception as e:\n        debug_config.log_route('league.get_season_league_standings', dict(request.args), f\"ERROR: {str(e)}\")\n        if debug_config.is_debug_enabled('routes'):\n            traceback.print_exc()\n        return jsonify({\"error\": str(e)}), 500\n\n@bp.route('/league/get_team_week_details_table')\ndef get_team_week_details_table():\n    try",
        "signatures": {},
        "detailedLines": [
          {
            "text": "@bp.route('/league/get_season_league_standings')",
            "lineNumber": 240
          },
          {
            "text": "def get_season_league_standings():",
            "lineNumber": 241,
            "isSignature": true
          },
          {
            "text": "    try:",
            "lineNumber": 242
          },
          {
            "text": "        params = dict(request.args)",
            "lineNumber": 243
          },
          {
            "text": "        debug_config.log_route('league.get_season_league_standings', params)",
            "lineNumber": 244
          },
          {
            "text": "        ",
            "lineNumber": 245
          },
          {
            "text": "        season = request.args.get('season')",
            "lineNumber": 246
          },
          {
            "text": "        ",
            "lineNumber": 247
          },
          {
            "text": "        if not season:",
            "lineNumber": 248
          },
          {
            "text": "            return jsonify({\"error\": i18n_service.get_text(\"season_required\")}), 400",
            "lineNumber": 249
          },
          {
            "lineNumber": 250
          },
          {
            "text": "        league_service = get_league_service()",
            "lineNumber": 251
          },
          {
            "text": "        standings_data = league_service.get_season_league_standings(season=season)",
            "lineNumber": 252
          },
          {
            "text": "        ",
            "lineNumber": 253
          },
          {
            "text": "        if not standings_data:",
            "lineNumber": 254
          },
          {
            "text": "            return jsonify({\"message\": \"No data found for this season\"}), 404",
            "lineNumber": 255
          },
          {
            "text": "        ",
            "lineNumber": 256
          },
          {
            "text": "        response_size = sys.getsizeof(str(standings_data))",
            "lineNumber": 257
          },
          {
            "text": "        debug_config.log_route('league.get_season_league_standings', params, response_size)",
            "lineNumber": 258
          },
          {
            "text": "        ",
            "lineNumber": 259
          },
          {
            "text": "        return jsonify(standings_data)",
            "lineNumber": 260
          },
          {
            "text": "    except Exception as e:",
            "lineNumber": 261
          },
          {
            "text": "        debug_config.log_route('league.get_season_league_standings', dict(request.args), f\"ERROR: {str(e)}\")",
            "lineNumber": 262
          },
          {
            "text": "        if debug_config.is_debug_enabled('routes'):",
            "lineNumber": 263
          },
          {
            "text": "            traceback.print_exc()",
            "lineNumber": 264
          },
          {
            "text": "        return jsonify({\"error\": str(e)}), 500",
            "lineNumber": 265,
            "isSignature": true
          },
          {
            "lineNumber": 266
          },
          {
            "text": "@bp.route('/league/get_team_week_details_table')",
            "lineNumber": 267
          },
          {
            "text": "def get_team_week_details_table():",
            "lineNumber": 268,
            "isSignature": true
          },
          {
            "text": "    try",
            "lineNumber": 269
          }
        ]
      },
      "score": 0.33801940083503723
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "season.*view|s view|season.*standings",
  "path": "app/static/js",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "season.*view|s view|season.*standings",
    "path": "app/static/js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 2,
                  "content": " * LeagueSeasonOverviewBlock - Shows league+season specific data"
                },
                {
                  "lineNumber": 5,
                  "content": "class LeagueSeasonOverviewBlock extends BaseContentBlock {"
                },
                {
                  "lineNumber": 8,
                  "content": "            id: 'league-season-overview',"
                },
                {
                  "lineNumber": 9,
                  "content": "            containerId: 'leagueSeasonOverviewContainer',"
                },
                {
                  "lineNumber": 12,
                  "content": "            title: typeof t === 'function' ? t('ui.league.season_overview.title', 'League Season Overview') : 'League Season Overview'"
                },
                {
                  "lineNumber": 33,
                  "content": "            console.log('league-season-overview: League season overview rendered');"
                },
                {
                  "lineNumber": 35,
                  "content": "            console.error('Error rendering league season overview:', error);"
                },
                {
                  "lineNumber": 36,
                  "content": "            this.container.innerHTML = this.renderError('Failed to load league season overview');"
                },
                {
                  "lineNumber": 47,
                  "content": "        console.log(&#96;LeagueSeasonOverviewBlock shouldRender: league=\"${state.league}\", season=\"${state.season}\", week=\"${state.week}\", team=\"${state.team}\", result=${shouldShow}&#96;);"
                }
              ]
            }
          ],
          "totalLines": 9,
          "totalMatchedLines": 9
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "Where are league overview cards displayed in the slw view?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "shouldRender(state) {\n\n    }\n\n    generateHTML(state) {\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;\n                &lt;/div&gt;\n                \n                &lt;!-- League History Table --&gt;\n                &lt;div id=\"leagueTableHistory\"&gt;\n                    &lt;div class=\"text-center py-3\"&gt;\n                        &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                            &lt;span class=\"visually-hidden\"&gt;Loading table...&lt;/span&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"card-body\"&gt;\n                    &lt;!-- Position Charts --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;!-- Positions over the course of the season --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;            \n                        &lt;!-- Points over the course of the season --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"points_in_season_progress\"&gt;Points in Season Progress&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Shared Legend --&gt;\n                    &lt;div class=\"row mt-3\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"sharedLegend\" class=\"d-flex justify-content-center flex-wrap\"&gt;\n                                &lt;!-- Legend will be dynamically inserted here --&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Points Charts --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;!-- Points per Week Chart --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"points_per_match_day\"&gt;Points per Match Day&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Average per Week Chart --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"average_per_match_day\"&gt;Average per Match Day&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamAverageScoreWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Shared Legend --&gt;\n                    &lt;div class=\"row mt-3\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"sharedLegendMiddle\" class=\"d-flex justify-content-center flex-wrap\"&gt;\n                                &lt;!-- Legend will be dynamically inserted here --&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    renderSelectionMessage() {\n        return\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "shouldRender(state) {",
            "lineNumber": 62,
            "isSignature": true
          },
          {
            "lineNumber": 64
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          },
          {
            "lineNumber": 66
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 67,
            "isSignature": true
          },
          {
            "text": "        return &#96;",
            "lineNumber": 68
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 69
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 70
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;",
            "lineNumber": 71
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "                ",
            "lineNumber": 73
          },
          {
            "text": "                &lt;!-- League History Table --&gt;",
            "lineNumber": 74
          },
          {
            "text": "                &lt;div id=\"leagueTableHistory\"&gt;",
            "lineNumber": 75
          },
          {
            "text": "                    &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "                        &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;span class=\"visually-hidden\"&gt;Loading table...&lt;/span&gt;",
            "lineNumber": 78
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 81
          },
          {
            "lineNumber": 82
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                    &lt;!-- Position Charts --&gt;",
            "lineNumber": 84
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                        &lt;!-- Positions over the course of the season --&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 93
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                        &lt;/div&gt;            ",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;!-- Points over the course of the season --&gt;",
            "lineNumber": 97
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 99
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 100
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"points_in_season_progress\"&gt;Points in Season Progress&lt;/h5&gt;",
            "lineNumber": 101
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 105
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 107
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                    ",
            "lineNumber": 109
          },
          {
            "text": "                    &lt;!-- Shared Legend --&gt;",
            "lineNumber": 110
          },
          {
            "text": "                    &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                            &lt;div id=\"sharedLegend\" class=\"d-flex justify-content-center flex-wrap\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                &lt;!-- Legend will be dynamically inserted here --&gt;",
            "lineNumber": 114
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 115
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "                    ",
            "lineNumber": 118
          },
          {
            "text": "                    &lt;!-- Points Charts --&gt;",
            "lineNumber": 119
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;!-- Points per Week Chart --&gt;",
            "lineNumber": 121
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 122
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 123
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 124
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"points_per_match_day\"&gt;Points per Match Day&lt;/h5&gt;",
            "lineNumber": 125
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 126
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 129
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 130
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 131
          },
          {
            "text": "                        &lt;!-- Average per Week Chart --&gt;",
            "lineNumber": 132
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 133
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 134
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 135
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"average_per_match_day\"&gt;Average per Match Day&lt;/h5&gt;",
            "lineNumber": 136
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 137
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 138
          },
          {
            "text": "                                    &lt;div id=\"chartTeamAverageScoreWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 139
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 140
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 141
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 142
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 143
          },
          {
            "text": "                    ",
            "lineNumber": 144
          },
          {
            "text": "                    &lt;!-- Shared Legend --&gt;",
            "lineNumber": 145
          },
          {
            "text": "                    &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 146
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 147
          },
          {
            "text": "                            &lt;div id=\"sharedLegendMiddle\" class=\"d-flex justify-content-center flex-wrap\"&gt;",
            "lineNumber": 148
          },
          {
            "text": "                                &lt;!-- Legend will be dynamically inserted here --&gt;",
            "lineNumber": 149
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 151
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 152
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 153
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 154
          },
          {
            "text": "        &#96;;",
            "lineNumber": 155
          },
          {
            "text": "    }",
            "lineNumber": 156,
            "isSignature": true
          },
          {
            "lineNumber": 157
          },
          {
            "text": "    renderSelectionMessage() {",
            "lineNumber": 158,
            "isSignature": true
          },
          {
            "text": "        return",
            "lineNumber": 159
          },
          {
            "text": "    }",
            "lineNumber": 169,
            "isSignature": true
          }
        ]
      },
      "score": 0.3681986331939697
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    generateHTML(state) {\n        const leagueName = state.league_long || state.league || '';\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;${leagueName} - ${typeof t === 'function' ? t('season', 'Season') : 'Season'} ${state.season}&lt;/h5&gt;\n                    &lt;!--&lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('season_overview', 'Season Overview') : 'Season Overview'}&lt;/p&gt;--&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;!-- 1st Row: League Standings (Full Width) --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;\n                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('standings', 'Standings') : 'Standings'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"leagueStandingsTable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 2nd Row: Timetable + Position in Season Progress --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('season_timetable', 'Season Timetable') : 'Season Timetable'}&lt;/h6&gt;\n                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('match_schedule', 'Match Schedule') : 'Match Schedule'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 49
          },
          {
            "lineNumber": 50
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "        const leagueName = state.league_long || state.league || '';",
            "lineNumber": 52
          },
          {
            "text": "        return &#96;",
            "lineNumber": 53
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 54
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 55
          },
          {
            "text": "                    &lt;h5&gt;${leagueName} - ${typeof t === 'function' ? t('season', 'Season') : 'Season'} ${state.season}&lt;/h5&gt;",
            "lineNumber": 56
          },
          {
            "text": "                    &lt;!--&lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('season_overview', 'Season Overview') : 'Season Overview'}&lt;/p&gt;--&gt;",
            "lineNumber": 57
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 58
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 59
          },
          {
            "text": "                    &lt;!-- 1st Row: League Standings (Full Width) --&gt;",
            "lineNumber": 60
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 62
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 63
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 64
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;",
            "lineNumber": 65
          },
          {
            "text": "                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('standings', 'Standings') : 'Standings'}&lt;/p&gt;--&gt;",
            "lineNumber": 66
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 67
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 68
          },
          {
            "text": "                                    &lt;div id=\"leagueStandingsTable\"&gt;&lt;/div&gt;",
            "lineNumber": 69
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 70
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 71
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "                    &lt;!-- 2nd Row: Timetable + Position in Season Progress --&gt;",
            "lineNumber": 75
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 78
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('season_timetable', 'Season Timetable') : 'Season Timetable'}&lt;/h6&gt;",
            "lineNumber": 80
          },
          {
            "text": "                                    &lt;!--&lt;p class=\"mb-0 text-muted small\"&gt;${typeof t === 'function' ? t('match_schedule', 'Match Schedule') : 'Match Schedule'}&lt;/p&gt;--&gt;",
            "lineNumber": 81
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 82
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 85
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 87
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                    &lt;h6&gt;",
            "lineNumber": 91
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          }
        ]
      },
      "score": 0.3577173054218292
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block content %}\n    {% include \"components/tables.html\" %}\n    {% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n\n    &lt;!-- Filter Controls --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;!-- Selection Area --&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;\n                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row mt-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;\n                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Rounds/Games will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-8\"&gt;\n                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block content %}",
            "lineNumber": 3
          },
          {
            "text": "    {% include \"components/tables.html\" %}",
            "lineNumber": 4
          },
          {
            "text": "    {% include \"components/charts.html\" %}",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "    &lt;!-- Filter Controls --&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;div class=\"card\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 11
          },
          {
            "text": "            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;",
            "lineNumber": 12
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;!-- Selection Area --&gt;",
            "lineNumber": 15
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;",
            "lineNumber": 18
          },
          {
            "text": "                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 21
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 23
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;",
            "lineNumber": 24
          },
          {
            "text": "                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 27
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 28
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;",
            "lineNumber": 30
          },
          {
            "text": "                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 33
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 34
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "            &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 36
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 37
          },
          {
            "text": "                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;",
            "lineNumber": 38
          },
          {
            "text": "                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                        &lt;!-- Rounds/Games will be inserted here --&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 41
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 42
          },
          {
            "text": "                &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 43
          },
          {
            "text": "                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;",
            "lineNumber": 44
          },
          {
            "text": "                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 45
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 46
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 48
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 49
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.3416174650192261
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\team\\stats.html",
        "range": {
          "startPosition": {
            "line": 45
          },
          "endPosition": {
            "line": 107,
            "column": 12
          }
        },
        "contents": "        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-3\"&gt;\n                &lt;div class=\"card h-100\"&gt;\n                    &lt;div class=\"card-header\"&gt;\n                        &lt;h5&gt;Spieltag&lt;/h5&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div id=\"buttonsWeek\" class=\"btn-group-vertical w-100\"&gt;\n                            &lt;!-- Buttons will be inserted here --&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team History Chart (Content Block) --&gt;\n    &lt;div class=\"row mt-4\"&gt;\n        &lt;div class=\"col-md-12\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;Platzierungsverlauf \n                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;\n                    &lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;canvas id=\"chartTeamHistory\" width=\"800\" height=\"400\"&gt;&lt;/canvas&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- League Comparison Section (Content Block) --&gt;\n    &lt;div class=\"row mt-4\"&gt;\n        &lt;div class=\"col-md-8\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;Leistung vs. Liga-Durchschnitt \n                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;\n                    &lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;canvas id=\"chartLeagueComparison\" width=\"600\" height=\"400\"&gt;&lt;/canvas&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        \n        &lt;div class=\"col-md-4\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;Liga-Vergleich Details&lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div id=\"tableLeagueComparison\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Clutch &amp; Consistency Section (Legacy) --&gt;\n    &lt;div class=\"row mt-4\"&gt;\n        &lt;div class=\"col-md-6\"&gt;\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;div class=\"row\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "            &lt;div class=\"col-md-3\"&gt;",
            "lineNumber": 47
          },
          {
            "text": "                &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 48
          },
          {
            "text": "                    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 49
          },
          {
            "text": "                        &lt;h5&gt;Spieltag&lt;/h5&gt;",
            "lineNumber": 50
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 51
          },
          {
            "text": "                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 52
          },
          {
            "text": "                        &lt;div id=\"buttonsWeek\" class=\"btn-group-vertical w-100\"&gt;",
            "lineNumber": 53
          },
          {
            "text": "                            &lt;!-- Buttons will be inserted here --&gt;",
            "lineNumber": 54
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 55
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 56
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 57
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 58
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 59
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "    &lt;!-- Team History Chart (Content Block) --&gt;",
            "lineNumber": 62
          },
          {
            "text": "    &lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 63
          },
          {
            "text": "        &lt;div class=\"col-md-12\"&gt;",
            "lineNumber": 64
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 65
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 66
          },
          {
            "text": "                    &lt;h5&gt;Platzierungsverlauf ",
            "lineNumber": 67
          },
          {
            "text": "                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;",
            "lineNumber": 68
          },
          {
            "text": "                    &lt;/h5&gt;",
            "lineNumber": 69
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 70
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 71
          },
          {
            "text": "                    &lt;canvas id=\"chartTeamHistory\" width=\"800\" height=\"400\"&gt;&lt;/canvas&gt;",
            "lineNumber": 72
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 74
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 75
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "    &lt;!-- League Comparison Section (Content Block) --&gt;",
            "lineNumber": 78
          },
          {
            "text": "    &lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "        &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 81
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 82
          },
          {
            "text": "                    &lt;h5&gt;Leistung vs. Liga-Durchschnitt ",
            "lineNumber": 83
          },
          {
            "text": "                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;",
            "lineNumber": 84
          },
          {
            "text": "                    &lt;/h5&gt;",
            "lineNumber": 85
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "                    &lt;canvas id=\"chartLeagueComparison\" width=\"600\" height=\"400\"&gt;&lt;/canvas&gt;",
            "lineNumber": 88
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 90
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "        ",
            "lineNumber": 92
          },
          {
            "text": "        &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 93
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 94
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 95
          },
          {
            "text": "                    &lt;h5&gt;Liga-Vergleich Details&lt;/h5&gt;",
            "lineNumber": 96
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 97
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                    &lt;div id=\"tableLeagueComparison\"&gt;&lt;/div&gt;",
            "lineNumber": 99
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 100
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "lineNumber": 104
          },
          {
            "text": "    &lt;!-- Clutch &amp; Consistency Section (Legacy) --&gt;",
            "lineNumber": 105
          },
          {
            "text": "    &lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 106
          },
          {
            "text": "        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "            ",
            "lineNumber": 108
          }
        ]
      },
      "score": 0.3316080868244171
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "renderSeasonLeagueStandings(data, season) {\nleagueData =&gt; {\nconst  = leagueData;\n            \n            html += &#96;\n                &lt;div class=\"card mb-3\"&gt;\n                    &lt;div class=\"card-header\"&gt;\n                        &lt;h6 class=\"mb-0\"&gt;${league} - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&lt;/h6&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-md-8\"&gt;\n                                &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;\n                                &lt;div id=\"tableSeasonLeagueStandings_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"col-md-4\"&gt;\n                                &lt;div class=\"card\"&gt;\n                                    &lt;div class=\"card-header\"&gt;\n                                        &lt;h6&gt;${typeof t === 'function' ? t('honor_scores', 'Honor Scores') : 'Honor Scores'}&lt;/h6&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"card-body\"&gt;\n                                        &lt;!-- Individual Scores --&gt;\n                                        &lt;div class=\"mb-3\" id=\"individualScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;\n                                            &lt;h6&gt;${typeof t === 'function' ? t('top_individual_scores', 'Top Individual Scores') : 'Top Individual Scores'}&lt;/h6&gt;\n                                            &lt;div id=\"individualScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                        &lt;!-- Team Scores --&gt;\n                                        &lt;div class=\"mb-3\" id=\"teamScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;\n                                            &lt;h6&gt;${typeof t === 'function' ? t('top_team_scores', 'Top Team Scores') : 'Top Team Scores'}&lt;/h6&gt;\n                                            &lt;div id=\"teamScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;\n                                        &lt;/div&gt;\n                                        &lt;!-- Individual Averages --&gt;\n                                        &lt;div class=\"mb-3\" id=\"individualAveragesSection_\n        }\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 93,
                "column": 5
              },
              "endPosition": {
                "line": 94,
                "column": 9
              }
            },
            {
              "startPosition": {
                "line": 109,
                "column": 9
              },
              "endPosition": {
                "line": 109,
                "column": 9
              }
            },
            {
              "startPosition": {
                "line": 109,
                "column": 30
              },
              "endPosition": {
                "line": 110,
                "column": 13
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "text": "leagueData =&gt; {",
            "lineNumber": 109
          },
          {
            "text": "const  = leagueData;",
            "lineNumber": 110
          },
          {
            "text": "            ",
            "lineNumber": 111
          },
          {
            "text": "            html += &#96;",
            "lineNumber": 112
          },
          {
            "text": "                &lt;div class=\"card mb-3\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 114
          },
          {
            "text": "                        &lt;h6 class=\"mb-0\"&gt;${league} - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                        &lt;div class=\"row\"&gt;",
            "lineNumber": 118
          },
          {
            "text": "                            &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 119
          },
          {
            "text": "                                &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;",
            "lineNumber": 120
          },
          {
            "text": "                                &lt;div id=\"tableSeasonLeagueStandings_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "text": "                            &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 123
          },
          {
            "text": "                                &lt;div class=\"card\"&gt;",
            "lineNumber": 124
          },
          {
            "text": "                                    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                                        &lt;h6&gt;${typeof t === 'function' ? t('honor_scores', 'Honor Scores') : 'Honor Scores'}&lt;/h6&gt;",
            "lineNumber": 126
          },
          {
            "text": "                                    &lt;/div&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                        &lt;!-- Individual Scores --&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"individualScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;",
            "lineNumber": 130
          },
          {
            "text": "                                            &lt;h6&gt;${typeof t === 'function' ? t('top_individual_scores', 'Top Individual Scores') : 'Top Individual Scores'}&lt;/h6&gt;",
            "lineNumber": 131
          },
          {
            "text": "                                            &lt;div id=\"individualScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 132
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 133
          },
          {
            "text": "                                        &lt;!-- Team Scores --&gt;",
            "lineNumber": 134
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"teamScoresSection_${league.replace(/\\s+/g, '_')}\" style=\"display: none;\"&gt;",
            "lineNumber": 135
          },
          {
            "text": "                                            &lt;h6&gt;${typeof t === 'function' ? t('top_team_scores', 'Top Team Scores') : 'Top Team Scores'}&lt;/h6&gt;",
            "lineNumber": 136
          },
          {
            "text": "                                            &lt;div id=\"teamScores_${league.replace(/\\s+/g, '_')}\"&gt;&lt;/div&gt;",
            "lineNumber": 137
          },
          {
            "text": "                                        &lt;/div&gt;",
            "lineNumber": 138
          },
          {
            "text": "                                        &lt;!-- Individual Averages --&gt;",
            "lineNumber": 139
          },
          {
            "text": "                                        &lt;div class=\"mb-3\" id=\"individualAveragesSection_",
            "lineNumber": 140
          },
          {
            "text": "        }",
            "lineNumber": 156
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          }
        ]
      },
      "score": 0.32312923669815063
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n 'Match Schedule'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('position_in_season_progress', 'Position in Season Progress') : 'Position in Season Progress'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 3rd Row: Points per Match Day + Points in Season Progress --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('points_in_season_progress', 'Points in Season Progress') : 'Points in Season Progress'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"individualAveragesCard\"&gt;\n                                &lt;div class=\"text-center py-3\"&gt;\n                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                        &lt;span class=\"visually-hidden\"&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 51,
                "column": 5
              },
              "endPosition": {
                "line": 52,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": " 'Match Schedule'}&lt;/p&gt;--&gt;",
            "lineNumber": 81
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 82
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 85
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 87
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('position_in_season_progress', 'Position in Season Progress') : 'Position in Season Progress'}&lt;/h6&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 93
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 97
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 98
          },
          {
            "lineNumber": 99
          },
          {
            "text": "                    &lt;!-- 3rd Row: Points per Match Day + Points in Season Progress --&gt;",
            "lineNumber": 100
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 101
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 102
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 104
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'}&lt;/h6&gt;",
            "lineNumber": 105
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 109
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 110
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 111
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 114
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('points_in_season_progress', 'Points in Season Progress') : 'Points in Season Progress'}&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 119
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;",
            "lineNumber": 124
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 126
          },
          {
            "text": "                            &lt;div id=\"individualAveragesCard\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;span class=\"visually-hidden\"&gt;",
            "lineNumber": 130
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          }
        ]
      },
      "score": 0.3172312080860138
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 47
          },
          "endPosition": {
            "line": 86
          }
        },
        "contents": "                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Season League Standings Block (Season only) --&gt;\n    &lt;div id=\"seasonLeagueStandingsContainer\"&gt;\n        &lt;!-- Season league standings content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_league_standings\"&gt;Initializing season league standings...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- League Aggregation Block (League only) --&gt;\n    &lt;div id=\"leagueAggregationContainer\"&gt;\n        &lt;!-- League aggregation content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_aggregation\"&gt;Initializing league aggregation...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- League Season Overview Block (League + Season) --&gt;\n    &lt;div id=\"leagueSeasonOverviewContainer\"&gt;\n        &lt;!-- League season overview content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_season_overview\"&gt;Initializing season overview...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 48
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 49
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 51
          },
          {
            "lineNumber": 52
          },
          {
            "text": "    &lt;!-- Season League Standings Block (Season only) --&gt;",
            "lineNumber": 53
          },
          {
            "text": "    &lt;div id=\"seasonLeagueStandingsContainer\"&gt;",
            "lineNumber": 54
          },
          {
            "text": "        &lt;!-- Season league standings content will be rendered here --&gt;",
            "lineNumber": 55
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 56
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 57
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 58
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 59
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_league_standings\"&gt;Initializing season league standings...&lt;/p&gt;",
            "lineNumber": 60
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 61
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "    &lt;!-- League Aggregation Block (League only) --&gt;",
            "lineNumber": 64
          },
          {
            "text": "    &lt;div id=\"leagueAggregationContainer\"&gt;",
            "lineNumber": 65
          },
          {
            "text": "        &lt;!-- League aggregation content will be rendered here --&gt;",
            "lineNumber": 66
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 67
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 68
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 69
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 70
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_aggregation\"&gt;Initializing league aggregation...&lt;/p&gt;",
            "lineNumber": 71
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "    &lt;!-- League Season Overview Block (League + Season) --&gt;",
            "lineNumber": 75
          },
          {
            "text": "    &lt;div id=\"leagueSeasonOverviewContainer\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "        &lt;!-- League season overview content will be rendered here --&gt;",
            "lineNumber": 77
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 78
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 80
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 81
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.league_season_overview\"&gt;Initializing season overview...&lt;/p&gt;",
            "lineNumber": 82
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 83
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;",
            "lineNumber": 86
          }
        ]
      },
      "score": 0.314997136592865
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 82
          },
          "endPosition": {
            "line": 119
          }
        },
        "contents": "        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;\n    &lt;div id=\"seasonOverviewContainer\"&gt;\n        &lt;!-- Season overview content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_overview\"&gt;Initializing detailed overview...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Match Day Block --&gt;\n    &lt;div id=\"matchdayContainer\"&gt;\n        &lt;!-- Match day content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.matchday\"&gt;Initializing match day content...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team Details Block --&gt;\n    &lt;div id=\"teamDetailsContainer\"&gt;\n        &lt;!-- Team details content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_details\"&gt;Initializing team details...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team Performance Analysis Block (League + Season + Team) --&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 83
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "    &lt;!-- Season Overview Block (League + Season + Week/Team) --&gt;",
            "lineNumber": 86
          },
          {
            "text": "    &lt;div id=\"seasonOverviewContainer\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "        &lt;!-- Season overview content will be rendered here --&gt;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 91
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.season_overview\"&gt;Initializing detailed overview...&lt;/p&gt;",
            "lineNumber": 93
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "lineNumber": 96
          },
          {
            "text": "    &lt;!-- Match Day Block --&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &lt;div id=\"matchdayContainer\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "        &lt;!-- Match day content will be rendered here --&gt;",
            "lineNumber": 99
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 100
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 101
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 102
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.matchday\"&gt;Initializing match day content...&lt;/p&gt;",
            "lineNumber": 104
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 105
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "lineNumber": 107
          },
          {
            "text": "    &lt;!-- Team Details Block --&gt;",
            "lineNumber": 108
          },
          {
            "text": "    &lt;div id=\"teamDetailsContainer\"&gt;",
            "lineNumber": 109
          },
          {
            "text": "        &lt;!-- Team details content will be rendered here --&gt;",
            "lineNumber": 110
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 113
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 114
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_details\"&gt;Initializing team details...&lt;/p&gt;",
            "lineNumber": 115
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "    &lt;!-- Team Performance Analysis Block (League + Season + Team) --&gt;",
            "lineNumber": 119
          }
        ]
      },
      "score": 0.31071510910987854
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\league-stats-app.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 334,
            "column": 1
          }
        },
        "contents": "class LeagueStatsApp {\n\n\n    async initializeContentBlocks() {\n        console.log('🧱 Initializing content blocks...');\n        \n        try {\n            // Create content blocks FIRST (they initialize in their constructors)\n            console.log('🔄 Creating SeasonLeagueStandingsBlock...');\n            const seasonLeagueStandingsBlock = new SeasonLeagueStandingsBlock();\n            console.log('🔄 Creating LeagueAggregationBlock...');\n            const leagueAggregationBlock = new LeagueAggregationBlock();\n            console.log('🔄 Creating LeagueSeasonOverviewBlock...');\n            const leagueSeasonOverviewBlock = new LeagueSeasonOverviewBlock();\n            console.log('🔄 Creating SeasonOverviewBlock...');\n            const seasonOverviewBlock = new SeasonOverviewBlock();\n            console.log('🔄 Creating MatchDayBlock...');\n            const matchDayBlock = new MatchDayBlock();\n            console.log('🔄 Creating TeamDetailsBlock...');\n            const teamDetailsBlock = new TeamDetailsBlock();\n            console.log('🔄 Creating TeamPerformanceBlock...');\n            const teamPerformanceBlock = new TeamPerformanceBlock();\n            console.log('🔄 Creating TeamWinPercentageBlock...');\n            const teamWinPercentageBlock = new TeamWinPercentageBlock();\n            console.log('🔄 Creating GameOverviewBlock...');\n            const gameOverviewBlock = new GameOverviewBlock();\n            console.log('🔄 Creating GameTeamDetailsBlock...');\n            const gameTeamDetailsBlock = new GameTeamDetailsBlock();\n            \n            // Store blocks (no filter-controls block needed anymore)\n            this.contentBlocks.set('season-league-standings', seasonLeagueStandingsBlock);\n            this.contentBlocks.set('league-aggregation', leagueAggregationBlock);\n            this.contentBlocks.set('league-season-overview', leagueSeasonOverviewBlock);\n            this.contentBlocks.set('season-overview', seasonOverviewBlock);\n            this.contentBlocks.set('matchday', matchDayBlock);\n            this.contentBlocks.set('team-details', teamDetailsBlock);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueStatsApp {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 71
          },
          {
            "lineNumber": 72
          },
          {
            "text": "    async initializeContentBlocks() {",
            "lineNumber": 73,
            "isSignature": true
          },
          {
            "text": "        console.log('🧱 Initializing content blocks...');",
            "lineNumber": 74
          },
          {
            "text": "        ",
            "lineNumber": 75
          },
          {
            "text": "        try {",
            "lineNumber": 76
          },
          {
            "text": "            // Create content blocks FIRST (they initialize in their constructors)",
            "lineNumber": 77
          },
          {
            "text": "            console.log('🔄 Creating SeasonLeagueStandingsBlock...');",
            "lineNumber": 78
          },
          {
            "text": "            const seasonLeagueStandingsBlock = new SeasonLeagueStandingsBlock();",
            "lineNumber": 79
          },
          {
            "text": "            console.log('🔄 Creating LeagueAggregationBlock...');",
            "lineNumber": 80
          },
          {
            "text": "            const leagueAggregationBlock = new LeagueAggregationBlock();",
            "lineNumber": 81
          },
          {
            "text": "            console.log('🔄 Creating LeagueSeasonOverviewBlock...');",
            "lineNumber": 82
          },
          {
            "text": "            const leagueSeasonOverviewBlock = new LeagueSeasonOverviewBlock();",
            "lineNumber": 83
          },
          {
            "text": "            console.log('🔄 Creating SeasonOverviewBlock...');",
            "lineNumber": 84
          },
          {
            "text": "            const seasonOverviewBlock = new SeasonOverviewBlock();",
            "lineNumber": 85
          },
          {
            "text": "            console.log('🔄 Creating MatchDayBlock...');",
            "lineNumber": 86
          },
          {
            "text": "            const matchDayBlock = new MatchDayBlock();",
            "lineNumber": 87
          },
          {
            "text": "            console.log('🔄 Creating TeamDetailsBlock...');",
            "lineNumber": 88
          },
          {
            "text": "            const teamDetailsBlock = new TeamDetailsBlock();",
            "lineNumber": 89
          },
          {
            "text": "            console.log('🔄 Creating TeamPerformanceBlock...');",
            "lineNumber": 90
          },
          {
            "text": "            const teamPerformanceBlock = new TeamPerformanceBlock();",
            "lineNumber": 91
          },
          {
            "text": "            console.log('🔄 Creating TeamWinPercentageBlock...');",
            "lineNumber": 92
          },
          {
            "text": "            const teamWinPercentageBlock = new TeamWinPercentageBlock();",
            "lineNumber": 93
          },
          {
            "text": "            console.log('🔄 Creating GameOverviewBlock...');",
            "lineNumber": 94
          },
          {
            "text": "            const gameOverviewBlock = new GameOverviewBlock();",
            "lineNumber": 95
          },
          {
            "text": "            console.log('🔄 Creating GameTeamDetailsBlock...');",
            "lineNumber": 96
          },
          {
            "text": "            const gameTeamDetailsBlock = new GameTeamDetailsBlock();",
            "lineNumber": 97
          },
          {
            "text": "            ",
            "lineNumber": 98
          },
          {
            "text": "            // Store blocks (no filter-controls block needed anymore)",
            "lineNumber": 99
          },
          {
            "text": "            this.contentBlocks.set('season-league-standings', seasonLeagueStandingsBlock);",
            "lineNumber": 100
          },
          {
            "text": "            this.contentBlocks.set('league-aggregation', leagueAggregationBlock);",
            "lineNumber": 101
          },
          {
            "text": "            this.contentBlocks.set('league-season-overview', leagueSeasonOverviewBlock);",
            "lineNumber": 102
          },
          {
            "text": "            this.contentBlocks.set('season-overview', seasonOverviewBlock);",
            "lineNumber": 103
          },
          {
            "text": "            this.contentBlocks.set('matchday', matchDayBlock);",
            "lineNumber": 104
          },
          {
            "text": "            this.contentBlocks.set('team-details', teamDetailsBlock);",
            "lineNumber": 105
          },
          {
            "text": "    }",
            "lineNumber": 127,
            "isSignature": true
          }
        ]
      },
      "score": 0.3086152970790863
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 115
          },
          "endPosition": {
            "line": 152
          }
        },
        "contents": "        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team Performance Analysis Block (League + Season + Team) --&gt;\n    &lt;div id=\"team-performance\"&gt;\n        &lt;!-- Team performance analysis content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_performance\"&gt;Initializing team performance analysis...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team Win Percentage Analysis Block (League + Season + Team) --&gt;\n    &lt;div id=\"team-win-percentage\"&gt;\n        &lt;!-- Team win percentage analysis content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_win_percentage\"&gt;Initializing team win percentage analysis...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Game Overview Block (League + Season + Week + Round, no team) --&gt;\n    &lt;div id=\"gameOverviewContainer\"&gt;\n        &lt;!-- Game overview content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.game_overview\"&gt;Initializing game overview...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Game Team Details Block (League + Season + Week + Team + Round) --&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "lineNumber": 118
          },
          {
            "text": "    &lt;!-- Team Performance Analysis Block (League + Season + Team) --&gt;",
            "lineNumber": 119
          },
          {
            "text": "    &lt;div id=\"team-performance\"&gt;",
            "lineNumber": 120
          },
          {
            "text": "        &lt;!-- Team performance analysis content will be rendered here --&gt;",
            "lineNumber": 121
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 122
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 123
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 124
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 125
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_performance\"&gt;Initializing team performance analysis...&lt;/p&gt;",
            "lineNumber": 126
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 127
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 128
          },
          {
            "lineNumber": 129
          },
          {
            "text": "    &lt;!-- Team Win Percentage Analysis Block (League + Season + Team) --&gt;",
            "lineNumber": 130
          },
          {
            "text": "    &lt;div id=\"team-win-percentage\"&gt;",
            "lineNumber": 131
          },
          {
            "text": "        &lt;!-- Team win percentage analysis content will be rendered here --&gt;",
            "lineNumber": 132
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 133
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 134
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 135
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 136
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.team_win_percentage\"&gt;Initializing team win percentage analysis...&lt;/p&gt;",
            "lineNumber": 137
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 138
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 139
          },
          {
            "lineNumber": 140
          },
          {
            "text": "    &lt;!-- Game Overview Block (League + Season + Week + Round, no team) --&gt;",
            "lineNumber": 141
          },
          {
            "text": "    &lt;div id=\"gameOverviewContainer\"&gt;",
            "lineNumber": 142
          },
          {
            "text": "        &lt;!-- Game overview content will be rendered here --&gt;",
            "lineNumber": 143
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 144
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 145
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 146
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 147
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.game_overview\"&gt;Initializing game overview...&lt;/p&gt;",
            "lineNumber": 148
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 149
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "    &lt;!-- Game Team Details Block (League + Season + Week + Team + Round) --&gt;",
            "lineNumber": 152
          }
        ]
      },
      "score": 0.29704850912094116
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"individualAveragesCard\"&gt;\n                                &lt;div class=\"text-center py-3\"&gt;\n                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                        &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading individual averages...') : 'Loading individual averages...'}&lt;/span&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 5th Row: Team vs Team Comparison Matrix (Full Width) --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"team-vs-team-comparison-inline\"&gt;&lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    async loadSeasonData(state) {\n        const { league, season } = state;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 51,
                "column": 5
              },
              "endPosition": {
                "line": 52,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 119
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;",
            "lineNumber": 124
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 126
          },
          {
            "text": "                            &lt;div id=\"individualAveragesCard\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading individual averages...') : 'Loading individual averages...'}&lt;/span&gt;",
            "lineNumber": 130
          },
          {
            "text": "                                    &lt;/div&gt;",
            "lineNumber": 131
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 132
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 133
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 134
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "                    &lt;!-- 5th Row: Team vs Team Comparison Matrix (Full Width) --&gt;",
            "lineNumber": 137
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 138
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 139
          },
          {
            "text": "                            &lt;div id=\"team-vs-team-comparison-inline\"&gt;&lt;/div&gt;",
            "lineNumber": 140
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 141
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 142
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 143
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 144
          },
          {
            "text": "        &#96;;",
            "lineNumber": 145
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    async loadSeasonData(state) {",
            "lineNumber": 148,
            "isSignature": true
          },
          {
            "text": "        const { league, season } = state;",
            "lineNumber": 149
          },
          {
            "text": "    }",
            "lineNumber": 207,
            "isSignature": true
          }
        ]
      },
      "score": 0.29398834705352783
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": "class LeagueService:\ndef get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n\n            \n            # Create column groups\n            columns = [\n                ColumnGroup(\n                    title=i18n_service.get_text(\"team\"),\n                    frozen=\"left\",\n                    style={\"backgroundColor\": get_theme_color(\"background\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),\n                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")\n                    ]\n                ),\n                ColumnGroup(\n                    title=i18n_service.get_text(\"opponent\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),\n                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")\n                    ]\n                )\n            ]\n            \n            # Get individual player points for this round to add to team points",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 92,
                "column": 5
              },
              "endPosition": {
                "line": 93,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "lineNumber": 130
          },
          {
            "text": "            ",
            "lineNumber": 131
          },
          {
            "text": "            # Create column groups",
            "lineNumber": 132
          },
          {
            "text": "            columns = [",
            "lineNumber": 133
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 134
          },
          {
            "text": "                    title=i18n_service.get_text(\"team\"),",
            "lineNumber": 135
          },
          {
            "text": "                    frozen=\"left\",",
            "lineNumber": 136
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"background\")},",
            "lineNumber": 137
          },
          {
            "text": "                    columns=[",
            "lineNumber": 138
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),",
            "lineNumber": 139
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),",
            "lineNumber": 140
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 141
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")",
            "lineNumber": 142
          },
          {
            "text": "                    ]",
            "lineNumber": 143
          },
          {
            "text": "                ),",
            "lineNumber": 144
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 145
          },
          {
            "text": "                    title=i18n_service.get_text(\"opponent\"),",
            "lineNumber": 146
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_light\")},",
            "lineNumber": 147
          },
          {
            "text": "                    columns=[",
            "lineNumber": 148
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),",
            "lineNumber": 149
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),",
            "lineNumber": 150
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),",
            "lineNumber": 151
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")",
            "lineNumber": 152
          },
          {
            "text": "                    ]",
            "lineNumber": 153
          },
          {
            "text": "                )",
            "lineNumber": 154
          },
          {
            "text": "            ]",
            "lineNumber": 155
          },
          {
            "text": "            ",
            "lineNumber": 156
          },
          {
            "text": "            # Get individual player points for this round to add to team points",
            "lineNumber": 157
          }
        ]
      },
      "score": 0.2916918098926544
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\index.html",
        "range": {
          "startPosition": {
            "line": 37
          },
          "endPosition": {
            "line": 81
          }
        },
        "contents": "        &lt;/div&gt;\n    &lt;/div&gt;\n   \n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                Letzte Events\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;ul class=\"list-group\" id=\"latestEvents\"&gt;\n                    &lt;!-- Will be populated via JavaScript --&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;!-- Add JavaScript for latest events --&gt;\n&lt;script&gt;\ndocument.addEventListener('DOMContentLoaded', function() {\n    console.log('🔄 Loading latest events with database:', getCurrentDatabase());\n    \n    // Use fetchWithDatabase to include the database parameter\n    fetchWithDatabase('{{ url_for(\"league.get_latest_events\") }}')\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            //console.log('✅ Latest events loaded:', data);\n            const eventsList = document.getElementById('latestEvents');\n            if (data &amp;&amp; Array.isArray(data)) {\n                eventsList.innerHTML = data.map(event =&gt; &#96;\n                    &lt;li class=\"list-group-item\"&gt;\n                        &lt;a href=\"{{ url_for('league.stats') }}?season=${encodeURIComponent(event.Season)}&amp;league=${encodeURIComponent(event.League)}&amp;week=${event.Week}&amp;database=${encodeURIComponent(getCurrentDatabase())}\" \n                           class=\"text-decoration-none\"&gt;\n                            ${event.Season} - ${event.League} - Woche ${event.Week}\n                            &lt;small class=\"text-muted\"&gt;(${event.Date})&lt;/small&gt;\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                &#96;).join('');\n            } else {\n                eventsList.innerHTML = '&lt;li class=\"list-group-item\"&gt;Keine Events gefunden&lt;/li&gt;';\n            }\n        })\n        .catch(error =&gt; {\n            //console.error('❌ Error fetching events:', error);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 38
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 39
          },
          {
            "text": "   ",
            "lineNumber": 40
          },
          {
            "text": "    &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "        &lt;div class=\"card\"&gt;",
            "lineNumber": 42
          },
          {
            "text": "            &lt;div class=\"card-header\"&gt;",
            "lineNumber": 43
          },
          {
            "text": "                Letzte Events",
            "lineNumber": 44
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 45
          },
          {
            "text": "            &lt;div class=\"card-body\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                &lt;ul class=\"list-group\" id=\"latestEvents\"&gt;",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;!-- Will be populated via JavaScript --&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &lt;/ul&gt;",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 51
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 52
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "&lt;!-- Add JavaScript for latest events --&gt;",
            "lineNumber": 55
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 56
          },
          {
            "text": "document.addEventListener('DOMContentLoaded', function() {",
            "lineNumber": 57
          },
          {
            "text": "    console.log('🔄 Loading latest events with database:', getCurrentDatabase());",
            "lineNumber": 58
          },
          {
            "text": "    ",
            "lineNumber": 59
          },
          {
            "text": "    // Use fetchWithDatabase to include the database parameter",
            "lineNumber": 60
          },
          {
            "text": "    fetchWithDatabase('{{ url_for(\"league.get_latest_events\") }}')",
            "lineNumber": 61
          },
          {
            "text": "        .then(response =&gt; response.json())",
            "lineNumber": 62
          },
          {
            "text": "        .then(data =&gt; {",
            "lineNumber": 63
          },
          {
            "text": "            //console.log('✅ Latest events loaded:', data);",
            "lineNumber": 64
          },
          {
            "text": "            const eventsList = document.getElementById('latestEvents');",
            "lineNumber": 65
          },
          {
            "text": "            if (data &amp;&amp; Array.isArray(data)) {",
            "lineNumber": 66
          },
          {
            "text": "                eventsList.innerHTML = data.map(event =&gt; &#96;",
            "lineNumber": 67
          },
          {
            "text": "                    &lt;li class=\"list-group-item\"&gt;",
            "lineNumber": 68
          },
          {
            "text": "                        &lt;a href=\"{{ url_for('league.stats') }}?season=${encodeURIComponent(event.Season)}&amp;league=${encodeURIComponent(event.League)}&amp;week=${event.Week}&amp;database=${encodeURIComponent(getCurrentDatabase())}\" ",
            "lineNumber": 69
          },
          {
            "text": "                           class=\"text-decoration-none\"&gt;",
            "lineNumber": 70
          },
          {
            "text": "                            ${event.Season} - ${event.League} - Woche ${event.Week}",
            "lineNumber": 71
          },
          {
            "text": "                            &lt;small class=\"text-muted\"&gt;(${event.Date})&lt;/small&gt;",
            "lineNumber": 72
          },
          {
            "text": "                        &lt;/a&gt;",
            "lineNumber": 73
          },
          {
            "text": "                    &lt;/li&gt;",
            "lineNumber": 74
          },
          {
            "text": "                &#96;).join('');",
            "lineNumber": 75
          },
          {
            "text": "            } else {",
            "lineNumber": 76
          },
          {
            "text": "                eventsList.innerHTML = '&lt;li class=\"list-group-item\"&gt;Keine Events gefunden&lt;/li&gt;';",
            "lineNumber": 77
          },
          {
            "text": "            }",
            "lineNumber": 78
          },
          {
            "text": "        })",
            "lineNumber": 79
          },
          {
            "text": "        .catch(error =&gt; {",
            "lineNumber": 80
          },
          {
            "text": "            //console.error('❌ Error fetching events:', error);",
            "lineNumber": 81
          }
        ]
      },
      "score": 0.2838003635406494
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-aggregation-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 411,
            "column": 1
          }
        },
        "contents": "class LeagueAggregationBlock extends BaseContentBlock {\n\n\n    generateHTML(state) {\n        const leagueName = state.league_long || state.league || '';\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;${leagueName} - ${typeof t === 'function' ? t('ui.league.all_time', 'All-Time Statistics') : 'All-Time Statistics'}&lt;/h5&gt;\n                    &lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('ui.league.performance_all_seasons', 'League performance across all seasons') : 'League performance across all seasons'}&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;!-- League Averages Section --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('ui.league.averages_over_time', 'League Averages Over Time') : 'League Averages Over Time'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartLeagueAverages\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('ui.league.points_to_win', 'League Points to Win') : 'League Points to Win'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartPointsToWin\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- High Performance Tables --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueAggregationBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 47
          },
          {
            "lineNumber": 48
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "        const leagueName = state.league_long || state.league || '';",
            "lineNumber": 50
          },
          {
            "text": "        return &#96;",
            "lineNumber": 51
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 52
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 53
          },
          {
            "text": "                    &lt;h5&gt;${leagueName} - ${typeof t === 'function' ? t('ui.league.all_time', 'All-Time Statistics') : 'All-Time Statistics'}&lt;/h5&gt;",
            "lineNumber": 54
          },
          {
            "text": "                    &lt;p class=\"mb-0 text-muted\"&gt;${typeof t === 'function' ? t('ui.league.performance_all_seasons', 'League performance across all seasons') : 'League performance across all seasons'}&lt;/p&gt;",
            "lineNumber": 55
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 56
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 57
          },
          {
            "text": "                    &lt;!-- League Averages Section --&gt;",
            "lineNumber": 58
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 59
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 60
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 62
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('ui.league.averages_over_time', 'League Averages Over Time') : 'League Averages Over Time'}&lt;/h6&gt;",
            "lineNumber": 63
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 64
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 65
          },
          {
            "text": "                                    &lt;div id=\"chartLeagueAverages\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 66
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 67
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 68
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 69
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 70
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 71
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 72
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('ui.league.points_to_win', 'League Points to Win') : 'League Points to Win'}&lt;/h6&gt;",
            "lineNumber": 73
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 74
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 75
          },
          {
            "text": "                                    &lt;div id=\"chartPointsToWin\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 76
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 78
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "                    &lt;!-- High Performance Tables --&gt;",
            "lineNumber": 82
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 84
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 86
          },
          {
            "text": "                                    &lt;h6&gt;",
            "lineNumber": 87
          },
          {
            "text": "    }",
            "lineNumber": 132,
            "isSignature": true
          }
        ]
      },
      "score": 0.27608436346054077
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\index.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 41,
            "column": 8
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block title %}Home{% endblock %}\n\n{% block content %}\n&lt;!--h1&gt;Bowling Dashboard&lt;/h1--&gt;\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card mb-4\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                Info\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;!-- We'll add stats here later --&gt;\n                &lt;p&gt;Diese Seite ist ein Proof of Concept zur Darstellung von Ergebnissen und Statistiken rund um Bowling Ligen, Tuniere und Pokalwettbewerbe.&lt;/p&gt;\n                &lt;p&gt;Die Auswertungen sind oben über die Navigation zu \"League Stats\" und \"Player Stats\" zu finden, ich hab auch ein paar Beispiele verlinkt.&lt;/p&gt;\n                &lt;p&gt;Hauptaugenmerk liegt derzeit auf den Ligastatistiken. Die meisten Daten sind fiktiv, jedoch ist die Seite so aufgabeut, dass reale Daten einfach integriert werden könnten.&lt;/p&gt;\n                &lt;p&gt;Ihr könnte auf den Seiten meist die Ebene der angezeigten Infos verändern, in dem ihr die Buttons für z.B. die Saison auswählt. Einfach ein wenig herumprobieren.&lt;/p&gt;\n                \n                &lt;p&gt;Bitte kommt mit Feedback und Vorschlägen gerne per Whatsapp oder im Traning auf mich zu.&lt;/p&gt;\n                &lt;p&gt;  Cheers, Chris&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;       \n    &lt;/div&gt;\n\n\n    &lt;!-- New Examples Card --&gt;\n    &lt;div class=\"col-md-6 mt-4\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                Beispiele\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;ul class=\"list-group\" id=\"exampleQueries\"&gt;\n                    &lt;!-- Will be populated via JavaScript --&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n   \n    &lt;div class=\"col-md-6\"&gt;\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block title %}Home{% endblock %}",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "{% block content %}",
            "lineNumber": 5
          },
          {
            "text": "&lt;!--h1&gt;Bowling Dashboard&lt;/h1--&gt;",
            "lineNumber": 6
          },
          {
            "text": "&lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 7
          },
          {
            "text": "    &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 8
          },
          {
            "text": "        &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "            &lt;div class=\"card-header\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "                Info",
            "lineNumber": 11
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 12
          },
          {
            "text": "            &lt;div class=\"card-body\"&gt;",
            "lineNumber": 13
          },
          {
            "text": "                &lt;!-- We'll add stats here later --&gt;",
            "lineNumber": 14
          },
          {
            "text": "                &lt;p&gt;Diese Seite ist ein Proof of Concept zur Darstellung von Ergebnissen und Statistiken rund um Bowling Ligen, Tuniere und Pokalwettbewerbe.&lt;/p&gt;",
            "lineNumber": 15
          },
          {
            "text": "                &lt;p&gt;Die Auswertungen sind oben über die Navigation zu \"League Stats\" und \"Player Stats\" zu finden, ich hab auch ein paar Beispiele verlinkt.&lt;/p&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;p&gt;Hauptaugenmerk liegt derzeit auf den Ligastatistiken. Die meisten Daten sind fiktiv, jedoch ist die Seite so aufgabeut, dass reale Daten einfach integriert werden könnten.&lt;/p&gt;",
            "lineNumber": 17
          },
          {
            "text": "                &lt;p&gt;Ihr könnte auf den Seiten meist die Ebene der angezeigten Infos verändern, in dem ihr die Buttons für z.B. die Saison auswählt. Einfach ein wenig herumprobieren.&lt;/p&gt;",
            "lineNumber": 18
          },
          {
            "text": "                ",
            "lineNumber": 19
          },
          {
            "text": "                &lt;p&gt;Bitte kommt mit Feedback und Vorschlägen gerne per Whatsapp oder im Traning auf mich zu.&lt;/p&gt;",
            "lineNumber": 20
          },
          {
            "text": "                &lt;p&gt;  Cheers, Chris&lt;/p&gt;",
            "lineNumber": 21
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "text": "        &lt;/div&gt;       ",
            "lineNumber": 23
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "    &lt;!-- New Examples Card --&gt;",
            "lineNumber": 27
          },
          {
            "text": "    &lt;div class=\"col-md-6 mt-4\"&gt;",
            "lineNumber": 28
          },
          {
            "text": "        &lt;div class=\"card\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "            &lt;div class=\"card-header\"&gt;",
            "lineNumber": 30
          },
          {
            "text": "                Beispiele",
            "lineNumber": 31
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 32
          },
          {
            "text": "            &lt;div class=\"card-body\"&gt;",
            "lineNumber": 33
          },
          {
            "text": "                &lt;ul class=\"list-group\" id=\"exampleQueries\"&gt;",
            "lineNumber": 34
          },
          {
            "text": "                    &lt;!-- Will be populated via JavaScript --&gt;",
            "lineNumber": 35
          },
          {
            "text": "                &lt;/ul&gt;",
            "lineNumber": 36
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 37
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 38
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 39
          },
          {
            "text": "   ",
            "lineNumber": 40
          },
          {
            "text": "    &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "        ",
            "lineNumber": 42
          }
        ]
      },
      "score": 0.27500221133232117
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-league-standings-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 298,
            "column": 1
          }
        },
        "contents": "class SeasonLeagueStandingsBlock extends BaseContentBlock {\n\n\n    renderSeasonLeagueStandings(data, season) {\n        const contentContainer = document.getElementById('seasonLeagueStandingsContent');\n        \n        if (!data || !data.leagues || data.leagues.length === 0) {\n            contentContainer.innerHTML = &#96;\n                &lt;div class=\"alert alert-info\"&gt;\n                    &lt;h6&gt;${typeof t === 'function' ? t('no_league_data_available', 'No league data available') : 'No league data available'}&lt;/h6&gt;\n                    &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${season}.&lt;/p&gt;\n                &lt;/div&gt;\n            &#96;;\n            return;\n        }\n\n        let html = '';\n        \n        // Create a card for each league\n        data.leagues.forEach(leagueData =&gt; {\n            const { league, week, standings, honor_scores } = leagueData;\n            \n            html +=\n        }\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonLeagueStandingsBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 91
          },
          {
            "lineNumber": 92
          },
          {
            "text": "    renderSeasonLeagueStandings(data, season) {",
            "lineNumber": 93,
            "isSignature": true
          },
          {
            "text": "        const contentContainer = document.getElementById('seasonLeagueStandingsContent');",
            "lineNumber": 94
          },
          {
            "text": "        ",
            "lineNumber": 95
          },
          {
            "text": "        if (!data || !data.leagues || data.leagues.length === 0) {",
            "lineNumber": 96
          },
          {
            "text": "            contentContainer.innerHTML = &#96;",
            "lineNumber": 97
          },
          {
            "text": "                &lt;div class=\"alert alert-info\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                    &lt;h6&gt;${typeof t === 'function' ? t('no_league_data_available', 'No league data available') : 'No league data available'}&lt;/h6&gt;",
            "lineNumber": 99
          },
          {
            "text": "                    &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${season}.&lt;/p&gt;",
            "lineNumber": 100
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "            &#96;;",
            "lineNumber": 102
          },
          {
            "text": "            return;",
            "lineNumber": 103
          },
          {
            "text": "        }",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "        let html = '';",
            "lineNumber": 106
          },
          {
            "text": "        ",
            "lineNumber": 107
          },
          {
            "text": "        // Create a card for each league",
            "lineNumber": 108
          },
          {
            "text": "        data.leagues.forEach(leagueData =&gt; {",
            "lineNumber": 109
          },
          {
            "text": "            const { league, week, standings, honor_scores } = leagueData;",
            "lineNumber": 110
          },
          {
            "text": "            ",
            "lineNumber": 111
          },
          {
            "text": "            html +=",
            "lineNumber": 112
          },
          {
            "text": "        }",
            "lineNumber": 156
          },
          {
            "text": "    }",
            "lineNumber": 185,
            "isSignature": true
          }
        ]
      },
      "score": 0.2729378938674927
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 148
          },
          "endPosition": {
            "line": 191
          }
        },
        "contents": "        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Game Team Details Block (League + Season + Week + Team + Round) --&gt;\n    &lt;div id=\"gameTeamDetailsContainer\"&gt;\n        &lt;!-- Game team details content will be rendered here --&gt;\n        &lt;div class=\"text-center py-5\"&gt;\n            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.game_team_details\"&gt;Initializing game team details...&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;/div&gt;\n\n{% endblock %}\n\n{% block scripts %}\n&lt;!-- Core dependencies --&gt;\n&lt;script src=\"{{ static_url('js/core/url-state-manager.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/core/centralized-button-manager.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/utils/team-vs-team-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/utils/individual-averages-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/base-content-block.js') }}\"&gt;&lt;/script&gt;\n\n&lt;!-- Content blocks --&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/season-league-standings-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/league-aggregation-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/league-season-overview-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/season-overview-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/matchday-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/team-details-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/team-performance-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/team-win-percentage-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/game-overview-block.js') }}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ static_url('js/content-blocks/game-team-details-block.js') }}\"&gt;&lt;/script&gt;\n\n&lt;!-- Main application --&gt;\n&lt;script src=\"{{ static_url('js/league-stats-app.js') }}\"&gt;&lt;/script&gt;\n\n&lt;!-- Initialize i18n translations if available --&gt;\n{% if translations %}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 149
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "lineNumber": 151
          },
          {
            "text": "    &lt;!-- Game Team Details Block (League + Season + Week + Team + Round) --&gt;",
            "lineNumber": 152
          },
          {
            "text": "    &lt;div id=\"gameTeamDetailsContainer\"&gt;",
            "lineNumber": 153
          },
          {
            "text": "        &lt;!-- Game team details content will be rendered here --&gt;",
            "lineNumber": 154
          },
          {
            "text": "        &lt;div class=\"text-center py-5\"&gt;",
            "lineNumber": 155
          },
          {
            "text": "            &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 156
          },
          {
            "text": "                &lt;span class=\"visually-hidden\" data-i18n=\"status.loading\"&gt;Loading...&lt;/span&gt;",
            "lineNumber": 157
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 158
          },
          {
            "text": "            &lt;p class=\"text-muted mt-2\" data-i18n=\"status.initializing.game_team_details\"&gt;Initializing game team details...&lt;/p&gt;",
            "lineNumber": 159
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 160
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 161
          },
          {
            "lineNumber": 162
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "{% endblock %}",
            "lineNumber": 165
          },
          {
            "lineNumber": 166
          },
          {
            "text": "{% block scripts %}",
            "lineNumber": 167
          },
          {
            "text": "&lt;!-- Core dependencies --&gt;",
            "lineNumber": 168
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/core/url-state-manager.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 169
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/core/centralized-button-manager.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 170
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/utils/team-vs-team-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 171
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/utils/individual-averages-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 172
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/base-content-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 173
          },
          {
            "lineNumber": 174
          },
          {
            "text": "&lt;!-- Content blocks --&gt;",
            "lineNumber": 175
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/season-league-standings-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 176
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/league-aggregation-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 177
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/league-season-overview-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 178
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/season-overview-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 179
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/matchday-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 180
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/team-details-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 181
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/team-performance-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 182
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/team-win-percentage-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 183
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/game-overview-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 184
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/game-team-details-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "&lt;!-- Main application --&gt;",
            "lineNumber": 187
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/league-stats-app.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 188
          },
          {
            "lineNumber": 189
          },
          {
            "text": "&lt;!-- Initialize i18n translations if available --&gt;",
            "lineNumber": 190
          },
          {
            "text": "{% if translations %}",
            "lineNumber": 191
          }
        ]
      },
      "score": 0.26571476459503174
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\league-content-renderer.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 236,
            "column": 1
          }
        },
        "contents": "/**\n * League Content Renderer\n * \n * Orchestrates league content rendering based on filter state\n * Uses different filter hierarchy than team stats: Season → League → Week → Team\n */\n\nclass LeagueContentRenderer {\n    constructor(urlStateManager, eventBus = null) {\n        this.urlStateManager = urlStateManager;\n        this.eventBus = eventBus || window.EventBus;\n        this.lastRenderedState = {};\n        this.isRendering = false;\n        \n        // Content blocks registry (will be populated in Phase 3)\n        this.contentBlocks = {};\n        \n        // Initialize content blocks (placeholder for now)\n        this.initializeContentBlocks();\n        \n        // League content modes based on filter combinations\n        this.contentModes = {\n            'no-selection': {\n                title: 'League Statistics',\n                description: 'Select season and league to view statistics',\n                blocks: []\n            },\n            'season-only': {\n                title: 'Season Overview',\n                description: 'Historical data across all leagues',\n                blocks: ['season-overview', 'honor-scores']\n            },\n            'season-league': {\n                title: 'League Analysis',\n                description: 'Comprehensive league performance analysis',\n                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']\n            },\n            'season-league-week': {\n                title: 'Week Analysis', \n                description: 'Current week standings and performance',\n                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']\n            },\n            'season-league-week-team': {\n                title: 'Team Analysis',\n                description: 'Detailed team performance analysis',\n                blocks: ['team-details', 'week-standings', 'points-vs-average']\n            }\n        };\n    }\n    \n    /**\n     * Initialize content blocks (placeholder for Phase 3)\n     */\n    initializeContentBlocks() {\n        console.log('League content blocks will be initialized in Phase 3...');\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * League Content Renderer",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Orchestrates league content rendering based on filter state",
            "lineNumber": 4
          },
          {
            "text": " * Uses different filter hierarchy than team stats: Season → League → Week → Team",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class LeagueContentRenderer {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor(urlStateManager, eventBus = null) {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = urlStateManager;",
            "lineNumber": 10
          },
          {
            "text": "        this.eventBus = eventBus || window.EventBus;",
            "lineNumber": 11
          },
          {
            "text": "        this.lastRenderedState = {};",
            "lineNumber": 12
          },
          {
            "text": "        this.isRendering = false;",
            "lineNumber": 13
          },
          {
            "text": "        ",
            "lineNumber": 14
          },
          {
            "text": "        // Content blocks registry (will be populated in Phase 3)",
            "lineNumber": 15
          },
          {
            "text": "        this.contentBlocks = {};",
            "lineNumber": 16
          },
          {
            "text": "        ",
            "lineNumber": 17
          },
          {
            "text": "        // Initialize content blocks (placeholder for now)",
            "lineNumber": 18
          },
          {
            "text": "        this.initializeContentBlocks();",
            "lineNumber": 19
          },
          {
            "text": "        ",
            "lineNumber": 20
          },
          {
            "text": "        // League content modes based on filter combinations",
            "lineNumber": 21
          },
          {
            "text": "        this.contentModes = {",
            "lineNumber": 22
          },
          {
            "text": "            'no-selection': {",
            "lineNumber": 23
          },
          {
            "text": "                title: 'League Statistics',",
            "lineNumber": 24
          },
          {
            "text": "                description: 'Select season and league to view statistics',",
            "lineNumber": 25
          },
          {
            "text": "                blocks: []",
            "lineNumber": 26
          },
          {
            "text": "            },",
            "lineNumber": 27
          },
          {
            "text": "            'season-only': {",
            "lineNumber": 28
          },
          {
            "text": "                title: 'Season Overview',",
            "lineNumber": 29
          },
          {
            "text": "                description: 'Historical data across all leagues',",
            "lineNumber": 30
          },
          {
            "text": "                blocks: ['season-overview', 'honor-scores']",
            "lineNumber": 31
          },
          {
            "text": "            },",
            "lineNumber": 32
          },
          {
            "text": "            'season-league': {",
            "lineNumber": 33
          },
          {
            "text": "                title: 'League Analysis',",
            "lineNumber": 34
          },
          {
            "text": "                description: 'Comprehensive league performance analysis',",
            "lineNumber": 35
          },
          {
            "text": "                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']",
            "lineNumber": 36
          },
          {
            "text": "            },",
            "lineNumber": 37
          },
          {
            "text": "            'season-league-week': {",
            "lineNumber": 38
          },
          {
            "text": "                title: 'Week Analysis', ",
            "lineNumber": 39
          },
          {
            "text": "                description: 'Current week standings and performance',",
            "lineNumber": 40
          },
          {
            "text": "                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']",
            "lineNumber": 41
          },
          {
            "text": "            },",
            "lineNumber": 42
          },
          {
            "text": "            'season-league-week-team': {",
            "lineNumber": 43
          },
          {
            "text": "                title: 'Team Analysis',",
            "lineNumber": 44
          },
          {
            "text": "                description: 'Detailed team performance analysis',",
            "lineNumber": 45
          },
          {
            "text": "                blocks: ['team-details', 'week-standings', 'points-vs-average']",
            "lineNumber": 46
          },
          {
            "text": "            }",
            "lineNumber": 47
          },
          {
            "text": "        };",
            "lineNumber": 48
          },
          {
            "text": "    }",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    /**",
            "lineNumber": 51
          },
          {
            "text": "     * Initialize content blocks (placeholder for Phase 3)",
            "lineNumber": 52
          },
          {
            "text": "     */",
            "lineNumber": 53
          },
          {
            "text": "    initializeContentBlocks() {",
            "lineNumber": 54,
            "isSignature": true
          },
          {
            "text": "        console.log('League content blocks will be initialized in Phase 3...');",
            "lineNumber": 55
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          }
        ]
      },
      "score": 0.2657116651535034
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-aggregation-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 411,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n : 'League Points to Win'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartPointsToWin\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- High Performance Tables --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('top_team_performances', 'Top Team Performances') : 'Top Team Performances'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"tableTopTeams\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('top_individual_performances', 'Top Individual Performances') : 'Top Individual Performances'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"tableTopIndividuals\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- Record Games Section --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('record_individual_games', 'Record Individual Games') : 'Record Individual Games'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"tableRecordIndividualGames\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 49,
                "column": 5
              },
              "endPosition": {
                "line": 50,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": " : 'League Points to Win'}&lt;/h6&gt;",
            "lineNumber": 73
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 74
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 75
          },
          {
            "text": "                                    &lt;div id=\"chartPointsToWin\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 76
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 78
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "                    &lt;!-- High Performance Tables --&gt;",
            "lineNumber": 82
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 84
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 86
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('top_team_performances', 'Top Team Performances') : 'Top Team Performances'}&lt;/h6&gt;",
            "lineNumber": 87
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 88
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                    &lt;div id=\"tableTopTeams\"&gt;&lt;/div&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 93
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 94
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 95
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 96
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('top_individual_performances', 'Top Individual Performances') : 'Top Individual Performances'}&lt;/h6&gt;",
            "lineNumber": 97
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 98
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 99
          },
          {
            "text": "                                    &lt;div id=\"tableTopIndividuals\"&gt;&lt;/div&gt;",
            "lineNumber": 100
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "                    &lt;!-- Record Games Section --&gt;",
            "lineNumber": 106
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 108
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 109
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 110
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('record_individual_games', 'Record Individual Games') : 'Record Individual Games'}&lt;/h6&gt;",
            "lineNumber": 111
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 112
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                    &lt;div id=\"tableRecordIndividualGames\"&gt;&lt;/div&gt;",
            "lineNumber": 114
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 115
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 118
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 119
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 120
          },
          {
            "text": "                                    &lt;h6&gt;",
            "lineNumber": 121
          },
          {
            "text": "    }",
            "lineNumber": 132,
            "isSignature": true
          }
        ]
      },
      "score": 0.2613086998462677
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\test.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 51,
            "column": 12
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block title %}API Test Page{% endblock %}\n\n{% block content %}\n{% include \"components/tables.html\" %}\n{% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n    &lt;h1 class=\"mb-4\"&gt;API Test Page&lt;/h1&gt;\n    \n    &lt;!-- Selection Area --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4&gt;Selection Controls&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;div class=\"row mb-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"seasonSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;League&lt;/h5&gt;\n                    &lt;div id=\"leagueSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"weekSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-12\"&gt;\n                    &lt;h5&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"teamSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    \n    &lt;!-- League Routes Card --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block title %}API Test Page{% endblock %}",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "{% block content %}",
            "lineNumber": 5
          },
          {
            "text": "{% include \"components/tables.html\" %}",
            "lineNumber": 6
          },
          {
            "text": "{% include \"components/charts.html\" %}",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;h1 class=\"mb-4\"&gt;API Test Page&lt;/h1&gt;",
            "lineNumber": 10
          },
          {
            "text": "    ",
            "lineNumber": 11
          },
          {
            "text": "    &lt;!-- Selection Area --&gt;",
            "lineNumber": 12
          },
          {
            "text": "    &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;h4&gt;Selection Controls&lt;/h4&gt;",
            "lineNumber": 15
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 16
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "            &lt;div class=\"row mb-3\"&gt;",
            "lineNumber": 18
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                    &lt;h5&gt;Season&lt;/h5&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;div id=\"seasonSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 21
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 22
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 23
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 24
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                    &lt;h5&gt;League&lt;/h5&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;div id=\"leagueSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 27
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 28
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 29
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 30
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                    &lt;h5&gt;Week&lt;/h5&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;div id=\"weekSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 33
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 34
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 36
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 37
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 38
          },
          {
            "text": "                &lt;div class=\"col-md-12\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                    &lt;h5&gt;Team&lt;/h5&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;div id=\"teamSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 43
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 44
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 45
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 46
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "    ",
            "lineNumber": 48
          },
          {
            "text": "    &lt;!-- League Routes Card --&gt;",
            "lineNumber": 49
          },
          {
            "text": "    &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;",
            "lineNumber": 51
          },
          {
            "text": "            ",
            "lineNumber": 52
          }
        ]
      },
      "score": 0.2598362863063812
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": "class LeagueService:\n\n\n    def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:\n        \"\"\"\n        Get game overview data for a specific round.\n        Shows all matches with team vs opponent: team name, team pins, team points | opponent points, opponent pins, opponent name\n        \n        Args:\n            season: Season identifier\n            league: League name\n            week: Week number\n            round_number: Round/Game number\n            \n        Returns:\n            TableData with column groups for Team and Opponent\n        \"\"\"\n        try:\n            # Get team totals for this round\n            filters = {\n                Columns.season: {'value': season, 'operator': 'eq'},\n                Columns.league_name: {'value': league, 'operator': 'eq'},\n                Columns.week: {'value': week, 'operator': 'eq'},\n                Columns.round_number: {'value': round_number, 'operator': 'eq'},\n                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Team totals\n            }\n            \n            team_totals = self.adapter.get_filtered_data(filters=filters)\n            \n            if team_totals.empty:\n                return TableData(\n                    columns=[],\n                    data=[],\n                    title=f\"{i18n_service.get_text('no_data_available')} - {i18n_service.get_text('game')} {round_number}\"\n                )\n            \n            # Get league standings to determine team positions\n            standings = self.get_league_standings(season, league, week)\n            team_positions = {}\n            if standings and standings.teams:\n                for team in standings.teams:\n                    team_positions[team.team_name] = team.position\n            \n            # Create column groups\n            columns =",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "lineNumber": 90
          },
          {
            "lineNumber": 91
          },
          {
            "text": "    def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:",
            "lineNumber": 92
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 93
          },
          {
            "text": "        Get game overview data for a specific round.",
            "lineNumber": 94
          },
          {
            "text": "        Shows all matches with team vs opponent: team name, team pins, team points | opponent points, opponent pins, opponent name",
            "lineNumber": 95
          },
          {
            "text": "        ",
            "lineNumber": 96
          },
          {
            "text": "        Args:",
            "lineNumber": 97
          },
          {
            "text": "            season: Season identifier",
            "lineNumber": 98
          },
          {
            "text": "            league: League name",
            "lineNumber": 99
          },
          {
            "text": "            week: Week number",
            "lineNumber": 100
          },
          {
            "text": "            round_number: Round/Game number",
            "lineNumber": 101
          },
          {
            "text": "            ",
            "lineNumber": 102
          },
          {
            "text": "        Returns:",
            "lineNumber": 103
          },
          {
            "text": "            TableData with column groups for Team and Opponent",
            "lineNumber": 104
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 105
          },
          {
            "text": "        try:",
            "lineNumber": 106
          },
          {
            "text": "            # Get team totals for this round",
            "lineNumber": 107
          },
          {
            "text": "            filters = {",
            "lineNumber": 108
          },
          {
            "text": "                Columns.season: {'value': season, 'operator': 'eq'},",
            "lineNumber": 109
          },
          {
            "text": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
            "lineNumber": 110
          },
          {
            "text": "                Columns.week: {'value': week, 'operator': 'eq'},",
            "lineNumber": 111
          },
          {
            "text": "                Columns.round_number: {'value': round_number, 'operator': 'eq'},",
            "lineNumber": 112
          },
          {
            "text": "                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Team totals",
            "lineNumber": 113
          },
          {
            "text": "            }",
            "lineNumber": 114
          },
          {
            "text": "            ",
            "lineNumber": 115
          },
          {
            "text": "            team_totals = self.adapter.get_filtered_data(filters=filters)",
            "lineNumber": 116
          },
          {
            "text": "            ",
            "lineNumber": 117
          },
          {
            "text": "            if team_totals.empty:",
            "lineNumber": 118
          },
          {
            "text": "                return TableData(",
            "lineNumber": 119
          },
          {
            "text": "                    columns=[],",
            "lineNumber": 120
          },
          {
            "text": "                    data=[],",
            "lineNumber": 121
          },
          {
            "text": "                    title=f\"{i18n_service.get_text('no_data_available')} - {i18n_service.get_text('game')} {round_number}\"",
            "lineNumber": 122
          },
          {
            "text": "                )",
            "lineNumber": 123
          },
          {
            "text": "            ",
            "lineNumber": 124
          },
          {
            "text": "            # Get league standings to determine team positions",
            "lineNumber": 125
          },
          {
            "text": "            standings = self.get_league_standings(season, league, week)",
            "lineNumber": 126
          },
          {
            "text": "            team_positions = {}",
            "lineNumber": 127
          },
          {
            "text": "            if standings and standings.teams:",
            "lineNumber": 128
          },
          {
            "text": "                for team in standings.teams:",
            "lineNumber": 129
          },
          {
            "text": "                    team_positions[team.team_name] = team.position",
            "lineNumber": 130
          },
          {
            "text": "            ",
            "lineNumber": 131
          },
          {
            "text": "            # Create column groups",
            "lineNumber": 132
          },
          {
            "text": "            columns =",
            "lineNumber": 133
          }
        ]
      },
      "score": 0.2551403045654297
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "/**\n * SeasonOverviewBlock - Shows league table and season-wide charts\n * Displays when: Season + League are selected\n */\nclass SeasonOverviewBlock extends BaseContentBlock {\n    constructor() {\n        super({\n            id: 'season-overview',\n            containerId: 'seasonOverviewContainer',\n            dataEndpoint: '/league/get_league_history',\n            requiredFilters: ['season', 'league'],\n            title: 'Season Overview'\n        });\n        this.dependencies = ['season', 'league'];\n        this.container = document.getElementById(this.containerId);\n    }\n\n    hide() {\n        if (this.container)\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * SeasonOverviewBlock - Shows league table and season-wide charts",
            "lineNumber": 2
          },
          {
            "text": " * Displays when: Season + League are selected",
            "lineNumber": 3
          },
          {
            "text": " */",
            "lineNumber": 4
          },
          {
            "text": "class SeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "text": "    constructor() {",
            "lineNumber": 6,
            "isSignature": true
          },
          {
            "text": "        super({",
            "lineNumber": 7
          },
          {
            "text": "            id: 'season-overview',",
            "lineNumber": 8
          },
          {
            "text": "            containerId: 'seasonOverviewContainer',",
            "lineNumber": 9
          },
          {
            "text": "            dataEndpoint: '/league/get_league_history',",
            "lineNumber": 10
          },
          {
            "text": "            requiredFilters: ['season', 'league'],",
            "lineNumber": 11
          },
          {
            "text": "            title: 'Season Overview'",
            "lineNumber": 12
          },
          {
            "text": "        });",
            "lineNumber": 13
          },
          {
            "text": "        this.dependencies = ['season', 'league'];",
            "lineNumber": 14
          },
          {
            "text": "        this.container = document.getElementById(this.containerId);",
            "lineNumber": 15
          },
          {
            "text": "    }",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "lineNumber": 17
          },
          {
            "text": "    hide() {",
            "lineNumber": 18,
            "isSignature": true
          },
          {
            "text": "        if (this.container)",
            "lineNumber": 19
          },
          {
            "text": "    }",
            "lineNumber": 22,
            "isSignature": true
          }
        ]
      },
      "score": 0.25297653675079346
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    shouldRender(state) {\n        // Show only when league and season are selected but no week AND no team (handle string \"null\")\n        const hasLeague = state.league &amp;&amp; state.league !== '' &amp;&amp; state.league !== 'null';\n        const hasSeason = state.season &amp;&amp; state.season !== '' &amp;&amp; state.season !== 'null';\n        const hasWeek = state.week &amp;&amp; state.week !== '' &amp;&amp; state.week !== 'null';\n        const hasTeam = state.team &amp;&amp; state.team !== '' &amp;&amp; state.team !== 'null';\n        const shouldShow = hasLeague &amp;&amp; hasSeason &amp;&amp; !hasWeek &amp;&amp; !hasTeam;\n        console.log(&#96;LeagueSeasonOverviewBlock shouldRender: league=\"${state.league}\", season=\"${state.season}\", week=\"${state.week}\", team=\"${state.team}\", result=${shouldShow}&#96;);\n        return shouldShow;\n    }\n\n    generateHTML(state) {\n        const leagueName = state.league_long || state.league || '';\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "    shouldRender(state) {",
            "lineNumber": 40,
            "isSignature": true
          },
          {
            "text": "        // Show only when league and season are selected but no week AND no team (handle string \"null\")",
            "lineNumber": 41
          },
          {
            "text": "        const hasLeague = state.league &amp;&amp; state.league !== '' &amp;&amp; state.league !== 'null';",
            "lineNumber": 42
          },
          {
            "text": "        const hasSeason = state.season &amp;&amp; state.season !== '' &amp;&amp; state.season !== 'null';",
            "lineNumber": 43
          },
          {
            "text": "        const hasWeek = state.week &amp;&amp; state.week !== '' &amp;&amp; state.week !== 'null';",
            "lineNumber": 44
          },
          {
            "text": "        const hasTeam = state.team &amp;&amp; state.team !== '' &amp;&amp; state.team !== 'null';",
            "lineNumber": 45
          },
          {
            "text": "        const shouldShow = hasLeague &amp;&amp; hasSeason &amp;&amp; !hasWeek &amp;&amp; !hasTeam;",
            "lineNumber": 46
          },
          {
            "text": "        console.log(&#96;LeagueSeasonOverviewBlock shouldRender: league=\"${state.league}\", season=\"${state.season}\", week=\"${state.week}\", team=\"${state.team}\", result=${shouldShow}&#96;);",
            "lineNumber": 47
          },
          {
            "text": "        return shouldShow;",
            "lineNumber": 48
          },
          {
            "text": "    }",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "lineNumber": 50
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "        const leagueName = state.league_long || state.league || '';",
            "lineNumber": 52
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          }
        ]
      },
      "score": 0.25245991349220276
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\league-stats-app.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 334,
            "column": 1
          }
        },
        "contents": "async initializeContentBlocks() {\n\n            this.contentBlocks.set('matchday', matchDayBlock);\n            this.contentBlocks.set('team-details', teamDetailsBlock);\n            this.contentBlocks.set('team-performance', teamPerformanceBlock);\n            this.contentBlocks.set('team-win-percentage', teamWinPercentageBlock);\n            this.contentBlocks.set('game-overview', gameOverviewBlock);\n            this.contentBlocks.set('game-team-details', gameTeamDetailsBlock);\n            \n            console.log('✅ Content blocks initialized');\n            \n            // Initialize centralized button manager for league mode with content rendering callback\n            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'league', (state) =&gt; {\n                console.log('🔄 LeagueStatsApp: Button state changed, rendering content:', state);\n                console.log('🔄 LeagueStatsApp: State keys:', Object.keys(state));\n                console.log('🔄 LeagueStatsApp: Round value:', state.round, 'Type:', typeof state.round);\n                this.currentState = { ...state };\n                this.renderContent();\n            });\n            await this.buttonManager.initialize();\n            \n        } catch (error) {\n            console.error('❌ Error initializing content blocks:', error);\n            throw error;\n        }\n    }\n\n    setupEventListeners() {\n        // Listen for filter changes from the filter controls block\n        document.addEventListener\n\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 73,
                "column": 5
              },
              "endPosition": {
                "line": 74,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async initializeContentBlocks() {",
            "lineNumber": 73,
            "isSignature": true
          },
          {
            "lineNumber": 103
          },
          {
            "text": "            this.contentBlocks.set('matchday', matchDayBlock);",
            "lineNumber": 104
          },
          {
            "text": "            this.contentBlocks.set('team-details', teamDetailsBlock);",
            "lineNumber": 105
          },
          {
            "text": "            this.contentBlocks.set('team-performance', teamPerformanceBlock);",
            "lineNumber": 106
          },
          {
            "text": "            this.contentBlocks.set('team-win-percentage', teamWinPercentageBlock);",
            "lineNumber": 107
          },
          {
            "text": "            this.contentBlocks.set('game-overview', gameOverviewBlock);",
            "lineNumber": 108
          },
          {
            "text": "            this.contentBlocks.set('game-team-details', gameTeamDetailsBlock);",
            "lineNumber": 109
          },
          {
            "text": "            ",
            "lineNumber": 110
          },
          {
            "text": "            console.log('✅ Content blocks initialized');",
            "lineNumber": 111
          },
          {
            "text": "            ",
            "lineNumber": 112
          },
          {
            "text": "            // Initialize centralized button manager for league mode with content rendering callback",
            "lineNumber": 113
          },
          {
            "text": "            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'league', (state) =&gt; {",
            "lineNumber": 114
          },
          {
            "text": "                console.log('🔄 LeagueStatsApp: Button state changed, rendering content:', state);",
            "lineNumber": 115
          },
          {
            "text": "                console.log('🔄 LeagueStatsApp: State keys:', Object.keys(state));",
            "lineNumber": 116
          },
          {
            "text": "                console.log('🔄 LeagueStatsApp: Round value:', state.round, 'Type:', typeof state.round);",
            "lineNumber": 117
          },
          {
            "text": "                this.currentState = { ...state };",
            "lineNumber": 118
          },
          {
            "text": "                this.renderContent();",
            "lineNumber": 119
          },
          {
            "text": "            });",
            "lineNumber": 120
          },
          {
            "text": "            await this.buttonManager.initialize();",
            "lineNumber": 121
          },
          {
            "text": "            ",
            "lineNumber": 122
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 123
          },
          {
            "text": "            console.error('❌ Error initializing content blocks:', error);",
            "lineNumber": 124
          },
          {
            "text": "            throw error;",
            "lineNumber": 125
          },
          {
            "text": "        }",
            "lineNumber": 126
          },
          {
            "text": "    }",
            "lineNumber": 127,
            "isSignature": true
          },
          {
            "lineNumber": 128
          },
          {
            "text": "    setupEventListeners() {",
            "lineNumber": 129,
            "isSignature": true
          },
          {
            "text": "        // Listen for filter changes from the filter controls block",
            "lineNumber": 130
          },
          {
            "text": "        document.addEventListener",
            "lineNumber": 131
          },
          {
            "lineNumber": 133
          },
          {
            "text": "    }",
            "lineNumber": 162,
            "isSignature": true
          }
        ]
      },
      "score": 0.25242969393730164
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    async loadSeasonData(state) {\n        const { league, season } = state;\n        \n        try {\n            // Load existing endpoints first, handle missing ones gracefully\n            const dataPromises = [];\n            \n            // Always try to load league standings (existing endpoint)\n            dataPromises.push(\n                this.loadLeagueStandings(league, season).catch(error =&gt; {\n                    console.warn('Could not load league standings:', error);\n                    return null;\n                })\n            );\n            \n            // Always try to load team points (existing endpoint)\n            dataPromises.push(\n                this.loadTeamPoints(league, season).catch(error =&gt; {\n                    console.warn('Could not load team points:', error);\n                    return null;\n                })\n            );\n            \n            // Always try to load team positions (existing endpoint)\n            dataPromises.push(\n                this.loadTeamPositions(league, season).catch(error =&gt; {\n                    console.warn('Could not load team positions:', error);\n                    return null;\n                })\n            );\n            \n            // Try optional endpoints with fallbacks\n            dataPromises.push(\n                this.loadTimetable(league, season).catch(error =&gt; {\n                    console.warn('Timetable endpoint not available, creating placeholder');\n                    return this.createMockTimetable(season);\n                })\n            );\n            \n            const [standingsData, pointsData, positionsData, timetableData] = await Promise.all(dataPromises);\n\n            // Create components with available data\n            if (timetableData) this.createTimetable(timetableData);\n            if (standingsData) this.createStandingsTable(standingsData);\n            if (pointsData) {\n                this.createPointsChart(pointsData);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 146
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    async loadSeasonData(state) {",
            "lineNumber": 148,
            "isSignature": true
          },
          {
            "text": "        const { league, season } = state;",
            "lineNumber": 149
          },
          {
            "text": "        ",
            "lineNumber": 150
          },
          {
            "text": "        try {",
            "lineNumber": 151
          },
          {
            "text": "            // Load existing endpoints first, handle missing ones gracefully",
            "lineNumber": 152
          },
          {
            "text": "            const dataPromises = [];",
            "lineNumber": 153
          },
          {
            "text": "            ",
            "lineNumber": 154
          },
          {
            "text": "            // Always try to load league standings (existing endpoint)",
            "lineNumber": 155
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 156
          },
          {
            "text": "                this.loadLeagueStandings(league, season).catch(error =&gt; {",
            "lineNumber": 157
          },
          {
            "text": "                    console.warn('Could not load league standings:', error);",
            "lineNumber": 158
          },
          {
            "text": "                    return null;",
            "lineNumber": 159
          },
          {
            "text": "                })",
            "lineNumber": 160
          },
          {
            "text": "            );",
            "lineNumber": 161
          },
          {
            "text": "            ",
            "lineNumber": 162
          },
          {
            "text": "            // Always try to load team points (existing endpoint)",
            "lineNumber": 163
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 164
          },
          {
            "text": "                this.loadTeamPoints(league, season).catch(error =&gt; {",
            "lineNumber": 165
          },
          {
            "text": "                    console.warn('Could not load team points:', error);",
            "lineNumber": 166
          },
          {
            "text": "                    return null;",
            "lineNumber": 167
          },
          {
            "text": "                })",
            "lineNumber": 168
          },
          {
            "text": "            );",
            "lineNumber": 169
          },
          {
            "text": "            ",
            "lineNumber": 170
          },
          {
            "text": "            // Always try to load team positions (existing endpoint)",
            "lineNumber": 171
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 172
          },
          {
            "text": "                this.loadTeamPositions(league, season).catch(error =&gt; {",
            "lineNumber": 173
          },
          {
            "text": "                    console.warn('Could not load team positions:', error);",
            "lineNumber": 174
          },
          {
            "text": "                    return null;",
            "lineNumber": 175
          },
          {
            "text": "                })",
            "lineNumber": 176
          },
          {
            "text": "            );",
            "lineNumber": 177
          },
          {
            "text": "            ",
            "lineNumber": 178
          },
          {
            "text": "            // Try optional endpoints with fallbacks",
            "lineNumber": 179
          },
          {
            "text": "            dataPromises.push(",
            "lineNumber": 180
          },
          {
            "text": "                this.loadTimetable(league, season).catch(error =&gt; {",
            "lineNumber": 181
          },
          {
            "text": "                    console.warn('Timetable endpoint not available, creating placeholder');",
            "lineNumber": 182
          },
          {
            "text": "                    return this.createMockTimetable(season);",
            "lineNumber": 183
          },
          {
            "text": "                })",
            "lineNumber": 184
          },
          {
            "text": "            );",
            "lineNumber": 185
          },
          {
            "text": "            ",
            "lineNumber": 186
          },
          {
            "text": "            const [standingsData, pointsData, positionsData, timetableData] = await Promise.all(dataPromises);",
            "lineNumber": 187
          },
          {
            "lineNumber": 188
          },
          {
            "text": "            // Create components with available data",
            "lineNumber": 189
          },
          {
            "text": "            if (timetableData) this.createTimetable(timetableData);",
            "lineNumber": 190
          },
          {
            "text": "            if (standingsData) this.createStandingsTable(standingsData);",
            "lineNumber": 191
          },
          {
            "text": "            if (pointsData) {",
            "lineNumber": 192
          },
          {
            "text": "                this.createPointsChart(pointsData);",
            "lineNumber": 193
          },
          {
            "text": "    }",
            "lineNumber": 207,
            "isSignature": true
          }
        ]
      },
      "score": 0.25204309821128845
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Reading the season league standings block to understand its structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_season_league_standings|season.*league.*standings",
  "path": "app/routes/league_routes.py",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "get_season_league_standings|season.*league.*standings",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "240:@bp.route('/league/get_season_league_standings')",
              "matches": [
                {
                  "lineNumber": 241,
                  "content": "def get_season_league_standings():"
                },
                {
                  "lineNumber": 244,
                  "content": "        debug_config.log_route('league.get_season_league_standings', params)"
                },
                {
                  "lineNumber": 252,
                  "content": "        standings_data = league_service.get_season_league_standings(season=season)"
                },
                {
                  "lineNumber": 258,
                  "content": "        debug_config.log_route('league.get_season_league_standings', params, response_size)"
                },
                {
                  "lineNumber": 262,
                  "content": "        debug_config.log_route('league.get_season_league_standings', dict(request.args), f\"ERROR: {str(e)}\")"
                },
                {
                  "lineNumber": 593,
                  "content": "                    \"status.initializing.season_league_standings\", \"status.initializing.league_aggregation\","
                }
              ]
            }
          ],
          "totalLines": 6,
          "totalMatchedLines": 6
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking how the matchday block renders the league standings table:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "loadLeagueStandings|createTableTabulator|fetchAndRenderTable",
  "path": "app/static/js/content-blocks/matchday-block.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "loadLeagueStandings|createTableTabulator|fetchAndRenderTable",
    "path": "app/static/js/content-blocks/matchday-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "198:                if (typeof createTableTabulator === 'function') {",
              "matches": [
                {
                  "lineNumber": 199,
                  "content": "                    console.log('Using createTableTabulator function for week table');"
                },
                {
                  "lineNumber": 200,
                  "content": "                    createTableTabulator('tableLeagueWeek', tableData, { "
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updating the season league standings block to use Tabulator tables, matching the matchday block:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "85eeaee8-1959-4d0e-a5a5-0045d9d628b2"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updated the season league standings block to use Tabulator tables, matching the matchday block.

**Changes made:**
1. Replaced `createTableBootstrap3` with `createTableTabulator` as the primary table renderer
2. Added fallback to `createTableBootstrap3` if Tabulator isn't available
3. Matched the matchday block's table configuration:
   - `disablePositionCircle: false` (shows colored position circles)
   - `enableSpecialRowStyling: true`
   - `tooltips: true`

**Current structure:**
- The season view shows a collection of league overview cards (one per league)
- Each card matches the matchday block structure:
  - Card header with league name and match day/week
  - League standings table (left, col-md-8) — now using Tabulator
  - Honor scores section (right, col-md-4) — same as matchday block

The season view now displays all league overview cards for the selected season, each using Tabulator tables for the standings, consistent with the slw (matchday) view.

Refresh the page and navigate to a season-only view (no league selected) to see the updated tables.

---

_**User (2025-12-07 21:24Z)**_

is there any redundancy between the s view and the upper part of the slw view. if so, can you refactor?

---

_**Agent (model default, mode Agent)**_



---


Checking for redundancy between the season view and the matchday block (slw view):


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does the matchday block render league standings and honor scores cards?",
  "includePattern": "app/static/js/content-blocks",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---



---


There is redundancy: both blocks render the same league standings + honor scores card. Creating a shared utility function to reuse this card:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **0** result in **1** directory</summary>

Directory: **undefined** (0 file)

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="list_dir_v2">
<details>
<summary>Tool use: **list_dir_v2**</summary>


Parameters:

```json
{
  "targetDirectory": "app/static/js/utils"
}
```
Result:

```json
{
  "directoryTreeRoot": {
    "absPath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static\\js\\utils",
    "childrenFiles": [
      {
        "name": "individual-averages-utils.js"
      },
      {
        "name": "team-vs-team-utils.js"
      }
    ],
    "childrenWereProcessed": true
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Creating a shared utility for the league standings + honor scores card:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "app/static/js/utils/league-standings-card-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "f94a5891-2a16-4fc9-96c4-34bd8b292b29",
  "reviewData": {
    "status": "Done",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/league/stats.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "individual-averages-utils|team-vs-team-utils",
  "path": "app/templates/league/stats.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "individual-averages-utils|team-vs-team-utils",
    "path": "app/templates/league/stats.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "171:&lt;script src=\"{{ static_url('js/utils/team-vs-team-utils.js') }}\"&gt;&lt;/script&gt;",
              "matches": [
                {
                  "lineNumber": 172,
                  "content": "&lt;script src=\"{{ static_url('js/utils/individual-averages-utils.js') }}\"&gt;&lt;/script&gt;"
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Adding the utility script and refactoring both blocks to use it:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/league/stats.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/league/stats.html"
}
```
Additional data:

```json
{
  "codeblockId": "7f1a816d-3768-4855-b8a8-79604bbb284d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/matchday-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "d52d5375-25ad-4c73-bfdb-720809abde52"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/matchday-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "7104aa32-eda5-4f66-ac58-65413ebfba6c"
}
```
Status: **completed**


</details>
</tool-use>

---

The string to replace was not found in the file.

---



---


Reading the exact content of `populateHonorScores`:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/matchday-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "763b100d-ed05-41bd-ab19-d8b34ca5bd19"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "38df23bb-ffb9-4dd4-b10a-db538a96c746"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "0d96ac24-4a42-4e88-8c02-7d4d76f1f576"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/utils/league-standings-card-utils.js</summary>

</details>
</tool-use>

---



---


Fixing the ID generation logic in the utility function:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/utils/league-standings-card-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "7d174373-30a7-4317-b50b-5e7254338fff"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/utils/league-standings-card-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "7de918fa-38cc-4c47-a22d-f2f03dd8b270"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/utils/league-standings-card-utils.js",
    "app/static/js/content-blocks/matchday-block.js",
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/utils/league-standings-card-utils.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/matchday-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixing the recursive call issue in the matchday block:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/matchday-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "populateHonorScores\\(",
  "path": "app/static/js/content-blocks/matchday-block.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "populateHonorScores\\(",
    "path": "app/static/js/content-blocks/matchday-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "226:            this.populateHonorScores(data);",
              "matches": [
                {
                  "lineNumber": 234,
                  "content": "    populateHonorScores(data) {"
                },
                {
                  "lineNumber": 239,
                  "content": "            window.populateHonorScores(data, '');"
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Exposing utility functions on the window object:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/utils/league-standings-card-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "ba780339-2d58-44d4-836a-12d792d15396"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/utils/league-standings-card-utils.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/utils/league-standings-card-utils.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking script loading order:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/league/stats.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---



---


Updating references to use the window object:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "d92b24f2-a355-4bdd-99d2-13db6aebc8a9"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/matchday-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "eb3ec5bf-6ac6-4fa5-894c-6df43a7f575e"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/matchday-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "7f58ab69-46c9-42e2-bdbc-67ba083c990b"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "50fc4c28-15c8-455e-932e-aed646a83e6d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/matchday-block.js",
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/matchday-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Refactored to remove redundancy between the season view and the matchday block.

## Summary of Changes

**1. Created shared utility file** (`league-standings-card-utils.js`):
   - `generateLeagueStandingsCardHTML()` - Generates HTML for the league standings + honor scores card
   - `renderLeagueStandingsTable()` - Renders the standings table using Tabulator
   - `populateHonorScores()` - Populates honor scores sections

**2. Refactored `matchday-block.js`**:
   - Uses `generateLeagueStandingsCardHTML()` to generate the card HTML
   - Uses `renderLeagueStandingsTable()` to render the table
   - Uses `populateHonorScores()` utility function (with fallback)

**3. Refactored `season-league-standings-block.js`**:
   - Uses the same utility functions for consistency
   - Supports multiple leagues with unique IDs via prefix parameter

**4. Added script to `stats.html`**:
   - Loaded `league-standings-card-utils.js` before content blocks

**Benefits**:
- Removed duplicate code (league standings + honor scores card)
- Consistent rendering across both views
- Easier maintenance (single source of truth)
- Both views use Tabulator tables
- Fallback support if utilities aren't available

Both the season view (s) and the matchday view (slw) now use the same shared utilities for rendering league standings and honor scores cards, eliminating redundancy.

---

_**User (2025-12-07 21:24Z)**_

almost there. the team color selector for the colored circles is not invoked properly for each of the league tables in the s view. it seems it only works for the last league, or only for BayL

---

_**Agent (model default, mode Agent)**_



---


The issue is that `updateTeamColorMap` is called per league, overwriting previous entries. We should collect all teams from all leagues first, then update the color map once. Checking how team colors are extracted and updating the logic:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/utils/league-standings-card-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "updateTeamColorMap|extractTeamNames",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "updateTeamColorMap|extractTeamNames",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "725:        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
              "matches": [
                {
                  "lineNumber": 726,
                  "content": "            window.updateTeamColorMap(teams);"
                },
                {
                  "lineNumber": 1153,
                  "content": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {"
                },
                {
                  "lineNumber": 1154,
                  "content": "            window.updateTeamColorMap(teams);"
                }
              ]
            }
          ],
          "totalLines": 3,
          "totalMatchedLines": 3
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updating the season league standings block to collect all teams from all leagues first, then update the color map once before rendering tables:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "b00e3fa3-2ae7-4a0e-ac07-a85f35327c3d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Ensuring we extract teams correctly. Checking the column structure to find the team name field:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are league standings table columns structured with team name field?",
  "includePattern": "app/services",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---



---


Checking how `updateTeamColorMap` works and whether we should disable the automatic update in `createTableTabulator`:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "updateTeamColorMap.*function|function updateTeamColorMap",
  "path": "app/static/js/theme/color-utils.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "updateTeamColorMap.*function|function updateTeamColorMap",
    "path": "app/static/js/theme/color-utils.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---



---


The issue: `updateTeamColorMap` removes teams not in the current array, so each table call deletes teams from other leagues. Adding an option to disable the automatic update in `createTableTabulator` and fixing the team extraction logic:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "50c20e4e-0cad-41c8-8bd8-5bad08a9b7c0"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "disableTeamColorUpdate|skipTeamColorUpdate",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "disableTeamColorUpdate|skipTeamColorUpdate",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "7b663592-a010-4f90-ad1a-6f2477d3748a"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/utils/league-standings-card-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "768052db-be5b-4c3d-af67-e7b986f0ff19"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js",
    "app/static/js/utils/league-standings-card-utils.js",
    "app/templates/components/tables.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/utils/league-standings-card-utils.js"
    },
    {
      "relativeWorkspacePath": "app/templates/components/tables.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixed the team color issue. Summary:

**The Problem:**
- `updateTeamColorMap` removes teams not in the current array, so each table call deleted teams from other leagues.
- Only the last league's teams kept their colors.

**The Solution:**
1. Collect all teams from all leagues first — extract team names from all standings tables before rendering.
2. Update the color map once — call `updateTeamColorMap` with all unique teams.
3. Disable automatic updates — added `disableTeamColorUpdate` option to `createTableTabulator` to prevent overwriting the manually updated color map.
4. Updated `renderLeagueStandingsTable` — passes `disableTeamColorUpdate: true` so it doesn't interfere.

**Changes made:**
- `season-league-standings-block.js`: Collects all teams first, then updates the color map once.
- `tables.html`: Added `disableTeamColorUpdate` setting to skip automatic team color updates.
- `league-standings-card-utils.js`: Passes `disableTeamColorUpdate: true` when rendering tables.

All league tables in the season view should now show correct team colors. Refresh the page and check the season view to confirm.

---

_**User (2025-12-07 21:24Z)**_

no it seems all leagues are treated as on common group of teams: the color cycling continues at pos 7 after the first league of 6. instead, the color cycle should restart at 1 for each league

---

_**Agent (model default, mode Agent)**_



---


Ensuring each league restarts its color cycle. `updateTeamColorMap` removes teams not in the current array, so we need a different approach. Checking how the color map works and updating the logic:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does the team color palette work and how are colors assigned to teams?",
  "includePattern": "app/static/js/theme",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Creating a helper function that assigns colors per league without deleting other teams, so each league restarts its color cycle:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "3c47f61c-d4e5-47dd-93ef-6a1d54741300"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking if `teamColorMap` is accessible and how to access the palette function:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "teamColorMap|getPaletteColor",
  "path": "app/static/js/theme/color-utils.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "teamColorMap|getPaletteColor",
    "path": "app/static/js/theme/color-utils.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "111:    const teamColorMap = globalObj.teamColorMap || {};",
              "matches": [
                {
                  "lineNumber": 257,
                  "content": "    function getPaletteColor(index) {"
                },
                {
                  "lineNumber": 265,
                  "content": "        Object.keys(teamColorMap).forEach(team =&gt; {"
                },
                {
                  "lineNumber": 267,
                  "content": "                delete teamColorMap[team];"
                },
                {
                  "lineNumber": 273,
                  "content": "            if (!teamColorMap[team]) {"
                },
                {
                  "lineNumber": 274,
                  "content": "                teamColorMap[team] = getPaletteColor(paletteIdx++);"
                },
                {
                  "lineNumber": 280,
                  "content": "        if (teamName &amp;&amp; teamColorMap[teamName]) {"
                },
                {
                  "lineNumber": 281,
                  "content": "            return teamColorMap[teamName];"
                },
                {
                  "lineNumber": 283,
                  "content": "        return getPaletteColor(fallbackIndex);"
                },
                {
                  "lineNumber": 298,
                  "content": "            return getPaletteColor(mapping[semanticName]);"
                },
                {
                  "lineNumber": 410,
                  "content": "        getPaletteColor,"
                },
                {
                  "lineNumber": 420,
                  "content": "        teamColorMap,"
                },
                {
                  "lineNumber": 431,
                  "content": "    globalObj.teamColorMap = teamColorMap;"
                }
              ]
            }
          ],
          "totalLines": 12,
          "totalMatchedLines": 12
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---



---


Updating the code to access the color utilities correctly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "3246ab1c-f31a-4be1-b66e-615daa79f92c"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updated the code so each league restarts its color cycle. Changes:

**The Fix:**
1. Per-league processing: process each league separately instead of collecting all teams first
2. Clear existing colors: for each league, clear colors for its teams so they can be reassigned
3. Restart color cycle: assign colors starting from palette index 0 for each league's teams
4. Direct color map access: access `teamColorMap` and `getPaletteColor` from `ColorUtils` to assign colors per league

**How it works:**
- For each league:
  - Extract teams from that league's standings
  - Clear any existing colors for those teams
  - Assign new colors starting from palette index 0
  - This ensures each league's first team gets color 0, second gets color 1, etc.

**Result:**
- League 1: Teams get colors 0, 1, 2, 3, 4, 5...
- League 2: Teams get colors 0, 1, 2, 3, 4, 5... (restarts from 0)
- League 3: Teams get colors 0, 1, 2, 3, 4, 5... (restarts from 0)

Each league now has its own independent color cycle starting from position 1. Refresh the page and check the season view to confirm.

---

_**User (2025-12-07 21:24Z)**_

why is league_standings_all_leagues not resolved here?

@season-league-standings-block.js (49-67) 

---

_**Agent (model default, mode Agent)**_



---


Checking the i18n service to see why the key isn't resolving:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "league_standings_all_leagues|league_standings",
  "path": "app/services/i18n_service.py",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "league_standings_all_leagues|league_standings",
    "path": "app/services/i18n_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "34:            \"status.initializing.season_league_standings\": {\"en\": \"Initializing season league standings...\", \"de\": \"Tabellenstand wird initialisiert...\"},",
              "matches": [
                {
                  "lineNumber": 164,
                  "content": "            \"league_standings\": {\"en\": \"League Standings\", \"de\": \"Tabellenstand\"},"
                },
                {
                  "lineNumber": 165,
                  "content": "            \"league_standings_all_leagues\": {\"en\": \"Current Standings in all Leagues\", \"de\": \"Aktuelle Tabellenstände in allen Ligen\"},"
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does the i18n service resolve translation keys and what happens when a key is missing?",
  "includePattern": "app/services",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


The key exists in the i18n service. Checking how the frontend `t()` function accesses it:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "function t\\(|const t =|var t =",
  "path": "app/templates",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "function t\\(|const t =|var t =",
    "path": "app/templates",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\templates\\base.html",
              "matches": [
                {
                  "lineNumber": 362,
                  "content": "        function t(key) {"
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is the t function defined in the frontend for i18n translations?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\base.html",
        "range": {
          "startPosition": {
            "line": 200
          },
          "endPosition": {
            "line": 238
          }
        },
        "contents": "    &lt;script&gt;\n        // Global translations object\n        let translations = {};\n        let currentLanguage = 'en';\n        \n        // Make translations globally accessible\n        window.translations = translations;\n        \n        // Initialize language system\n        document.addEventListener('DOMContentLoaded', function() {\n            loadTranslations();\n            setupLanguageToggle();\n        });\n        \n        // Load translations with sessionStorage caching\n        async function loadTranslations() {\n            try {\n                // Try cache first: use last-known language if set\n                const lastKnown = sessionStorage.getItem('i18n:last_language');\n                const cachedKeyPrefix = lastKnown ? &#96;i18n:${lastKnown}:&#96; : null;\n\n                // We need version info to compose the cache key; fetch lightweight first\n                const response = await fetch('/league/get_translations');\n                \n                if (!response.ok) {\n                    console.error('❌ HTTP error loading translations:', response.status, response.statusText);\n                    return;\n                }\n                \n                const data = await response.json();\n                \n                if (data.success) {\n                    const version = data.translations_version || 'v1';\n                    currentLanguage = data.current_language || 'en';\n\n                    const cacheKey = &#96;i18n:${currentLanguage}:${version}&#96;;\n\n                    // Check cache for this language+version",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    &lt;script&gt;",
            "lineNumber": 201
          },
          {
            "text": "        // Global translations object",
            "lineNumber": 202
          },
          {
            "text": "        let translations = {};",
            "lineNumber": 203
          },
          {
            "text": "        let currentLanguage = 'en';",
            "lineNumber": 204
          },
          {
            "text": "        ",
            "lineNumber": 205
          },
          {
            "text": "        // Make translations globally accessible",
            "lineNumber": 206
          },
          {
            "text": "        window.translations = translations;",
            "lineNumber": 207
          },
          {
            "text": "        ",
            "lineNumber": 208
          },
          {
            "text": "        // Initialize language system",
            "lineNumber": 209
          },
          {
            "text": "        document.addEventListener('DOMContentLoaded', function() {",
            "lineNumber": 210
          },
          {
            "text": "            loadTranslations();",
            "lineNumber": 211
          },
          {
            "text": "            setupLanguageToggle();",
            "lineNumber": 212
          },
          {
            "text": "        });",
            "lineNumber": 213
          },
          {
            "text": "        ",
            "lineNumber": 214
          },
          {
            "text": "        // Load translations with sessionStorage caching",
            "lineNumber": 215
          },
          {
            "text": "        async function loadTranslations() {",
            "lineNumber": 216
          },
          {
            "text": "            try {",
            "lineNumber": 217
          },
          {
            "text": "                // Try cache first: use last-known language if set",
            "lineNumber": 218
          },
          {
            "text": "                const lastKnown = sessionStorage.getItem('i18n:last_language');",
            "lineNumber": 219
          },
          {
            "text": "                const cachedKeyPrefix = lastKnown ? &#96;i18n:${lastKnown}:&#96; : null;",
            "lineNumber": 220
          },
          {
            "lineNumber": 221
          },
          {
            "text": "                // We need version info to compose the cache key; fetch lightweight first",
            "lineNumber": 222
          },
          {
            "text": "                const response = await fetch('/league/get_translations');",
            "lineNumber": 223
          },
          {
            "text": "                ",
            "lineNumber": 224
          },
          {
            "text": "                if (!response.ok) {",
            "lineNumber": 225
          },
          {
            "text": "                    console.error('❌ HTTP error loading translations:', response.status, response.statusText);",
            "lineNumber": 226
          },
          {
            "text": "                    return;",
            "lineNumber": 227
          },
          {
            "text": "                }",
            "lineNumber": 228
          },
          {
            "text": "                ",
            "lineNumber": 229
          },
          {
            "text": "                const data = await response.json();",
            "lineNumber": 230
          },
          {
            "text": "                ",
            "lineNumber": 231
          },
          {
            "text": "                if (data.success) {",
            "lineNumber": 232
          },
          {
            "text": "                    const version = data.translations_version || 'v1';",
            "lineNumber": 233
          },
          {
            "text": "                    currentLanguage = data.current_language || 'en';",
            "lineNumber": 234
          },
          {
            "lineNumber": 235
          },
          {
            "text": "                    const cacheKey = &#96;i18n:${currentLanguage}:${version}&#96;;",
            "lineNumber": 236
          },
          {
            "lineNumber": 237
          },
          {
            "text": "                    // Check cache for this language+version",
            "lineNumber": 238
          }
        ]
      },
      "score": 0.329129695892334
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\base.html",
        "range": {
          "startPosition": {
            "line": 332
          },
          "endPosition": {
            "line": 382,
            "column": 20
          }
        },
        "contents": "                    }\n                });\n            }\n            \n            // Update Highcharts if they exist\n            if (typeof Highcharts !== 'undefined' &amp;&amp; Highcharts.charts) {\n                Highcharts.charts.forEach(chart =&gt; {\n                    if (chart &amp;&amp; chart.xAxis &amp;&amp; chart.xAxis[0]) {\n                        const xAxis = chart.xAxis[0];\n                        if (xAxis.categories) {\n                            xAxis.categories = xAxis.categories.map(category =&gt; {\n                                if (typeof category === 'string' &amp;&amp; category.includes('Match Day')) {\n                                    const weekMatch = category.match(/Match Day #?(\\d+)/);\n                                    if (weekMatch) {\n                                        const week = weekMatch[1];\n                                        return matchDayFormat.replace('{week}', week);\n                                    }\n                                    return category.replace('Match Day', matchDayLabel);\n                                }\n                                return category;\n                            });\n                            chart.redraw();\n                        }\n                    }\n                });\n            }\n        }\n        \n        // Helper function to get translated text\n        function t(key) {\n            return window.translations[key] || key;\n        }\n        \n        // Setup language toggle functionality\n        function setupLanguageToggle() {\n            const languageItems = document.querySelectorAll('[data-language]');\n            \n            languageItems.forEach(item =&gt; {\n                item.addEventListener('click', async function(e) {\n                    e.preventDefault();\n                    const language = this.getAttribute('data-language');\n                    await switchLanguage(language);\n                });\n            });\n        }\n        \n        // Switch language\n        async function switchLanguage(language) {\n            try {\n                const response = await fetch('/league/set_language', {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    }",
            "lineNumber": 333
          },
          {
            "text": "                });",
            "lineNumber": 334
          },
          {
            "text": "            }",
            "lineNumber": 335
          },
          {
            "text": "            ",
            "lineNumber": 336
          },
          {
            "text": "            // Update Highcharts if they exist",
            "lineNumber": 337
          },
          {
            "text": "            if (typeof Highcharts !== 'undefined' &amp;&amp; Highcharts.charts) {",
            "lineNumber": 338
          },
          {
            "text": "                Highcharts.charts.forEach(chart =&gt; {",
            "lineNumber": 339
          },
          {
            "text": "                    if (chart &amp;&amp; chart.xAxis &amp;&amp; chart.xAxis[0]) {",
            "lineNumber": 340
          },
          {
            "text": "                        const xAxis = chart.xAxis[0];",
            "lineNumber": 341
          },
          {
            "text": "                        if (xAxis.categories) {",
            "lineNumber": 342
          },
          {
            "text": "                            xAxis.categories = xAxis.categories.map(category =&gt; {",
            "lineNumber": 343
          },
          {
            "text": "                                if (typeof category === 'string' &amp;&amp; category.includes('Match Day')) {",
            "lineNumber": 344
          },
          {
            "text": "                                    const weekMatch = category.match(/Match Day #?(\\d+)/);",
            "lineNumber": 345
          },
          {
            "text": "                                    if (weekMatch) {",
            "lineNumber": 346
          },
          {
            "text": "                                        const week = weekMatch[1];",
            "lineNumber": 347
          },
          {
            "text": "                                        return matchDayFormat.replace('{week}', week);",
            "lineNumber": 348
          },
          {
            "text": "                                    }",
            "lineNumber": 349
          },
          {
            "text": "                                    return category.replace('Match Day', matchDayLabel);",
            "lineNumber": 350
          },
          {
            "text": "                                }",
            "lineNumber": 351
          },
          {
            "text": "                                return category;",
            "lineNumber": 352
          },
          {
            "text": "                            });",
            "lineNumber": 353
          },
          {
            "text": "                            chart.redraw();",
            "lineNumber": 354
          },
          {
            "text": "                        }",
            "lineNumber": 355
          },
          {
            "text": "                    }",
            "lineNumber": 356
          },
          {
            "text": "                });",
            "lineNumber": 357
          },
          {
            "text": "            }",
            "lineNumber": 358
          },
          {
            "text": "        }",
            "lineNumber": 359
          },
          {
            "text": "        ",
            "lineNumber": 360
          },
          {
            "text": "        // Helper function to get translated text",
            "lineNumber": 361
          },
          {
            "text": "        function t(key) {",
            "lineNumber": 362
          },
          {
            "text": "            return window.translations[key] || key;",
            "lineNumber": 363
          },
          {
            "text": "        }",
            "lineNumber": 364
          },
          {
            "text": "        ",
            "lineNumber": 365
          },
          {
            "text": "        // Setup language toggle functionality",
            "lineNumber": 366
          },
          {
            "text": "        function setupLanguageToggle() {",
            "lineNumber": 367
          },
          {
            "text": "            const languageItems = document.querySelectorAll('[data-language]');",
            "lineNumber": 368
          },
          {
            "text": "            ",
            "lineNumber": 369
          },
          {
            "text": "            languageItems.forEach(item =&gt; {",
            "lineNumber": 370
          },
          {
            "text": "                item.addEventListener('click', async function(e) {",
            "lineNumber": 371
          },
          {
            "text": "                    e.preventDefault();",
            "lineNumber": 372
          },
          {
            "text": "                    const language = this.getAttribute('data-language');",
            "lineNumber": 373
          },
          {
            "text": "                    await switchLanguage(language);",
            "lineNumber": 374
          },
          {
            "text": "                });",
            "lineNumber": 375
          },
          {
            "text": "            });",
            "lineNumber": 376
          },
          {
            "text": "        }",
            "lineNumber": 377
          },
          {
            "text": "        ",
            "lineNumber": 378
          },
          {
            "text": "        // Switch language",
            "lineNumber": 379
          },
          {
            "text": "        async function switchLanguage(language) {",
            "lineNumber": 380
          },
          {
            "text": "            try {",
            "lineNumber": 381
          },
          {
            "text": "                const response = await fetch('/league/set_language', {",
            "lineNumber": 382
          },
          {
            "text": "                    ",
            "lineNumber": 383
          }
        ]
      },
      "score": 0.3247915506362915
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\base.html",
        "range": {
          "startPosition": {
            "line": 266,
            "column": 16
          },
          "endPosition": {
            "line": 303
          }
        },
        "contents": "console.error('❌ Error loading translations:', error);\n            }\n        }\n        \n        // Update page content with translations\n        function updatePageContent() {\n            // Update all elements with data-i18n attributes\n            const elements = document.querySelectorAll('[data-i18n]');\n            elements.forEach(element =&gt; {\n                const key = element.getAttribute('data-i18n');\n                if (translations[key]) {\n                    element.textContent = translations[key];\n                }\n            });\n            \n            // Update content block titles and descriptions\n            updateContentBlockTranslations();\n            \n            // Update chart labels if charts exist\n            updateChartLabels();\n        }\n        \n        // Update content block translations\n        function updateContentBlockTranslations() {\n            // Find all content block instances and update their translations\n            if (window.teamStatsApp &amp;&amp; window.teamStatsApp.contentBlocks) {\n                window.teamStatsApp.contentBlocks.forEach(block =&gt; {\n                    if (block.updateTranslations &amp;&amp; typeof block.updateTranslations === 'function') {\n                        block.updateTranslations();\n                    }\n                });\n            }\n        }\n        \n        // Update chart labels\n        function updateChartLabels() {\n            const matchDayLabel = translations['match_day_label'] || 'Match Day';",
        "signatures": {},
        "detailedLines": [
          {
            "text": "console.error('❌ Error loading translations:', error);",
            "lineNumber": 267
          },
          {
            "text": "            }",
            "lineNumber": 268
          },
          {
            "text": "        }",
            "lineNumber": 269
          },
          {
            "text": "        ",
            "lineNumber": 270
          },
          {
            "text": "        // Update page content with translations",
            "lineNumber": 271
          },
          {
            "text": "        function updatePageContent() {",
            "lineNumber": 272
          },
          {
            "text": "            // Update all elements with data-i18n attributes",
            "lineNumber": 273
          },
          {
            "text": "            const elements = document.querySelectorAll('[data-i18n]');",
            "lineNumber": 274
          },
          {
            "text": "            elements.forEach(element =&gt; {",
            "lineNumber": 275
          },
          {
            "text": "                const key = element.getAttribute('data-i18n');",
            "lineNumber": 276
          },
          {
            "text": "                if (translations[key]) {",
            "lineNumber": 277
          },
          {
            "text": "                    element.textContent = translations[key];",
            "lineNumber": 278
          },
          {
            "text": "                }",
            "lineNumber": 279
          },
          {
            "text": "            });",
            "lineNumber": 280
          },
          {
            "text": "            ",
            "lineNumber": 281
          },
          {
            "text": "            // Update content block titles and descriptions",
            "lineNumber": 282
          },
          {
            "text": "            updateContentBlockTranslations();",
            "lineNumber": 283
          },
          {
            "text": "            ",
            "lineNumber": 284
          },
          {
            "text": "            // Update chart labels if charts exist",
            "lineNumber": 285
          },
          {
            "text": "            updateChartLabels();",
            "lineNumber": 286
          },
          {
            "text": "        }",
            "lineNumber": 287
          },
          {
            "text": "        ",
            "lineNumber": 288
          },
          {
            "text": "        // Update content block translations",
            "lineNumber": 289
          },
          {
            "text": "        function updateContentBlockTranslations() {",
            "lineNumber": 290
          },
          {
            "text": "            // Find all content block instances and update their translations",
            "lineNumber": 291
          },
          {
            "text": "            if (window.teamStatsApp &amp;&amp; window.teamStatsApp.contentBlocks) {",
            "lineNumber": 292
          },
          {
            "text": "                window.teamStatsApp.contentBlocks.forEach(block =&gt; {",
            "lineNumber": 293
          },
          {
            "text": "                    if (block.updateTranslations &amp;&amp; typeof block.updateTranslations === 'function') {",
            "lineNumber": 294
          },
          {
            "text": "                        block.updateTranslations();",
            "lineNumber": 295
          },
          {
            "text": "                    }",
            "lineNumber": 296
          },
          {
            "text": "                });",
            "lineNumber": 297
          },
          {
            "text": "            }",
            "lineNumber": 298
          },
          {
            "text": "        }",
            "lineNumber": 299
          },
          {
            "text": "        ",
            "lineNumber": 300
          },
          {
            "text": "        // Update chart labels",
            "lineNumber": 301
          },
          {
            "text": "        function updateChartLabels() {",
            "lineNumber": 302
          },
          {
            "text": "            const matchDayLabel = translations['match_day_label'] || 'Match Day';",
            "lineNumber": 303
          }
        ]
      },
      "score": 0.32462406158447266
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\base-content-block.js",
        "range": {
          "startPosition": {
            "line": 9
          },
          "endPosition": {
            "line": 385,
            "column": 1
          }
        },
        "contents": "destroy() {\n\n    }\n    \n    /**\n     * Update title and description with current translations\n     */\n    updateTranslations() {\n        if (typeof t === 'function') {\n            // Update title if it has a translation key pattern\n            if (this.titleKey) {\n                this.title = t(this.titleKey, this.title);\n            }\n            // Update description if it has a translation key pattern\n            if (this.descriptionKey) {\n                this.description = t(this.descriptionKey, this.description);\n            }\n        }\n    }\n\n    /**\n     * Cleanup method for subclasses to override\n     */\n    cleanup() {\n        // Clear any pending render timeout\n        if\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 10,
                "column": 1
              },
              "endPosition": {
                "line": 11,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "destroy() {",
            "lineNumber": 322,
            "isSignature": true
          },
          {
            "lineNumber": 326
          },
          {
            "text": "    }",
            "lineNumber": 327,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 328
          },
          {
            "text": "    /**",
            "lineNumber": 329
          },
          {
            "text": "     * Update title and description with current translations",
            "lineNumber": 330
          },
          {
            "text": "     */",
            "lineNumber": 331
          },
          {
            "text": "    updateTranslations() {",
            "lineNumber": 332,
            "isSignature": true
          },
          {
            "text": "        if (typeof t === 'function') {",
            "lineNumber": 333
          },
          {
            "text": "            // Update title if it has a translation key pattern",
            "lineNumber": 334
          },
          {
            "text": "            if (this.titleKey) {",
            "lineNumber": 335
          },
          {
            "text": "                this.title = t(this.titleKey, this.title);",
            "lineNumber": 336
          },
          {
            "text": "            }",
            "lineNumber": 337
          },
          {
            "text": "            // Update description if it has a translation key pattern",
            "lineNumber": 338
          },
          {
            "text": "            if (this.descriptionKey) {",
            "lineNumber": 339
          },
          {
            "text": "                this.description = t(this.descriptionKey, this.description);",
            "lineNumber": 340
          },
          {
            "text": "            }",
            "lineNumber": 341
          },
          {
            "text": "        }",
            "lineNumber": 342
          },
          {
            "text": "    }",
            "lineNumber": 343,
            "isSignature": true
          },
          {
            "lineNumber": 344
          },
          {
            "text": "    /**",
            "lineNumber": 345
          },
          {
            "text": "     * Cleanup method for subclasses to override",
            "lineNumber": 346
          },
          {
            "text": "     */",
            "lineNumber": 347
          },
          {
            "text": "    cleanup() {",
            "lineNumber": 348,
            "isSignature": true
          },
          {
            "text": "        // Clear any pending render timeout",
            "lineNumber": 349
          },
          {
            "text": "        if",
            "lineNumber": 350
          },
          {
            "text": "    }",
            "lineNumber": 354,
            "isSignature": true
          }
        ]
      },
      "score": 0.3073209524154663
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\i18n_service.py",
        "range": {
          "startPosition": {
            "line": 6,
            "column": 17
          },
          "endPosition": {
            "line": 330
          }
        },
        "contents": "class I18nService:\n    \"\"\"Internationalization service for managing multi-language strings\"\"\"\n    \n    def __init__(self, default_language: Language = Language.ENGLISH):\n        self._translations_version = \"2025-10-30-3\"\n        self.default_language = default_language\n        self._current_language = default_language\n        self._lock = threading.Lock()\n        \n        # Single source of truth: unified catalog with both languages\n        self._catalog = {\n            # Namespaced: UI languages\n            \"ui.language.english\": {\"en\": \"English\", \"de\": \"English\"},\n            \"ui.language.german\": {\"en\": \"Deutsch\", \"de\": \"Deutsch\"},\n\n            # Namespaced: Generic UI/actions/status\n            \"action.refresh\": {\"en\": \"Refresh\", \"de\": \"Aktualisieren\"},\n            \"action.update\": {\"en\": \"Update\", \"de\": \"Aktualisieren\"},\n            \"action.dismiss\": {\"en\": \"Dismiss\", \"de\": \"Schließen\"},\n            \"status.loading\": {\"en\": \"Loading...\", \"de\": \"Wird geladen...\"},\n            \"status.loading_data\": {\"en\": \"Loading data...\", \"de\": \"Daten werden geladen...\"},\n            \"status.no_data\": {\"en\": \"No data\", \"de\": \"Keine Daten\"},\n            \"status.initialization_error.title\": {\"en\": \"Initialization Error\", \"de\": \"Initialisierungsfehler\"},\n            \"status.initialization_error.message\": {\"en\": \"Failed to initialize the league statistics application. Please refresh the page.\", \"de\": \"Die Liga-Statistik-Anwendung konnte nicht initialisiert werden. Bitte laden Sie die Seite neu.\"},\n            # Initialization helpers for placeholders on league page\n            \"status.initializing.season_league_standings\": {\"en\": \"Initializing season league standings...\", \"de\": \"Tabellenstand wird initialisiert...\"},\n            \"status.initializing.league_aggregation\": {\"en\": \"Initializing league aggregation...\", \"de\": \"Liga-Aggregation wird initialisiert...\"},\n            \"status.initializing.league_season_overview\": {\"en\": \"Initializing season overview...\", \"de\": \"Saisonübersicht wird initialisiert...\"},\n            \"status.initializing.season_overview\":",
        "signatures": {},
        "detailedLines": [
          {
            "text": "class I18nService:",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Internationalization service for managing multi-language strings\"\"\"",
            "lineNumber": 10
          },
          {
            "text": "    ",
            "lineNumber": 11
          },
          {
            "text": "    def __init__(self, default_language: Language = Language.ENGLISH):",
            "lineNumber": 12
          },
          {
            "text": "        self._translations_version = \"2025-10-30-3\"",
            "lineNumber": 13
          },
          {
            "text": "        self.default_language = default_language",
            "lineNumber": 14
          },
          {
            "text": "        self._current_language = default_language",
            "lineNumber": 15
          },
          {
            "text": "        self._lock = threading.Lock()",
            "lineNumber": 16
          },
          {
            "text": "        ",
            "lineNumber": 17
          },
          {
            "text": "        # Single source of truth: unified catalog with both languages",
            "lineNumber": 18
          },
          {
            "text": "        self._catalog = {",
            "lineNumber": 19
          },
          {
            "text": "            # Namespaced: UI languages",
            "lineNumber": 20
          },
          {
            "text": "            \"ui.language.english\": {\"en\": \"English\", \"de\": \"English\"},",
            "lineNumber": 21
          },
          {
            "text": "            \"ui.language.german\": {\"en\": \"Deutsch\", \"de\": \"Deutsch\"},",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "text": "            # Namespaced: Generic UI/actions/status",
            "lineNumber": 24
          },
          {
            "text": "            \"action.refresh\": {\"en\": \"Refresh\", \"de\": \"Aktualisieren\"},",
            "lineNumber": 25
          },
          {
            "text": "            \"action.update\": {\"en\": \"Update\", \"de\": \"Aktualisieren\"},",
            "lineNumber": 26
          },
          {
            "text": "            \"action.dismiss\": {\"en\": \"Dismiss\", \"de\": \"Schließen\"},",
            "lineNumber": 27
          },
          {
            "text": "            \"status.loading\": {\"en\": \"Loading...\", \"de\": \"Wird geladen...\"},",
            "lineNumber": 28
          },
          {
            "text": "            \"status.loading_data\": {\"en\": \"Loading data...\", \"de\": \"Daten werden geladen...\"},",
            "lineNumber": 29
          },
          {
            "text": "            \"status.no_data\": {\"en\": \"No data\", \"de\": \"Keine Daten\"},",
            "lineNumber": 30
          },
          {
            "text": "            \"status.initialization_error.title\": {\"en\": \"Initialization Error\", \"de\": \"Initialisierungsfehler\"},",
            "lineNumber": 31
          },
          {
            "text": "            \"status.initialization_error.message\": {\"en\": \"Failed to initialize the league statistics application. Please refresh the page.\", \"de\": \"Die Liga-Statistik-Anwendung konnte nicht initialisiert werden. Bitte laden Sie die Seite neu.\"},",
            "lineNumber": 32
          },
          {
            "text": "            # Initialization helpers for placeholders on league page",
            "lineNumber": 33
          },
          {
            "text": "            \"status.initializing.season_league_standings\": {\"en\": \"Initializing season league standings...\", \"de\": \"Tabellenstand wird initialisiert...\"},",
            "lineNumber": 34
          },
          {
            "text": "            \"status.initializing.league_aggregation\": {\"en\": \"Initializing league aggregation...\", \"de\": \"Liga-Aggregation wird initialisiert...\"},",
            "lineNumber": 35
          },
          {
            "text": "            \"status.initializing.league_season_overview\": {\"en\": \"Initializing season overview...\", \"de\": \"Saisonübersicht wird initialisiert...\"},",
            "lineNumber": 36
          },
          {
            "text": "            \"status.initializing.season_overview\":",
            "lineNumber": 37
          }
        ]
      },
      "score": 0.2943952977657318
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\individual-averages-utils.js",
        "range": {
          "startPosition": {
            "line": 37,
            "column": 1
          },
          "endPosition": {
            "line": 121,
            "column": 1
          }
        },
        "contents": "/**\n * Renders the individual averages card and table\n * @param {Object} data - Individual averages data from API\n * @param {Object} options - Rendering options\n * @param {string} [options.containerId] - ID of the container element to render into (if provided, creates full card)\n * @param {string} options.tableId - ID for the table element (will be created inside container or used directly)\n * @param {string} [options.headerLevel='h6'] - HTML header level ('h5', 'h6', etc.)\n * @param {boolean} [options.disablePositionCircle=true] - Whether to disable position circles\n * @param {boolean} [options.enableSpecialRowStyling=true] - Whether to enable special row styling\n * @param {boolean} [options.tooltips=true] - Whether to enable tooltips\n */\nfunction renderIndividualAverages(data, options) {\n    const {\n        containerId,\n        tableId,\n        headerLevel = 'h6',\n        disablePositionCircle = true,\n        enableSpecialRowStyling = true,\n        tooltips = true\n    } = options;\n\n    if (!data || !data.columns || !data.data) {\n        console.warn('No individual averages data available');\n        const container = document.getElementById(containerId || tableId);\n        if (container) {\n            const t = typeof window.t === 'function' ? window.t : null;\n            const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);\n            container.innerHTML = &#96;&lt;div class=\"alert alert-info\"&gt;${getText('no_data', 'Individual averages data not available')}&lt;/div&gt;&#96;;\n        }\n        return;\n    }\n\n    // Get translation function if available\n    const t = typeof window.t === 'function' ? window.t : null;\n    const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);\n\n    // Use title from API response (which includes proper i18n with article_male + season/week)\n    // Description content is now integrated into the title, no separate description paragraph\n    const title = data.title || getText('individual_performance', 'Individual Performance');\n\n    // If containerId is provided, render full card structure\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 40
          },
          {
            "text": " * Renders the individual averages card and table",
            "lineNumber": 41
          },
          {
            "text": " * @param {Object} data - Individual averages data from API",
            "lineNumber": 42
          },
          {
            "text": " * @param {Object} options - Rendering options",
            "lineNumber": 43
          },
          {
            "text": " * @param {string} [options.containerId] - ID of the container element to render into (if provided, creates full card)",
            "lineNumber": 44
          },
          {
            "text": " * @param {string} options.tableId - ID for the table element (will be created inside container or used directly)",
            "lineNumber": 45
          },
          {
            "text": " * @param {string} [options.headerLevel='h6'] - HTML header level ('h5', 'h6', etc.)",
            "lineNumber": 46
          },
          {
            "text": " * @param {boolean} [options.disablePositionCircle=true] - Whether to disable position circles",
            "lineNumber": 47
          },
          {
            "text": " * @param {boolean} [options.enableSpecialRowStyling=true] - Whether to enable special row styling",
            "lineNumber": 48
          },
          {
            "text": " * @param {boolean} [options.tooltips=true] - Whether to enable tooltips",
            "lineNumber": 49
          },
          {
            "text": " */",
            "lineNumber": 50
          },
          {
            "text": "function renderIndividualAverages(data, options) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "    const {",
            "lineNumber": 52
          },
          {
            "text": "        containerId,",
            "lineNumber": 53
          },
          {
            "text": "        tableId,",
            "lineNumber": 54
          },
          {
            "text": "        headerLevel = 'h6',",
            "lineNumber": 55
          },
          {
            "text": "        disablePositionCircle = true,",
            "lineNumber": 56
          },
          {
            "text": "        enableSpecialRowStyling = true,",
            "lineNumber": 57
          },
          {
            "text": "        tooltips = true",
            "lineNumber": 58
          },
          {
            "text": "    } = options;",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 61
          },
          {
            "text": "        console.warn('No individual averages data available');",
            "lineNumber": 62
          },
          {
            "text": "        const container = document.getElementById(containerId || tableId);",
            "lineNumber": 63
          },
          {
            "text": "        if (container) {",
            "lineNumber": 64
          },
          {
            "text": "            const t = typeof window.t === 'function' ? window.t : null;",
            "lineNumber": 65
          },
          {
            "text": "            const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);",
            "lineNumber": 66
          },
          {
            "text": "            container.innerHTML = &#96;&lt;div class=\"alert alert-info\"&gt;${getText('no_data', 'Individual averages data not available')}&lt;/div&gt;&#96;;",
            "lineNumber": 67
          },
          {
            "text": "        }",
            "lineNumber": 68
          },
          {
            "text": "        return;",
            "lineNumber": 69
          },
          {
            "text": "    }",
            "lineNumber": 70
          },
          {
            "lineNumber": 71
          },
          {
            "text": "    // Get translation function if available",
            "lineNumber": 72
          },
          {
            "text": "    const t = typeof window.t === 'function' ? window.t : null;",
            "lineNumber": 73
          },
          {
            "text": "    const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);",
            "lineNumber": 74
          },
          {
            "lineNumber": 75
          },
          {
            "text": "    // Use title from API response (which includes proper i18n with article_male + season/week)",
            "lineNumber": 76
          },
          {
            "text": "    // Description content is now integrated into the title, no separate description paragraph",
            "lineNumber": 77
          },
          {
            "text": "    const title = data.title || getText('individual_performance', 'Individual Performance');",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "    // If containerId is provided, render full card structure",
            "lineNumber": 80
          },
          {
            "text": "}",
            "lineNumber": 122,
            "isSignature": true
          }
        ]
      },
      "score": 0.2855924963951111
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\base.html",
        "range": {
          "startPosition": {
            "line": 235
          },
          "endPosition": {
            "line": 271
          }
        },
        "contents": "                    const cacheKey = &#96;i18n:${currentLanguage}:${version}&#96;;\n\n                    // Check cache for this language+version\n                    const cached = sessionStorage.getItem(cacheKey);\n                    if (cached) {\n                        try {\n                            translations = JSON.parse(cached);\n                        } catch {\n                            translations = data.translations || {};\n                        }\n                    } else {\n                        translations = data.translations || {};\n                        // Store to cache\n                        try {\n                            sessionStorage.setItem(cacheKey, JSON.stringify(translations));\n                        } catch {}\n                    }\n                    \n                    // Update global translations object\n                    window.translations = translations;\n\n                    // Store last language to speed next boot\n                    try { sessionStorage.setItem('i18n:last_language', currentLanguage); } catch {}\n                    updateLanguageDisplay(currentLanguage);\n                    \n                    // Update page content with new translations\n                    updatePageContent();\n                } else {\n                    console.error('❌ Failed to load translations:', data.message || 'Unknown error');\n                }\n            } catch (error) {\n                console.error('❌ Error loading translations:', error);\n            }\n        }\n        \n        // Update page content with translations",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    const cacheKey = &#96;i18n:${currentLanguage}:${version}&#96;;",
            "lineNumber": 236
          },
          {
            "lineNumber": 237
          },
          {
            "text": "                    // Check cache for this language+version",
            "lineNumber": 238
          },
          {
            "text": "                    const cached = sessionStorage.getItem(cacheKey);",
            "lineNumber": 239
          },
          {
            "text": "                    if (cached) {",
            "lineNumber": 240
          },
          {
            "text": "                        try {",
            "lineNumber": 241
          },
          {
            "text": "                            translations = JSON.parse(cached);",
            "lineNumber": 242
          },
          {
            "text": "                        } catch {",
            "lineNumber": 243
          },
          {
            "text": "                            translations = data.translations || {};",
            "lineNumber": 244
          },
          {
            "text": "                        }",
            "lineNumber": 245
          },
          {
            "text": "                    } else {",
            "lineNumber": 246
          },
          {
            "text": "                        translations = data.translations || {};",
            "lineNumber": 247
          },
          {
            "text": "                        // Store to cache",
            "lineNumber": 248
          },
          {
            "text": "                        try {",
            "lineNumber": 249
          },
          {
            "text": "                            sessionStorage.setItem(cacheKey, JSON.stringify(translations));",
            "lineNumber": 250
          },
          {
            "text": "                        } catch {}",
            "lineNumber": 251
          },
          {
            "text": "                    }",
            "lineNumber": 252
          },
          {
            "text": "                    ",
            "lineNumber": 253
          },
          {
            "text": "                    // Update global translations object",
            "lineNumber": 254
          },
          {
            "text": "                    window.translations = translations;",
            "lineNumber": 255
          },
          {
            "lineNumber": 256
          },
          {
            "text": "                    // Store last language to speed next boot",
            "lineNumber": 257
          },
          {
            "text": "                    try { sessionStorage.setItem('i18n:last_language', currentLanguage); } catch {}",
            "lineNumber": 258
          },
          {
            "text": "                    updateLanguageDisplay(currentLanguage);",
            "lineNumber": 259
          },
          {
            "text": "                    ",
            "lineNumber": 260
          },
          {
            "text": "                    // Update page content with new translations",
            "lineNumber": 261
          },
          {
            "text": "                    updatePageContent();",
            "lineNumber": 262
          },
          {
            "text": "                } else {",
            "lineNumber": 263
          },
          {
            "text": "                    console.error('❌ Failed to load translations:', data.message || 'Unknown error');",
            "lineNumber": 264
          },
          {
            "text": "                }",
            "lineNumber": 265
          },
          {
            "text": "            } catch (error) {",
            "lineNumber": 266
          },
          {
            "text": "                console.error('❌ Error loading translations:', error);",
            "lineNumber": 267
          },
          {
            "text": "            }",
            "lineNumber": 268
          },
          {
            "text": "        }",
            "lineNumber": 269
          },
          {
            "text": "        ",
            "lineNumber": 270
          },
          {
            "text": "        // Update page content with translations",
            "lineNumber": 271
          }
        ]
      },
      "score": 0.2732357978820801
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\i18n_service.py",
        "range": {
          "startPosition": {
            "line": 8
          },
          "endPosition": {
            "line": 330
          }
        },
        "contents": "class I18nService:\ndef __init__(self, default_language: Language = Language.ENGLISH):\n \"de\": \"Top Team-Leistungen\"},\n            \"no_timetable_available\": {\"en\": \"No timetable available\", \"de\": \"Kein Spielplan verfügbar\"},\n            \"venue\": {\"en\": \"Venue\", \"de\": \"Ort\"},\n            \"match_schedule\": {\"en\": \"Match Schedule\", \"de\": \"Spielplan\"},\n            \"no_individual_data_available\": {\"en\": \"No individual data available\", \"de\": \"Keine Einzeldaten verfügbar\"},\n            \"top_individual_performances\": {\"en\": \"Top Individual Performances\", \"de\": \"Top Einzel-Leistungen\"},\n            \"individual_scores\": {\"en\": \"Individual Scores\", \"de\": \"Einzel-Ergebnisse\"},\n            \"all_individual_scores_for\": {\"en\": \"All individual scores for\", \"de\": \"Alle Einzel-Ergebnisse für\"},\n            \"view\": {\"en\": \"View\", \"de\": \"Ansicht\"},\n            \"own_team\": {\"en\": \"Own Team\", \"de\": \"Eigenes Team\"},\n            \"error_loading_data_for\": {\"en\": \"Error loading data for\", \"de\": \"Fehler beim Laden der Daten für\"},\n            \"no_data_available_for_team_week\": {\"en\": \"No data available for\", \"de\": \"Keine Daten verfügbar für\"},\n            \"standings\": {\"en\": \"Standings\", \"de\": \"Tabelle\"},\n            \"win_percentage\": {\"en\": \"Win Percentage\", \"de\": \"Siegquote\"},\n            \"performance\": {\"en\": \"Performance\", \"de\": \"Leistung\"},\n            \"team_vs_team_comparison_matrix_explanation\": {\"en\": \"Average scores and match points between teams\", \"de\": \"Gegenüberstellung der erzielten Pins und Punkte im direkten Vergleich der Teams während\"},\n        }\n\n        # Derive runtime per-language maps from catalog\n        self._translations = self._build_translations_from_catalog(self._catalog)\n    \n    def get_text(self, key: str) -&gt; str:\n        \"\"\"Get translated text for the given key\"\"\"\n        with self._lock:\n            return self._translations[self._current_language].get(key, key)\n    \n    def get_translations_version(self) -&gt; str:\n        with self._lock:\n            return self._translations_version\n\n    # ---- Internal helpers ----\n    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:\n        ",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 9,
                "column": 1
              },
              "endPosition": {
                "line": 10,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 12,
                "column": 5
              },
              "endPosition": {
                "line": 13,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class I18nService:",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "def __init__(self, default_language: Language = Language.ENGLISH):",
            "lineNumber": 12
          },
          {
            "text": " \"de\": \"Top Team-Leistungen\"},",
            "lineNumber": 262
          },
          {
            "text": "            \"no_timetable_available\": {\"en\": \"No timetable available\", \"de\": \"Kein Spielplan verfügbar\"},",
            "lineNumber": 263
          },
          {
            "text": "            \"venue\": {\"en\": \"Venue\", \"de\": \"Ort\"},",
            "lineNumber": 264
          },
          {
            "text": "            \"match_schedule\": {\"en\": \"Match Schedule\", \"de\": \"Spielplan\"},",
            "lineNumber": 265
          },
          {
            "text": "            \"no_individual_data_available\": {\"en\": \"No individual data available\", \"de\": \"Keine Einzeldaten verfügbar\"},",
            "lineNumber": 266
          },
          {
            "text": "            \"top_individual_performances\": {\"en\": \"Top Individual Performances\", \"de\": \"Top Einzel-Leistungen\"},",
            "lineNumber": 267
          },
          {
            "text": "            \"individual_scores\": {\"en\": \"Individual Scores\", \"de\": \"Einzel-Ergebnisse\"},",
            "lineNumber": 268
          },
          {
            "text": "            \"all_individual_scores_for\": {\"en\": \"All individual scores for\", \"de\": \"Alle Einzel-Ergebnisse für\"},",
            "lineNumber": 269
          },
          {
            "text": "            \"view\": {\"en\": \"View\", \"de\": \"Ansicht\"},",
            "lineNumber": 270
          },
          {
            "text": "            \"own_team\": {\"en\": \"Own Team\", \"de\": \"Eigenes Team\"},",
            "lineNumber": 271
          },
          {
            "text": "            \"error_loading_data_for\": {\"en\": \"Error loading data for\", \"de\": \"Fehler beim Laden der Daten für\"},",
            "lineNumber": 272
          },
          {
            "text": "            \"no_data_available_for_team_week\": {\"en\": \"No data available for\", \"de\": \"Keine Daten verfügbar für\"},",
            "lineNumber": 273
          },
          {
            "text": "            \"standings\": {\"en\": \"Standings\", \"de\": \"Tabelle\"},",
            "lineNumber": 274
          },
          {
            "text": "            \"win_percentage\": {\"en\": \"Win Percentage\", \"de\": \"Siegquote\"},",
            "lineNumber": 275
          },
          {
            "text": "            \"performance\": {\"en\": \"Performance\", \"de\": \"Leistung\"},",
            "lineNumber": 276
          },
          {
            "text": "            \"team_vs_team_comparison_matrix_explanation\": {\"en\": \"Average scores and match points between teams\", \"de\": \"Gegenüberstellung der erzielten Pins und Punkte im direkten Vergleich der Teams während\"},",
            "lineNumber": 277
          },
          {
            "text": "        }",
            "lineNumber": 278
          },
          {
            "lineNumber": 279
          },
          {
            "text": "        # Derive runtime per-language maps from catalog",
            "lineNumber": 280
          },
          {
            "text": "        self._translations = self._build_translations_from_catalog(self._catalog)",
            "lineNumber": 281
          },
          {
            "text": "    ",
            "lineNumber": 282
          },
          {
            "text": "    def get_text(self, key: str) -&gt; str:",
            "lineNumber": 283
          },
          {
            "text": "        \"\"\"Get translated text for the given key\"\"\"",
            "lineNumber": 284
          },
          {
            "text": "        with self._lock:",
            "lineNumber": 285
          },
          {
            "text": "            return self._translations[self._current_language].get(key, key)",
            "lineNumber": 286
          },
          {
            "text": "    ",
            "lineNumber": 287
          },
          {
            "text": "    def get_translations_version(self) -&gt; str:",
            "lineNumber": 288
          },
          {
            "text": "        with self._lock:",
            "lineNumber": 289
          },
          {
            "text": "            return self._translations_version",
            "lineNumber": 290
          },
          {
            "lineNumber": 291
          },
          {
            "text": "    # ---- Internal helpers ----",
            "lineNumber": 292
          },
          {
            "text": "    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:",
            "lineNumber": 293
          },
          {
            "text": "        ",
            "lineNumber": 294
          }
        ]
      },
      "score": 0.2617485523223877
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\team-vs-team-utils.js",
        "range": {
          "startPosition": {
            "line": 40,
            "column": 1
          },
          "endPosition": {
            "line": 153,
            "column": 1
          }
        },
        "contents": "/**\n * Renders the team vs team comparison card and table\n * @param {Object} data - Team vs team comparison data from API\n * @param {Object} options - Rendering options\n * @param {string} options.containerId - ID of the container element to render into\n * @param {string} options.tableId - ID for the table element (will be created inside container)\n * @param {string} [options.headerLevel='h6'] - HTML header level ('h5', 'h6', etc.)\n * @param {boolean} [options.disablePositionCircle=false] - Whether to disable position circles\n * @param {boolean} [options.enableHeatMap=true] - Whether to enable heat map\n * @param {string} [options.teamField] - Field name for team identification (for position circles)\n */\nfunction renderTeamVsTeamComparison(data, options) {\n    const {\n        containerId,\n        tableId,\n        headerLevel = 'h6',\n        disablePositionCircle = false,\n        enableHeatMap = true,\n        teamField = null\n    } = options;\n\n    if (!data || !data.columns || !data.data) {\n        console.warn('No team vs team comparison data available');\n        return;\n    }\n\n    const container = document.getElementById(containerId);\n    if (!container) {\n        console.error(&#96;Team vs team comparison container not found: ${containerId}&#96;);\n        return;\n    }\n\n    // Get translation function if available\n    const t = typeof window.t === 'function' ? window.t : null;\n    const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);\n\n    // Use title and description from API response (which includes proper i18n with article_male + season/week)\n    // The backend provides: title with i18n, and description with \"team_vs_team_comparison_matrix_explanation\" + article_male + season/week\n    const title = data.title || getText('team_vs_team_comparison_matrix', 'Team vs Team Comparison Matrix');\n    const description = data.description || getText('ui.team_vs_team.description', 'Matrix showing team performance against each opponent');\n\n    // Create the team vs team comparison card\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 43
          },
          {
            "text": " * Renders the team vs team comparison card and table",
            "lineNumber": 44
          },
          {
            "text": " * @param {Object} data - Team vs team comparison data from API",
            "lineNumber": 45
          },
          {
            "text": " * @param {Object} options - Rendering options",
            "lineNumber": 46
          },
          {
            "text": " * @param {string} options.containerId - ID of the container element to render into",
            "lineNumber": 47
          },
          {
            "text": " * @param {string} options.tableId - ID for the table element (will be created inside container)",
            "lineNumber": 48
          },
          {
            "text": " * @param {string} [options.headerLevel='h6'] - HTML header level ('h5', 'h6', etc.)",
            "lineNumber": 49
          },
          {
            "text": " * @param {boolean} [options.disablePositionCircle=false] - Whether to disable position circles",
            "lineNumber": 50
          },
          {
            "text": " * @param {boolean} [options.enableHeatMap=true] - Whether to enable heat map",
            "lineNumber": 51
          },
          {
            "text": " * @param {string} [options.teamField] - Field name for team identification (for position circles)",
            "lineNumber": 52
          },
          {
            "text": " */",
            "lineNumber": 53
          },
          {
            "text": "function renderTeamVsTeamComparison(data, options) {",
            "lineNumber": 54,
            "isSignature": true
          },
          {
            "text": "    const {",
            "lineNumber": 55
          },
          {
            "text": "        containerId,",
            "lineNumber": 56
          },
          {
            "text": "        tableId,",
            "lineNumber": 57
          },
          {
            "text": "        headerLevel = 'h6',",
            "lineNumber": 58
          },
          {
            "text": "        disablePositionCircle = false,",
            "lineNumber": 59
          },
          {
            "text": "        enableHeatMap = true,",
            "lineNumber": 60
          },
          {
            "text": "        teamField = null",
            "lineNumber": 61
          },
          {
            "text": "    } = options;",
            "lineNumber": 62
          },
          {
            "lineNumber": 63
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 64
          },
          {
            "text": "        console.warn('No team vs team comparison data available');",
            "lineNumber": 65
          },
          {
            "text": "        return;",
            "lineNumber": 66
          },
          {
            "text": "    }",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "    const container = document.getElementById(containerId);",
            "lineNumber": 69
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 70
          },
          {
            "text": "        console.error(&#96;Team vs team comparison container not found: ${containerId}&#96;);",
            "lineNumber": 71
          },
          {
            "text": "        return;",
            "lineNumber": 72
          },
          {
            "text": "    }",
            "lineNumber": 73
          },
          {
            "lineNumber": 74
          },
          {
            "text": "    // Get translation function if available",
            "lineNumber": 75
          },
          {
            "text": "    const t = typeof window.t === 'function' ? window.t : null;",
            "lineNumber": 76
          },
          {
            "text": "    const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);",
            "lineNumber": 77
          },
          {
            "lineNumber": 78
          },
          {
            "text": "    // Use title and description from API response (which includes proper i18n with article_male + season/week)",
            "lineNumber": 79
          },
          {
            "text": "    // The backend provides: title with i18n, and description with \"team_vs_team_comparison_matrix_explanation\" + article_male + season/week",
            "lineNumber": 80
          },
          {
            "text": "    const title = data.title || getText('team_vs_team_comparison_matrix', 'Team vs Team Comparison Matrix');",
            "lineNumber": 81
          },
          {
            "text": "    const description = data.description || getText('ui.team_vs_team.description', 'Matrix showing team performance against each opponent');",
            "lineNumber": 82
          },
          {
            "lineNumber": 83
          },
          {
            "text": "    // Create the team vs team comparison card",
            "lineNumber": 84
          },
          {
            "text": "}",
            "lineNumber": 154,
            "isSignature": true
          }
        ]
      },
      "score": 0.2548640966415405
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\base.html",
        "range": {
          "startPosition": {
            "line": 379
          },
          "endPosition": {
            "line": 420
          }
        },
        "contents": "        async function switchLanguage(language) {\n            try {\n                const response = await fetch('/league/set_language', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ language: language })\n                });\n                \n                const data = await response.json();\n                \n                if (data.success) {\n                    currentLanguage = language;\n                    // Clear any previous cached last language\n                    try { sessionStorage.setItem('i18n:last_language', currentLanguage); } catch {}\n                    await loadTranslations();\n                    \n                    // Update all content immediately without page reload\n                    updatePageContent();\n                    \n                    // Refresh current data to update table headers and chart labels\n                    refreshCurrentData();\n                    \n                    // Dispatch language change event for apps to listen to\n                    window.dispatchEvent(new CustomEvent('languageChanged', { \n                        detail: { language: language } \n                    }));\n                }\n            } catch (error) {\n                console.error('Error switching language:', error);\n            }\n        }\n        \n        // Make switchLanguage globally available\n        window.switchLanguage = switchLanguage;\n        \n        // Refresh current data to update table headers and chart labels\n        function refreshCurrentData() {\n            console.log('🔄 Refreshing current data for language change');\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        async function switchLanguage(language) {",
            "lineNumber": 380
          },
          {
            "text": "            try {",
            "lineNumber": 381
          },
          {
            "text": "                const response = await fetch('/league/set_language', {",
            "lineNumber": 382
          },
          {
            "text": "                    method: 'POST',",
            "lineNumber": 383
          },
          {
            "text": "                    headers: {",
            "lineNumber": 384
          },
          {
            "text": "                        'Content-Type': 'application/json',",
            "lineNumber": 385
          },
          {
            "text": "                    },",
            "lineNumber": 386
          },
          {
            "text": "                    body: JSON.stringify({ language: language })",
            "lineNumber": 387
          },
          {
            "text": "                });",
            "lineNumber": 388
          },
          {
            "text": "                ",
            "lineNumber": 389
          },
          {
            "text": "                const data = await response.json();",
            "lineNumber": 390
          },
          {
            "text": "                ",
            "lineNumber": 391
          },
          {
            "text": "                if (data.success) {",
            "lineNumber": 392
          },
          {
            "text": "                    currentLanguage = language;",
            "lineNumber": 393
          },
          {
            "text": "                    // Clear any previous cached last language",
            "lineNumber": 394
          },
          {
            "text": "                    try { sessionStorage.setItem('i18n:last_language', currentLanguage); } catch {}",
            "lineNumber": 395
          },
          {
            "text": "                    await loadTranslations();",
            "lineNumber": 396
          },
          {
            "text": "                    ",
            "lineNumber": 397
          },
          {
            "text": "                    // Update all content immediately without page reload",
            "lineNumber": 398
          },
          {
            "text": "                    updatePageContent();",
            "lineNumber": 399
          },
          {
            "text": "                    ",
            "lineNumber": 400
          },
          {
            "text": "                    // Refresh current data to update table headers and chart labels",
            "lineNumber": 401
          },
          {
            "text": "                    refreshCurrentData();",
            "lineNumber": 402
          },
          {
            "text": "                    ",
            "lineNumber": 403
          },
          {
            "text": "                    // Dispatch language change event for apps to listen to",
            "lineNumber": 404
          },
          {
            "text": "                    window.dispatchEvent(new CustomEvent('languageChanged', { ",
            "lineNumber": 405
          },
          {
            "text": "                        detail: { language: language } ",
            "lineNumber": 406
          },
          {
            "text": "                    }));",
            "lineNumber": 407
          },
          {
            "text": "                }",
            "lineNumber": 408
          },
          {
            "text": "            } catch (error) {",
            "lineNumber": 409
          },
          {
            "text": "                console.error('Error switching language:', error);",
            "lineNumber": 410
          },
          {
            "text": "            }",
            "lineNumber": 411
          },
          {
            "text": "        }",
            "lineNumber": 412
          },
          {
            "text": "        ",
            "lineNumber": 413
          },
          {
            "text": "        // Make switchLanguage globally available",
            "lineNumber": 414
          },
          {
            "text": "        window.switchLanguage = switchLanguage;",
            "lineNumber": 415
          },
          {
            "text": "        ",
            "lineNumber": 416
          },
          {
            "text": "        // Refresh current data to update table headers and chart labels",
            "lineNumber": 417
          },
          {
            "text": "        function refreshCurrentData() {",
            "lineNumber": 418
          },
          {
            "text": "            console.log('🔄 Refreshing current data for language change');",
            "lineNumber": 419
          },
          {
            "text": "            ",
            "lineNumber": 420
          }
        ]
      },
      "score": 0.249965101480484
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\league-stats-app.js",
        "range": {
          "startPosition": {
            "line": 359,
            "column": 1
          },
          "endPosition": {
            "line": 390,
            "column": 3
          }
        },
        "contents": "// Global initialization\nlet leagueStatsApp;\n\ndocument.addEventListener('DOMContentLoaded', async () =&gt; {\n    try {\n        console.log('📄 DOM loaded, initializing LeagueStatsApp...');\n        \n        leagueStatsApp = new LeagueStatsApp();\n        await leagueStatsApp.initialize();\n        \n        // Make app globally accessible for debugging\n        window.leagueStatsApp = leagueStatsApp;\n        \n    } catch (error) {\n        console.error('❌ Failed to initialize LeagueStatsApp:', error);\n        \n        // Show error message to user\n        const container = document.querySelector('.container-fluid');\n        if (container) {\n            container.innerHTML = &#96;\n                &lt;div class=\"alert alert-danger\" role=\"alert\"&gt;\n                    &lt;h4 class=\"alert-heading\"&gt;${typeof t === 'function' ? t('status.initialization_error.title', 'Initialization Error') : 'Initialization Error'}&lt;/h4&gt;\n                    &lt;p&gt;${typeof t === 'function' ? t('status.initialization_error.message', 'Failed to initialize the league statistics application. Please refresh the page.') : 'Failed to initialize the league statistics application. Please refresh the page.'}&lt;/p&gt;\n                    &lt;hr&gt;\n                    &lt;p class=\"mb-0\"&gt;Error: ${error.message}&lt;/p&gt;\n                &lt;/div&gt;\n            &#96;;\n        }\n    }\n});",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// Global initialization",
            "lineNumber": 362
          },
          {
            "text": "let leagueStatsApp;",
            "lineNumber": 363
          },
          {
            "lineNumber": 364
          },
          {
            "text": "document.addEventListener('DOMContentLoaded', async () =&gt; {",
            "lineNumber": 365
          },
          {
            "text": "    try {",
            "lineNumber": 366
          },
          {
            "text": "        console.log('📄 DOM loaded, initializing LeagueStatsApp...');",
            "lineNumber": 367
          },
          {
            "text": "        ",
            "lineNumber": 368
          },
          {
            "text": "        leagueStatsApp = new LeagueStatsApp();",
            "lineNumber": 369
          },
          {
            "text": "        await leagueStatsApp.initialize();",
            "lineNumber": 370
          },
          {
            "text": "        ",
            "lineNumber": 371
          },
          {
            "text": "        // Make app globally accessible for debugging",
            "lineNumber": 372
          },
          {
            "text": "        window.leagueStatsApp = leagueStatsApp;",
            "lineNumber": 373
          },
          {
            "text": "        ",
            "lineNumber": 374
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 375
          },
          {
            "text": "        console.error('❌ Failed to initialize LeagueStatsApp:', error);",
            "lineNumber": 376
          },
          {
            "text": "        ",
            "lineNumber": 377
          },
          {
            "text": "        // Show error message to user",
            "lineNumber": 378
          },
          {
            "text": "        const container = document.querySelector('.container-fluid');",
            "lineNumber": 379
          },
          {
            "text": "        if (container) {",
            "lineNumber": 380
          },
          {
            "text": "            container.innerHTML = &#96;",
            "lineNumber": 381
          },
          {
            "text": "                &lt;div class=\"alert alert-danger\" role=\"alert\"&gt;",
            "lineNumber": 382
          },
          {
            "text": "                    &lt;h4 class=\"alert-heading\"&gt;${typeof t === 'function' ? t('status.initialization_error.title', 'Initialization Error') : 'Initialization Error'}&lt;/h4&gt;",
            "lineNumber": 383
          },
          {
            "text": "                    &lt;p&gt;${typeof t === 'function' ? t('status.initialization_error.message', 'Failed to initialize the league statistics application. Please refresh the page.') : 'Failed to initialize the league statistics application. Please refresh the page.'}&lt;/p&gt;",
            "lineNumber": 384
          },
          {
            "text": "                    &lt;hr&gt;",
            "lineNumber": 385
          },
          {
            "text": "                    &lt;p class=\"mb-0\"&gt;Error: ${error.message}&lt;/p&gt;",
            "lineNumber": 386
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 387
          },
          {
            "text": "            &#96;;",
            "lineNumber": 388
          },
          {
            "text": "        }",
            "lineNumber": 389
          },
          {
            "text": "    }",
            "lineNumber": 390
          },
          {
            "text": "});",
            "lineNumber": 391
          }
        ]
      },
      "score": 0.21741509437561035
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\i18n_service.py",
        "range": {
          "startPosition": {
            "line": 8
          },
          "endPosition": {
            "line": 333,
            "column": 60
          }
        },
        "contents": "class I18nService:\n\n\n    # ---- Internal helpers ----\n    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:\n        \"\"\"Create fast lookup maps for each language from the unified catalog.\"\"\"\n        en_map: Dict[str, str] = {}\n        de_map: Dict[str, str] = {}\n        for key, vals in catalog.items():\n            en_val = vals.get('en')\n            de_val = vals.get('de')\n            if en_val is not None:\n                en_map[key] = en_val\n            if de_val is not None:\n                de_map[key] = de_val\n        return {Language.ENGLISH: en_map, Language.GERMAN: de_map}\n\n    def validate_catalog(self) -&gt; Dict[str, Dict[str, bool]]:\n        \"\"\"Return a report showing which keys are missing in which languages.\"\"\"\n        report: Dict[str, Dict[str, bool]] = {}\n        for key, vals in self._catalog.items():\n            report[key] = {\n                'en_present': bool(vals.get('en')),\n                'de_present': bool(vals.get('de')),\n            }\n        return report\n    \n    def set_language(self, language: Language):\n        \"\"\"Set the current language\"\"\"\n        with self._lock:\n            self._current_language = language\n    \n    def get_current_language(self) -&gt; Language:\n        \"\"\"Get the current language\"\"\"\n        with self._lock:\n            return self._current_language\n    \n    def get_available_languages(self) -&gt; Dict[str, str]:\n        \"\"\"Get available languages with their display names\"\"\"\n        return {\n            Language.ENGLISH.value: self.get_text(\"english\"),\n            Language.GERMAN.value: self.get_text(\"german\")\n        }\n\n# Global instance - default to German\ni18n_service = I18nService(default_language=Language.GERMAN)",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 9,
                "column": 1
              },
              "endPosition": {
                "line": 10,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class I18nService:",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "lineNumber": 290
          },
          {
            "lineNumber": 291
          },
          {
            "text": "    # ---- Internal helpers ----",
            "lineNumber": 292
          },
          {
            "text": "    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:",
            "lineNumber": 293
          },
          {
            "text": "        \"\"\"Create fast lookup maps for each language from the unified catalog.\"\"\"",
            "lineNumber": 294
          },
          {
            "text": "        en_map: Dict[str, str] = {}",
            "lineNumber": 295
          },
          {
            "text": "        de_map: Dict[str, str] = {}",
            "lineNumber": 296
          },
          {
            "text": "        for key, vals in catalog.items():",
            "lineNumber": 297
          },
          {
            "text": "            en_val = vals.get('en')",
            "lineNumber": 298
          },
          {
            "text": "            de_val = vals.get('de')",
            "lineNumber": 299
          },
          {
            "text": "            if en_val is not None:",
            "lineNumber": 300
          },
          {
            "text": "                en_map[key] = en_val",
            "lineNumber": 301
          },
          {
            "text": "            if de_val is not None:",
            "lineNumber": 302
          },
          {
            "text": "                de_map[key] = de_val",
            "lineNumber": 303
          },
          {
            "text": "        return {Language.ENGLISH: en_map, Language.GERMAN: de_map}",
            "lineNumber": 304
          },
          {
            "lineNumber": 305
          },
          {
            "text": "    def validate_catalog(self) -&gt; Dict[str, Dict[str, bool]]:",
            "lineNumber": 306
          },
          {
            "text": "        \"\"\"Return a report showing which keys are missing in which languages.\"\"\"",
            "lineNumber": 307
          },
          {
            "text": "        report: Dict[str, Dict[str, bool]] = {}",
            "lineNumber": 308
          },
          {
            "text": "        for key, vals in self._catalog.items():",
            "lineNumber": 309
          },
          {
            "text": "            report[key] = {",
            "lineNumber": 310
          },
          {
            "text": "                'en_present': bool(vals.get('en')),",
            "lineNumber": 311
          },
          {
            "text": "                'de_present': bool(vals.get('de')),",
            "lineNumber": 312
          },
          {
            "text": "            }",
            "lineNumber": 313
          },
          {
            "text": "        return report",
            "lineNumber": 314
          },
          {
            "text": "    ",
            "lineNumber": 315
          },
          {
            "text": "    def set_language(self, language: Language):",
            "lineNumber": 316
          },
          {
            "text": "        \"\"\"Set the current language\"\"\"",
            "lineNumber": 317
          },
          {
            "text": "        with self._lock:",
            "lineNumber": 318
          },
          {
            "text": "            self._current_language = language",
            "lineNumber": 319
          },
          {
            "text": "    ",
            "lineNumber": 320
          },
          {
            "text": "    def get_current_language(self) -&gt; Language:",
            "lineNumber": 321
          },
          {
            "text": "        \"\"\"Get the current language\"\"\"",
            "lineNumber": 322
          },
          {
            "text": "        with self._lock:",
            "lineNumber": 323
          },
          {
            "text": "            return self._current_language",
            "lineNumber": 324
          },
          {
            "text": "    ",
            "lineNumber": 325
          },
          {
            "text": "    def get_available_languages(self) -&gt; Dict[str, str]:",
            "lineNumber": 326
          },
          {
            "text": "        \"\"\"Get available languages with their display names\"\"\"",
            "lineNumber": 327
          },
          {
            "text": "        return {",
            "lineNumber": 328
          },
          {
            "text": "            Language.ENGLISH.value: self.get_text(\"english\"),",
            "lineNumber": 329
          },
          {
            "text": "            Language.GERMAN.value: self.get_text(\"german\")",
            "lineNumber": 330
          },
          {
            "text": "        }",
            "lineNumber": 331,
            "isSignature": true
          },
          {
            "lineNumber": 332
          },
          {
            "text": "# Global instance - default to German",
            "lineNumber": 333
          },
          {
            "text": "i18n_service = I18nService(default_language=Language.GERMAN)",
            "lineNumber": 334
          }
        ]
      },
      "score": 0.20665353536605835
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-details-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 285,
            "column": 1
          }
        },
        "contents": "shouldRender(state) {\n\n    }\n\n    generateHTML(state) {\n        const matchDayText = window.translations ? \n            (window.translations['match_day'] || 'Match Day') : \n            'Match Day';\n\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div class=\"card\"&gt;\n                        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;\n                            &lt;div&gt;\n                                &lt;h5 data-i18n=\"score_sheet_selected_team\"&gt;Score Sheet for Selected Team&lt;/h5&gt;\n                                &lt;div id=\"teamDetailsMetadata\" class=\"text-muted small\"&gt;\n                                    ${state.team} - ${matchDayText} ${state.week}\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"btn-group\" role=\"group\" aria-label=\"View options\"&gt;\n                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewClassic\" value=\"classic\" checked&gt;\n                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewClassic\"&gt;${typeof t === 'function' ? t('block.team_details.view.classic', 'Classic') : 'Classic'}&lt;/label&gt;\n                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewNew\" value=\"new\"&gt;\n                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewNew\"&gt;${typeof t === 'function' ? t('block.team_details.view.new', 'New') : 'New'}&lt;/label&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"card-body\"&gt;\n                            &lt;div id=\"teamTableWeekDetails\"&gt;\n                                &lt;div class=\"text-center py-3\"&gt;\n                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                        &lt;span class=\"visually-hidden\"&gt;Loading team details...&lt;/span&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;  \n                    \n                    &lt;!-- Team Individual Averages Section --&gt;\n                    &lt;div class=\"mt-4\"&gt;\n                        &lt;div id=\"teamIndividualAveragesCard\"&gt;\n                            &lt;div class=\"text-center py-3\"&gt;\n                                &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                    &lt;span class=\"visually-hidden\"&gt;Loading team individual averages...&lt;/span&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        \n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "shouldRender(state) {",
            "lineNumber": 66,
            "isSignature": true
          },
          {
            "lineNumber": 70
          },
          {
            "text": "    }",
            "lineNumber": 71,
            "isSignature": true
          },
          {
            "lineNumber": 72
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 73,
            "isSignature": true
          },
          {
            "text": "        const matchDayText = window.translations ? ",
            "lineNumber": 74
          },
          {
            "text": "            (window.translations['match_day'] || 'Match Day') : ",
            "lineNumber": 75
          },
          {
            "text": "            'Match Day';",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "        return &#96;",
            "lineNumber": 78
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "                    &lt;div class=\"card\"&gt;",
            "lineNumber": 81
          },
          {
            "text": "                        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;",
            "lineNumber": 82
          },
          {
            "text": "                            &lt;div&gt;",
            "lineNumber": 83
          },
          {
            "text": "                                &lt;h5 data-i18n=\"score_sheet_selected_team\"&gt;Score Sheet for Selected Team&lt;/h5&gt;",
            "lineNumber": 84
          },
          {
            "text": "                                &lt;div id=\"teamDetailsMetadata\" class=\"text-muted small\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                                    ${state.team} - ${matchDayText} ${state.week}",
            "lineNumber": 86
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 87
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 88
          },
          {
            "text": "                            &lt;div class=\"btn-group\" role=\"group\" aria-label=\"View options\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewClassic\" value=\"classic\" checked&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewClassic\"&gt;${typeof t === 'function' ? t('block.team_details.view.classic', 'Classic') : 'Classic'}&lt;/label&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewNew\" value=\"new\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewNew\"&gt;${typeof t === 'function' ? t('block.team_details.view.new', 'New') : 'New'}&lt;/label&gt;",
            "lineNumber": 93
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 96
          },
          {
            "text": "                            &lt;div id=\"teamTableWeekDetails\"&gt;",
            "lineNumber": 97
          },
          {
            "text": "                                &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 99
          },
          {
            "text": "                                        &lt;span class=\"visually-hidden\"&gt;Loading team details...&lt;/span&gt;",
            "lineNumber": 100
          },
          {
            "text": "                                    &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "text": "                    &lt;/div&gt;  ",
            "lineNumber": 105
          },
          {
            "text": "                    ",
            "lineNumber": 106
          },
          {
            "text": "                    &lt;!-- Team Individual Averages Section --&gt;",
            "lineNumber": 107
          },
          {
            "text": "                    &lt;div class=\"mt-4\"&gt;",
            "lineNumber": 108
          },
          {
            "text": "                        &lt;div id=\"teamIndividualAveragesCard\"&gt;",
            "lineNumber": 109
          },
          {
            "text": "                            &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 110
          },
          {
            "text": "                                &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "                                    &lt;span class=\"visually-hidden\"&gt;Loading team individual averages...&lt;/span&gt;",
            "lineNumber": 112
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 113
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 114
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 115
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "        ",
            "lineNumber": 119
          },
          {
            "text": "    }",
            "lineNumber": 120,
            "isSignature": true
          }
        ]
      },
      "score": 0.20464199781417847
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\game-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 173,
            "column": 1
          }
        },
        "contents": "class GameOverviewBlock extends BaseContentBlock {\n\n\n    renderSelectionMessage() {\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;${typeof t === 'function' ? t('block.game_overview.title', 'Game Overview') : 'Game Overview'}&lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div id=\"gameOverviewMessage\" class=\"alert alert-info\"&gt;\n                        ${typeof t === 'function' ? t('msg.please_select.game', 'Please select a game/round.') : 'Please select a game/round.'}\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    async loadGameOverviewData(state) {\n        const { season, league, week, round } = state;\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class GameOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 97
          },
          {
            "lineNumber": 98
          },
          {
            "text": "    renderSelectionMessage() {",
            "lineNumber": 99,
            "isSignature": true
          },
          {
            "text": "        return &#96;",
            "lineNumber": 100
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 101
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 102
          },
          {
            "text": "                    &lt;h5&gt;${typeof t === 'function' ? t('block.game_overview.title', 'Game Overview') : 'Game Overview'}&lt;/h5&gt;",
            "lineNumber": 103
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 105
          },
          {
            "text": "                    &lt;div id=\"gameOverviewMessage\" class=\"alert alert-info\"&gt;",
            "lineNumber": 106
          },
          {
            "text": "                        ${typeof t === 'function' ? t('msg.please_select.game', 'Please select a game/round.') : 'Please select a game/round.'}",
            "lineNumber": 107
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 109
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 110
          },
          {
            "text": "        &#96;;",
            "lineNumber": 111
          },
          {
            "text": "    }",
            "lineNumber": 112,
            "isSignature": true
          },
          {
            "lineNumber": 113
          },
          {
            "text": "    async loadGameOverviewData(state) {",
            "lineNumber": 114,
            "isSignature": true
          },
          {
            "text": "        const { season, league, week, round } = state;",
            "lineNumber": 115
          },
          {
            "text": "    }",
            "lineNumber": 173,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 174,
            "isSignature": true
          }
        ]
      },
      "score": 0.2018660306930542
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\i18n_service.py",
        "range": {
          "startPosition": {
            "line": 8
          },
          "endPosition": {
            "line": 330
          }
        },
        "contents": "class I18nService:\ndef __init__(self, default_language: Language = Language.ENGLISH):\n\n            \"ui.team_history.description\": {\"en\": \"Team position across seasons and league levels\", \"de\": \"Team-Position über Saisons und Liganiveaus\"},\n            \"ui.team_history.chart_title\": {\"en\": \"Position Progression\", \"de\": \"Positionsverlauf\"},\n            \"ui.team_history.loading\": {\"en\": \"Loading team history...\", \"de\": \"Teamverlauf wird geladen...\"},\n            \"ui.team_history.tooltip.league\": {\"en\": \"League:\", \"de\": \"Liga:\"},\n            \"ui.team_history.tooltip.final_position\": {\"en\": \"Final Position:\", \"de\": \"Endplatz:\"},\n\n            # Namespaced: Messages\n            \"msg.please_select.match_day\": {\"en\": \"Please select a match day.\", \"de\": \"Bitte wählen Sie einen Spieltag.\"},\n            \"msg.please_select.season_league\": {\"en\": \"Please select a combination of Season and League.\", \"de\": \"Bitte wählen Sie eine Kombination aus Saison und Liga.\"},\n            \"msg.please_select.team\": {\"en\": \"Please select a team to display the score sheet.\", \"de\": \"Bitte wählen Sie ein Team, um den Spielbericht anzuzeigen.\"},\n\n            # Common table headers\n            \"points\": {\"en\": \"Pts\", \"de\": \"Pkt.\"},\n            \"score\": {\"en\": \"Pins\", \"de\": \"Pins\"},\n            \"average\": {\"en\": \"Ø\", \"de\": \"Ø\"},\n            \"position\": {\"en\": \"Pos\", \"de\": \"Pos\"},\n            \"team\": {\"en\": \"Team\", \"de\": \"Team\"},\n            \"name\": {\"en\": \"Name\", \"de\": \"Name\"},\n            \"week\": {\"en\": \"Week\", \"de\": \"Spieltag\"},\n            \"total\": {\"en\": \"Total\", \"de\": \"Gesamt\"},\n            \"ranking\": {\"en\": \"Ranking\", \"de\": \"Rang\"},\n            \"opponent\": {\"en\": \"Opponent\", \"de\": \"Gegner\"},\n            \"round\": {\"en\": \"#\", \"de\": \"#\"},\n            \n            # Table titles and descriptions\n            \"league_standings\": {\"en\": \"League Standings\", \"de\": \"Tabellenstand\"},\n            \"league_standings_all_leagues\": {\"en\": \"Current Standings in all Leagues\", \"de\": \"Aktuelle Tabellenstände in allen Ligen\"},\n            \"league_history\": {\"en\": \"League History\", \"de\": \"Liga-Verlauf\"},\n            \"team_week_details\": {\"en\": \"Team Week Details\",",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 9,
                "column": 1
              },
              "endPosition": {
                "line": 10,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 12,
                "column": 5
              },
              "endPosition": {
                "line": 13,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class I18nService:",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "def __init__(self, default_language: Language = Language.ENGLISH):",
            "lineNumber": 12
          },
          {
            "lineNumber": 138
          },
          {
            "text": "            \"ui.team_history.description\": {\"en\": \"Team position across seasons and league levels\", \"de\": \"Team-Position über Saisons und Liganiveaus\"},",
            "lineNumber": 139
          },
          {
            "text": "            \"ui.team_history.chart_title\": {\"en\": \"Position Progression\", \"de\": \"Positionsverlauf\"},",
            "lineNumber": 140
          },
          {
            "text": "            \"ui.team_history.loading\": {\"en\": \"Loading team history...\", \"de\": \"Teamverlauf wird geladen...\"},",
            "lineNumber": 141
          },
          {
            "text": "            \"ui.team_history.tooltip.league\": {\"en\": \"League:\", \"de\": \"Liga:\"},",
            "lineNumber": 142
          },
          {
            "text": "            \"ui.team_history.tooltip.final_position\": {\"en\": \"Final Position:\", \"de\": \"Endplatz:\"},",
            "lineNumber": 143
          },
          {
            "lineNumber": 144
          },
          {
            "text": "            # Namespaced: Messages",
            "lineNumber": 145
          },
          {
            "text": "            \"msg.please_select.match_day\": {\"en\": \"Please select a match day.\", \"de\": \"Bitte wählen Sie einen Spieltag.\"},",
            "lineNumber": 146
          },
          {
            "text": "            \"msg.please_select.season_league\": {\"en\": \"Please select a combination of Season and League.\", \"de\": \"Bitte wählen Sie eine Kombination aus Saison und Liga.\"},",
            "lineNumber": 147
          },
          {
            "text": "            \"msg.please_select.team\": {\"en\": \"Please select a team to display the score sheet.\", \"de\": \"Bitte wählen Sie ein Team, um den Spielbericht anzuzeigen.\"},",
            "lineNumber": 148
          },
          {
            "lineNumber": 149
          },
          {
            "text": "            # Common table headers",
            "lineNumber": 150
          },
          {
            "text": "            \"points\": {\"en\": \"Pts\", \"de\": \"Pkt.\"},",
            "lineNumber": 151
          },
          {
            "text": "            \"score\": {\"en\": \"Pins\", \"de\": \"Pins\"},",
            "lineNumber": 152
          },
          {
            "text": "            \"average\": {\"en\": \"Ø\", \"de\": \"Ø\"},",
            "lineNumber": 153
          },
          {
            "text": "            \"position\": {\"en\": \"Pos\", \"de\": \"Pos\"},",
            "lineNumber": 154
          },
          {
            "text": "            \"team\": {\"en\": \"Team\", \"de\": \"Team\"},",
            "lineNumber": 155
          },
          {
            "text": "            \"name\": {\"en\": \"Name\", \"de\": \"Name\"},",
            "lineNumber": 156
          },
          {
            "text": "            \"week\": {\"en\": \"Week\", \"de\": \"Spieltag\"},",
            "lineNumber": 157
          },
          {
            "text": "            \"total\": {\"en\": \"Total\", \"de\": \"Gesamt\"},",
            "lineNumber": 158
          },
          {
            "text": "            \"ranking\": {\"en\": \"Ranking\", \"de\": \"Rang\"},",
            "lineNumber": 159
          },
          {
            "text": "            \"opponent\": {\"en\": \"Opponent\", \"de\": \"Gegner\"},",
            "lineNumber": 160
          },
          {
            "text": "            \"round\": {\"en\": \"#\", \"de\": \"#\"},",
            "lineNumber": 161
          },
          {
            "text": "            ",
            "lineNumber": 162
          },
          {
            "text": "            # Table titles and descriptions",
            "lineNumber": 163
          },
          {
            "text": "            \"league_standings\": {\"en\": \"League Standings\", \"de\": \"Tabellenstand\"},",
            "lineNumber": 164
          },
          {
            "text": "            \"league_standings_all_leagues\": {\"en\": \"Current Standings in all Leagues\", \"de\": \"Aktuelle Tabellenstände in allen Ligen\"},",
            "lineNumber": 165
          },
          {
            "text": "            \"league_history\": {\"en\": \"League History\", \"de\": \"Liga-Verlauf\"},",
            "lineNumber": 166
          },
          {
            "text": "            \"team_week_details\": {\"en\": \"Team Week Details\",",
            "lineNumber": 167
          }
        ]
      },
      "score": 0.20065736770629883
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\league-standings-card-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 72,
            "column": 1
          }
        },
        "contents": "/**\n * Utility functions for rendering league standings and honor scores cards\n * Used by both matchday-block and season-league-standings-block\n */\n\n/**\n * Generate HTML for a league standings + honor scores card\n * @param {Object} options - Configuration options\n * @param {string} options.league - League name\n * @param {string} options.week - Week number (optional)\n * @param {string} options.season - Season (optional)\n * @param {string} options.tableId - Unique ID for the standings table container\n * @param {string} options.honorScoresPrefix - Prefix for honor scores element IDs (optional, defaults to empty string)\n * @returns {string} HTML string for the card\n */\nfunction generateLeagueStandingsCardHTML(options) {\n    const { league, week, season, tableId, honorScoresPrefix = '' } = options;\n    \n    // Build header title\n    let headerTitle = league;\n    if (week) {\n        headerTitle += &#96; - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&#96;;\n    }\n    \n    // Build honor scores element IDs with prefix\n    const prefix = honorScoresPrefix ? &#96;${honorScoresPrefix}_&#96; : '';\n    const individualScoresId = &#96;individualScores${prefix}&#96;;\n    const teamScoresId = &#96;teamScores${prefix}&#96;;\n    const individualAveragesId = &#96;individualAverages${prefix}&#96;;\n    const teamAveragesId = &#96;teamAverages${prefix}&#96;;\n    const individualScoresSectionId = &#96;individualScoresSection${prefix}&#96;;\n    const teamScoresSectionId = &#96;teamScoresSection${prefix}&#96;;\n    const individualAveragesSectionId = &#96;individualAveragesSection${prefix}&#96;;\n    const teamAveragesSectionId = &#96;teamAveragesSection${prefix}&#96;;\n    \n    return &#96;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-8\"&gt;\n                &lt;h6&gt;\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * Utility functions for rendering league standings and honor scores cards",
            "lineNumber": 2
          },
          {
            "text": " * Used by both matchday-block and season-league-standings-block",
            "lineNumber": 3
          },
          {
            "text": " */",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "/**",
            "lineNumber": 6
          },
          {
            "text": " * Generate HTML for a league standings + honor scores card",
            "lineNumber": 7
          },
          {
            "text": " * @param {Object} options - Configuration options",
            "lineNumber": 8
          },
          {
            "text": " * @param {string} options.league - League name",
            "lineNumber": 9
          },
          {
            "text": " * @param {string} options.week - Week number (optional)",
            "lineNumber": 10
          },
          {
            "text": " * @param {string} options.season - Season (optional)",
            "lineNumber": 11
          },
          {
            "text": " * @param {string} options.tableId - Unique ID for the standings table container",
            "lineNumber": 12
          },
          {
            "text": " * @param {string} options.honorScoresPrefix - Prefix for honor scores element IDs (optional, defaults to empty string)",
            "lineNumber": 13
          },
          {
            "text": " * @returns {string} HTML string for the card",
            "lineNumber": 14
          },
          {
            "text": " */",
            "lineNumber": 15
          },
          {
            "text": "function generateLeagueStandingsCardHTML(options) {",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "text": "    const { league, week, season, tableId, honorScoresPrefix = '' } = options;",
            "lineNumber": 17
          },
          {
            "text": "    ",
            "lineNumber": 18
          },
          {
            "text": "    // Build header title",
            "lineNumber": 19
          },
          {
            "text": "    let headerTitle = league;",
            "lineNumber": 20
          },
          {
            "text": "    if (week) {",
            "lineNumber": 21
          },
          {
            "text": "        headerTitle += &#96; - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&#96;;",
            "lineNumber": 22
          },
          {
            "text": "    }",
            "lineNumber": 23
          },
          {
            "text": "    ",
            "lineNumber": 24
          },
          {
            "text": "    // Build honor scores element IDs with prefix",
            "lineNumber": 25
          },
          {
            "text": "    const prefix = honorScoresPrefix ? &#96;${honorScoresPrefix}_&#96; : '';",
            "lineNumber": 26
          },
          {
            "text": "    const individualScoresId = &#96;individualScores${prefix}&#96;;",
            "lineNumber": 27
          },
          {
            "text": "    const teamScoresId = &#96;teamScores${prefix}&#96;;",
            "lineNumber": 28
          },
          {
            "text": "    const individualAveragesId = &#96;individualAverages${prefix}&#96;;",
            "lineNumber": 29
          },
          {
            "text": "    const teamAveragesId = &#96;teamAverages${prefix}&#96;;",
            "lineNumber": 30
          },
          {
            "text": "    const individualScoresSectionId = &#96;individualScoresSection${prefix}&#96;;",
            "lineNumber": 31
          },
          {
            "text": "    const teamScoresSectionId = &#96;teamScoresSection${prefix}&#96;;",
            "lineNumber": 32
          },
          {
            "text": "    const individualAveragesSectionId = &#96;individualAveragesSection${prefix}&#96;;",
            "lineNumber": 33
          },
          {
            "text": "    const teamAveragesSectionId = &#96;teamAveragesSection${prefix}&#96;;",
            "lineNumber": 34
          },
          {
            "text": "    ",
            "lineNumber": 35
          },
          {
            "text": "    return &#96;",
            "lineNumber": 36
          },
          {
            "text": "        &lt;div class=\"row\"&gt;",
            "lineNumber": 37
          },
          {
            "text": "            &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 38
          },
          {
            "text": "                &lt;h6&gt;",
            "lineNumber": 39
          },
          {
            "text": "}",
            "lineNumber": 73,
            "isSignature": true
          }
        ]
      },
      "score": 0.20062094926834106
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {
            "line": 185
          },
          "endPosition": {
            "line": 219,
            "column": 14
          }
        },
        "contents": "&lt;script src=\"{{ static_url('js/content-blocks/game-team-details-block.js') }}\"&gt;&lt;/script&gt;\n\n&lt;!-- Main application --&gt;\n&lt;script src=\"{{ static_url('js/league-stats-app.js') }}\"&gt;&lt;/script&gt;\n\n&lt;!-- Initialize i18n translations if available --&gt;\n{% if translations %}\n&lt;script&gt;\n    window.translations = {{ translations|tojson }};\n&lt;/script&gt;\n{% endif %}\n\n&lt;!-- Legacy compatibility for external integrations --&gt;\n&lt;script&gt;\n// Backward compatibility functions for external tools that might call these\nwindow.updateAllContent = function() {\n    if (window.leagueStatsApp) {\n        window.leagueStatsApp.renderContent();\n    }\n};\n\nwindow.handleSelectionChange = function() {\n    if (window.leagueStatsApp) {\n        window.leagueStatsApp.renderContent();\n    }\n};\n\n// Make chart refresh function available globally\nwindow.refreshAllCharts = function() {\n    if (window.leagueStatsApp) {\n        window.leagueStatsApp.renderContent();\n    }\n};\n&lt;/script&gt;\n{% endblock %}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;script src=\"{{ static_url('js/content-blocks/game-team-details-block.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 186
          },
          {
            "lineNumber": 187
          },
          {
            "text": "&lt;!-- Main application --&gt;",
            "lineNumber": 188
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/league-stats-app.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 189
          },
          {
            "lineNumber": 190
          },
          {
            "text": "&lt;!-- Initialize i18n translations if available --&gt;",
            "lineNumber": 191
          },
          {
            "text": "{% if translations %}",
            "lineNumber": 192
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 193
          },
          {
            "text": "    window.translations = {{ translations|tojson }};",
            "lineNumber": 194
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 195
          },
          {
            "text": "{% endif %}",
            "lineNumber": 196
          },
          {
            "lineNumber": 197
          },
          {
            "text": "&lt;!-- Legacy compatibility for external integrations --&gt;",
            "lineNumber": 198
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 199
          },
          {
            "text": "// Backward compatibility functions for external tools that might call these",
            "lineNumber": 200
          },
          {
            "text": "window.updateAllContent = function() {",
            "lineNumber": 201
          },
          {
            "text": "    if (window.leagueStatsApp) {",
            "lineNumber": 202
          },
          {
            "text": "        window.leagueStatsApp.renderContent();",
            "lineNumber": 203
          },
          {
            "text": "    }",
            "lineNumber": 204
          },
          {
            "text": "};",
            "lineNumber": 205
          },
          {
            "lineNumber": 206
          },
          {
            "text": "window.handleSelectionChange = function() {",
            "lineNumber": 207
          },
          {
            "text": "    if (window.leagueStatsApp) {",
            "lineNumber": 208
          },
          {
            "text": "        window.leagueStatsApp.renderContent();",
            "lineNumber": 209
          },
          {
            "text": "    }",
            "lineNumber": 210
          },
          {
            "text": "};",
            "lineNumber": 211
          },
          {
            "lineNumber": 212
          },
          {
            "text": "// Make chart refresh function available globally",
            "lineNumber": 213
          },
          {
            "text": "window.refreshAllCharts = function() {",
            "lineNumber": 214
          },
          {
            "text": "    if (window.leagueStatsApp) {",
            "lineNumber": 215
          },
          {
            "text": "        window.leagueStatsApp.renderContent();",
            "lineNumber": 216
          },
          {
            "text": "    }",
            "lineNumber": 217
          },
          {
            "text": "};",
            "lineNumber": 218
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 219
          },
          {
            "text": "{% endblock %}",
            "lineNumber": 220
          }
        ]
      },
      "score": 0.1935465931892395
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\individual-averages-utils.js",
        "range": {
          "startPosition": {
            "line": 121,
            "column": 1
          },
          "endPosition": {
            "line": 147,
            "column": 1
          }
        },
        "contents": "/**\n * Loads and renders individual averages with error handling\n * @param {Object} params - Parameters for fetching data\n * @param {string} params.league - League name\n * @param {string} params.season - Season identifier\n * @param {number} [params.week] - Optional week number\n * @param {string} [params.team] - Optional team name\n * @param {Object} renderOptions - Options for rendering (see renderIndividualAverages)\n * @param {string} [errorMessage] - Custom error message to display on failure\n */\nasync function loadAndRenderIndividualAverages(params, renderOptions, errorMessage = null) {\n    try {\n        const data = await fetchIndividualAverages(params);\n        renderIndividualAverages(data, renderOptions);\n    } catch (error) {\n        console.error('Error loading individual averages:', error);\n        const container = document.getElementById(renderOptions.containerId || renderOptions.tableId);\n        if (container) {\n            const t = typeof window.t === 'function' ? window.t : null;\n            const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);\n            const message = errorMessage || getText('error_loading_individual_averages', 'Error loading individual averages');\n            container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${message}&lt;/div&gt;&#96;;\n        }\n    }\n}",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 124
          },
          {
            "text": " * Loads and renders individual averages with error handling",
            "lineNumber": 125
          },
          {
            "text": " * @param {Object} params - Parameters for fetching data",
            "lineNumber": 126
          },
          {
            "text": " * @param {string} params.league - League name",
            "lineNumber": 127
          },
          {
            "text": " * @param {string} params.season - Season identifier",
            "lineNumber": 128
          },
          {
            "text": " * @param {number} [params.week] - Optional week number",
            "lineNumber": 129
          },
          {
            "text": " * @param {string} [params.team] - Optional team name",
            "lineNumber": 130
          },
          {
            "text": " * @param {Object} renderOptions - Options for rendering (see renderIndividualAverages)",
            "lineNumber": 131
          },
          {
            "text": " * @param {string} [errorMessage] - Custom error message to display on failure",
            "lineNumber": 132
          },
          {
            "text": " */",
            "lineNumber": 133
          },
          {
            "text": "async function loadAndRenderIndividualAverages(params, renderOptions, errorMessage = null) {",
            "lineNumber": 134,
            "isSignature": true
          },
          {
            "text": "    try {",
            "lineNumber": 135
          },
          {
            "text": "        const data = await fetchIndividualAverages(params);",
            "lineNumber": 136
          },
          {
            "text": "        renderIndividualAverages(data, renderOptions);",
            "lineNumber": 137
          },
          {
            "text": "    } catch (error) {",
            "lineNumber": 138
          },
          {
            "text": "        console.error('Error loading individual averages:', error);",
            "lineNumber": 139
          },
          {
            "text": "        const container = document.getElementById(renderOptions.containerId || renderOptions.tableId);",
            "lineNumber": 140
          },
          {
            "text": "        if (container) {",
            "lineNumber": 141
          },
          {
            "text": "            const t = typeof window.t === 'function' ? window.t : null;",
            "lineNumber": 142
          },
          {
            "text": "            const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);",
            "lineNumber": 143
          },
          {
            "text": "            const message = errorMessage || getText('error_loading_individual_averages', 'Error loading individual averages');",
            "lineNumber": 144
          },
          {
            "text": "            container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${message}&lt;/div&gt;&#96;;",
            "lineNumber": 145
          },
          {
            "text": "        }",
            "lineNumber": 146
          },
          {
            "text": "    }",
            "lineNumber": 147
          },
          {
            "text": "}",
            "lineNumber": 148,
            "isSignature": true
          }
        ]
      },
      "score": 0.1911107301712036
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\base-content-block.js",
        "range": {
          "startPosition": {
            "line": 9
          },
          "endPosition": {
            "line": 385,
            "column": 1
          }
        },
        "contents": "class BaseContentBlock {\n\n    \n    /**\n     * Show error state\n     */\n    showError(error) {\n        const container = document.getElementById(this.containerId);\n        if (container) {\n            container.innerHTML = &#96;\n                &lt;div class=\"alert alert-warning\" role=\"alert\"&gt;\n                    &lt;h6 class=\"alert-heading\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Unable to load') : 'Unable to load'} ${this.title}&lt;/h6&gt;\n                    &lt;p class=\"mb-0\"&gt;${error.message}&lt;/p&gt;\n                    &lt;button class=\"btn btn-sm btn-outline-primary mt-2\" onclick=\"this.closest('.alert').parentElement.innerHTML=''\"&gt;\n                        ${typeof t === 'function' ? t('action.dismiss', 'Dismiss') : 'Dismiss'}\n                    &lt;/button&gt;\n                &lt;/div&gt;\n            &#96;;\n        }\n    }\n    \n    /**\n     * Clear the content area\n     */\n    clear() {\n        // Clean up any orphaned Chart.js instances first\n        this.clearOrphanedCharts();\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 10,
                "column": 1
              },
              "endPosition": {
                "line": 11,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class BaseContentBlock {",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "lineNumber": 243
          },
          {
            "text": "    ",
            "lineNumber": 244
          },
          {
            "text": "    /**",
            "lineNumber": 245
          },
          {
            "text": "     * Show error state",
            "lineNumber": 246
          },
          {
            "text": "     */",
            "lineNumber": 247
          },
          {
            "text": "    showError(error) {",
            "lineNumber": 248,
            "isSignature": true
          },
          {
            "text": "        const container = document.getElementById(this.containerId);",
            "lineNumber": 249
          },
          {
            "text": "        if (container) {",
            "lineNumber": 250
          },
          {
            "text": "            container.innerHTML = &#96;",
            "lineNumber": 251
          },
          {
            "text": "                &lt;div class=\"alert alert-warning\" role=\"alert\"&gt;",
            "lineNumber": 252
          },
          {
            "text": "                    &lt;h6 class=\"alert-heading\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Unable to load') : 'Unable to load'} ${this.title}&lt;/h6&gt;",
            "lineNumber": 253
          },
          {
            "text": "                    &lt;p class=\"mb-0\"&gt;${error.message}&lt;/p&gt;",
            "lineNumber": 254
          },
          {
            "text": "                    &lt;button class=\"btn btn-sm btn-outline-primary mt-2\" onclick=\"this.closest('.alert').parentElement.innerHTML=''\"&gt;",
            "lineNumber": 255
          },
          {
            "text": "                        ${typeof t === 'function' ? t('action.dismiss', 'Dismiss') : 'Dismiss'}",
            "lineNumber": 256
          },
          {
            "text": "                    &lt;/button&gt;",
            "lineNumber": 257
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 258
          },
          {
            "text": "            &#96;;",
            "lineNumber": 259
          },
          {
            "text": "        }",
            "lineNumber": 260
          },
          {
            "text": "    }",
            "lineNumber": 261,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 262
          },
          {
            "text": "    /**",
            "lineNumber": 263
          },
          {
            "text": "     * Clear the content area",
            "lineNumber": 264
          },
          {
            "text": "     */",
            "lineNumber": 265
          },
          {
            "text": "    clear() {",
            "lineNumber": 266,
            "isSignature": true
          },
          {
            "text": "        // Clean up any orphaned Chart.js instances first",
            "lineNumber": 267
          },
          {
            "text": "        this.clearOrphanedCharts();",
            "lineNumber": 268
          },
          {
            "text": "    }",
            "lineNumber": 277,
            "isSignature": true
          }
        ]
      },
      "score": 0.18669380247592926
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\consistency-metrics-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 155,
            "column": 1
          }
        },
        "contents": "class ConsistencyMetricsBlock extends BaseContentBlock {\n\n    \n    /**\n     * Render the consistency metrics HTML\n     */\n    renderMetrics(data) {\n        const container = this.getContainer();\n        if (!container) {\n            throw new Error('Metrics container not found');\n        }\n        \n        const metricsHtml = &#96;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-6\"&gt;\n                    &lt;h6&gt;${typeof t === 'function' ? t('ui.consistency.basic_stats', 'Basic Statistics') : 'Basic Statistics'}&lt;/h6&gt;\n                    &lt;table class=\"table table-sm\"&gt;\n                        &lt;tr&gt;&lt;td&gt;Average Score:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.mean_score || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;td&gt;Standard Deviation:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.std_deviation || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;td&gt;Coefficient of Variation:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.coefficient_of_variation || 'N/A'}%&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;td&gt;Consistency Rating:&lt;/td&gt;&lt;td&gt;&lt;strong class=\"text-primary\"&gt;${data.consistency_rating || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;/table&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-6\"&gt;\n                    &lt;h6&gt;${typeof t === 'function' ? t('ui.consistency.score_range', 'Score Range') : 'Score Range'}&lt;/h6&gt;\n                    &lt;table class=\"table table-sm\"&gt;\n                        &lt;tr&gt;&lt;td&gt;Highest Score:&lt;/td&gt;&lt;td&gt;&lt;strong class=\"text-success\"&gt;${data.max_score || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;td&gt;Lowest Score:&lt;/td&gt;&lt;td&gt;&lt;strong class=\"text-danger\"&gt;${data.min_score || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;td&gt;Score Range:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.score_range || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;td&gt;Interquartile Range:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.iqr || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;/table&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n        \n        container.innerHTML = metricsHtml;\n        console.log(&#96;${this.id}: Metrics HTML rendered successfully&#96;);\n    }\n    \n    /**\n     * Show loading state\n     */\n    showLoading() {\n        const container = this.getContainer();\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ConsistencyMetricsBlock extends BaseContentBlock {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 42
          },
          {
            "text": "    ",
            "lineNumber": 43
          },
          {
            "text": "    /**",
            "lineNumber": 44
          },
          {
            "text": "     * Render the consistency metrics HTML",
            "lineNumber": 45
          },
          {
            "text": "     */",
            "lineNumber": 46
          },
          {
            "text": "    renderMetrics(data) {",
            "lineNumber": 47,
            "isSignature": true
          },
          {
            "text": "        const container = this.getContainer();",
            "lineNumber": 48
          },
          {
            "text": "        if (!container) {",
            "lineNumber": 49
          },
          {
            "text": "            throw new Error('Metrics container not found');",
            "lineNumber": 50
          },
          {
            "text": "        }",
            "lineNumber": 51
          },
          {
            "text": "        ",
            "lineNumber": 52
          },
          {
            "text": "        const metricsHtml = &#96;",
            "lineNumber": 53
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 54
          },
          {
            "text": "                &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 55
          },
          {
            "text": "                    &lt;h6&gt;${typeof t === 'function' ? t('ui.consistency.basic_stats', 'Basic Statistics') : 'Basic Statistics'}&lt;/h6&gt;",
            "lineNumber": 56
          },
          {
            "text": "                    &lt;table class=\"table table-sm\"&gt;",
            "lineNumber": 57
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Average Score:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.mean_score || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 58
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Standard Deviation:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.std_deviation || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 59
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Coefficient of Variation:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.coefficient_of_variation || 'N/A'}%&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 60
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Consistency Rating:&lt;/td&gt;&lt;td&gt;&lt;strong class=\"text-primary\"&gt;${data.consistency_rating || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 61
          },
          {
            "text": "                    &lt;/table&gt;",
            "lineNumber": 62
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 63
          },
          {
            "text": "                &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 64
          },
          {
            "text": "                    &lt;h6&gt;${typeof t === 'function' ? t('ui.consistency.score_range', 'Score Range') : 'Score Range'}&lt;/h6&gt;",
            "lineNumber": 65
          },
          {
            "text": "                    &lt;table class=\"table table-sm\"&gt;",
            "lineNumber": 66
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Highest Score:&lt;/td&gt;&lt;td&gt;&lt;strong class=\"text-success\"&gt;${data.max_score || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 67
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Lowest Score:&lt;/td&gt;&lt;td&gt;&lt;strong class=\"text-danger\"&gt;${data.min_score || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 68
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Score Range:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.score_range || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 69
          },
          {
            "text": "                        &lt;tr&gt;&lt;td&gt;Interquartile Range:&lt;/td&gt;&lt;td&gt;&lt;strong&gt;${data.iqr || 'N/A'}&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;",
            "lineNumber": 70
          },
          {
            "text": "                    &lt;/table&gt;",
            "lineNumber": 71
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "text": "        &#96;;",
            "lineNumber": 74
          },
          {
            "text": "        ",
            "lineNumber": 75
          },
          {
            "text": "        container.innerHTML = metricsHtml;",
            "lineNumber": 76
          },
          {
            "text": "        console.log(&#96;${this.id}: Metrics HTML rendered successfully&#96;);",
            "lineNumber": 77
          },
          {
            "text": "    }",
            "lineNumber": 78,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 79
          },
          {
            "text": "    /**",
            "lineNumber": 80
          },
          {
            "text": "     * Show loading state",
            "lineNumber": 81
          },
          {
            "text": "     */",
            "lineNumber": 82
          },
          {
            "text": "    showLoading() {",
            "lineNumber": 83,
            "isSignature": true
          },
          {
            "text": "        const container = this.getContainer();",
            "lineNumber": 84
          },
          {
            "text": "    }",
            "lineNumber": 95,
            "isSignature": true
          }
        ]
      },
      "score": 0.18559503555297852
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-performance-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 318,
            "column": 1
          }
        },
        "contents": "createPerformanceTable(data) {\n(row, index) =&gt; {\n\n            }\n        });\n\n        // Prepare table data for createTableBootstrap3 (array format)\n        const tableData = {\n            title: &#96;${data.team} - ${typeof t === 'function' ? t('ui.team_performance.player_performance', 'Player Performance') : 'Player Performance'}&#96;,\n            description: typeof t === 'function' ? t('ui.team_performance.player_perf_desc', 'Individual player average scores per game with totals and averages') : 'Individual player average scores per game with totals and averages',\n            columns: [\n                {\n                    title: typeof t === 'function' ? t('player', 'Player') : 'Player',\n                    columns: [\n                        { title: typeof t === 'function' ? t('player', 'Player') : 'Player', width: '150px', align: 'left' }\n                    ]\n                },\n                {\n                    title: typeof t === 'function' ? t('ui.team_performance.weekly_avg_game', 'Weekly Avg/Game') : 'Weekly Avg/Game',\n                    columns: weeks.map((week, index) =&gt; ({\n                        title: &#96;${typeof t === 'function' ? t('match_day_label', 'Week') : 'Week'} ${index + 1}&#96;,\n                        width: '80px',\n                        align: 'center'\n                    }))\n                },\n                {\n                    title: typeof t === 'function' ? t('ui.win_percentage.totals', 'Totals') : 'Totals',\n                    columns: [\n                        { title: typeof t === 'function' ? t('ui.team_performance.total_score', 'Total Score') : 'Total Score', width: '100px', align: 'center' },\n                        { title: typeof t === 'function' ? t('games', 'Games') : 'Games', width: '80px', align: 'center' },\n                        { title: typeof t === 'function' ? t('ui.team_performance.avg_per_game', 'Avg/Game') : 'Avg/Game', width: '100px', align: 'center' }\n                    ]\n                }\n            ],\n            data: tableRows,\n            row_metadata: rowMetadata,\n            config: {\n                striped: true,\n                hover: true\n        };\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 130,
                "column": 5
              },
              "endPosition": {
                "line": 131,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "createPerformanceTable(data) {",
            "lineNumber": 130,
            "isSignature": true
          },
          {
            "text": "(row, index) =&gt; {",
            "lineNumber": 196
          },
          {
            "lineNumber": 207
          },
          {
            "text": "            }",
            "lineNumber": 208
          },
          {
            "text": "        });",
            "lineNumber": 209
          },
          {
            "lineNumber": 210
          },
          {
            "text": "        // Prepare table data for createTableBootstrap3 (array format)",
            "lineNumber": 211
          },
          {
            "text": "        const tableData = {",
            "lineNumber": 212
          },
          {
            "text": "            title: &#96;${data.team} - ${typeof t === 'function' ? t('ui.team_performance.player_performance', 'Player Performance') : 'Player Performance'}&#96;,",
            "lineNumber": 213
          },
          {
            "text": "            description: typeof t === 'function' ? t('ui.team_performance.player_perf_desc', 'Individual player average scores per game with totals and averages') : 'Individual player average scores per game with totals and averages',",
            "lineNumber": 214
          },
          {
            "text": "            columns: [",
            "lineNumber": 215
          },
          {
            "text": "                {",
            "lineNumber": 216
          },
          {
            "text": "                    title: typeof t === 'function' ? t('player', 'Player') : 'Player',",
            "lineNumber": 217
          },
          {
            "text": "                    columns: [",
            "lineNumber": 218
          },
          {
            "text": "                        { title: typeof t === 'function' ? t('player', 'Player') : 'Player', width: '150px', align: 'left' }",
            "lineNumber": 219
          },
          {
            "text": "                    ]",
            "lineNumber": 220
          },
          {
            "text": "                },",
            "lineNumber": 221
          },
          {
            "text": "                {",
            "lineNumber": 222
          },
          {
            "text": "                    title: typeof t === 'function' ? t('ui.team_performance.weekly_avg_game', 'Weekly Avg/Game') : 'Weekly Avg/Game',",
            "lineNumber": 223
          },
          {
            "text": "                    columns: weeks.map((week, index) =&gt; ({",
            "lineNumber": 224
          },
          {
            "text": "                        title: &#96;${typeof t === 'function' ? t('match_day_label', 'Week') : 'Week'} ${index + 1}&#96;,",
            "lineNumber": 225
          },
          {
            "text": "                        width: '80px',",
            "lineNumber": 226
          },
          {
            "text": "                        align: 'center'",
            "lineNumber": 227
          },
          {
            "text": "                    }))",
            "lineNumber": 228
          },
          {
            "text": "                },",
            "lineNumber": 229
          },
          {
            "text": "                {",
            "lineNumber": 230
          },
          {
            "text": "                    title: typeof t === 'function' ? t('ui.win_percentage.totals', 'Totals') : 'Totals',",
            "lineNumber": 231
          },
          {
            "text": "                    columns: [",
            "lineNumber": 232
          },
          {
            "text": "                        { title: typeof t === 'function' ? t('ui.team_performance.total_score', 'Total Score') : 'Total Score', width: '100px', align: 'center' },",
            "lineNumber": 233
          },
          {
            "text": "                        { title: typeof t === 'function' ? t('games', 'Games') : 'Games', width: '80px', align: 'center' },",
            "lineNumber": 234
          },
          {
            "text": "                        { title: typeof t === 'function' ? t('ui.team_performance.avg_per_game', 'Avg/Game') : 'Avg/Game', width: '100px', align: 'center' }",
            "lineNumber": 235
          },
          {
            "text": "                    ]",
            "lineNumber": 236
          },
          {
            "text": "                }",
            "lineNumber": 237
          },
          {
            "text": "            ],",
            "lineNumber": 238
          },
          {
            "text": "            data: tableRows,",
            "lineNumber": 239
          },
          {
            "text": "            row_metadata: rowMetadata,",
            "lineNumber": 240
          },
          {
            "text": "            config: {",
            "lineNumber": 241
          },
          {
            "text": "                striped: true,",
            "lineNumber": 242
          },
          {
            "text": "                hover: true",
            "lineNumber": 243
          },
          {
            "text": "        };",
            "lineNumber": 247
          },
          {
            "text": "    }",
            "lineNumber": 260,
            "isSignature": true
          }
        ]
      },
      "score": 0.18330514430999756
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\i18n_service.py",
        "range": {
          "startPosition": {
            "line": 8
          },
          "endPosition": {
            "line": 330
          }
        },
        "contents": "class I18nService:\ndef __init__(self, default_language: Language = Language.ENGLISH):\n,\n            \"ui.heatmap.points\": {\"en\": \"Points Heat Map\", \"de\": \"Matchpunkte-Heatmap\"},\n            \"ui.heatmap.low\": {\"en\": \"Low:\", \"de\": \"Niedrig:\"},\n            \"ui.heatmap.high\": {\"en\": \"High:\", \"de\": \"Hoch:\"},\n            \"ui.range_label\": {\"en\": \"Range:\", \"de\": \"Bereich:\"},\n\n            # Namespaced: Team Performance UI\n            \"ui.team_performance.title\": {\"en\": \"Performance Analysis\", \"de\": \"Leistungsanalyse\"},\n            \"ui.team_performance.description\": {\"en\": \"Individual player scores and team performance over time\", \"de\": \"Einzelspielergebnisse und Teamleistung über die Zeit\"},\n            \"ui.team_performance.individual\": {\"en\": \"Individual Player Performance\", \"de\": \"Leistung einzelner Spieler\"},\n            \"ui.team_performance.individual_desc\": {\"en\": \"Player scores per week with totals and averages per game\", \"de\": \"Spielergebnisse pro Woche mit Summen und Durchschnitt pro Spiel\"},\n            \"ui.team_performance.trends\": {\"en\": \"Performance Trends\", \"de\": \"Leistungstrends\"},\n            \"ui.team_performance.trends_desc\": {\"en\": \"Individual player performance over time\", \"de\": \"Leistung einzelner Spieler über die Zeit\"},\n            \"ui.team_performance.player_performance\": {\"en\": \"Player Performance\", \"de\": \"Spielerleistung\"},\n            \"ui.team_performance.player_perf_desc\": {\"en\": \"Individual player average scores per game with totals and averages\", \"de\": \"Durchschnittliche Spielergebnisse pro Spiel mit Summen und Durchschnitten\"},\n            \"ui.team_performance.weekly_avg_game\": {\"en\": \"Weekly Avg/Game\", \"de\": \"Wöchentlich Ø/Spiel\"},\n            \"ui.team_performance.total_score\": {\"en\": \"Total Score\", \"de\": \"Gesamtpinfall\"},\n            \"ui.team_performance.avg_per_game\": {\"en\": \"Avg/Game\", \"de\": \"Ø/Spiel\"},\n\n            # Namespaced: Team History UI\n            \"ui.team_history.title\": {\"en\": \"Team Position History\", \"de\": \"Team-Positionsverlauf\"},\n            \"ui.team_history.description\": {\"en\": \"Team position across seasons and league levels\", \"de\": \"Team-Position über Saisons und Liganiveaus\"},\n            \"ui.team_history.chart_title\":",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 9,
                "column": 1
              },
              "endPosition": {
                "line": 10,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 12,
                "column": 5
              },
              "endPosition": {
                "line": 13,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class I18nService:",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "def __init__(self, default_language: Language = Language.ENGLISH):",
            "lineNumber": 12
          },
          {
            "text": ",",
            "lineNumber": 118
          },
          {
            "text": "            \"ui.heatmap.points\": {\"en\": \"Points Heat Map\", \"de\": \"Matchpunkte-Heatmap\"},",
            "lineNumber": 119
          },
          {
            "text": "            \"ui.heatmap.low\": {\"en\": \"Low:\", \"de\": \"Niedrig:\"},",
            "lineNumber": 120
          },
          {
            "text": "            \"ui.heatmap.high\": {\"en\": \"High:\", \"de\": \"Hoch:\"},",
            "lineNumber": 121
          },
          {
            "text": "            \"ui.range_label\": {\"en\": \"Range:\", \"de\": \"Bereich:\"},",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "            # Namespaced: Team Performance UI",
            "lineNumber": 124
          },
          {
            "text": "            \"ui.team_performance.title\": {\"en\": \"Performance Analysis\", \"de\": \"Leistungsanalyse\"},",
            "lineNumber": 125
          },
          {
            "text": "            \"ui.team_performance.description\": {\"en\": \"Individual player scores and team performance over time\", \"de\": \"Einzelspielergebnisse und Teamleistung über die Zeit\"},",
            "lineNumber": 126
          },
          {
            "text": "            \"ui.team_performance.individual\": {\"en\": \"Individual Player Performance\", \"de\": \"Leistung einzelner Spieler\"},",
            "lineNumber": 127
          },
          {
            "text": "            \"ui.team_performance.individual_desc\": {\"en\": \"Player scores per week with totals and averages per game\", \"de\": \"Spielergebnisse pro Woche mit Summen und Durchschnitt pro Spiel\"},",
            "lineNumber": 128
          },
          {
            "text": "            \"ui.team_performance.trends\": {\"en\": \"Performance Trends\", \"de\": \"Leistungstrends\"},",
            "lineNumber": 129
          },
          {
            "text": "            \"ui.team_performance.trends_desc\": {\"en\": \"Individual player performance over time\", \"de\": \"Leistung einzelner Spieler über die Zeit\"},",
            "lineNumber": 130
          },
          {
            "text": "            \"ui.team_performance.player_performance\": {\"en\": \"Player Performance\", \"de\": \"Spielerleistung\"},",
            "lineNumber": 131
          },
          {
            "text": "            \"ui.team_performance.player_perf_desc\": {\"en\": \"Individual player average scores per game with totals and averages\", \"de\": \"Durchschnittliche Spielergebnisse pro Spiel mit Summen und Durchschnitten\"},",
            "lineNumber": 132
          },
          {
            "text": "            \"ui.team_performance.weekly_avg_game\": {\"en\": \"Weekly Avg/Game\", \"de\": \"Wöchentlich Ø/Spiel\"},",
            "lineNumber": 133
          },
          {
            "text": "            \"ui.team_performance.total_score\": {\"en\": \"Total Score\", \"de\": \"Gesamtpinfall\"},",
            "lineNumber": 134
          },
          {
            "text": "            \"ui.team_performance.avg_per_game\": {\"en\": \"Avg/Game\", \"de\": \"Ø/Spiel\"},",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "            # Namespaced: Team History UI",
            "lineNumber": 137
          },
          {
            "text": "            \"ui.team_history.title\": {\"en\": \"Team Position History\", \"de\": \"Team-Positionsverlauf\"},",
            "lineNumber": 138
          },
          {
            "text": "            \"ui.team_history.description\": {\"en\": \"Team position across seasons and league levels\", \"de\": \"Team-Position über Saisons und Liganiveaus\"},",
            "lineNumber": 139
          },
          {
            "text": "            \"ui.team_history.chart_title\":",
            "lineNumber": 140
          }
        ]
      },
      "score": 0.18154925107955933
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\i18n_service.py",
        "range": {
          "startPosition": {
            "line": 8
          },
          "endPosition": {
            "line": 330
          }
        },
        "contents": "class I18nService:\ndef __init__(self, default_language: Language = Language.ENGLISH):\n\n            \"ui.clutch.stats_placeholder\": {\"en\": \"Clutch statistics will appear here\", \"de\": \"Statistiken über enge Spiele werden hier angezeigt\"},\n            \"ui.clutch.margin\": {\"en\": \"margin\", \"de\": \"Abstand\"},\n\n            # Namespaced: Consistency Metrics UI\n            \"ui.consistency.basic_stats\": {\"en\": \"Basic Statistics\", \"de\": \"Grundstatistiken\"},\n            \"ui.consistency.score_range\": {\"en\": \"Score Range\", \"de\": \"Ergebnisbereich\"},\n            \"ui.consistency.description\": {\"en\": \"Statistical analysis of team performance consistency\", \"de\": \"Statistische Analyse der Team-Leistungskonsistenz\"},\n\n            # Namespaced: Win Percentage UI\n            \"ui.win_percentage.title\": {\"en\": \"Win Percentage Analysis\", \"de\": \"Siegquote-Analyse\"},\n            \"ui.win_percentage.description\": {\"en\": \"Individual player win percentages and team performance\", \"de\": \"Einzelspieler-Siegquoten und Team-Leistung\"},\n            \"ui.win_percentage.individual\": {\"en\": \"Individual Player Win Percentages\", \"de\": \"Einzelspieler-Siegquoten\"},\n            \"ui.win_percentage.individual_desc\": {\"en\": \"Player win percentages per week with totals\", \"de\": \"Spieler-Siegquoten pro Woche mit Gesamtwerten\"},\n            \"ui.win_percentage.trends\": {\"en\": \"Win Percentage Trends\", \"de\": \"Siegquote-Trends\"},\n            \"ui.win_percentage.trends_desc\": {\"en\": \"Individual player win percentages over time\", \"de\": \"Einzelspieler-Siegquoten über die Zeit\"},\n            \"ui.win_percentage.player\": {\"en\": \"Player\", \"de\": \"Spieler\"},\n            \"ui.win_percentage.weekly\": {\"en\": \"Weekly Win %\", \"de\": \"Wöchentliche Sieg %\"},\n            \"ui.win_percentage.totals\": {\"en\": \"Totals\", \"de\": \"Gesamtwerte\"},\n            \"ui.win_percentage.total_wins\": {\"en\": \"Total Wins\", \"de\": \"Gesamtsiege\"},\n            \"ui.win_percentage.total_matches\": {\"en\": \"Total Matches\", \"de\": \"Gesamtspiele\"},\n            \"ui.win_percentage.win_percentage\": {\"en\": \"Win %\", \"de\": \"Sieg %\"},\n\n            # Namespaced: League Aggregation/Overview UI\n            \"ui.league.aggregation.title\"",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 9,
                "column": 1
              },
              "endPosition": {
                "line": 10,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 12,
                "column": 5
              },
              "endPosition": {
                "line": 13,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class I18nService:",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "def __init__(self, default_language: Language = Language.ENGLISH):",
            "lineNumber": 12
          },
          {
            "lineNumber": 77
          },
          {
            "text": "            \"ui.clutch.stats_placeholder\": {\"en\": \"Clutch statistics will appear here\", \"de\": \"Statistiken über enge Spiele werden hier angezeigt\"},",
            "lineNumber": 78
          },
          {
            "text": "            \"ui.clutch.margin\": {\"en\": \"margin\", \"de\": \"Abstand\"},",
            "lineNumber": 79
          },
          {
            "lineNumber": 80
          },
          {
            "text": "            # Namespaced: Consistency Metrics UI",
            "lineNumber": 81
          },
          {
            "text": "            \"ui.consistency.basic_stats\": {\"en\": \"Basic Statistics\", \"de\": \"Grundstatistiken\"},",
            "lineNumber": 82
          },
          {
            "text": "            \"ui.consistency.score_range\": {\"en\": \"Score Range\", \"de\": \"Ergebnisbereich\"},",
            "lineNumber": 83
          },
          {
            "text": "            \"ui.consistency.description\": {\"en\": \"Statistical analysis of team performance consistency\", \"de\": \"Statistische Analyse der Team-Leistungskonsistenz\"},",
            "lineNumber": 84
          },
          {
            "lineNumber": 85
          },
          {
            "text": "            # Namespaced: Win Percentage UI",
            "lineNumber": 86
          },
          {
            "text": "            \"ui.win_percentage.title\": {\"en\": \"Win Percentage Analysis\", \"de\": \"Siegquote-Analyse\"},",
            "lineNumber": 87
          },
          {
            "text": "            \"ui.win_percentage.description\": {\"en\": \"Individual player win percentages and team performance\", \"de\": \"Einzelspieler-Siegquoten und Team-Leistung\"},",
            "lineNumber": 88
          },
          {
            "text": "            \"ui.win_percentage.individual\": {\"en\": \"Individual Player Win Percentages\", \"de\": \"Einzelspieler-Siegquoten\"},",
            "lineNumber": 89
          },
          {
            "text": "            \"ui.win_percentage.individual_desc\": {\"en\": \"Player win percentages per week with totals\", \"de\": \"Spieler-Siegquoten pro Woche mit Gesamtwerten\"},",
            "lineNumber": 90
          },
          {
            "text": "            \"ui.win_percentage.trends\": {\"en\": \"Win Percentage Trends\", \"de\": \"Siegquote-Trends\"},",
            "lineNumber": 91
          },
          {
            "text": "            \"ui.win_percentage.trends_desc\": {\"en\": \"Individual player win percentages over time\", \"de\": \"Einzelspieler-Siegquoten über die Zeit\"},",
            "lineNumber": 92
          },
          {
            "text": "            \"ui.win_percentage.player\": {\"en\": \"Player\", \"de\": \"Spieler\"},",
            "lineNumber": 93
          },
          {
            "text": "            \"ui.win_percentage.weekly\": {\"en\": \"Weekly Win %\", \"de\": \"Wöchentliche Sieg %\"},",
            "lineNumber": 94
          },
          {
            "text": "            \"ui.win_percentage.totals\": {\"en\": \"Totals\", \"de\": \"Gesamtwerte\"},",
            "lineNumber": 95
          },
          {
            "text": "            \"ui.win_percentage.total_wins\": {\"en\": \"Total Wins\", \"de\": \"Gesamtsiege\"},",
            "lineNumber": 96
          },
          {
            "text": "            \"ui.win_percentage.total_matches\": {\"en\": \"Total Matches\", \"de\": \"Gesamtspiele\"},",
            "lineNumber": 97
          },
          {
            "text": "            \"ui.win_percentage.win_percentage\": {\"en\": \"Win %\", \"de\": \"Sieg %\"},",
            "lineNumber": 98
          },
          {
            "lineNumber": 99
          },
          {
            "text": "            # Namespaced: League Aggregation/Overview UI",
            "lineNumber": 100
          },
          {
            "text": "            \"ui.league.aggregation.title\"",
            "lineNumber": 101
          }
        ]
      },
      "score": 0.1813270002603531
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\routes\\league_routes.py",
        "range": {
          "startPosition": {
            "line": 522,
            "column": 46
          },
          "endPosition": {
            "line": 653
          }
        },
        "contents": "@bp.route('/league/get_translations')\ndef get_translations():\n    \"\"\"Get all translations for the current language\"\"\"\n    try:\n        return jsonify({\n            \"success\": True,\n            \"current_language\": i18n_service.get_current_language().value,\n            \"available_languages\": i18n_service.get_available_languages(),\n            \"translations_version\": i18n_service.get_translations_version(),\n            \"translations\": {\n                key: i18n_service.get_text(key) \n                for key in [\n                    # Common table headers\n                    \"points\", \"score\", \"average\", \"position\", \"team\", \"name\", \"week\", \"total\",\n                    \"ranking\", \"opponent\", \"round\", \"pins\", \"avg\", \"games\", \"high_game\",\n                    \"location\", \"status\", \"date\", \"player\", \"season\", \"league\",\n                    \n                    # Table titles and descriptions\n                    \"league_standings\", \"league_history\", \"team_week_details\", \"head_to_head\", \n                    \"match_day\", \"through_week\", \"week_results\", \"total_until_week\",\n                    \"match_info\", \"match\", \"total_points\", \"team_performance\", \"season_timetable\",\n                    \"individual_averages\", \"individual_performance\", \"record_individual_games\", \n                    \"record_team_games\", \"team_vs_team_comparison_matrix\",\n                    \n                    # Navigation and UI\n                    \"select_match_day\", \"loading_data\", \"no_data_found\", \"error_loading_data\", \n                    \"missing_parameters\", \"no_data\", \"no_league_data_available\",\n                    \"no_data_available_for\", \"no_timetable_available\", \"no_individual_data_available\",\n                    \"no_data_available_for_team_week\",\n                    \n                    # Chart labels\n                    \"match_day_label\", \"position_label\", \"points_label\", \"average_label\",\n                    \"position_progression\", \"points_progression\", \"average_progression\",\n                    \"cumulative_points\",\n                    \n                    # Error messages\n                    \"season_league_required\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": "@bp.route('/league/get_translations')",
            "lineNumber": 525
          },
          {
            "text": "def get_translations():",
            "lineNumber": 526,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Get all translations for the current language\"\"\"",
            "lineNumber": 527
          },
          {
            "text": "    try:",
            "lineNumber": 528
          },
          {
            "text": "        return jsonify({",
            "lineNumber": 529
          },
          {
            "text": "            \"success\": True,",
            "lineNumber": 530
          },
          {
            "text": "            \"current_language\": i18n_service.get_current_language().value,",
            "lineNumber": 531
          },
          {
            "text": "            \"available_languages\": i18n_service.get_available_languages(),",
            "lineNumber": 532
          },
          {
            "text": "            \"translations_version\": i18n_service.get_translations_version(),",
            "lineNumber": 533
          },
          {
            "text": "            \"translations\": {",
            "lineNumber": 534
          },
          {
            "text": "                key: i18n_service.get_text(key) ",
            "lineNumber": 535
          },
          {
            "text": "                for key in [",
            "lineNumber": 536
          },
          {
            "text": "                    # Common table headers",
            "lineNumber": 537
          },
          {
            "text": "                    \"points\", \"score\", \"average\", \"position\", \"team\", \"name\", \"week\", \"total\",",
            "lineNumber": 538
          },
          {
            "text": "                    \"ranking\", \"opponent\", \"round\", \"pins\", \"avg\", \"games\", \"high_game\",",
            "lineNumber": 539
          },
          {
            "text": "                    \"location\", \"status\", \"date\", \"player\", \"season\", \"league\",",
            "lineNumber": 540
          },
          {
            "text": "                    ",
            "lineNumber": 541
          },
          {
            "text": "                    # Table titles and descriptions",
            "lineNumber": 542
          },
          {
            "text": "                    \"league_standings\", \"league_history\", \"team_week_details\", \"head_to_head\", ",
            "lineNumber": 543
          },
          {
            "text": "                    \"match_day\", \"through_week\", \"week_results\", \"total_until_week\",",
            "lineNumber": 544
          },
          {
            "text": "                    \"match_info\", \"match\", \"total_points\", \"team_performance\", \"season_timetable\",",
            "lineNumber": 545
          },
          {
            "text": "                    \"individual_averages\", \"individual_performance\", \"record_individual_games\", ",
            "lineNumber": 546
          },
          {
            "text": "                    \"record_team_games\", \"team_vs_team_comparison_matrix\",",
            "lineNumber": 547
          },
          {
            "text": "                    ",
            "lineNumber": 548
          },
          {
            "text": "                    # Navigation and UI",
            "lineNumber": 549
          },
          {
            "text": "                    \"select_match_day\", \"loading_data\", \"no_data_found\", \"error_loading_data\", ",
            "lineNumber": 550
          },
          {
            "text": "                    \"missing_parameters\", \"no_data\", \"no_league_data_available\",",
            "lineNumber": 551
          },
          {
            "text": "                    \"no_data_available_for\", \"no_timetable_available\", \"no_individual_data_available\",",
            "lineNumber": 552
          },
          {
            "text": "                    \"no_data_available_for_team_week\",",
            "lineNumber": 553
          },
          {
            "text": "                    ",
            "lineNumber": 554
          },
          {
            "text": "                    # Chart labels",
            "lineNumber": 555
          },
          {
            "text": "                    \"match_day_label\", \"position_label\", \"points_label\", \"average_label\",",
            "lineNumber": 556
          },
          {
            "text": "                    \"position_progression\", \"points_progression\", \"average_progression\",",
            "lineNumber": 557
          },
          {
            "text": "                    \"cumulative_points\",",
            "lineNumber": 558
          },
          {
            "text": "                    ",
            "lineNumber": 559
          },
          {
            "text": "                    # Error messages",
            "lineNumber": 560
          },
          {
            "text": "                    \"season_league_required\"",
            "lineNumber": 561
          }
        ]
      },
      "score": 0.1811310052871704
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\individual-averages-utils.js",
        "range": {
          "startPosition": {
            "line": 50
          },
          "endPosition": {
            "line": 132,
            "column": 3
          }
        },
        "contents": "function renderIndividualAverages(data, options) {\nconst title =  'Individual Performance');\n\n    // If containerId is provided, render full card structure\n    if (containerId) {\n        const container = document.getElementById(containerId);\n        if (!container) {\n            console.error(&#96;Individual averages container not found: ${containerId}&#96;);\n            return;\n        }\n\n        container.innerHTML = &#96;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;${headerLevel}&gt;${title}&lt;/${headerLevel}&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div id=\"${tableId}\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    // Create table using Tabulator\n    if (typeof createTableTabulator === 'function') {\n        createTableTabulator(tableId, data, {\n            disablePositionCircle,\n            enableSpecialRowStyling,\n            tooltips\n        });\n    } else if (typeof createTableBootstrap3 === 'function') {\n        // Fallback to Bootstrap\n        createTableBootstrap3(tableId, data, {\n            disablePositionCircle,\n            enableSpecialRowStyling\n        });\n    } else {\n        console.error('Table creation function not available');\n        const tableContainer = document.getElementById(tableId);\n        if (tableContainer) {\n            const t = typeof window.t === 'function' ? window.t : null;\n            const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);\n            tableContainer.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${getText('error_loading_data', 'Table creation function not available')}&lt;/div&gt;&#96;;\n        }\n    }\n}\n\n/**\n * Loads and renders individual averages with error handling\n * @param {Object} params - Parameters for fetching data\n * @param {string} params.league - League name\n * @param {string} params.season - Season identifier\n * @param {number} [params.week] - Optional week number\n * @param {string} [params.team] - Optional team name\n * @param {Object} renderOptions - Options for rendering (see renderIndividualAverages)\n * @param {string} [errorMessage] - Custom error message to display on failure\n */",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 51,
                "column": 1
              },
              "endPosition": {
                "line": 52,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "function renderIndividualAverages(data, options) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "const title =  'Individual Performance');",
            "lineNumber": 78
          },
          {
            "lineNumber": 79
          },
          {
            "text": "    // If containerId is provided, render full card structure",
            "lineNumber": 80
          },
          {
            "text": "    if (containerId) {",
            "lineNumber": 81
          },
          {
            "text": "        const container = document.getElementById(containerId);",
            "lineNumber": 82
          },
          {
            "text": "        if (!container) {",
            "lineNumber": 83
          },
          {
            "text": "            console.error(&#96;Individual averages container not found: ${containerId}&#96;);",
            "lineNumber": 84
          },
          {
            "text": "            return;",
            "lineNumber": 85
          },
          {
            "text": "        }",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "        container.innerHTML = &#96;",
            "lineNumber": 88
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                    &lt;${headerLevel}&gt;${title}&lt;/${headerLevel}&gt;",
            "lineNumber": 91
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 93
          },
          {
            "text": "                    &lt;div id=\"${tableId}\"&gt;&lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &#96;;",
            "lineNumber": 97
          },
          {
            "text": "    }",
            "lineNumber": 98
          },
          {
            "lineNumber": 99
          },
          {
            "text": "    // Create table using Tabulator",
            "lineNumber": 100
          },
          {
            "text": "    if (typeof createTableTabulator === 'function') {",
            "lineNumber": 101
          },
          {
            "text": "        createTableTabulator(tableId, data, {",
            "lineNumber": 102
          },
          {
            "text": "            disablePositionCircle,",
            "lineNumber": 103
          },
          {
            "text": "            enableSpecialRowStyling,",
            "lineNumber": 104
          },
          {
            "text": "            tooltips",
            "lineNumber": 105
          },
          {
            "text": "        });",
            "lineNumber": 106
          },
          {
            "text": "    } else if (typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 107
          },
          {
            "text": "        // Fallback to Bootstrap",
            "lineNumber": 108
          },
          {
            "text": "        createTableBootstrap3(tableId, data, {",
            "lineNumber": 109
          },
          {
            "text": "            disablePositionCircle,",
            "lineNumber": 110
          },
          {
            "text": "            enableSpecialRowStyling",
            "lineNumber": 111
          },
          {
            "text": "        });",
            "lineNumber": 112
          },
          {
            "text": "    } else {",
            "lineNumber": 113
          },
          {
            "text": "        console.error('Table creation function not available');",
            "lineNumber": 114
          },
          {
            "text": "        const tableContainer = document.getElementById(tableId);",
            "lineNumber": 115
          },
          {
            "text": "        if (tableContainer) {",
            "lineNumber": 116
          },
          {
            "text": "            const t = typeof window.t === 'function' ? window.t : null;",
            "lineNumber": 117
          },
          {
            "text": "            const getText = (key, fallback) =&gt; (t ? t(key, fallback) : fallback);",
            "lineNumber": 118
          },
          {
            "text": "            tableContainer.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${getText('error_loading_data', 'Table creation function not available')}&lt;/div&gt;&#96;;",
            "lineNumber": 119
          },
          {
            "text": "        }",
            "lineNumber": 120
          },
          {
            "text": "    }",
            "lineNumber": 121
          },
          {
            "text": "}",
            "lineNumber": 122,
            "isSignature": true
          },
          {
            "lineNumber": 123
          },
          {
            "text": "/**",
            "lineNumber": 124
          },
          {
            "text": " * Loads and renders individual averages with error handling",
            "lineNumber": 125
          },
          {
            "text": " * @param {Object} params - Parameters for fetching data",
            "lineNumber": 126
          },
          {
            "text": " * @param {string} params.league - League name",
            "lineNumber": 127
          },
          {
            "text": " * @param {string} params.season - Season identifier",
            "lineNumber": 128
          },
          {
            "text": " * @param {number} [params.week] - Optional week number",
            "lineNumber": 129
          },
          {
            "text": " * @param {string} [params.team] - Optional team name",
            "lineNumber": 130
          },
          {
            "text": " * @param {Object} renderOptions - Options for rendering (see renderIndividualAverages)",
            "lineNumber": 131
          },
          {
            "text": " * @param {string} [errorMessage] - Custom error message to display on failure",
            "lineNumber": 132
          },
          {
            "text": " */",
            "lineNumber": 133
          }
        ]
      },
      "score": 0.1794290542602539
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/i18n_service.py</summary>

</details>
</tool-use>

---



---


The `t()` function only takes one argument and returns the key if the translation is missing. The code passes a second fallback argument, which is ignored. Checking how translations are loaded and updating the code:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/base.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "t\\(.*,.*\\)",
  "path": "app/static/js/content-blocks",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "t\\(.*,.*\\)",
    "path": "app/static/js/content-blocks",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\season-league-standings-block.js",
              "matches": [
                {
                  "lineNumber": 12,
                  "content": "            title: typeof t === 'function' ? t('league_standings', 'Season League Standings') : 'Season League Standings'"
                },
                {
                  "lineNumber": 53,
                  "content": "                    &lt;h5&gt;${typeof t === 'function' ? t('league_standings_all_leagues', 'Current Standings in all Leagues') : 'Current Standings in all Leagues'} – ${typeof t === 'function' ? t('season', 'Season') : 'Season'} ${state.season}&lt;/h5&gt;"
                },
                {
                  "lineNumber": 59,
                  "content": "                                &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading...') : 'Loading...'}&lt;/span&gt;"
                },
                {
                  "lineNumber": 61,
                  "content": "                            &lt;p class=\"text-muted mt-2\"&gt;${typeof t === 'function' ? t('loading_data', 'Loading data...') : 'Loading data...'}&lt;/p&gt;"
                },
                {
                  "lineNumber": 98,
                  "content": "                    &lt;h6&gt;${typeof t === 'function' ? t('no_league_data_available', 'No league data available') : 'No league data available'}&lt;/h6&gt;"
                },
                {
                  "lineNumber": 99,
                  "content": "                    &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available_for', 'No data available for') : 'No data available for'} ${season}.&lt;/p&gt;"
                },
                {
                  "lineNumber": 116,
                  "content": "                        &lt;h6 class=\"mb-0\"&gt;${league} - ${typeof t === 'function' ? (t('match_day_label', 'Match Day')) : 'Match Day'} ${week}&lt;/h6&gt;"
                },
                {
                  "lineNumber": 130,
                  "content": "                                    &lt;h6&gt;${typeof t === 'function' ? t('league_standings', 'League Standings') : 'League Standings'}&lt;/h6&gt;"
                },
                {
                  "lineNumber": 136,
                  "content": "                                            &lt;h6&gt;${typeof t === 'function' ? t('honor_scores', 'Honor Scores') : 'Honor Scores'}&lt;/h6&gt;"
                }
              ]
            }
          ],
          "totalLines": 9,
          "totalMatchedLines": 9
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_translations|/league/get_translations",
  "path": "app/routes/league_routes.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "get_translations|/league/get_translations",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "525:@bp.route('/league/get_translations')",
              "matches": [
                {
                  "lineNumber": 526,
                  "content": "def get_translations():"
                },
                {
                  "lineNumber": 533,
                  "content": "            \"translations_version\": i18n_service.get_translations_version(),"
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking how translations are sent to the frontend:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_text|get_translations",
  "path": "app/services/i18n_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "get_text|get_translations",
    "path": "app/services/i18n_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "283:    def get_text(self, key: str) -&gt; str:",
              "matches": [
                {
                  "lineNumber": 288,
                  "content": "    def get_translations_version(self) -&gt; str:"
                },
                {
                  "lineNumber": 329,
                  "content": "            Language.ENGLISH.value: self.get_text(\"english\"),"
                },
                {
                  "lineNumber": 330,
                  "content": "            Language.GERMAN.value: self.get_text(\"german\")"
                }
              ]
            }
          ],
          "totalLines": 3,
          "totalMatchedLines": 3
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/i18n_service.py</summary>

</details>
</tool-use>

---



---


Checking if `league_standings_all_leagues` is included in the translations sent to the frontend:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "league_standings_all_leagues",
  "path": "app/routes/league_routes.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "league_standings_all_leagues",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


The key `league_standings_all_leagues` exists in the i18n service but isn't included in the translations sent to the frontend. Adding it to the list:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\routes/league_routes.py"
}
```
Additional data:

```json
{
  "codeblockId": "962804bd-286e-4977-ad2f-dca4ce9152d7"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/routes/league_routes.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/routes/league_routes.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


The key `league_standings_all_leagues` exists in the i18n service but wasn't included in the translations sent to the frontend. Added it to the list in the `/league/get_translations` route.

**The Fix:**
- Added `"league_standings_all_leagues"` to the list of translation keys sent to the frontend in `league_routes.py`

**Note:** The `t()` function only takes one argument (the key). The second argument (fallback) is ignored. Since the key is now included in the translations, it should resolve correctly.

After refreshing the page, the translation should work. The frontend will receive the translation for `league_standings_all_leagues` and display "Current Standings in all Leagues" (or the German equivalent if the language is set to German).

---

_**User (2025-12-07 21:24Z)**_

it still is not revsolved: 

league_standings_all_leagues – Saison 25/26

is written as teh card header

---

_**Agent (model default, mode Agent)**_



---


Checking if the translation is being sent and if there's a timing issue. Verifying the route and how translations are loaded:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are translations loaded and when is the t function available in the frontend?",
  "includePattern": "app/templates",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "window\\.translations\\[|translations\\[",
  "path": "app/templates/base.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "window\\.translations\\[|translations\\[",
    "path": "app/templates/base.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "277:                if (translations[key]) {",
              "matches": [
                {
                  "lineNumber": 278,
                  "content": "                    element.textContent = translations[key];"
                },
                {
                  "lineNumber": 303,
                  "content": "            const matchDayLabel = translations['match_day_label'] || 'Match Day';"
                },
                {
                  "lineNumber": 304,
                  "content": "            const matchDayFormat = translations['match_day_format'] || 'Match Day #{week}';"
                },
                {
                  "lineNumber": 363,
                  "content": "            return window.translations[key] || key;"
                }
              ]
            }
          ],
          "totalLines": 4,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking if translations load asynchronously and if the content needs to be updated after they load:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/base.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "updateTranslations|updatePageContent",
  "path": "app/templates/base.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "updateTranslations|updatePageContent",
    "path": "app/templates/base.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "262:                    updatePageContent();",
              "matches": [
                {
                  "lineNumber": 272,
                  "content": "        function updatePageContent() {"
                },
                {
                  "lineNumber": 294,
                  "content": "                    if (block.updateTranslations &amp;&amp; typeof block.updateTranslations === 'function') {"
                },
                {
                  "lineNumber": 295,
                  "content": "                        block.updateTranslations();"
                },
                {
                  "lineNumber": 399,
                  "content": "                    updatePageContent();"
                }
              ]
            }
          ],
          "totalLines": 4,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


The issue: `generateHTML` runs before translations load, so the header is generated with the key. Checking how other blocks handle this and adding an `updateTranslations` method to update the header after translations load:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/base-content-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "updateTranslations|data-i18n",
  "path": "app/static/js/content-blocks",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "updateTranslations|data-i18n",
    "path": "app/static/js/content-blocks",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\game-overview-block.js",
              "matches": [
                {
                  "lineNumber": 84,
                  "content": "                    &lt;h5 data-i18n=\"game_overview\"&gt;Game Overview&lt;/h5&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-details-block.js",
              "matches": [
                {
                  "lineNumber": 84,
                  "content": "                                &lt;h5 data-i18n=\"score_sheet_selected_team\"&gt;Score Sheet for Selected Team&lt;/h5&gt;"
                },
                {
                  "lineNumber": 151,
                  "content": "                                &lt;div class=\"alert alert-info\" data-i18n=\"please_select_team\"&gt;${message}&lt;/div&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 71,
                  "content": "                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;"
                },
                {
                  "lineNumber": 90,
                  "content": "                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;"
                }
              ]
            }
          ],
          "totalLines": 5,
          "totalMatchedLines": 5
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---



---


Other blocks use `data-i18n` attributes that auto-update. Since this header includes dynamic content (season), overriding `updateTranslations` to update it after translations load:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "54fee60c-0e8b-4d2b-8339-c47db8691857"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "af24d223-3e9e-48aa-96e6-629da7a54bb5"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Verifying the translation key is included in the route and checking for any issues:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "from app.services.i18n_service import I18nService; service = I18nService(); print('Key exists:', 'league_standings_all_leagues' in service._catalog); print('Translation:', service.get_text('league_standings_all_leagues'))"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "from app.services.i18n_service import I18nService; service = I18nService(); print('Key exists:', 'league_standings_all_leagues' in service._catalog); print('Translation:', service.get_text('league_standings_all_leagues'))"
```
</details>
</tool-use>

---



---


Added an `updateTranslations` method that updates the header after translations load. The header is generated before translations are available, so `t()` returns the key.

The fix:
1. Store the current state in `render()` so we can rebuild the header later
2. Override `updateTranslations()` to update the header text when translations are available
3. Call `updateTranslations()` after rendering to update immediately if translations are already loaded

The header should now show the translated text instead of the key. If it still shows the key after a refresh, the translations may not be loading. Check the browser console for errors when fetching translations.

You can also verify by opening the browser console and running:
```javascript
console.log(window.translations['league_standings_all_leagues']);
```

This should show the translation value if it's loaded.

---

_**User (2025-12-07 21:24Z)**_

still does not render properly

base-content-block.js?v=3b668c1f:8 🔄 BaseContentBlock class definition loaded

stats?season=25%2F26&database=db_real:4627 🚀 Initializing application...

stats?season=25%2F26&database=db_real:4639 ✅ Application initialized

league-stats-app.js?v=96659650:367 📄 DOM loaded, initializing LeagueStatsApp...

league-stats-app.js?v=96659650:27 🚀 Initializing LeagueStatsApp...

league-stats-app.js?v=96659650:74 🧱 Initializing content blocks...

league-stats-app.js?v=96659650:78 🔄 Creating SeasonLeagueStandingsBlock...

league-stats-app.js?v=96659650:80 🔄 Creating LeagueAggregationBlock...

league-stats-app.js?v=96659650:82 🔄 Creating LeagueSeasonOverviewBlock...

league-stats-app.js?v=96659650:84 🔄 Creating SeasonOverviewBlock...

league-stats-app.js?v=96659650:86 🔄 Creating MatchDayBlock...

league-stats-app.js?v=96659650:88 🔄 Creating TeamDetailsBlock...

league-stats-app.js?v=96659650:90 🔄 Creating TeamPerformanceBlock...

league-stats-app.js?v=96659650:92 🔄 Creating TeamWinPercentageBlock...

league-stats-app.js?v=96659650:94 🔄 Creating GameOverviewBlock...

league-stats-app.js?v=96659650:96 🔄 Creating GameTeamDetailsBlock...

league-stats-app.js?v=96659650:111 ✅ Content blocks initialized

centralized-button-manager.js?v=fe0f2832:96 🚀 CentralizedButtonManager: Handling initial state: {team: '', season: '25/26', week: '', round: '', league: '', …}

centralized-button-manager.js?v=fe0f2832:175 📋 CentralizedButtonManager: Processing groups: (5) ['season', 'league', 'week', 'round', 'team']

centralized-button-manager.js?v=fe0f2832:176 📋 CentralizedButtonManager: Current constraints: {}

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group season

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for season: /league/get_available_seasons?database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for season: {}

stats?season=25%2F26&database=db_real:375 Sources info response: {available_sources: Array(3), current_display_name: 'Real Data', current_source: 'db_real', sources_info: {…}, success: true}

stats?season=25%2F26&database=db_real:380 Loaded sources info: {db_real: {…}, db_real_recon: {…}, db_sim: {…}}

stats?season=25%2F26&database=db_real:381 Current source: db_real

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for season: (2) ['24/25', '25/26']

centralized-button-manager.js?v=fe0f2832:261 ✅ CentralizedButtonManager: Keeping current selection for season: 25/26

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for season with 2 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating season - current selection: "25/26", candidates: (2) ['24/25', '25/26']

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated season with 2 candidates, selected: 25/26

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 2 buttons for season

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group league

centralized-button-manager.js?v=fe0f2832:319 🔗 CentralizedButtonManager: Adding constraint season=25/26 for league

centralized-button-manager.js?v=fe0f2832:329 🌐 CentralizedButtonManager: Fetching candidates for league: /league/get_available_leagues?season=25%2F26&database=db_real

centralized-button-manager.js?v=fe0f2832:330 🌐 CentralizedButtonManager: Current constraints for league: {season: '25/26'}

centralized-button-manager.js?v=fe0f2832:339 📊 CentralizedButtonManager: Received candidates for league: (3) [{…}, {…}, {…}]

centralized-button-manager.js?v=fe0f2832:281 🔄 CentralizedButtonManager: Invalid selection for league, clearing selection

centralized-button-manager.js?v=fe0f2832:293 🎨 CentralizedButtonManager: Populating buttons for league with 3 candidates

centralized-button-manager.js?v=fe0f2832:362 🎨 CentralizedButtonManager: Populating league - current selection: "", candidates: (3) [{…}, {…}, {…}]

centralized-button-manager.js?v=fe0f2832:387 🎯 CentralizedButtonManager: Skipping league auto-selection - allowing season-only view

centralized-button-manager.js?v=fe0f2832:435 ✅ CentralizedButtonManager: Populated league with 3 candidates, selected: 

centralized-button-manager.js?v=fe0f2832:436 ✅ CentralizedButtonManager: Created 3 buttons for league

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group week

centralized-button-manager.js?v=fe0f2832:230 ⚠️ CentralizedButtonManager: Prerequisites not met for week

centralized-button-manager.js?v=fe0f2832:236 ⚠️ CentralizedButtonManager: Clearing buttons for week

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group round

centralized-button-manager.js?v=fe0f2832:230 ⚠️ CentralizedButtonManager: Prerequisites not met for round

centralized-button-manager.js?v=fe0f2832:236 ⚠️ CentralizedButtonManager: Clearing buttons for round

centralized-button-manager.js?v=fe0f2832:225 🔧 CentralizedButtonManager: Processing group team

centralized-button-manager.js?v=fe0f2832:230 ⚠️ CentralizedButtonManager: Prerequisites not met for team

centralized-button-manager.js?v=fe0f2832:236 ⚠️ CentralizedButtonManager: Clearing buttons for team

centralized-button-manager.js?v=fe0f2832:185 🔄 CentralizedButtonManager: Triggering state change callback with state: {team: '', season: '25/26', week: '', round: '', league: '', …}

centralized-button-manager.js?v=fe0f2832:186 🔄 CentralizedButtonManager: Callback function: function

league-stats-app.js?v=96659650:115 🔄 LeagueStatsApp: Button state changed, rendering content: {team: '', season: '25/26', week: '', round: '', league: '', …}

league-stats-app.js?v=96659650:116 🔄 LeagueStatsApp: State keys: (7) ['team', 'season', 'week', 'round', 'league', 'league_long', 'database']

league-stats-app.js?v=96659650:117 🔄 LeagueStatsApp: Round value:  Type: string

league-stats-app.js?v=96659650:287 🎨 Rendering content for state: {team: '', season: '25/26', week: '', round: '', league: '', …}

league-stats-app.js?v=96659650:288 🎨 Available content blocks: (10) ['season-league-standings', 'league-aggregation', 'league-season-overview', 'season-overview', 'matchday', 'team-details', 'team-performance', 'team-win-percentage', 'game-overview', 'game-team-details']

league-stats-app.js?v=96659650:299 🔄 Rendering block: season-league-standings with state: {season: '25/26', league: '', week: '', round: '', team: ''}

season-league-standings-block.js?v=c61d2e8f:45 SeasonLeagueStandingsBlock shouldRender: season="25/26", league="", result=true

season-league-standings-block.js?v=c61d2e8f:73 Loading season league standings for season: 25/26

stats?season=25%2F26&database=db_real:4771 🔄 getCurrentDatabase called, returning: db_real

stats?season=25%2F26&database=db_real:4788 🔄 fetchWithDatabase called: {originalUrl: '/league/get_season_league_standings?season=25/26', urlWithDatabase: '/league/get_season_league_standings?season=25/26&database=db_real'}

league-stats-app.js?v=96659650:299 🔄 Rendering block: league-aggregation with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-aggregation-block.js?v=78863a39:45 LeagueAggregationBlock shouldRender: league="", season="25/26", result=

league-stats-app.js?v=96659650:299 🔄 Rendering block: league-season-overview with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-season-overview-block.js?v=105f24d2:47 LeagueSeasonOverviewBlock shouldRender: league="", season="25/26", week="", team="", result=

league-stats-app.js?v=96659650:299 🔄 Rendering block: season-overview with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: matchday with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: team-details with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: team-performance with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: team-win-percentage with state: {season: '25/26', league: '', week: '', round: '', team: ''}

league-stats-app.js?v=96659650:299 🔄 Rendering block: game-overview with state: {season: '25/26', league: '', week: '', round: '', team: ''}

game-overview-block.js?v=88db6f13:67 🎮 GameOverviewBlock.shouldRender: {season: '25/26', league: '', week: '', round: '', roundType: 'string', …}

league-stats-app.js?v=96659650:299 🔄 Rendering block: game-team-details with state: {season: '25/26', league: '', week: '', round: '', team: ''}

game-team-details-block.js?v=65c2f60a:66 🎮 GameTeamDetailsBlock.shouldRender: {season: '25/26', league: '', week: '', team: '', round: '', …}

centralized-button-manager.js?v=fe0f2832:189 ✅ CentralizedButtonManager: State change callback executed successfully

league-stats-app.js?v=96659650:307 ✅ Rendered block: league-aggregation

league-stats-app.js?v=96659650:307 ✅ Rendered block: league-season-overview

league-stats-app.js?v=96659650:307 ✅ Rendered block: season-overview

league-stats-app.js?v=96659650:307 ✅ Rendered block: matchday

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-details

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-performance

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-win-percentage

league-stats-app.js?v=96659650:307 ✅ Rendered block: game-overview

league-stats-app.js?v=96659650:307 ✅ Rendered block: game-team-details

league-stats-app.js?v=96659650:281 Content rendering already in progress, skipping

league-stats-app.js?v=96659650:66 ✅ LeagueStatsApp initialized successfully

season-league-standings-block.js?v=c61d2e8f:82 Season league standings data received: {leagues: Array(3), season: '25/26'}

season-league-standings-block.js?v=c61d2e8f:219 Assigned colors to 6 teams for league BZL N2 (starting from palette index 0)

league-standings-card-utils.js?v=287e5e53:99 Creating Tabulator table tableSeasonLeagueStandings_BZL_N2 with 6 rows

stats?season=25%2F26&database=db_real:1873 Table "tableSeasonLeagueStandings_BZL_N2" successfully created/updated (Tabulator)

season-league-standings-block.js?v=c61d2e8f:219 Assigned colors to 6 teams for league BZOL N1 (starting from palette index 0)

league-standings-card-utils.js?v=287e5e53:99 Creating Tabulator table tableSeasonLeagueStandings_BZOL_N1 with 6 rows

stats?season=25%2F26&database=db_real:1873 Table "tableSeasonLeagueStandings_BZOL_N1" successfully created/updated (Tabulator)

season-league-standings-block.js?v=c61d2e8f:219 Assigned colors to 10 teams for league BayL (starting from palette index 0)

league-standings-card-utils.js?v=287e5e53:99 Creating Tabulator table tableSeasonLeagueStandings_BayL with 10 rows

stats?season=25%2F26&database=db_real:1873 Table "tableSeasonLeagueStandings_BayL" successfully created/updated (Tabulator)

season-league-standings-block.js?v=c61d2e8f:33 season-league-standings: Season league standings rendered

league-stats-app.js?v=96659650:307 ✅ Rendered block: season-league-standings

league-stats-app.js?v=96659650:314 ✅ Content rendering complete



---

_**Agent (model default, mode Agent)**_



---


The header is generated before translations load, so `t()` returns the key. Adding an `updateTranslations` method to update the header after translations load, and using a `data-i18n` attribute for the static part:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/base.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "updateContentBlockTranslations",
  "path": "app/templates/base.html",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "updateContentBlockTranslations",
    "path": "app/templates/base.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "283:            updateContentBlockTranslations();",
              "matches": [
                {
                  "lineNumber": 284,
                  "content": "            ",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "content": "            // Update chart labels if charts exist",
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "content": "            updateChartLabels();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 287,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "        ",
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "        function updateContentBlockTranslations() {"
                },
                {
                  "lineNumber": 291,
                  "content": "            // Find all content block instances and update their translations",
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "            if (window.teamStatsApp &amp;&amp; window.teamStatsApp.contentBlocks) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "                window.teamStatsApp.contentBlocks.forEach(block =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 294,
                  "content": "                    if (block.updateTranslations &amp;&amp; typeof block.updateTranslations === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "                        block.updateTranslations();",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 11,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Adding an `updateTranslations` method that updates the header after translations load, and storing the state so we can rebuild it:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "af4e88d9-07b5-42c6-896d-56043ef72921"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "8f3e37d3-7385-45a6-b5ec-f3aed78e4d39"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Verifying the translation key is included in the route response. Checking the route:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "import json; from app.services.i18n_service import I18nService; service = I18nService(); result = service.get_text('league_standings_all_leagues'); print('Translation result:', result); print('Key in catalog:', 'league_standings_all_leagues' in service._catalog)"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "import json; from app.services.i18n_service import I18nService; service = I18nService(); result = service.get_text('league_standings_all_leagues'); print('Translation result:', result); print('Key in catalog:', 'league_standings_all_leagues' in service._catalog)"
```
</details>
</tool-use>

---



---


Added the `updateTranslations` method. It updates the header after translations load. The method:

1. Stores the current state in `render()` so we can rebuild the header later
2. Calls `updateTranslations()` after rendering to update immediately if translations are already loaded
3. Overrides `updateTranslations()` to update the header text when translations become available
4. Only updates if the translation actually resolved (not just returning the key)

The `updateContentBlockTranslations()` function in `base.html` calls `updateTranslations()` on all content blocks after translations load, so the header should update automatically.

If it still shows the key after a refresh, check in the browser console:
```javascript
console.log(window.translations['league_standings_all_leagues']);
```

This will show if the translation is loaded. If it's `undefined`, the translation isn't being sent from the backend. If it shows the translation value, the `updateTranslations` method should pick it up and update the header.

The fix should work now. Refresh the page and the header should show the translated text instead of the key.

---

_**User (2025-12-07 21:24Z)**_

so ally those fancs mechanics you introduced wont fix the issue. in fact, in the very sam composed string another i18n varaible is resolved with no issues at all. roll back the unhelpful changes in and investigate the core difference between the useage of league_standings_all_leagues and season

---

_**Agent (model default, mode Agent)**_



---


Rolling back the changes and investigating why `season` resolves but `league_standings_all_leagues` doesn't:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "\"season\"|\"league_standings_all_leagues\"",
  "path": "app/routes/league_routes.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "\"season\"|\"league_standings_all_leagues\"",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "540:                    \"location\", \"status\", \"date\", \"player\", \"season\", \"league\",",
              "matches": [
                {
                  "lineNumber": 543,
                  "content": "                    \"league_standings\", \"league_standings_all_leagues\", \"league_history\", \"team_week_details\", \"head_to_head\", "
                },
                {
                  "lineNumber": 583,
                  "content": "                    \"week\", \"season\","
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Rolling back the changes and checking the i18n service for differences:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "d1a28337-d74e-497e-9f28-a6b300bcac3b"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---



---


Removing the updateTranslations method and checking for differences:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "6812c06e-71fe-4b17-9990-ecb249e48b5b"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "\"season\"",
  "path": "app/routes/league_routes.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "\"season\"",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "540:                    \"location\", \"status\", \"date\", \"player\", \"season\", \"league\",",
              "matches": [
                {
                  "lineNumber": 583,
                  "content": "                    \"week\", \"season\","
                }
              ]
            }
          ],
          "totalLines": 1,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are translation keys sent to the frontend in the get_translations route?",
  "includePattern": "app/routes",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking how the route sends translations and verifying the key is included:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "keys = ['season', 'league_standings_all_leagues']; from app.services.i18n_service import I18nService; service = I18nService(); print('season:', service.get_text('season')); print('league_standings_all_leagues:', service.get_text('league_standings_all_leagues')); print('season in catalog:', 'season' in service._catalog); print('league_standings_all_leagues in catalog:', 'league_standings_all_leagues' in service._catalog)"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "keys = ['season', 'league_standings_all_leagues']; from app.services.i18n_service import I18nService; service = I18nService(); print('season:', service.get_text('season')); print('league_standings_all_leagues:', service.get_text('league_standings_all_leagues')); print('season in catalog:', 'season' in service._catalog); print('league_standings_all_leagues in catalog:', 'league_standings_all_leagues' in service._catalog)"
```
</details>
</tool-use>

---



---


Checking for a typo or mismatch in the key name. Verifying the exact key spelling:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "league_standings_all_leagues",
  "path": "app",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "league_standings_all_leagues",
    "path": "app",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\season-league-standings-block.js",
              "matches": [
                {
                  "lineNumber": 53,
                  "content": "                    &lt;h5&gt;${typeof t === 'function' ? t('league_standings_all_leagues', 'Current Standings in all Leagues') : 'Current Standings in all Leagues'} – ${typeof t === 'function' ? t('season', 'Season') : 'Season'} ${state.season}&lt;/h5&gt;"
                }
              ]
            },
            {
              "file": "app\\routes\\league_routes.py",
              "matches": [
                {
                  "lineNumber": 543,
                  "content": "                    \"league_standings\", \"league_standings_all_leagues\", \"league_history\", \"team_week_details\", \"head_to_head\", "
                }
              ]
            },
            {
              "file": "app\\services\\i18n_service.py",
              "matches": [
                {
                  "lineNumber": 165,
                  "content": "            \"league_standings_all_leagues\": {\"en\": \"Current Standings in all Leagues\", \"de\": \"Aktuelle Tabellenstände in allen Ligen\"},"
                }
              ]
            }
          ],
          "totalLines": 3,
          "totalMatchedLines": 3
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/i18n_service.py</summary>

</details>
</tool-use>

---



---


The key is spelled correctly. Checking if the route is sending it correctly. Verifying the exact line in the route:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "test_keys = ['season', 'league_standings_all_leagues']; route_keys = ['points', 'score', 'average', 'position', 'team', 'name', 'week', 'total', 'ranking', 'opponent', 'round', 'pins', 'avg', 'games', 'high_game', 'location', 'status', 'date', 'player', 'season', 'league', 'league_standings', 'league_standings_all_leagues']; print('season in route_keys:', 'season' in route_keys); print('league_standings_all_leagues in route_keys:', 'league_standings_all_leagues' in route_keys)"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "test_keys = ['season', 'league_standings_all_leagues']; route_keys = ['points', 'score', 'average', 'position', 'team', 'name', 'week', 'total', 'ranking', 'opponent', 'round', 'pins', 'avg', 'games', 'high_game', 'location', 'status', 'date', 'player', 'season', 'league', 'league_standings', 'league_standings_all_leagues']; print('season in route_keys:', 'season' in route_keys); print('league_standings_all_leagues in route_keys:', 'league_standings_all_leagues' in route_keys)"
```
</details>
</tool-use>

---



---


Checking the i18n service's `get_text` method for differences in handling these keys:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "def get_text",
  "path": "app/services/i18n_service.py",
  "contextAfter": 10,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "def get_text",
    "path": "app/services/i18n_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "283:    def get_text(self, key: str) -&gt; str:",
              "matches": [
                {
                  "lineNumber": 284,
                  "content": "        \"\"\"Get translated text for the given key\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "content": "        with self._lock:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "content": "            return self._translations[self._current_language].get(key, key)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 287,
                  "content": "    ",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "    def get_translations_version(self) -&gt; str:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 289,
                  "content": "        with self._lock:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "            return self._translations_version",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "    # ---- Internal helpers ----",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 10
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/base.html</summary>

</details>
</tool-use>

---



---


The key is in the route list. The server may need a restart for the change to take effect. Verifying the key is correctly added and checking for any other issues:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "league_standings_all_leagues",
  "path": "app/routes/league_routes.py",
  "context": 2,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "league_standings_all_leagues",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "541-                    ",
              "matches": [
                {
                  "lineNumber": 542,
                  "content": "                    # Table titles and descriptions",
                  "isContextLine": true
                },
                {
                  "lineNumber": 543,
                  "content": "                    \"league_standings\", \"league_standings_all_leagues\", \"league_history\", \"team_week_details\", \"head_to_head\", "
                },
                {
                  "lineNumber": 544,
                  "content": "                    \"match_day\", \"through_week\", \"week_results\", \"total_until_week\",",
                  "isContextLine": true
                },
                {
                  "lineNumber": 545,
                  "content": "                    \"match_info\", \"match\", \"total_points\", \"team_performance\", \"season_timetable\",",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 4,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


The key is in the route list. The server likely needs a restart for the change to take effect. Verifying the key is correctly formatted and checking for any syntax issues:


---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "import sys; sys.path.insert(0, '.'); from app.services.i18n_service import I18nService; from app.routes.league_routes import bp; service = I18nService(); print('Testing get_text:'); print('  season:', repr(service.get_text('season'))); print('  league_standings_all_leagues:', repr(service.get_text('league_standings_all_leagues'))); print('Keys in catalog:'); print('  season:', 'season' in service._catalog); print('  league_standings_all_leagues:', 'league_standings_all_leagues' in service._catalog)"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "import sys; sys.path.insert(0, '.'); from app.services.i18n_service import I18nService; from app.routes.league_routes import bp; service = I18nService(); print('Testing get_text:'); print('  season:', repr(service.get_text('season'))); print('  league_standings_all_leagues:', repr(service.get_text('league_standings_all_leagues'))); print('Keys in catalog:'); print('  season:', 'season' in service._catalog); print('  league_standings_all_leagues:', 'league_standings_all_leagues' in service._catalog)"
```
</details>
</tool-use>

---



---


The key is correctly added to the route. The server likely needs a restart for the change to take effect. Verifying the key name matches exactly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/routes/league_routes.py</summary>

</details>
</tool-use>

---



---


The key `league_standings_all_leagues` is:
1. Defined in the i18n service (line 165)
2. Added to the route's translation list (line 543)
3. Used correctly in the frontend (line 53)

The key name matches in all three places. The server likely needs a restart for the route change to take effect. After restarting, the translation should work.

If it still doesn't work after restarting, check the browser console:
```javascript
console.log(window.translations['league_standings_all_leagues']);
```

This shows whether the translation is loaded. If it's `undefined`, the route change didn't take effect or there's a caching issue. If it shows a value, the `t()` function should pick it up.

**Summary:** The key is correctly added. Restart the Flask server for the change to take effect. The translation should then work the same way `season` does.

---

_**User (2025-12-07 21:24Z)**_

so this is apparently a cahcing issue, since switching browsers solved it. i thought we had a mechanic to invalidate caches, te @cache_buster.py why didnt it work here`?

---

_**Agent (model default, mode Agent)**_



---

Checking how the cache buster works and why it didn't invalidate the translation cache:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\utils\cache_buster.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "cache_buster|get_translations|translations_version",
  "path": "app",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "cache_buster|get_translations|translations_version",
    "path": "app",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\routes\\league_routes.py",
              "matches": [
                {
                  "lineNumber": 525,
                  "content": "@bp.route('/league/get_translations')"
                },
                {
                  "lineNumber": 526,
                  "content": "def get_translations():"
                },
                {
                  "lineNumber": 533,
                  "content": "            \"translations_version\": i18n_service.get_translations_version(),"
                }
              ]
            },
            {
              "file": "app\\services\\i18n_service.py",
              "matches": [
                {
                  "lineNumber": 13,
                  "content": "        self._translations_version = \"2025-10-30-3\""
                },
                {
                  "lineNumber": 288,
                  "content": "    def get_translations_version(self) -&gt; str:"
                },
                {
                  "lineNumber": 290,
                  "content": "            return self._translations_version"
                }
              ]
            },
            {
              "file": "app\\__init__.py",
              "matches": [
                {
                  "lineNumber": 53,
                  "content": "    def inject_cache_buster():"
                },
                {
                  "lineNumber": 55,
                  "content": "        from app.utils.cache_buster import get_static_url"
                }
              ]
            },
            {
              "file": "app\\templates\\base.html",
              "matches": [
                {
                  "lineNumber": 223,
                  "content": "                const response = await fetch('/league/get_translations');"
                },
                {
                  "lineNumber": 233,
                  "content": "                    const version = data.translations_version || 'v1';"
                }
              ]
            }
          ],
          "totalLines": 10,
          "totalMatchedLines": 10
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---



---

Checking how the frontend uses `translations_version` for cache invalidation:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\templates/base.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---



---

The cache buster only handles static files (JS/CSS) via file modification time. Translations are cached in `sessionStorage` using `translations_version`, which is hardcoded and doesn't change when new keys are added. Checking the version and proposing a fix:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is translations_version used to invalidate the sessionStorage cache for translations?",
  "includePattern": "app/templates",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---

The issue: `cache_buster.py` only handles static files (JS/CSS) via file modification time. Translations are cached in `sessionStorage` using `translations_version`, which is hardcoded and doesn't change when new keys are added.

The frontend uses the cache key `i18n:${currentLanguage}:${version}`. Since the version didn't change, it used the old cached translations that don't include the new key.

Making `translations_version` dynamic based on the translation catalog so it updates when translations change:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\services/i18n_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "553ed28b-961b-4563-96fa-e811cb4a16cc"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "_build_translations_from_catalog|_translations =",
  "path": "app/services/i18n_service.py",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "_build_translations_from_catalog|_translations =",
    "path": "app/services/i18n_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "281:        self._translations = self._build_translations_from_catalog(self._catalog)",
              "matches": [
                {
                  "lineNumber": 282,
                  "content": "    ",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "    def get_text(self, key: str) -&gt; str:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 284,
                  "content": "        \"\"\"Get translated text for the given key\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "content": "        with self._lock:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "content": "            return self._translations[self._current_language].get(key, key)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:"
                },
                {
                  "lineNumber": 294,
                  "content": "        \"\"\"Create fast lookup maps for each language from the unified catalog.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "        en_map: Dict[str, str] = {}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 296,
                  "content": "        de_map: Dict[str, str] = {}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 297,
                  "content": "        for key, vals in catalog.items():",
                  "isContextLine": true
                },
                {
                  "lineNumber": 298,
                  "content": "            en_val = vals.get('en')",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 11,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Making `translations_version` dynamic based on the catalog content so it changes when translations are added or modified:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

Incorrect tool arguments

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\services/i18n_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "self\\._translations =|_build_translations_from_catalog",
  "path": "app/services/i18n_service.py",
  "contextBefore": 2,
  "contextAfter": 2,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "self\\._translations =|_build_translations_from_catalog",
    "path": "app/services/i18n_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "279-",
              "matches": [
                {
                  "lineNumber": 280,
                  "content": "        # Derive runtime per-language maps from catalog",
                  "isContextLine": true
                },
                {
                  "lineNumber": 281,
                  "content": "        self._translations = self._build_translations_from_catalog(self._catalog)"
                },
                {
                  "lineNumber": 282,
                  "content": "    ",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "    def get_text(self, key: str) -&gt; str:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "    # ---- Internal helpers ----",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:"
                },
                {
                  "lineNumber": 294,
                  "content": "        \"\"\"Create fast lookup maps for each language from the unified catalog.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "        en_map: Dict[str, str] = {}",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 9,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Making `translations_version` dynamic based on the catalog content so it changes when translations are added or modified:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\services/i18n_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "3972856f-6e56-45d5-b9e7-bb128ffaa7f5"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/i18n_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/i18n_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---

Updated the `translations_version` to be dynamically generated from the catalog keys. Here's what changed:

**The Problem:**
- `cache_buster.py` only handles static files (JS/CSS) via file modification time
- Translations are cached in `sessionStorage` using `translations_version`
- The version was hardcoded (`"2025-10-30-3"`), so adding new keys didn't change it
- The browser kept using the old cached translations

**The Solution:**
- `translations_version` is now computed from a hash of the sorted catalog keys
- When you add a new key (like `league_standings_all_leagues`), the hash changes
- The frontend sees a new version and uses a new cache key
- It fetches fresh translations instead of using the old cached ones

Now when you add new translation keys to the catalog, the version automatically changes, invalidating the browser cache and ensuring users get the updated translations without needing to clear their sessionStorage manually.

The cache buster for static files still works as before, and translations now have their own dynamic versioning system.

---

_**User (2025-12-07 21:24Z)**_

did you make sure to make @season-league-standings-block.js actually use the refactored functionality from league-standings-card-utils?

---

_**Agent (model default, mode Agent)**_



---

Checking if `season-league-standings-block.js` uses the refactored utilities from `league-standings-card-utils.js`:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/utils/league-standings-card-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "generateLeagueStandingsCardHTML|renderLeagueStandingsTable|populateHonorScores",
  "path": "app/static/js/content-blocks/season-league-standings-block.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "generateLeagueStandingsCardHTML|renderLeagueStandingsTable|populateHonorScores",
    "path": "app/static/js/content-blocks/season-league-standings-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "119:                        ${typeof window.generateLeagueStandingsCardHTML === 'function' ",
              "matches": [
                {
                  "lineNumber": 120,
                  "content": "                            ? window.generateLeagueStandingsCardHTML({"
                },
                {
                  "lineNumber": 224,
                  "content": "            if (typeof window.renderLeagueStandingsTable === 'function') {"
                },
                {
                  "lineNumber": 225,
                  "content": "                window.renderLeagueStandingsTable(tableId, standings);"
                },
                {
                  "lineNumber": 253,
                  "content": "            if (typeof window.populateHonorScores === 'function') {"
                },
                {
                  "lineNumber": 254,
                  "content": "                window.populateHonorScores(honor_scores, leagueId);"
                },
                {
                  "lineNumber": 257,
                  "content": "                this.populateHonorScores(honor_scores, null, league);"
                },
                {
                  "lineNumber": 262,
                  "content": "    populateHonorScores(honorScoresData, containerId, league) {"
                }
              ]
            }
          ],
          "totalLines": 7,
          "totalMatchedLines": 7
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking if the refactored utilities are used and if there's any redundant code:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/season-league-standings-block.js</summary>

</details>
</tool-use>

---



---

The block uses the refactored utilities, but a redundant `populateHonorScores` method remains. Removing it:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/season-league-standings-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "542e33ea-83ed-4f84-b33f-e89a87724ea1"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/season-league-standings-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/season-league-standings-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---

Removed the redundant `populateHonorScores` method. The block now uses the refactored utilities from `league-standings-card-utils.js`:

1. **`generateLeagueStandingsCardHTML`** — Used to generate the card HTML (lines 119-126)
2. **`renderLeagueStandingsTable`** — Used to render the standings table (lines 224-225)
3. **`populateHonorScores`** — Used to populate honor scores (lines 253-254)

The redundant `populateHonorScores` method (previously ~90 lines) has been removed. The block now relies on the shared utilities, matching the refactoring pattern used in `matchday-block.js`.

---

_**User (2025-12-09 14:40Z)**_

lets start working on the lst view:

- transfer the two tables to using tabular instead of bootstrap

- add a col with colored circle containing the first letter of the name given in the player col. use the same color here as well as in the graphs. you might need to implement a new color choser function based on the name reather than the team nam

- the two line graphs need an overhaul. as a first step add for each line graph a bubblegraph as we see it in the ls view for points per week in the respective card. 



---

_**Agent (model default, mode Agent)**_



---


Searching for the lst view files to understand the current implementation:


---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What is the lst view and where is it implemented?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\league-content-renderer.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 236,
            "column": 1
          }
        },
        "contents": "/**\n * League Content Renderer\n * \n * Orchestrates league content rendering based on filter state\n * Uses different filter hierarchy than team stats: Season → League → Week → Team\n */\n\nclass LeagueContentRenderer {\n    constructor(urlStateManager, eventBus = null) {\n        this.urlStateManager = urlStateManager;\n        this.eventBus = eventBus || window.EventBus;\n        this.lastRenderedState = {};\n        this.isRendering = false;\n        \n        // Content blocks registry (will be populated in Phase 3)\n        this.contentBlocks = {};\n        \n        // Initialize content blocks (placeholder for now)\n        this.initializeContentBlocks();\n        \n        // League content modes based on filter combinations\n        this.contentModes = {\n            'no-selection': {\n                title: 'League Statistics',\n                description: 'Select season and league to view statistics',\n                blocks: []\n            },\n            'season-only': {\n                title: 'Season Overview',\n                description: 'Historical data across all leagues',\n                blocks: ['season-overview', 'honor-scores']\n            },\n            'season-league': {\n                title: 'League Analysis',\n                description: 'Comprehensive league performance analysis',\n                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']\n            },\n            'season-league-week': {\n                title: 'Week Analysis', \n                description: 'Current week standings and performance',\n                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']\n            },\n            'season-league-week-team': {\n                title: 'Team Analysis',\n                description: 'Detailed team performance analysis',\n                blocks: ['team-details', 'week-standings', 'points-vs-average']\n            }\n        };\n    }\n    \n    /**\n     * Initialize content blocks (placeholder for Phase 3)\n     */\n    initializeContentBlocks() {\n        console.log('League content blocks will be initialized in Phase 3...');\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * League Content Renderer",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Orchestrates league content rendering based on filter state",
            "lineNumber": 4
          },
          {
            "text": " * Uses different filter hierarchy than team stats: Season → League → Week → Team",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class LeagueContentRenderer {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor(urlStateManager, eventBus = null) {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = urlStateManager;",
            "lineNumber": 10
          },
          {
            "text": "        this.eventBus = eventBus || window.EventBus;",
            "lineNumber": 11
          },
          {
            "text": "        this.lastRenderedState = {};",
            "lineNumber": 12
          },
          {
            "text": "        this.isRendering = false;",
            "lineNumber": 13
          },
          {
            "text": "        ",
            "lineNumber": 14
          },
          {
            "text": "        // Content blocks registry (will be populated in Phase 3)",
            "lineNumber": 15
          },
          {
            "text": "        this.contentBlocks = {};",
            "lineNumber": 16
          },
          {
            "text": "        ",
            "lineNumber": 17
          },
          {
            "text": "        // Initialize content blocks (placeholder for now)",
            "lineNumber": 18
          },
          {
            "text": "        this.initializeContentBlocks();",
            "lineNumber": 19
          },
          {
            "text": "        ",
            "lineNumber": 20
          },
          {
            "text": "        // League content modes based on filter combinations",
            "lineNumber": 21
          },
          {
            "text": "        this.contentModes = {",
            "lineNumber": 22
          },
          {
            "text": "            'no-selection': {",
            "lineNumber": 23
          },
          {
            "text": "                title: 'League Statistics',",
            "lineNumber": 24
          },
          {
            "text": "                description: 'Select season and league to view statistics',",
            "lineNumber": 25
          },
          {
            "text": "                blocks: []",
            "lineNumber": 26
          },
          {
            "text": "            },",
            "lineNumber": 27
          },
          {
            "text": "            'season-only': {",
            "lineNumber": 28
          },
          {
            "text": "                title: 'Season Overview',",
            "lineNumber": 29
          },
          {
            "text": "                description: 'Historical data across all leagues',",
            "lineNumber": 30
          },
          {
            "text": "                blocks: ['season-overview', 'honor-scores']",
            "lineNumber": 31
          },
          {
            "text": "            },",
            "lineNumber": 32
          },
          {
            "text": "            'season-league': {",
            "lineNumber": 33
          },
          {
            "text": "                title: 'League Analysis',",
            "lineNumber": 34
          },
          {
            "text": "                description: 'Comprehensive league performance analysis',",
            "lineNumber": 35
          },
          {
            "text": "                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']",
            "lineNumber": 36
          },
          {
            "text": "            },",
            "lineNumber": 37
          },
          {
            "text": "            'season-league-week': {",
            "lineNumber": 38
          },
          {
            "text": "                title: 'Week Analysis', ",
            "lineNumber": 39
          },
          {
            "text": "                description: 'Current week standings and performance',",
            "lineNumber": 40
          },
          {
            "text": "                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']",
            "lineNumber": 41
          },
          {
            "text": "            },",
            "lineNumber": 42
          },
          {
            "text": "            'season-league-week-team': {",
            "lineNumber": 43
          },
          {
            "text": "                title: 'Team Analysis',",
            "lineNumber": 44
          },
          {
            "text": "                description: 'Detailed team performance analysis',",
            "lineNumber": 45
          },
          {
            "text": "                blocks: ['team-details', 'week-standings', 'points-vs-average']",
            "lineNumber": 46
          },
          {
            "text": "            }",
            "lineNumber": 47
          },
          {
            "text": "        };",
            "lineNumber": 48
          },
          {
            "text": "    }",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    /**",
            "lineNumber": 51
          },
          {
            "text": "     * Initialize content blocks (placeholder for Phase 3)",
            "lineNumber": 52
          },
          {
            "text": "     */",
            "lineNumber": 53
          },
          {
            "text": "    initializeContentBlocks() {",
            "lineNumber": 54,
            "isSignature": true
          },
          {
            "text": "        console.log('League content blocks will be initialized in Phase 3...');",
            "lineNumber": 55
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          }
        ]
      },
      "score": 0.19121313095092773
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\index.html",
        "range": {
          "startPosition": {
            "line": 137
          },
          "endPosition": {
            "line": 179,
            "column": 15
          }
        },
        "contents": "        {\n            label: 'Liga Historie (simuliert): LL 1 Nord',\n            params: {\n                league: 'LL 1 Nord',\n                database: 'db_sim'\n            }\n        }\n    ];\n    \n    // Generate the example links\n    examplesList.innerHTML = examples.map(example =&gt; {\n        // Build query string from parameters\n        const params = new URLSearchParams();\n        Object.entries(example.params).forEach(([key, value]) =&gt; {\n            if (value) {\n                params.set(key, value);\n            }\n        });\n        \n        const queryString = params.toString();\n        \n        // Determine the appropriate URL based on the example type\n        let url;\n        if (example.label.includes('Spieler Statistiken')) {\n            url = &#96;{{ url_for('player.stats') }}?${queryString}&#96;;\n        } else if (example.label.includes('Team')) {\n            url = &#96;{{ url_for('team.stats') }}?${queryString}&#96;;\n        } else {\n            url = &#96;{{ url_for('league.stats') }}?${queryString}&#96;;\n        }\n        \n        return &#96;\n            &lt;li class=\"list-group-item\"&gt;\n                &lt;a href=\"${url}\" \n                   class=\"text-decoration-none\"&gt;\n                    ${example.label}\n                &lt;/a&gt;\n            &lt;/li&gt;\n        &#96;;\n    }).join('');\n});\n&lt;/script&gt;\n{% endblock %} ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        {",
            "lineNumber": 138
          },
          {
            "text": "            label: 'Liga Historie (simuliert): LL 1 Nord',",
            "lineNumber": 139
          },
          {
            "text": "            params: {",
            "lineNumber": 140
          },
          {
            "text": "                league: 'LL 1 Nord',",
            "lineNumber": 141
          },
          {
            "text": "                database: 'db_sim'",
            "lineNumber": 142
          },
          {
            "text": "            }",
            "lineNumber": 143
          },
          {
            "text": "        }",
            "lineNumber": 144
          },
          {
            "text": "    ];",
            "lineNumber": 145
          },
          {
            "text": "    ",
            "lineNumber": 146
          },
          {
            "text": "    // Generate the example links",
            "lineNumber": 147
          },
          {
            "text": "    examplesList.innerHTML = examples.map(example =&gt; {",
            "lineNumber": 148
          },
          {
            "text": "        // Build query string from parameters",
            "lineNumber": 149
          },
          {
            "text": "        const params = new URLSearchParams();",
            "lineNumber": 150
          },
          {
            "text": "        Object.entries(example.params).forEach(([key, value]) =&gt; {",
            "lineNumber": 151
          },
          {
            "text": "            if (value) {",
            "lineNumber": 152
          },
          {
            "text": "                params.set(key, value);",
            "lineNumber": 153
          },
          {
            "text": "            }",
            "lineNumber": 154
          },
          {
            "text": "        });",
            "lineNumber": 155
          },
          {
            "text": "        ",
            "lineNumber": 156
          },
          {
            "text": "        const queryString = params.toString();",
            "lineNumber": 157
          },
          {
            "text": "        ",
            "lineNumber": 158
          },
          {
            "text": "        // Determine the appropriate URL based on the example type",
            "lineNumber": 159
          },
          {
            "text": "        let url;",
            "lineNumber": 160
          },
          {
            "text": "        if (example.label.includes('Spieler Statistiken')) {",
            "lineNumber": 161
          },
          {
            "text": "            url = &#96;{{ url_for('player.stats') }}?${queryString}&#96;;",
            "lineNumber": 162
          },
          {
            "text": "        } else if (example.label.includes('Team')) {",
            "lineNumber": 163
          },
          {
            "text": "            url = &#96;{{ url_for('team.stats') }}?${queryString}&#96;;",
            "lineNumber": 164
          },
          {
            "text": "        } else {",
            "lineNumber": 165
          },
          {
            "text": "            url = &#96;{{ url_for('league.stats') }}?${queryString}&#96;;",
            "lineNumber": 166
          },
          {
            "text": "        }",
            "lineNumber": 167
          },
          {
            "text": "        ",
            "lineNumber": 168
          },
          {
            "text": "        return &#96;",
            "lineNumber": 169
          },
          {
            "text": "            &lt;li class=\"list-group-item\"&gt;",
            "lineNumber": 170
          },
          {
            "text": "                &lt;a href=\"${url}\" ",
            "lineNumber": 171
          },
          {
            "text": "                   class=\"text-decoration-none\"&gt;",
            "lineNumber": 172
          },
          {
            "text": "                    ${example.label}",
            "lineNumber": 173
          },
          {
            "text": "                &lt;/a&gt;",
            "lineNumber": 174
          },
          {
            "text": "            &lt;/li&gt;",
            "lineNumber": 175
          },
          {
            "text": "        &#96;;",
            "lineNumber": 176
          },
          {
            "text": "    }).join('');",
            "lineNumber": 177
          },
          {
            "text": "});",
            "lineNumber": 178
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 179
          },
          {
            "text": "{% endblock %} ",
            "lineNumber": 180
          }
        ]
      },
      "score": 0.1892929971218109
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\content-renderer.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 328,
            "column": 1
          }
        },
        "contents": "/**\n * Content Renderer - Phase 3 Version\n * \n * Updated to use content blocks instead of legacy functions\n * Gradual migration: starts with team history and league comparison blocks\n */\n\nclass ContentRenderer {\n    constructor(urlStateManager, eventBus = null) {\n        this.urlStateManager = urlStateManager;\n        this.eventBus = eventBus || window.EventBus;\n        this.lastRenderedState = {};\n        this.isRendering = false;\n        \n        // Content blocks registry\n        this.contentBlocks = {};\n        \n        // Initialize content blocks\n        this.initializeContentBlocks();\n        \n        // Content modes based on filter combinations\n        this.contentModes = {\n            'no-selection': {\n                title: 'Team Overview',\n                description: 'Select a team to view detailed statistics',\n                blocks: []\n            },\n            'team-only': {\n                title: 'Team Complete History',\n                description: 'All seasons overview',\n                blocks: ['team-history', 'league-comparison', 'clutch-analysis', 'consistency-metrics', 'special-matches']\n            },\n            'team-season': {\n                title: 'Team Season Analysis',\n                description: 'Detailed season performance',\n                blocks: ['team-history', 'league-comparison', 'clutch-analysis', 'consistency-metrics', 'special-matches']\n            },\n            'team-season-week': {\n                title: 'Team Week Performance',\n                description: 'Week-specific analysis',\n                blocks: ['team-history', 'league-comparison', 'clutch-analysis', 'consistency-metrics', 'special-matches']\n            }\n        };\n    }\n    \n    /**\n     * Initialize content blocks\n     */\n    initializeContentBlocks() {\n        console.log('Initializing Phase 3 content blocks...');\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * Content Renderer - Phase 3 Version",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Updated to use content blocks instead of legacy functions",
            "lineNumber": 4
          },
          {
            "text": " * Gradual migration: starts with team history and league comparison blocks",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class ContentRenderer {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor(urlStateManager, eventBus = null) {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = urlStateManager;",
            "lineNumber": 10
          },
          {
            "text": "        this.eventBus = eventBus || window.EventBus;",
            "lineNumber": 11
          },
          {
            "text": "        this.lastRenderedState = {};",
            "lineNumber": 12
          },
          {
            "text": "        this.isRendering = false;",
            "lineNumber": 13
          },
          {
            "text": "        ",
            "lineNumber": 14
          },
          {
            "text": "        // Content blocks registry",
            "lineNumber": 15
          },
          {
            "text": "        this.contentBlocks = {};",
            "lineNumber": 16
          },
          {
            "text": "        ",
            "lineNumber": 17
          },
          {
            "text": "        // Initialize content blocks",
            "lineNumber": 18
          },
          {
            "text": "        this.initializeContentBlocks();",
            "lineNumber": 19
          },
          {
            "text": "        ",
            "lineNumber": 20
          },
          {
            "text": "        // Content modes based on filter combinations",
            "lineNumber": 21
          },
          {
            "text": "        this.contentModes = {",
            "lineNumber": 22
          },
          {
            "text": "            'no-selection': {",
            "lineNumber": 23
          },
          {
            "text": "                title: 'Team Overview',",
            "lineNumber": 24
          },
          {
            "text": "                description: 'Select a team to view detailed statistics',",
            "lineNumber": 25
          },
          {
            "text": "                blocks: []",
            "lineNumber": 26
          },
          {
            "text": "            },",
            "lineNumber": 27
          },
          {
            "text": "            'team-only': {",
            "lineNumber": 28
          },
          {
            "text": "                title: 'Team Complete History',",
            "lineNumber": 29
          },
          {
            "text": "                description: 'All seasons overview',",
            "lineNumber": 30
          },
          {
            "text": "                blocks: ['team-history', 'league-comparison', 'clutch-analysis', 'consistency-metrics', 'special-matches']",
            "lineNumber": 31
          },
          {
            "text": "            },",
            "lineNumber": 32
          },
          {
            "text": "            'team-season': {",
            "lineNumber": 33
          },
          {
            "text": "                title: 'Team Season Analysis',",
            "lineNumber": 34
          },
          {
            "text": "                description: 'Detailed season performance',",
            "lineNumber": 35
          },
          {
            "text": "                blocks: ['team-history', 'league-comparison', 'clutch-analysis', 'consistency-metrics', 'special-matches']",
            "lineNumber": 36
          },
          {
            "text": "            },",
            "lineNumber": 37
          },
          {
            "text": "            'team-season-week': {",
            "lineNumber": 38
          },
          {
            "text": "                title: 'Team Week Performance',",
            "lineNumber": 39
          },
          {
            "text": "                description: 'Week-specific analysis',",
            "lineNumber": 40
          },
          {
            "text": "                blocks: ['team-history', 'league-comparison', 'clutch-analysis', 'consistency-metrics', 'special-matches']",
            "lineNumber": 41
          },
          {
            "text": "            }",
            "lineNumber": 42
          },
          {
            "text": "        };",
            "lineNumber": 43
          },
          {
            "text": "    }",
            "lineNumber": 44,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 45
          },
          {
            "text": "    /**",
            "lineNumber": 46
          },
          {
            "text": "     * Initialize content blocks",
            "lineNumber": 47
          },
          {
            "text": "     */",
            "lineNumber": 48
          },
          {
            "text": "    initializeContentBlocks() {",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "        console.log('Initializing Phase 3 content blocks...');",
            "lineNumber": 50
          },
          {
            "text": "    }",
            "lineNumber": 89,
            "isSignature": true
          }
        ]
      },
      "score": 0.17983394861221313
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\index.html",
        "range": {
          "startPosition": {
            "line": 37
          },
          "endPosition": {
            "line": 81
          }
        },
        "contents": "        &lt;/div&gt;\n    &lt;/div&gt;\n   \n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                Letzte Events\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;ul class=\"list-group\" id=\"latestEvents\"&gt;\n                    &lt;!-- Will be populated via JavaScript --&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;!-- Add JavaScript for latest events --&gt;\n&lt;script&gt;\ndocument.addEventListener('DOMContentLoaded', function() {\n    console.log('🔄 Loading latest events with database:', getCurrentDatabase());\n    \n    // Use fetchWithDatabase to include the database parameter\n    fetchWithDatabase('{{ url_for(\"league.get_latest_events\") }}')\n        .then(response =&gt; response.json())\n        .then(data =&gt; {\n            //console.log('✅ Latest events loaded:', data);\n            const eventsList = document.getElementById('latestEvents');\n            if (data &amp;&amp; Array.isArray(data)) {\n                eventsList.innerHTML = data.map(event =&gt; &#96;\n                    &lt;li class=\"list-group-item\"&gt;\n                        &lt;a href=\"{{ url_for('league.stats') }}?season=${encodeURIComponent(event.Season)}&amp;league=${encodeURIComponent(event.League)}&amp;week=${event.Week}&amp;database=${encodeURIComponent(getCurrentDatabase())}\" \n                           class=\"text-decoration-none\"&gt;\n                            ${event.Season} - ${event.League} - Woche ${event.Week}\n                            &lt;small class=\"text-muted\"&gt;(${event.Date})&lt;/small&gt;\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                &#96;).join('');\n            } else {\n                eventsList.innerHTML = '&lt;li class=\"list-group-item\"&gt;Keine Events gefunden&lt;/li&gt;';\n            }\n        })\n        .catch(error =&gt; {\n            //console.error('❌ Error fetching events:', error);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 38
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 39
          },
          {
            "text": "   ",
            "lineNumber": 40
          },
          {
            "text": "    &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "        &lt;div class=\"card\"&gt;",
            "lineNumber": 42
          },
          {
            "text": "            &lt;div class=\"card-header\"&gt;",
            "lineNumber": 43
          },
          {
            "text": "                Letzte Events",
            "lineNumber": 44
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 45
          },
          {
            "text": "            &lt;div class=\"card-body\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                &lt;ul class=\"list-group\" id=\"latestEvents\"&gt;",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;!-- Will be populated via JavaScript --&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &lt;/ul&gt;",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 51
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 52
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 53
          },
          {
            "lineNumber": 54
          },
          {
            "text": "&lt;!-- Add JavaScript for latest events --&gt;",
            "lineNumber": 55
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 56
          },
          {
            "text": "document.addEventListener('DOMContentLoaded', function() {",
            "lineNumber": 57
          },
          {
            "text": "    console.log('🔄 Loading latest events with database:', getCurrentDatabase());",
            "lineNumber": 58
          },
          {
            "text": "    ",
            "lineNumber": 59
          },
          {
            "text": "    // Use fetchWithDatabase to include the database parameter",
            "lineNumber": 60
          },
          {
            "text": "    fetchWithDatabase('{{ url_for(\"league.get_latest_events\") }}')",
            "lineNumber": 61
          },
          {
            "text": "        .then(response =&gt; response.json())",
            "lineNumber": 62
          },
          {
            "text": "        .then(data =&gt; {",
            "lineNumber": 63
          },
          {
            "text": "            //console.log('✅ Latest events loaded:', data);",
            "lineNumber": 64
          },
          {
            "text": "            const eventsList = document.getElementById('latestEvents');",
            "lineNumber": 65
          },
          {
            "text": "            if (data &amp;&amp; Array.isArray(data)) {",
            "lineNumber": 66
          },
          {
            "text": "                eventsList.innerHTML = data.map(event =&gt; &#96;",
            "lineNumber": 67
          },
          {
            "text": "                    &lt;li class=\"list-group-item\"&gt;",
            "lineNumber": 68
          },
          {
            "text": "                        &lt;a href=\"{{ url_for('league.stats') }}?season=${encodeURIComponent(event.Season)}&amp;league=${encodeURIComponent(event.League)}&amp;week=${event.Week}&amp;database=${encodeURIComponent(getCurrentDatabase())}\" ",
            "lineNumber": 69
          },
          {
            "text": "                           class=\"text-decoration-none\"&gt;",
            "lineNumber": 70
          },
          {
            "text": "                            ${event.Season} - ${event.League} - Woche ${event.Week}",
            "lineNumber": 71
          },
          {
            "text": "                            &lt;small class=\"text-muted\"&gt;(${event.Date})&lt;/small&gt;",
            "lineNumber": 72
          },
          {
            "text": "                        &lt;/a&gt;",
            "lineNumber": 73
          },
          {
            "text": "                    &lt;/li&gt;",
            "lineNumber": 74
          },
          {
            "text": "                &#96;).join('');",
            "lineNumber": 75
          },
          {
            "text": "            } else {",
            "lineNumber": 76
          },
          {
            "text": "                eventsList.innerHTML = '&lt;li class=\"list-group-item\"&gt;Keine Events gefunden&lt;/li&gt;';",
            "lineNumber": 77
          },
          {
            "text": "            }",
            "lineNumber": 78
          },
          {
            "text": "        })",
            "lineNumber": 79
          },
          {
            "text": "        .catch(error =&gt; {",
            "lineNumber": 80
          },
          {
            "text": "            //console.error('❌ Error fetching events:', error);",
            "lineNumber": 81
          }
        ]
      },
      "score": 0.1785670965909958
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\index.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 41,
            "column": 8
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block title %}Home{% endblock %}\n\n{% block content %}\n&lt;!--h1&gt;Bowling Dashboard&lt;/h1--&gt;\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card mb-4\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                Info\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;!-- We'll add stats here later --&gt;\n                &lt;p&gt;Diese Seite ist ein Proof of Concept zur Darstellung von Ergebnissen und Statistiken rund um Bowling Ligen, Tuniere und Pokalwettbewerbe.&lt;/p&gt;\n                &lt;p&gt;Die Auswertungen sind oben über die Navigation zu \"League Stats\" und \"Player Stats\" zu finden, ich hab auch ein paar Beispiele verlinkt.&lt;/p&gt;\n                &lt;p&gt;Hauptaugenmerk liegt derzeit auf den Ligastatistiken. Die meisten Daten sind fiktiv, jedoch ist die Seite so aufgabeut, dass reale Daten einfach integriert werden könnten.&lt;/p&gt;\n                &lt;p&gt;Ihr könnte auf den Seiten meist die Ebene der angezeigten Infos verändern, in dem ihr die Buttons für z.B. die Saison auswählt. Einfach ein wenig herumprobieren.&lt;/p&gt;\n                \n                &lt;p&gt;Bitte kommt mit Feedback und Vorschlägen gerne per Whatsapp oder im Traning auf mich zu.&lt;/p&gt;\n                &lt;p&gt;  Cheers, Chris&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;       \n    &lt;/div&gt;\n\n\n    &lt;!-- New Examples Card --&gt;\n    &lt;div class=\"col-md-6 mt-4\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                Beispiele\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;ul class=\"list-group\" id=\"exampleQueries\"&gt;\n                    &lt;!-- Will be populated via JavaScript --&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n   \n    &lt;div class=\"col-md-6\"&gt;\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block title %}Home{% endblock %}",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "{% block content %}",
            "lineNumber": 5
          },
          {
            "text": "&lt;!--h1&gt;Bowling Dashboard&lt;/h1--&gt;",
            "lineNumber": 6
          },
          {
            "text": "&lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 7
          },
          {
            "text": "    &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 8
          },
          {
            "text": "        &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "            &lt;div class=\"card-header\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "                Info",
            "lineNumber": 11
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 12
          },
          {
            "text": "            &lt;div class=\"card-body\"&gt;",
            "lineNumber": 13
          },
          {
            "text": "                &lt;!-- We'll add stats here later --&gt;",
            "lineNumber": 14
          },
          {
            "text": "                &lt;p&gt;Diese Seite ist ein Proof of Concept zur Darstellung von Ergebnissen und Statistiken rund um Bowling Ligen, Tuniere und Pokalwettbewerbe.&lt;/p&gt;",
            "lineNumber": 15
          },
          {
            "text": "                &lt;p&gt;Die Auswertungen sind oben über die Navigation zu \"League Stats\" und \"Player Stats\" zu finden, ich hab auch ein paar Beispiele verlinkt.&lt;/p&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;p&gt;Hauptaugenmerk liegt derzeit auf den Ligastatistiken. Die meisten Daten sind fiktiv, jedoch ist die Seite so aufgabeut, dass reale Daten einfach integriert werden könnten.&lt;/p&gt;",
            "lineNumber": 17
          },
          {
            "text": "                &lt;p&gt;Ihr könnte auf den Seiten meist die Ebene der angezeigten Infos verändern, in dem ihr die Buttons für z.B. die Saison auswählt. Einfach ein wenig herumprobieren.&lt;/p&gt;",
            "lineNumber": 18
          },
          {
            "text": "                ",
            "lineNumber": 19
          },
          {
            "text": "                &lt;p&gt;Bitte kommt mit Feedback und Vorschlägen gerne per Whatsapp oder im Traning auf mich zu.&lt;/p&gt;",
            "lineNumber": 20
          },
          {
            "text": "                &lt;p&gt;  Cheers, Chris&lt;/p&gt;",
            "lineNumber": 21
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "text": "        &lt;/div&gt;       ",
            "lineNumber": 23
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 24
          },
          {
            "lineNumber": 25
          },
          {
            "lineNumber": 26
          },
          {
            "text": "    &lt;!-- New Examples Card --&gt;",
            "lineNumber": 27
          },
          {
            "text": "    &lt;div class=\"col-md-6 mt-4\"&gt;",
            "lineNumber": 28
          },
          {
            "text": "        &lt;div class=\"card\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "            &lt;div class=\"card-header\"&gt;",
            "lineNumber": 30
          },
          {
            "text": "                Beispiele",
            "lineNumber": 31
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 32
          },
          {
            "text": "            &lt;div class=\"card-body\"&gt;",
            "lineNumber": 33
          },
          {
            "text": "                &lt;ul class=\"list-group\" id=\"exampleQueries\"&gt;",
            "lineNumber": 34
          },
          {
            "text": "                    &lt;!-- Will be populated via JavaScript --&gt;",
            "lineNumber": 35
          },
          {
            "text": "                &lt;/ul&gt;",
            "lineNumber": 36
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 37
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 38
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 39
          },
          {
            "text": "   ",
            "lineNumber": 40
          },
          {
            "text": "    &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "        ",
            "lineNumber": 42
          }
        ]
      },
      "score": 0.17666423320770264
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\routes\\main.py",
        "range": {
          "startPosition": {
            "column": 73
          },
          "endPosition": {
            "line": 15
          }
        },
        "contents": " request, jsonify\nfrom data_access.pd_dataframes import fetch_column\nfrom app.services.data_manager import DataManager\nimport datetime\n\nbp = Blueprint('main', __name__)\n\n@bp.route('/')\ndef index():\n    return render_template('index.html')\n\n\n@bp.route('/set-season/&lt;season&gt;')\ndef set_season(season):\n    session['selected_season'] = season",
        "signatures": {},
        "detailedLines": [
          {
            "text": " request, jsonify",
            "lineNumber": 1
          },
          {
            "text": "from data_access.pd_dataframes import fetch_column",
            "lineNumber": 2
          },
          {
            "text": "from app.services.data_manager import DataManager",
            "lineNumber": 3
          },
          {
            "text": "import datetime",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "bp = Blueprint('main', __name__)",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "@bp.route('/')",
            "lineNumber": 8
          },
          {
            "text": "def index():",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "    return render_template('index.html')",
            "lineNumber": 10,
            "isSignature": true
          },
          {
            "lineNumber": 11
          },
          {
            "lineNumber": 12
          },
          {
            "text": "@bp.route('/set-season/&lt;season&gt;')",
            "lineNumber": 13
          },
          {
            "text": "def set_season(season):",
            "lineNumber": 14,
            "isSignature": true
          },
          {
            "text": "    session['selected_season'] = season",
            "lineNumber": 15
          }
        ]
      },
      "score": 0.1618209034204483
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\archive\\PHASE_2_COMPLETION_SUMMARY.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 45
          }
        },
        "contents": "# Phase 2 Completion Summary: State Management Layer\n\n## ✅ **Completed Tasks**\n\n### 1. **Core State Management Components Created**\n\n#### **URLStateManager** (&#96;core/url-state-manager.js&#96;)\n- ✅ **URL Synchronization**: Automatically syncs application state with browser URL\n- ✅ **Browser History**: Full support for back/forward navigation\n- ✅ **Shareable Links**: URLs can be bookmarked and shared\n- ✅ **State Management**: Centralized state with change notifications\n- ✅ **Filter Dependencies**: Smart clearing of dependent filters\n\n**Example URLs Now Supported:**\n&#96;&#96;&#96;\n/team/stats?team=TeamA&amp;season=2024&amp;week=5\n/team/stats?team=TeamB&amp;season=2023\n/team/stats?team=TeamC\n&#96;&#96;&#96;\n\n#### **FilterManager** (&#96;core/filter-manager.js&#96;)\n- ✅ **State Coordination**: Orchestrates all filter interactions\n- ✅ **Cascade Updates**: Team → Season → Week dependency handling\n- ✅ **Legacy Integration**: Calls existing filter functions (&#96;updateTeamSelect&#96;, &#96;updateSeasonButtons&#96;, etc.)\n- ✅ **Async Loading**: Proper handling of filter data loading\n- ✅ **Event Management**: Centralized event handling for all filters\n\n#### **ContentRenderer** (&#96;core/content-renderer.js&#96;)\n- ✅ **Content Modes**: Different content based on filter combinations\n- ✅ **Legacy Function Calls**: Uses existing chart/data functions\n- ✅ **Loading States**: Manages loading and error states\n- ✅ **Content Clearing**: Proper cleanup when filters change\n- ✅ **State-Based Rendering**: Only re-renders when state actually changes\n\n#### **TeamStatsApp** (&#96;team-stats-app.js&#96;)\n- ✅ **Application Coordinator**: Brings all components together\n- ✅ **Initialization**: Proper startup sequence and error handling\n- ✅ **Debug Support**: Built-in debugging and refresh capabilities\n- ✅ **Error Handling**: Graceful degradation to legacy functionality\n- ✅ **Global Access**: Debug functions available in browser console\n\n### 2. **Enhanced Template Integration**\n\n#### **Phase 2 Template** (&#96;stats.html&#96;)\n- ✅ **Modular Imports**: Clean separation of component loading",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Phase 2 Completion Summary: State Management Layer",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "## ✅ **Completed Tasks**",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "### 1. **Core State Management Components Created**",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "#### **URLStateManager** (&#96;core/url-state-manager.js&#96;)",
            "lineNumber": 7
          },
          {
            "text": "- ✅ **URL Synchronization**: Automatically syncs application state with browser URL",
            "lineNumber": 8
          },
          {
            "text": "- ✅ **Browser History**: Full support for back/forward navigation",
            "lineNumber": 9
          },
          {
            "text": "- ✅ **Shareable Links**: URLs can be bookmarked and shared",
            "lineNumber": 10
          },
          {
            "text": "- ✅ **State Management**: Centralized state with change notifications",
            "lineNumber": 11
          },
          {
            "text": "- ✅ **Filter Dependencies**: Smart clearing of dependent filters",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "**Example URLs Now Supported:**",
            "lineNumber": 14
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 15
          },
          {
            "text": "/team/stats?team=TeamA&amp;season=2024&amp;week=5",
            "lineNumber": 16
          },
          {
            "text": "/team/stats?team=TeamB&amp;season=2023",
            "lineNumber": 17
          },
          {
            "text": "/team/stats?team=TeamC",
            "lineNumber": 18
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 19
          },
          {
            "lineNumber": 20
          },
          {
            "text": "#### **FilterManager** (&#96;core/filter-manager.js&#96;)",
            "lineNumber": 21
          },
          {
            "text": "- ✅ **State Coordination**: Orchestrates all filter interactions",
            "lineNumber": 22
          },
          {
            "text": "- ✅ **Cascade Updates**: Team → Season → Week dependency handling",
            "lineNumber": 23
          },
          {
            "text": "- ✅ **Legacy Integration**: Calls existing filter functions (&#96;updateTeamSelect&#96;, &#96;updateSeasonButtons&#96;, etc.)",
            "lineNumber": 24
          },
          {
            "text": "- ✅ **Async Loading**: Proper handling of filter data loading",
            "lineNumber": 25
          },
          {
            "text": "- ✅ **Event Management**: Centralized event handling for all filters",
            "lineNumber": 26
          },
          {
            "lineNumber": 27
          },
          {
            "text": "#### **ContentRenderer** (&#96;core/content-renderer.js&#96;)",
            "lineNumber": 28
          },
          {
            "text": "- ✅ **Content Modes**: Different content based on filter combinations",
            "lineNumber": 29
          },
          {
            "text": "- ✅ **Legacy Function Calls**: Uses existing chart/data functions",
            "lineNumber": 30
          },
          {
            "text": "- ✅ **Loading States**: Manages loading and error states",
            "lineNumber": 31
          },
          {
            "text": "- ✅ **Content Clearing**: Proper cleanup when filters change",
            "lineNumber": 32
          },
          {
            "text": "- ✅ **State-Based Rendering**: Only re-renders when state actually changes",
            "lineNumber": 33
          },
          {
            "lineNumber": 34
          },
          {
            "text": "#### **TeamStatsApp** (&#96;team-stats-app.js&#96;)",
            "lineNumber": 35
          },
          {
            "text": "- ✅ **Application Coordinator**: Brings all components together",
            "lineNumber": 36
          },
          {
            "text": "- ✅ **Initialization**: Proper startup sequence and error handling",
            "lineNumber": 37
          },
          {
            "text": "- ✅ **Debug Support**: Built-in debugging and refresh capabilities",
            "lineNumber": 38
          },
          {
            "text": "- ✅ **Error Handling**: Graceful degradation to legacy functionality",
            "lineNumber": 39
          },
          {
            "text": "- ✅ **Global Access**: Debug functions available in browser console",
            "lineNumber": 40
          },
          {
            "lineNumber": 41
          },
          {
            "text": "### 2. **Enhanced Template Integration**",
            "lineNumber": 42
          },
          {
            "lineNumber": 43
          },
          {
            "text": "#### **Phase 2 Template** (&#96;stats.html&#96;)",
            "lineNumber": 44
          },
          {
            "text": "- ✅ **Modular Imports**: Clean separation of component loading",
            "lineNumber": 45
          }
        ]
      },
      "score": 0.15734249353408813
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\content.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 34
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block content %}\n&lt;!-- Existing player selection card --&gt;\n&lt;div class=\"card mb-4\"&gt;\n    &lt;div class=\"card-header\"&gt;\n        &lt;h4&gt;Player Statistics&lt;/h4&gt;\n    &lt;/div&gt;\n    &lt;div class=\"card-body\"&gt;\n        &lt;div class=\"mb-4\"&gt;\n            &lt;label for=\"playerInput\" class=\"form-label\"&gt;Select Player&lt;/label&gt;\n            &lt;input \n                type=\"text\" \n                class=\"form-control\" \n                id=\"playerInput\" \n                list=\"playerList\" \n                placeholder=\"Type a player name...\"\n                autocomplete=\"off\"\n            &gt;\n            &lt;datalist id=\"playerList\"&gt;\n                &lt;!-- Players will be loaded here --&gt;\n            &lt;/datalist&gt;\n        &lt;/div&gt;\n        &lt;div id=\"playerStats\" class=\"mt-4\"&gt;\n            &lt;!-- Basic player info will be here --&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;!-- Lifetime Stats Card --&gt;\n&lt;div class=\"card mb-4\"&gt;\n    &lt;div class=\"card-header\"&gt;\n        &lt;h4&gt;Lifetime Statistics&lt;/h4&gt;\n    &lt;/div&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block content %}",
            "lineNumber": 3
          },
          {
            "text": "&lt;!-- Existing player selection card --&gt;",
            "lineNumber": 4
          },
          {
            "text": "&lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 5
          },
          {
            "text": "    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 6
          },
          {
            "text": "        &lt;h4&gt;Player Statistics&lt;/h4&gt;",
            "lineNumber": 7
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 8
          },
          {
            "text": "    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "        &lt;div class=\"mb-4\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "            &lt;label for=\"playerInput\" class=\"form-label\"&gt;Select Player&lt;/label&gt;",
            "lineNumber": 11
          },
          {
            "text": "            &lt;input ",
            "lineNumber": 12
          },
          {
            "text": "                type=\"text\" ",
            "lineNumber": 13
          },
          {
            "text": "                class=\"form-control\" ",
            "lineNumber": 14
          },
          {
            "text": "                id=\"playerInput\" ",
            "lineNumber": 15
          },
          {
            "text": "                list=\"playerList\" ",
            "lineNumber": 16
          },
          {
            "text": "                placeholder=\"Type a player name...\"",
            "lineNumber": 17
          },
          {
            "text": "                autocomplete=\"off\"",
            "lineNumber": 18
          },
          {
            "text": "            &gt;",
            "lineNumber": 19
          },
          {
            "text": "            &lt;datalist id=\"playerList\"&gt;",
            "lineNumber": 20
          },
          {
            "text": "                &lt;!-- Players will be loaded here --&gt;",
            "lineNumber": 21
          },
          {
            "text": "            &lt;/datalist&gt;",
            "lineNumber": 22
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 23
          },
          {
            "text": "        &lt;div id=\"playerStats\" class=\"mt-4\"&gt;",
            "lineNumber": 24
          },
          {
            "text": "            &lt;!-- Basic player info will be here --&gt;",
            "lineNumber": 25
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 26
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 27
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 28
          },
          {
            "lineNumber": 29
          },
          {
            "text": "&lt;!-- Lifetime Stats Card --&gt;",
            "lineNumber": 30
          },
          {
            "text": "&lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 32
          },
          {
            "text": "        &lt;h4&gt;Lifetime Statistics&lt;/h4&gt;",
            "lineNumber": 33
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 34
          }
        ]
      },
      "score": 0.15523900091648102
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\navbar.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 23,
            "column": 20
          }
        },
        "contents": "&lt;nav class=\"navbar navbar-expand-lg navbar-dark mb-4\"&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;a class=\"navbar-brand\" href=\"{{ url_for('main.index') }}\"&gt;Bowl-A-Lyzer&lt;/a&gt;\n        &lt;button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"&gt;\n            &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n        &lt;/button&gt;\n        &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;\n            &lt;ul class=\"navbar-nav\"&gt;\n                &lt;li class=\"nav-item\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{{ url_for('player.stats') }}\" id=\"playerStatsLink\"&gt;Player Stats&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=\"nav-item\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{{ url_for('league.stats') }}?database=db_real&amp;season=latest\" id=\"leagueStatsLink\"&gt;League Stats&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=\"nav-item\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{{ url_for('team.stats') }}\" id=\"teamStatsLink\"&gt;Team Stats&lt;/a&gt;\n                &lt;/li&gt;\n                &lt;li class=\"nav-item\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{{ url_for('main.test') }}\" id=\"apiTestLink\"&gt;API Test&lt;/a&gt;\n                &lt;/li&gt;\n            &lt;/ul&gt;\n            &lt;ul class=\"navbar-nav ms-auto\"&gt;\n                &lt;li class=\"nav-item\"&gt;\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;nav class=\"navbar navbar-expand-lg navbar-dark mb-4\"&gt;",
            "lineNumber": 1
          },
          {
            "text": "    &lt;div class=\"container\"&gt;",
            "lineNumber": 2
          },
          {
            "text": "        &lt;a class=\"navbar-brand\" href=\"{{ url_for('main.index') }}\"&gt;Bowl-A-Lyzer&lt;/a&gt;",
            "lineNumber": 3
          },
          {
            "text": "        &lt;button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"&gt;",
            "lineNumber": 4
          },
          {
            "text": "            &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;",
            "lineNumber": 5
          },
          {
            "text": "        &lt;/button&gt;",
            "lineNumber": 6
          },
          {
            "text": "        &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;",
            "lineNumber": 7
          },
          {
            "text": "            &lt;ul class=\"navbar-nav\"&gt;",
            "lineNumber": 8
          },
          {
            "text": "                &lt;li class=\"nav-item\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "                    &lt;a class=\"nav-link\" href=\"{{ url_for('player.stats') }}\" id=\"playerStatsLink\"&gt;Player Stats&lt;/a&gt;",
            "lineNumber": 10
          },
          {
            "text": "                &lt;/li&gt;",
            "lineNumber": 11
          },
          {
            "text": "                &lt;li class=\"nav-item\"&gt;",
            "lineNumber": 12
          },
          {
            "text": "                    &lt;a class=\"nav-link\" href=\"{{ url_for('league.stats') }}?database=db_real&amp;season=latest\" id=\"leagueStatsLink\"&gt;League Stats&lt;/a&gt;",
            "lineNumber": 13
          },
          {
            "text": "                &lt;/li&gt;",
            "lineNumber": 14
          },
          {
            "text": "                &lt;li class=\"nav-item\"&gt;",
            "lineNumber": 15
          },
          {
            "text": "                    &lt;a class=\"nav-link\" href=\"{{ url_for('team.stats') }}\" id=\"teamStatsLink\"&gt;Team Stats&lt;/a&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;/li&gt;",
            "lineNumber": 17
          },
          {
            "text": "                &lt;li class=\"nav-item\"&gt;",
            "lineNumber": 18
          },
          {
            "text": "                    &lt;a class=\"nav-link\" href=\"{{ url_for('main.test') }}\" id=\"apiTestLink\"&gt;API Test&lt;/a&gt;",
            "lineNumber": 19
          },
          {
            "text": "                &lt;/li&gt;",
            "lineNumber": 20
          },
          {
            "text": "            &lt;/ul&gt;",
            "lineNumber": 21
          },
          {
            "text": "            &lt;ul class=\"navbar-nav ms-auto\"&gt;",
            "lineNumber": 22
          },
          {
            "text": "                &lt;li class=\"nav-item\"&gt;",
            "lineNumber": 23
          },
          {
            "text": "                    ",
            "lineNumber": 24
          }
        ]
      },
      "score": 0.1526917964220047
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\centralized-button-integration.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 73,
            "column": 2
          }
        },
        "contents": "/**\n * Centralized Button Integration\n * \n * Example integration of the CentralizedButtonManager with existing systems\n * This shows how to replace the current button management with the centralized approach\n */\n\nclass CentralizedButtonIntegration {\n    constructor() {\n        this.urlStateManager = null;\n        this.buttonManager = null;\n        this.contentRenderer = null;\n    }\n    \n    /**\n     * Initialize the integrated button system\n     */\n    async initialize() {\n        try {\n            // Initialize URL state manager (assuming it exists)\n            this.urlStateManager = new URLStateManager();\n            \n            // Initialize centralized button manager\n            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'league');\n            \n            // Initialize content renderer (assuming it exists)\n            this.contentRenderer = new ContentRenderer(this.urlStateManager);\n            \n            // Initialize all components\n            await Promise.all([\n                this.urlStateManager.initialize(),\n                this.buttonManager.initialize(),\n                this.contentRenderer.initialize()\n            ]);\n            \n            console.log('✅ CentralizedButtonIntegration: All components initialized');\n            \n        } catch (error) {\n            console.error('❌ CentralizedButtonIntegration: Initialization failed:', error);\n        }\n    }\n    \n    /**\n     * Get current filter state\n     */\n    getCurrentState() {\n        return this.buttonManager ? this.buttonManager.getState() : {};\n    }\n    \n    /**\n     * Get selected values\n     */\n    getSelectedValues() {\n        return this.buttonManager ? this.buttonManager.getSelectedValues() : {};\n    }\n    \n    /**\n     * Get available candidates for a specific group\n     */\n    getCandidates(groupName) {\n        return this.buttonManager ? this.buttonManager.getCandidates(groupName) : [];\n    }\n}\n\n// Example usage in your existing templates:\n/*\n// Replace this in your existing code:\n// const filterManager = new SimpleFilterManager(urlStateManager, 'league');\n// await filterManager.initialize();\n\n// With this:\nconst buttonIntegration = new CentralizedButtonIntegration();\nawait buttonIntegration.initialize();\n*/",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * Centralized Button Integration",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Example integration of the CentralizedButtonManager with existing systems",
            "lineNumber": 4
          },
          {
            "text": " * This shows how to replace the current button management with the centralized approach",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class CentralizedButtonIntegration {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor() {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = null;",
            "lineNumber": 10
          },
          {
            "text": "        this.buttonManager = null;",
            "lineNumber": 11
          },
          {
            "text": "        this.contentRenderer = null;",
            "lineNumber": 12
          },
          {
            "text": "    }",
            "lineNumber": 13,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 14
          },
          {
            "text": "    /**",
            "lineNumber": 15
          },
          {
            "text": "     * Initialize the integrated button system",
            "lineNumber": 16
          },
          {
            "text": "     */",
            "lineNumber": 17
          },
          {
            "text": "    async initialize() {",
            "lineNumber": 18,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 19
          },
          {
            "text": "            // Initialize URL state manager (assuming it exists)",
            "lineNumber": 20
          },
          {
            "text": "            this.urlStateManager = new URLStateManager();",
            "lineNumber": 21
          },
          {
            "text": "            ",
            "lineNumber": 22
          },
          {
            "text": "            // Initialize centralized button manager",
            "lineNumber": 23
          },
          {
            "text": "            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'league');",
            "lineNumber": 24
          },
          {
            "text": "            ",
            "lineNumber": 25
          },
          {
            "text": "            // Initialize content renderer (assuming it exists)",
            "lineNumber": 26
          },
          {
            "text": "            this.contentRenderer = new ContentRenderer(this.urlStateManager);",
            "lineNumber": 27
          },
          {
            "text": "            ",
            "lineNumber": 28
          },
          {
            "text": "            // Initialize all components",
            "lineNumber": 29
          },
          {
            "text": "            await Promise.all([",
            "lineNumber": 30
          },
          {
            "text": "                this.urlStateManager.initialize(),",
            "lineNumber": 31
          },
          {
            "text": "                this.buttonManager.initialize(),",
            "lineNumber": 32
          },
          {
            "text": "                this.contentRenderer.initialize()",
            "lineNumber": 33
          },
          {
            "text": "            ]);",
            "lineNumber": 34
          },
          {
            "text": "            ",
            "lineNumber": 35
          },
          {
            "text": "            console.log('✅ CentralizedButtonIntegration: All components initialized');",
            "lineNumber": 36
          },
          {
            "text": "            ",
            "lineNumber": 37
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 38
          },
          {
            "text": "            console.error('❌ CentralizedButtonIntegration: Initialization failed:', error);",
            "lineNumber": 39
          },
          {
            "text": "        }",
            "lineNumber": 40
          },
          {
            "text": "    }",
            "lineNumber": 41,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 42
          },
          {
            "text": "    /**",
            "lineNumber": 43
          },
          {
            "text": "     * Get current filter state",
            "lineNumber": 44
          },
          {
            "text": "     */",
            "lineNumber": 45
          },
          {
            "text": "    getCurrentState() {",
            "lineNumber": 46,
            "isSignature": true
          },
          {
            "text": "        return this.buttonManager ? this.buttonManager.getState() : {};",
            "lineNumber": 47
          },
          {
            "text": "    }",
            "lineNumber": 48,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 49
          },
          {
            "text": "    /**",
            "lineNumber": 50
          },
          {
            "text": "     * Get selected values",
            "lineNumber": 51
          },
          {
            "text": "     */",
            "lineNumber": 52
          },
          {
            "text": "    getSelectedValues() {",
            "lineNumber": 53,
            "isSignature": true
          },
          {
            "text": "        return this.buttonManager ? this.buttonManager.getSelectedValues() : {};",
            "lineNumber": 54
          },
          {
            "text": "    }",
            "lineNumber": 55,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 56
          },
          {
            "text": "    /**",
            "lineNumber": 57
          },
          {
            "text": "     * Get available candidates for a specific group",
            "lineNumber": 58
          },
          {
            "text": "     */",
            "lineNumber": 59
          },
          {
            "text": "    getCandidates(groupName) {",
            "lineNumber": 60,
            "isSignature": true
          },
          {
            "text": "        return this.buttonManager ? this.buttonManager.getCandidates(groupName) : [];",
            "lineNumber": 61
          },
          {
            "text": "    }",
            "lineNumber": 62,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 63,
            "isSignature": true
          },
          {
            "lineNumber": 64
          },
          {
            "text": "// Example usage in your existing templates:",
            "lineNumber": 65
          },
          {
            "text": "/*",
            "lineNumber": 66
          },
          {
            "text": "// Replace this in your existing code:",
            "lineNumber": 67
          },
          {
            "text": "// const filterManager = new SimpleFilterManager(urlStateManager, 'league');",
            "lineNumber": 68
          },
          {
            "text": "// await filterManager.initialize();",
            "lineNumber": 69
          },
          {
            "lineNumber": 70
          },
          {
            "text": "// With this:",
            "lineNumber": 71
          },
          {
            "text": "const buttonIntegration = new CentralizedButtonIntegration();",
            "lineNumber": 72
          },
          {
            "text": "await buttonIntegration.initialize();",
            "lineNumber": 73
          },
          {
            "text": "*/",
            "lineNumber": 74
          }
        ]
      },
      "score": 0.14943856000900269
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\docs\\archive\\PHASE_1_COMPLETION_SUMMARY.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 47
          }
        },
        "contents": "# Phase 1 Completion Summary: Extract &amp; Modularize\n\n## ✅ **Completed Tasks**\n\n### 1. **Directory Structure Created**\n&#96;&#96;&#96;\napp/static/js/\n├── core/               # Ready for Phase 2 components\n├── content-blocks/     # Ready for Phase 3 components  \n├── legacy/            # Phase 1 extracted functions\n│   ├── team-chart-utils.js    ✅ CREATED\n│   ├── team-filter-utils.js   ✅ CREATED\n│   └── team-data-utils.js     ✅ CREATED\n└── config/            # Ready for Phase 4 configurations\n&#96;&#96;&#96;\n\n### 2. **Functions Successfully Extracted**\n\n#### **team-chart-utils.js** (Chart Management)\n- ✅ &#96;updateTeamHistory(teamName)&#96; - Team position history chart\n- ✅ &#96;updateLeagueComparison(teamName)&#96; - Team vs league performance \n- ✅ &#96;updateClutchAnalysis(teamName, season)&#96; - Clutch performance chart + stats\n- ✅ &#96;updateConsistencyMetrics(teamName, season)&#96; - Consistency metrics display\n\n#### **team-filter-utils.js** (Filter Management)  \n- ✅ &#96;updateTeamSelect(teams)&#96; - Team dropdown management\n- ✅ &#96;updateSeasonButtons(teamName)&#96; - Season button group\n- ✅ &#96;updateWeekButtons(teamName, season)&#96; - Week button group\n- ✅ &#96;updateMessageVisibility()&#96; - Selection message toggle\n- ✅ &#96;updateAvailableOptions()&#96; - Filter cascade updates\n- ✅ &#96;updateAllTeamsStats()&#96; - All teams view (placeholder)\n\n#### **team-data-utils.js** (Data &amp; Event Management)\n- ✅ &#96;loadSpecialMatches(teamName)&#96; - Load highlights data\n- ✅ &#96;loadSpecialMatchesForSeason(teamName, season)&#96; - Season-specific highlights\n- ✅ &#96;displaySpecialMatches(data)&#96; - Populate highlights tables\n- ✅ &#96;initializeTeamsData()&#96; - Initial teams loading\n- ✅ &#96;setupGlobalEventListeners()&#96; - Event handler setup\n- ✅ &#96;initializeTeamStatsPage()&#96; - Main initialization function\n\n### 3. **Template Refactored**\n\n#### **Original**: &#96;stats.html&#96; (799 lines)\n- ❌ Monolithic structure with mixed concerns\n- ❌ 500+ lines of inline JavaScript\n- ❌ HTML, CSS, and JS all in one file",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Phase 1 Completion Summary: Extract &amp; Modularize",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "## ✅ **Completed Tasks**",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "### 1. **Directory Structure Created**",
            "lineNumber": 5
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 6
          },
          {
            "text": "app/static/js/",
            "lineNumber": 7
          },
          {
            "text": "├── core/               # Ready for Phase 2 components",
            "lineNumber": 8
          },
          {
            "text": "├── content-blocks/     # Ready for Phase 3 components  ",
            "lineNumber": 9
          },
          {
            "text": "├── legacy/            # Phase 1 extracted functions",
            "lineNumber": 10
          },
          {
            "text": "│   ├── team-chart-utils.js    ✅ CREATED",
            "lineNumber": 11
          },
          {
            "text": "│   ├── team-filter-utils.js   ✅ CREATED",
            "lineNumber": 12
          },
          {
            "text": "│   └── team-data-utils.js     ✅ CREATED",
            "lineNumber": 13
          },
          {
            "text": "└── config/            # Ready for Phase 4 configurations",
            "lineNumber": 14
          },
          {
            "text": "&#96;&#96;&#96;",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "### 2. **Functions Successfully Extracted**",
            "lineNumber": 17
          },
          {
            "lineNumber": 18
          },
          {
            "text": "#### **team-chart-utils.js** (Chart Management)",
            "lineNumber": 19
          },
          {
            "text": "- ✅ &#96;updateTeamHistory(teamName)&#96; - Team position history chart",
            "lineNumber": 20
          },
          {
            "text": "- ✅ &#96;updateLeagueComparison(teamName)&#96; - Team vs league performance ",
            "lineNumber": 21
          },
          {
            "text": "- ✅ &#96;updateClutchAnalysis(teamName, season)&#96; - Clutch performance chart + stats",
            "lineNumber": 22
          },
          {
            "text": "- ✅ &#96;updateConsistencyMetrics(teamName, season)&#96; - Consistency metrics display",
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "#### **team-filter-utils.js** (Filter Management)  ",
            "lineNumber": 25
          },
          {
            "text": "- ✅ &#96;updateTeamSelect(teams)&#96; - Team dropdown management",
            "lineNumber": 26
          },
          {
            "text": "- ✅ &#96;updateSeasonButtons(teamName)&#96; - Season button group",
            "lineNumber": 27
          },
          {
            "text": "- ✅ &#96;updateWeekButtons(teamName, season)&#96; - Week button group",
            "lineNumber": 28
          },
          {
            "text": "- ✅ &#96;updateMessageVisibility()&#96; - Selection message toggle",
            "lineNumber": 29
          },
          {
            "text": "- ✅ &#96;updateAvailableOptions()&#96; - Filter cascade updates",
            "lineNumber": 30
          },
          {
            "text": "- ✅ &#96;updateAllTeamsStats()&#96; - All teams view (placeholder)",
            "lineNumber": 31
          },
          {
            "lineNumber": 32
          },
          {
            "text": "#### **team-data-utils.js** (Data &amp; Event Management)",
            "lineNumber": 33
          },
          {
            "text": "- ✅ &#96;loadSpecialMatches(teamName)&#96; - Load highlights data",
            "lineNumber": 34
          },
          {
            "text": "- ✅ &#96;loadSpecialMatchesForSeason(teamName, season)&#96; - Season-specific highlights",
            "lineNumber": 35
          },
          {
            "text": "- ✅ &#96;displaySpecialMatches(data)&#96; - Populate highlights tables",
            "lineNumber": 36
          },
          {
            "text": "- ✅ &#96;initializeTeamsData()&#96; - Initial teams loading",
            "lineNumber": 37
          },
          {
            "text": "- ✅ &#96;setupGlobalEventListeners()&#96; - Event handler setup",
            "lineNumber": 38
          },
          {
            "text": "- ✅ &#96;initializeTeamStatsPage()&#96; - Main initialization function",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### 3. **Template Refactored**",
            "lineNumber": 41
          },
          {
            "lineNumber": 42
          },
          {
            "text": "#### **Original**: &#96;stats.html&#96; (799 lines)",
            "lineNumber": 43
          },
          {
            "text": "- ❌ Monolithic structure with mixed concerns",
            "lineNumber": 44
          },
          {
            "text": "- ❌ 500+ lines of inline JavaScript",
            "lineNumber": 45
          },
          {
            "text": "- ❌ HTML, CSS, and JS all in one file",
            "lineNumber": 46
          }
        ]
      },
      "score": 0.14687539637088776
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\__init__.py",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 63,
            "column": 14
          }
        },
        "contents": "def create_app():\n\n    \n    # Custom static file handler with cache-busting\n    @app.route('/static/&lt;path:filename&gt;')\n    def custom_static(filename):\n        \"\"\"Serve static files with cache-busting headers\"\"\"\n        response = send_from_directory(app.static_folder, filename)\n        \n        # Add cache-busting headers for JavaScript and CSS files\n        if filename.endswith(('.js', '.css')):\n            # Set cache headers to prevent caching\n            response.headers['Cache-Control'] = 'no-cache, no-store, must-revalidate'\n            response.headers['Pragma'] = 'no-cache'\n            response.headers['Expires'] = '0'\n            \n            # Add ETag based on file modification time for conditional requests\n            file_path = os.path.join(app.static_folder, filename)\n            if os.path.exists(file_path):\n                mtime = os.path.getmtime(file_path)\n                response.set_etag(f'\"{int(mtime)}\"')\n        \n        return response\n    \n    # Template helper for cache busting\n    @app.context_processor\n    def inject_cache_buster():\n        \"\"\"Inject cache busting helper into templates\"\"\"\n        from app.utils.cache_buster import get_static_url\n        return dict(static_url=get_static_url)\n    \n    from app.routes import main, player_routes, league_routes, league_routes_legacy, team_routes\n    app.register_blueprint(main.bp)\n    app.register_blueprint(player_routes.bp)\n    app.register_blueprint(league_routes.bp)\n    app.register_blueprint(league_routes_legacy.bp_legacy)\n    app.register_blueprint(team_routes.bp)\n    return app",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "def create_app():",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 28
          },
          {
            "text": "    ",
            "lineNumber": 29
          },
          {
            "text": "    # Custom static file handler with cache-busting",
            "lineNumber": 30
          },
          {
            "text": "    @app.route('/static/&lt;path:filename&gt;')",
            "lineNumber": 31
          },
          {
            "text": "    def custom_static(filename):",
            "lineNumber": 32
          },
          {
            "text": "        \"\"\"Serve static files with cache-busting headers\"\"\"",
            "lineNumber": 33
          },
          {
            "text": "        response = send_from_directory(app.static_folder, filename)",
            "lineNumber": 34
          },
          {
            "text": "        ",
            "lineNumber": 35
          },
          {
            "text": "        # Add cache-busting headers for JavaScript and CSS files",
            "lineNumber": 36
          },
          {
            "text": "        if filename.endswith(('.js', '.css')):",
            "lineNumber": 37
          },
          {
            "text": "            # Set cache headers to prevent caching",
            "lineNumber": 38
          },
          {
            "text": "            response.headers['Cache-Control'] = 'no-cache, no-store, must-revalidate'",
            "lineNumber": 39
          },
          {
            "text": "            response.headers['Pragma'] = 'no-cache'",
            "lineNumber": 40
          },
          {
            "text": "            response.headers['Expires'] = '0'",
            "lineNumber": 41
          },
          {
            "text": "            ",
            "lineNumber": 42
          },
          {
            "text": "            # Add ETag based on file modification time for conditional requests",
            "lineNumber": 43
          },
          {
            "text": "            file_path = os.path.join(app.static_folder, filename)",
            "lineNumber": 44
          },
          {
            "text": "            if os.path.exists(file_path):",
            "lineNumber": 45
          },
          {
            "text": "                mtime = os.path.getmtime(file_path)",
            "lineNumber": 46
          },
          {
            "text": "                response.set_etag(f'\"{int(mtime)}\"')",
            "lineNumber": 47
          },
          {
            "text": "        ",
            "lineNumber": 48
          },
          {
            "text": "        return response",
            "lineNumber": 49
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    # Template helper for cache busting",
            "lineNumber": 51
          },
          {
            "text": "    @app.context_processor",
            "lineNumber": 52
          },
          {
            "text": "    def inject_cache_buster():",
            "lineNumber": 53
          },
          {
            "text": "        \"\"\"Inject cache busting helper into templates\"\"\"",
            "lineNumber": 54
          },
          {
            "text": "        from app.utils.cache_buster import get_static_url",
            "lineNumber": 55
          },
          {
            "text": "        return dict(static_url=get_static_url)",
            "lineNumber": 56
          },
          {
            "text": "    ",
            "lineNumber": 57
          },
          {
            "text": "    from app.routes import main, player_routes, league_routes, league_routes_legacy, team_routes",
            "lineNumber": 58
          },
          {
            "text": "    app.register_blueprint(main.bp)",
            "lineNumber": 59
          },
          {
            "text": "    app.register_blueprint(player_routes.bp)",
            "lineNumber": 60
          },
          {
            "text": "    app.register_blueprint(league_routes.bp)",
            "lineNumber": 61
          },
          {
            "text": "    app.register_blueprint(league_routes_legacy.bp_legacy)",
            "lineNumber": 62
          },
          {
            "text": "    app.register_blueprint(team_routes.bp)",
            "lineNumber": 63
          },
          {
            "text": "    return app",
            "lineNumber": 64,
            "isSignature": true
          }
        ]
      },
      "score": 0.14448939263820648
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\centralized-button-manager.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 649,
            "column": 1
          }
        },
        "contents": "/**\n * Centralized Button Manager\n * \n * Robust, centralized system for managing filter buttons with constraint-based updates\n * Handles the complete lifecycle: fetch candidates, populate buttons, manage state\n */\n\nclass CentralizedButtonManager {\n    constructor(urlStateManager, mode = 'league', onStateChange = null) {\n        this.urlStateManager = urlStateManager;\n        this.mode = mode; // 'team' or 'league'\n        this.isInitializing = false;\n        this.isProcessingUpdate = false;\n        this.onStateChange = onStateChange; // Callback for state changes\n        \n        // Button group definitions with their dependencies and order\n        this.buttonGroups = {\n            season: {\n                order: 1,\n                dependencies: [],\n                endpoint: '/league/get_available_seasons',\n                containerId: 'buttonsSeason',\n                name: 'season'\n            },\n            league: {\n                order: 2,\n                dependencies: [], // allow league selection without season\n                endpoint: '/league/get_available_leagues',\n                containerId: 'buttonsLeague',\n                name: 'league'\n            },\n            week: {\n                order: 3,\n                dependencies: ['season', 'league'],\n                endpoint: '/league/get_available_weeks',\n                containerId: 'buttonsWeek',\n                name: 'week'\n            },\n            round: {\n                order: 4,\n                dependencies: ['season', 'league', 'week'],\n                endpoint: '/league/get_available_rounds',\n                containerId: 'buttonsRound',\n                name: 'round'\n            },\n            team: {\n                order: 5,\n                dependencies: ['season', 'league'],\n                endpoint: '/league/get_available_teams',\n                containerId: 'buttonsTeam',\n                name: 'team'\n            }\n        };\n        \n        // Current state and constraints\n        this.currentState = {};\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * Centralized Button Manager",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Robust, centralized system for managing filter buttons with constraint-based updates",
            "lineNumber": 4
          },
          {
            "text": " * Handles the complete lifecycle: fetch candidates, populate buttons, manage state",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class CentralizedButtonManager {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor(urlStateManager, mode = 'league', onStateChange = null) {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = urlStateManager;",
            "lineNumber": 10
          },
          {
            "text": "        this.mode = mode; // 'team' or 'league'",
            "lineNumber": 11
          },
          {
            "text": "        this.isInitializing = false;",
            "lineNumber": 12
          },
          {
            "text": "        this.isProcessingUpdate = false;",
            "lineNumber": 13
          },
          {
            "text": "        this.onStateChange = onStateChange; // Callback for state changes",
            "lineNumber": 14
          },
          {
            "text": "        ",
            "lineNumber": 15
          },
          {
            "text": "        // Button group definitions with their dependencies and order",
            "lineNumber": 16
          },
          {
            "text": "        this.buttonGroups = {",
            "lineNumber": 17
          },
          {
            "text": "            season: {",
            "lineNumber": 18
          },
          {
            "text": "                order: 1,",
            "lineNumber": 19
          },
          {
            "text": "                dependencies: [],",
            "lineNumber": 20
          },
          {
            "text": "                endpoint: '/league/get_available_seasons',",
            "lineNumber": 21
          },
          {
            "text": "                containerId: 'buttonsSeason',",
            "lineNumber": 22
          },
          {
            "text": "                name: 'season'",
            "lineNumber": 23
          },
          {
            "text": "            },",
            "lineNumber": 24
          },
          {
            "text": "            league: {",
            "lineNumber": 25
          },
          {
            "text": "                order: 2,",
            "lineNumber": 26
          },
          {
            "text": "                dependencies: [], // allow league selection without season",
            "lineNumber": 27
          },
          {
            "text": "                endpoint: '/league/get_available_leagues',",
            "lineNumber": 28
          },
          {
            "text": "                containerId: 'buttonsLeague',",
            "lineNumber": 29
          },
          {
            "text": "                name: 'league'",
            "lineNumber": 30
          },
          {
            "text": "            },",
            "lineNumber": 31
          },
          {
            "text": "            week: {",
            "lineNumber": 32
          },
          {
            "text": "                order: 3,",
            "lineNumber": 33
          },
          {
            "text": "                dependencies: ['season', 'league'],",
            "lineNumber": 34
          },
          {
            "text": "                endpoint: '/league/get_available_weeks',",
            "lineNumber": 35
          },
          {
            "text": "                containerId: 'buttonsWeek',",
            "lineNumber": 36
          },
          {
            "text": "                name: 'week'",
            "lineNumber": 37
          },
          {
            "text": "            },",
            "lineNumber": 38
          },
          {
            "text": "            round: {",
            "lineNumber": 39
          },
          {
            "text": "                order: 4,",
            "lineNumber": 40
          },
          {
            "text": "                dependencies: ['season', 'league', 'week'],",
            "lineNumber": 41
          },
          {
            "text": "                endpoint: '/league/get_available_rounds',",
            "lineNumber": 42
          },
          {
            "text": "                containerId: 'buttonsRound',",
            "lineNumber": 43
          },
          {
            "text": "                name: 'round'",
            "lineNumber": 44
          },
          {
            "text": "            },",
            "lineNumber": 45
          },
          {
            "text": "            team: {",
            "lineNumber": 46
          },
          {
            "text": "                order: 5,",
            "lineNumber": 47
          },
          {
            "text": "                dependencies: ['season', 'league'],",
            "lineNumber": 48
          },
          {
            "text": "                endpoint: '/league/get_available_teams',",
            "lineNumber": 49
          },
          {
            "text": "                containerId: 'buttonsTeam',",
            "lineNumber": 50
          },
          {
            "text": "                name: 'team'",
            "lineNumber": 51
          },
          {
            "text": "            }",
            "lineNumber": 52
          },
          {
            "text": "        };",
            "lineNumber": 53
          },
          {
            "text": "        ",
            "lineNumber": 54
          },
          {
            "text": "        // Current state and constraints",
            "lineNumber": 55
          },
          {
            "text": "        this.currentState = {};",
            "lineNumber": 56
          },
          {
            "text": "    }",
            "lineNumber": 69,
            "isSignature": true
          }
        ]
      },
      "score": 0.13583140075206757
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\content.html",
        "range": {
          "startPosition": {
            "line": 124
          },
          "endPosition": {
            "line": 150
          }
        },
        "contents": "document.addEventListener('DOMContentLoaded', function() {\n    const playerInput = document.getElementById('playerInput');\n    const playerList = document.getElementById('playerList');\n    \n    // Parse URL parameters\n    function parseUrlParams() {\n        const params = new URLSearchParams(window.location.search);\n        return {\n            player_name: params.get('player_name'),\n            database: params.get('database')\n        };\n    }\n    \n    // Load all players immediately\n    fetchWithDatabase('{{ url_for(\"player.search_players\") }}')\n        .then(response =&gt; response.json())\n        .then(players =&gt; {\n            // Populate datalist with options\n            playerList.innerHTML = players.map(player =&gt; \n                &#96;&lt;option value=\"${player.name}\" data-id=\"${player.id}\"&gt;&#96;\n            ).join('');\n            \n            // Check for URL parameters and auto-select player\n            const urlParams = parseUrlParams();\n            if (urlParams.player_name) {\n                console.log('URL parameter found: player_name =', urlParams.player_name);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "document.addEventListener('DOMContentLoaded', function() {",
            "lineNumber": 125
          },
          {
            "text": "    const playerInput = document.getElementById('playerInput');",
            "lineNumber": 126
          },
          {
            "text": "    const playerList = document.getElementById('playerList');",
            "lineNumber": 127
          },
          {
            "text": "    ",
            "lineNumber": 128
          },
          {
            "text": "    // Parse URL parameters",
            "lineNumber": 129
          },
          {
            "text": "    function parseUrlParams() {",
            "lineNumber": 130
          },
          {
            "text": "        const params = new URLSearchParams(window.location.search);",
            "lineNumber": 131
          },
          {
            "text": "        return {",
            "lineNumber": 132
          },
          {
            "text": "            player_name: params.get('player_name'),",
            "lineNumber": 133
          },
          {
            "text": "            database: params.get('database')",
            "lineNumber": 134
          },
          {
            "text": "        };",
            "lineNumber": 135
          },
          {
            "text": "    }",
            "lineNumber": 136
          },
          {
            "text": "    ",
            "lineNumber": 137
          },
          {
            "text": "    // Load all players immediately",
            "lineNumber": 138
          },
          {
            "text": "    fetchWithDatabase('{{ url_for(\"player.search_players\") }}')",
            "lineNumber": 139
          },
          {
            "text": "        .then(response =&gt; response.json())",
            "lineNumber": 140
          },
          {
            "text": "        .then(players =&gt; {",
            "lineNumber": 141
          },
          {
            "text": "            // Populate datalist with options",
            "lineNumber": 142
          },
          {
            "text": "            playerList.innerHTML = players.map(player =&gt; ",
            "lineNumber": 143
          },
          {
            "text": "                &#96;&lt;option value=\"${player.name}\" data-id=\"${player.id}\"&gt;&#96;",
            "lineNumber": 144
          },
          {
            "text": "            ).join('');",
            "lineNumber": 145
          },
          {
            "text": "            ",
            "lineNumber": 146
          },
          {
            "text": "            // Check for URL parameters and auto-select player",
            "lineNumber": 147
          },
          {
            "text": "            const urlParams = parseUrlParams();",
            "lineNumber": 148
          },
          {
            "text": "            if (urlParams.player_name) {",
            "lineNumber": 149
          },
          {
            "text": "                console.log('URL parameter found: player_name =', urlParams.player_name);",
            "lineNumber": 150
          }
        ]
      },
      "score": 0.13572479784488678
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\team-stats-app.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 479,
            "column": 1
          }
        },
        "contents": "class TeamStatsApp {\n\n    \n    async _doInitialize() {\n        try {\n            // Signal that we're taking control to prevent legacy conflicts\n            window.teamStatsApp = this;\n            this.isInitialized = true;\n            \n            // Initialize URL state manager with content rendering callback\n            this.urlStateManager = new URLStateManager({\n                onStateChange: (state) =&gt; {\n                    console.log('🔄 URLStateManager: State changed:', state);\n                    if (this.contentRenderer) {\n                        this.contentRenderer.renderContent(state);\n                    }\n                }\n            });\n            \n            // Initialize content renderer (simplified - no event bus)\n            this.contentRenderer = new ContentRenderer(this.urlStateManager);\n            \n            // Initialize filter manager with a short delay to ensure DOM is ready\n            await new Promise(resolve =&gt; setTimeout(resolve, 100));\n            \n            // Centralized button manager for team mode with content rendering callback\n            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'team', (state) =&gt; {\n                console.log('🔄 TeamStatsApp: Button state changed, rendering content:', state);\n                this.currentState = { ...state };\n                if (this.contentRenderer) {\n                    this.contentRenderer.renderContent(state);\n                }\n            });\n            await this.buttonManager.initialize();\n            \n            // Populate team dropdown\n            await this.populateTeamDropdown();\n            \n            // Set up our own event listeners that properly trigger state changes\n            this.setupEventListeners();\n            \n            // Listen for database changes\n            window.addEventListener\n\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class TeamStatsApp {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 35
          },
          {
            "text": "    ",
            "lineNumber": 36
          },
          {
            "text": "    async _doInitialize() {",
            "lineNumber": 37,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 38
          },
          {
            "text": "            // Signal that we're taking control to prevent legacy conflicts",
            "lineNumber": 39
          },
          {
            "text": "            window.teamStatsApp = this;",
            "lineNumber": 40
          },
          {
            "text": "            this.isInitialized = true;",
            "lineNumber": 41
          },
          {
            "text": "            ",
            "lineNumber": 42
          },
          {
            "text": "            // Initialize URL state manager with content rendering callback",
            "lineNumber": 43
          },
          {
            "text": "            this.urlStateManager = new URLStateManager({",
            "lineNumber": 44
          },
          {
            "text": "                onStateChange: (state) =&gt; {",
            "lineNumber": 45
          },
          {
            "text": "                    console.log('🔄 URLStateManager: State changed:', state);",
            "lineNumber": 46
          },
          {
            "text": "                    if (this.contentRenderer) {",
            "lineNumber": 47
          },
          {
            "text": "                        this.contentRenderer.renderContent(state);",
            "lineNumber": 48
          },
          {
            "text": "                    }",
            "lineNumber": 49
          },
          {
            "text": "                }",
            "lineNumber": 50
          },
          {
            "text": "            });",
            "lineNumber": 51
          },
          {
            "text": "            ",
            "lineNumber": 52
          },
          {
            "text": "            // Initialize content renderer (simplified - no event bus)",
            "lineNumber": 53
          },
          {
            "text": "            this.contentRenderer = new ContentRenderer(this.urlStateManager);",
            "lineNumber": 54
          },
          {
            "text": "            ",
            "lineNumber": 55
          },
          {
            "text": "            // Initialize filter manager with a short delay to ensure DOM is ready",
            "lineNumber": 56
          },
          {
            "text": "            await new Promise(resolve =&gt; setTimeout(resolve, 100));",
            "lineNumber": 57
          },
          {
            "text": "            ",
            "lineNumber": 58
          },
          {
            "text": "            // Centralized button manager for team mode with content rendering callback",
            "lineNumber": 59
          },
          {
            "text": "            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'team', (state) =&gt; {",
            "lineNumber": 60
          },
          {
            "text": "                console.log('🔄 TeamStatsApp: Button state changed, rendering content:', state);",
            "lineNumber": 61
          },
          {
            "text": "                this.currentState = { ...state };",
            "lineNumber": 62
          },
          {
            "text": "                if (this.contentRenderer) {",
            "lineNumber": 63
          },
          {
            "text": "                    this.contentRenderer.renderContent(state);",
            "lineNumber": 64
          },
          {
            "text": "                }",
            "lineNumber": 65
          },
          {
            "text": "            });",
            "lineNumber": 66
          },
          {
            "text": "            await this.buttonManager.initialize();",
            "lineNumber": 67
          },
          {
            "text": "            ",
            "lineNumber": 68
          },
          {
            "text": "            // Populate team dropdown",
            "lineNumber": 69
          },
          {
            "text": "            await this.populateTeamDropdown();",
            "lineNumber": 70
          },
          {
            "text": "            ",
            "lineNumber": 71
          },
          {
            "text": "            // Set up our own event listeners that properly trigger state changes",
            "lineNumber": 72
          },
          {
            "text": "            this.setupEventListeners();",
            "lineNumber": 73
          },
          {
            "text": "            ",
            "lineNumber": 74
          },
          {
            "text": "            // Listen for database changes",
            "lineNumber": 75
          },
          {
            "text": "            window.addEventListener",
            "lineNumber": 76
          },
          {
            "lineNumber": 79
          },
          {
            "text": "    }",
            "lineNumber": 111,
            "isSignature": true
          }
        ]
      },
      "score": 0.1338573694229126
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\index.html",
        "range": {
          "startPosition": {
            "line": 77
          },
          "endPosition": {
            "line": 139
          }
        },
        "contents": "            }\n        })\n        .catch(error =&gt; {\n            //console.error('❌ Error fetching events:', error);\n            const eventsList = document.getElementById('latestEvents');\n            eventsList.innerHTML = '&lt;li class=\"list-group-item text-danger\"&gt;Fehler beim Laden der Events&lt;/li&gt;';\n        });\n    \n    // Populate example queries\n    const examplesList = document.getElementById('exampleQueries');\n    \n    // Define sample queries with labels and parameters\n    const examples = [\n        {\n            label: 'Aktueller Tabellenstand: alle Ligen',\n            params: { database: 'db_real',\n                      season: 'latest'\n            }\n        },\n        {\n            label: 'Liga Saisonübersicht: Bayernliga 24/25',\n            params: {\n                season: '24/25',\n                league: 'BayL',\n                database: 'db_real'\n            }\n        },\n        {\n            label: 'Liga Spieltag: Bayernliga - 25/26 - Spieltag 1',\n            params: {\n                season: '25/26',\n                league: 'BayL',\n                week: '1',\n                database: 'db_real'\n            }\n        },\n        {\n            label: 'Liga Spielzettel: Bayernliga - 24/25 - Spieltag 1 - BK München 3',\n            params: {\n                season: '24/25',\n                league: 'BayL',\n                week: '1',\n                team: 'BK München 3',\n                database: 'db_real'\n            }\n        },\n        {\n            label: 'Team Historie: Bowlinghaus Bamberg 1',\n            params: {\n                team: 'Bowlinghaus Bamberg 1',\n                database: 'db_real'\n            }\n        },\n        {\n            label: 'Spieler Statistiken: Hinterwimmer, Sebastian',\n            params: {\n                player_name: 'Hinterwimmer, Sebastian',\n                database: 'db_real'\n            }\n        },\n        {\n            label: 'Liga Historie (simuliert): LL 1 Nord',",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            }",
            "lineNumber": 78
          },
          {
            "text": "        })",
            "lineNumber": 79
          },
          {
            "text": "        .catch(error =&gt; {",
            "lineNumber": 80
          },
          {
            "text": "            //console.error('❌ Error fetching events:', error);",
            "lineNumber": 81
          },
          {
            "text": "            const eventsList = document.getElementById('latestEvents');",
            "lineNumber": 82
          },
          {
            "text": "            eventsList.innerHTML = '&lt;li class=\"list-group-item text-danger\"&gt;Fehler beim Laden der Events&lt;/li&gt;';",
            "lineNumber": 83
          },
          {
            "text": "        });",
            "lineNumber": 84
          },
          {
            "text": "    ",
            "lineNumber": 85
          },
          {
            "text": "    // Populate example queries",
            "lineNumber": 86
          },
          {
            "text": "    const examplesList = document.getElementById('exampleQueries');",
            "lineNumber": 87
          },
          {
            "text": "    ",
            "lineNumber": 88
          },
          {
            "text": "    // Define sample queries with labels and parameters",
            "lineNumber": 89
          },
          {
            "text": "    const examples = [",
            "lineNumber": 90
          },
          {
            "text": "        {",
            "lineNumber": 91
          },
          {
            "text": "            label: 'Aktueller Tabellenstand: alle Ligen',",
            "lineNumber": 92
          },
          {
            "text": "            params: { database: 'db_real',",
            "lineNumber": 93
          },
          {
            "text": "                      season: 'latest'",
            "lineNumber": 94
          },
          {
            "text": "            }",
            "lineNumber": 95
          },
          {
            "text": "        },",
            "lineNumber": 96
          },
          {
            "text": "        {",
            "lineNumber": 97
          },
          {
            "text": "            label: 'Liga Saisonübersicht: Bayernliga 24/25',",
            "lineNumber": 98
          },
          {
            "text": "            params: {",
            "lineNumber": 99
          },
          {
            "text": "                season: '24/25',",
            "lineNumber": 100
          },
          {
            "text": "                league: 'BayL',",
            "lineNumber": 101
          },
          {
            "text": "                database: 'db_real'",
            "lineNumber": 102
          },
          {
            "text": "            }",
            "lineNumber": 103
          },
          {
            "text": "        },",
            "lineNumber": 104
          },
          {
            "text": "        {",
            "lineNumber": 105
          },
          {
            "text": "            label: 'Liga Spieltag: Bayernliga - 25/26 - Spieltag 1',",
            "lineNumber": 106
          },
          {
            "text": "            params: {",
            "lineNumber": 107
          },
          {
            "text": "                season: '25/26',",
            "lineNumber": 108
          },
          {
            "text": "                league: 'BayL',",
            "lineNumber": 109
          },
          {
            "text": "                week: '1',",
            "lineNumber": 110
          },
          {
            "text": "                database: 'db_real'",
            "lineNumber": 111
          },
          {
            "text": "            }",
            "lineNumber": 112
          },
          {
            "text": "        },",
            "lineNumber": 113
          },
          {
            "text": "        {",
            "lineNumber": 114
          },
          {
            "text": "            label: 'Liga Spielzettel: Bayernliga - 24/25 - Spieltag 1 - BK München 3',",
            "lineNumber": 115
          },
          {
            "text": "            params: {",
            "lineNumber": 116
          },
          {
            "text": "                season: '24/25',",
            "lineNumber": 117
          },
          {
            "text": "                league: 'BayL',",
            "lineNumber": 118
          },
          {
            "text": "                week: '1',",
            "lineNumber": 119
          },
          {
            "text": "                team: 'BK München 3',",
            "lineNumber": 120
          },
          {
            "text": "                database: 'db_real'",
            "lineNumber": 121
          },
          {
            "text": "            }",
            "lineNumber": 122
          },
          {
            "text": "        },",
            "lineNumber": 123
          },
          {
            "text": "        {",
            "lineNumber": 124
          },
          {
            "text": "            label: 'Team Historie: Bowlinghaus Bamberg 1',",
            "lineNumber": 125
          },
          {
            "text": "            params: {",
            "lineNumber": 126
          },
          {
            "text": "                team: 'Bowlinghaus Bamberg 1',",
            "lineNumber": 127
          },
          {
            "text": "                database: 'db_real'",
            "lineNumber": 128
          },
          {
            "text": "            }",
            "lineNumber": 129
          },
          {
            "text": "        },",
            "lineNumber": 130
          },
          {
            "text": "        {",
            "lineNumber": 131
          },
          {
            "text": "            label: 'Spieler Statistiken: Hinterwimmer, Sebastian',",
            "lineNumber": 132
          },
          {
            "text": "            params: {",
            "lineNumber": 133
          },
          {
            "text": "                player_name: 'Hinterwimmer, Sebastian',",
            "lineNumber": 134
          },
          {
            "text": "                database: 'db_real'",
            "lineNumber": 135
          },
          {
            "text": "            }",
            "lineNumber": 136
          },
          {
            "text": "        },",
            "lineNumber": 137
          },
          {
            "text": "        {",
            "lineNumber": 138
          },
          {
            "text": "            label: 'Liga Historie (simuliert): LL 1 Nord',",
            "lineNumber": 139
          }
        ]
      },
      "score": 0.1318729966878891
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\base.html",
        "range": {
          "startPosition": {
            "line": 681
          },
          "endPosition": {
            "line": 715,
            "column": 8
          }
        },
        "contents": "        function addDatabaseParam(url) {\n            const database = getCurrentDatabase();\n            if (database) {\n                // Handle both string and URL objects\n                const urlString = url.toString();\n                const separator = urlString.includes('?') ? '&amp;' : '?';\n                return &#96;${urlString}${separator}database=${encodeURIComponent(database)}&#96;;\n            }\n            return url;\n        }\n        \n        function fetchWithDatabase(url, options = {}) {\n            const urlWithDatabase = addDatabaseParam(url);\n            console.log('🔄 fetchWithDatabase called:', { originalUrl: url, urlWithDatabase });\n            return fetch(urlWithDatabase, options);\n        }\n    &lt;/script&gt;\n    \n    {% block scripts %}{% endblock %}\n    \n    &lt;!-- Footer --&gt;\n    &lt;footer class=\"bg-light mt-5 py-3\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-12 text-center\"&gt;\n                    &lt;small class=\"text-muted\"&gt;\n                        © 2024 Bowl-A-Lyzer | \n                        &lt;a href=\"{{ url_for('main.impressum') }}\" class=\"text-decoration-none\"&gt;Impressum&lt;/a&gt;\n                    &lt;/small&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n&lt;/body&gt;\n&lt;/html&gt; ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        function addDatabaseParam(url) {",
            "lineNumber": 682
          },
          {
            "text": "            const database = getCurrentDatabase();",
            "lineNumber": 683
          },
          {
            "text": "            if (database) {",
            "lineNumber": 684
          },
          {
            "text": "                // Handle both string and URL objects",
            "lineNumber": 685
          },
          {
            "text": "                const urlString = url.toString();",
            "lineNumber": 686
          },
          {
            "text": "                const separator = urlString.includes('?') ? '&amp;' : '?';",
            "lineNumber": 687
          },
          {
            "text": "                return &#96;${urlString}${separator}database=${encodeURIComponent(database)}&#96;;",
            "lineNumber": 688
          },
          {
            "text": "            }",
            "lineNumber": 689
          },
          {
            "text": "            return url;",
            "lineNumber": 690
          },
          {
            "text": "        }",
            "lineNumber": 691
          },
          {
            "text": "        ",
            "lineNumber": 692
          },
          {
            "text": "        function fetchWithDatabase(url, options = {}) {",
            "lineNumber": 693
          },
          {
            "text": "            const urlWithDatabase = addDatabaseParam(url);",
            "lineNumber": 694
          },
          {
            "text": "            console.log('🔄 fetchWithDatabase called:', { originalUrl: url, urlWithDatabase });",
            "lineNumber": 695
          },
          {
            "text": "            return fetch(urlWithDatabase, options);",
            "lineNumber": 696
          },
          {
            "text": "        }",
            "lineNumber": 697
          },
          {
            "text": "    &lt;/script&gt;",
            "lineNumber": 698
          },
          {
            "text": "    ",
            "lineNumber": 699
          },
          {
            "text": "    {% block scripts %}{% endblock %}",
            "lineNumber": 700
          },
          {
            "text": "    ",
            "lineNumber": 701
          },
          {
            "text": "    &lt;!-- Footer --&gt;",
            "lineNumber": 702
          },
          {
            "text": "    &lt;footer class=\"bg-light mt-5 py-3\"&gt;",
            "lineNumber": 703
          },
          {
            "text": "        &lt;div class=\"container\"&gt;",
            "lineNumber": 704
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 705
          },
          {
            "text": "                &lt;div class=\"col-12 text-center\"&gt;",
            "lineNumber": 706
          },
          {
            "text": "                    &lt;small class=\"text-muted\"&gt;",
            "lineNumber": 707
          },
          {
            "text": "                        © 2024 Bowl-A-Lyzer | ",
            "lineNumber": 708
          },
          {
            "text": "                        &lt;a href=\"{{ url_for('main.impressum') }}\" class=\"text-decoration-none\"&gt;Impressum&lt;/a&gt;",
            "lineNumber": 709
          },
          {
            "text": "                    &lt;/small&gt;",
            "lineNumber": 710
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 711
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 712
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 713
          },
          {
            "text": "    &lt;/footer&gt;",
            "lineNumber": 714
          },
          {
            "text": "&lt;/body&gt;",
            "lineNumber": 715
          },
          {
            "text": "&lt;/html&gt; ",
            "lineNumber": 716
          }
        ]
      },
      "score": 0.12616249918937683
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\api-test-app.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 132,
            "column": 1
          }
        },
        "contents": "class APITestApp {\n\n    \n    async _doInitialize() {\n        try {\n            // Initialize URL state manager with API test parameters\n            this.urlStateManager = new URLStateManager({\n                onStateChange: (state) =&gt; {\n                    console.log('API Test URL state changed:', state);\n                    this.currentState = { ...this.currentState, ...state };\n                    \n                    // Update global currentState for legacy compatibility\n                    if (typeof window.currentState !== 'undefined') {\n                        Object.assign(window.currentState, state);\n                    } else {\n                        window.currentState = { ...this.currentState };\n                    }\n                    \n                    if (this.contentRenderer) {\n                        this.contentRenderer.renderContent(this.currentState);\n                    }\n                    \n                    // Update filter controls\n                    this.updateFilterDisplays();\n                }\n            });\n            \n            // Get initial state from URL\n            this.currentState = { ...this.currentState, ...this.urlStateManager.getState() };\n            window.currentState = { ...this.currentState };\n            \n            // Initialize content renderer\n            this.contentRenderer = new APITestContentRenderer(this.urlStateManager);\n            \n            // Initialize centralized button manager for league mode with content rendering callback\n            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'league', (state) =&gt; {\n                console.log('🔄 APITestApp: Button state changed, rendering content:', state);\n                this.currentState = { ...state };\n                if (this.contentRenderer) {\n                    this.contentRenderer.renderContent(state);\n                }\n            });\n            await this.buttonManager.initialize();\n            \n            // Render initial content\n            await\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class APITestApp {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 43
          },
          {
            "text": "    ",
            "lineNumber": 44
          },
          {
            "text": "    async _doInitialize() {",
            "lineNumber": 45,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 46
          },
          {
            "text": "            // Initialize URL state manager with API test parameters",
            "lineNumber": 47
          },
          {
            "text": "            this.urlStateManager = new URLStateManager({",
            "lineNumber": 48
          },
          {
            "text": "                onStateChange: (state) =&gt; {",
            "lineNumber": 49
          },
          {
            "text": "                    console.log('API Test URL state changed:', state);",
            "lineNumber": 50
          },
          {
            "text": "                    this.currentState = { ...this.currentState, ...state };",
            "lineNumber": 51
          },
          {
            "text": "                    ",
            "lineNumber": 52
          },
          {
            "text": "                    // Update global currentState for legacy compatibility",
            "lineNumber": 53
          },
          {
            "text": "                    if (typeof window.currentState !== 'undefined') {",
            "lineNumber": 54
          },
          {
            "text": "                        Object.assign(window.currentState, state);",
            "lineNumber": 55
          },
          {
            "text": "                    } else {",
            "lineNumber": 56
          },
          {
            "text": "                        window.currentState = { ...this.currentState };",
            "lineNumber": 57
          },
          {
            "text": "                    }",
            "lineNumber": 58
          },
          {
            "text": "                    ",
            "lineNumber": 59
          },
          {
            "text": "                    if (this.contentRenderer) {",
            "lineNumber": 60
          },
          {
            "text": "                        this.contentRenderer.renderContent(this.currentState);",
            "lineNumber": 61
          },
          {
            "text": "                    }",
            "lineNumber": 62
          },
          {
            "text": "                    ",
            "lineNumber": 63
          },
          {
            "text": "                    // Update filter controls",
            "lineNumber": 64
          },
          {
            "text": "                    this.updateFilterDisplays();",
            "lineNumber": 65
          },
          {
            "text": "                }",
            "lineNumber": 66
          },
          {
            "text": "            });",
            "lineNumber": 67
          },
          {
            "text": "            ",
            "lineNumber": 68
          },
          {
            "text": "            // Get initial state from URL",
            "lineNumber": 69
          },
          {
            "text": "            this.currentState = { ...this.currentState, ...this.urlStateManager.getState() };",
            "lineNumber": 70
          },
          {
            "text": "            window.currentState = { ...this.currentState };",
            "lineNumber": 71
          },
          {
            "text": "            ",
            "lineNumber": 72
          },
          {
            "text": "            // Initialize content renderer",
            "lineNumber": 73
          },
          {
            "text": "            this.contentRenderer = new APITestContentRenderer(this.urlStateManager);",
            "lineNumber": 74
          },
          {
            "text": "            ",
            "lineNumber": 75
          },
          {
            "text": "            // Initialize centralized button manager for league mode with content rendering callback",
            "lineNumber": 76
          },
          {
            "text": "            this.buttonManager = new CentralizedButtonManager(this.urlStateManager, 'league', (state) =&gt; {",
            "lineNumber": 77
          },
          {
            "text": "                console.log('🔄 APITestApp: Button state changed, rendering content:', state);",
            "lineNumber": 78
          },
          {
            "text": "                this.currentState = { ...state };",
            "lineNumber": 79
          },
          {
            "text": "                if (this.contentRenderer) {",
            "lineNumber": 80
          },
          {
            "text": "                    this.contentRenderer.renderContent(state);",
            "lineNumber": 81
          },
          {
            "text": "                }",
            "lineNumber": 82
          },
          {
            "text": "            });",
            "lineNumber": 83
          },
          {
            "text": "            await this.buttonManager.initialize();",
            "lineNumber": 84
          },
          {
            "text": "            ",
            "lineNumber": 85
          },
          {
            "text": "            // Render initial content",
            "lineNumber": 86
          },
          {
            "text": "            await",
            "lineNumber": 87
          },
          {
            "text": "    }",
            "lineNumber": 96,
            "isSignature": true
          }
        ]
      },
      "score": 0.1253814697265625
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block content %}\n    {% include \"components/tables.html\" %}\n    {% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n\n    &lt;!-- Filter Controls --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;!-- Selection Area --&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;\n                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row mt-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;\n                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Rounds/Games will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-8\"&gt;\n                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block content %}",
            "lineNumber": 3
          },
          {
            "text": "    {% include \"components/tables.html\" %}",
            "lineNumber": 4
          },
          {
            "text": "    {% include \"components/charts.html\" %}",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "    &lt;!-- Filter Controls --&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;div class=\"card\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 11
          },
          {
            "text": "            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;",
            "lineNumber": 12
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;!-- Selection Area --&gt;",
            "lineNumber": 15
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;",
            "lineNumber": 18
          },
          {
            "text": "                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 21
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 23
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;",
            "lineNumber": 24
          },
          {
            "text": "                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 27
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 28
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;",
            "lineNumber": 30
          },
          {
            "text": "                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 33
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 34
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "            &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 36
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 37
          },
          {
            "text": "                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;",
            "lineNumber": 38
          },
          {
            "text": "                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                        &lt;!-- Rounds/Games will be inserted here --&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 41
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 42
          },
          {
            "text": "                &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 43
          },
          {
            "text": "                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;",
            "lineNumber": 44
          },
          {
            "text": "                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 45
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 46
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 48
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 49
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.12513099610805511
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\routes\\league_routes.py",
        "range": {
          "startPosition": {
            "column": 62
          },
          "endPosition": {
            "line": 23,
            "column": 42
          }
        },
        "contents": "from app.services.league_service import LeagueService\nfrom data_access.schema import Columns, ColumnsExtra\nfrom app.services.i18n_service import i18n_service, Language\nfrom business_logic.statistics import query_database\nfrom data_access.adapters.data_adapter_factory import DataAdapterSelector\nimport traceback\nimport sys\nfrom app.services.data_dict import DataDict\nfrom app.config.debug_config import debug_config\nfrom app.models.table_data import TableData, ColumnGroup, Column\nfrom business_logic.league import longNames\n\nbp = Blueprint('league', __name__)\n\ndef get_league_service():\n    \"\"\"Helper function to get LeagueService with database parameter\"\"\"\n    database = request.args.get('database') or 'db_real'  # Default to db_real if no database specified\n    debug_config.log_service('LeagueService', 'create', f\"database={database}\")\n    return LeagueService(database=database)\n\n@bp.route('/league/funsies')\ndef funsies():\n    return render_template('funsies.html')",
        "signatures": {},
        "detailedLines": [
          {
            "text": "from app.services.league_service import LeagueService",
            "lineNumber": 2
          },
          {
            "text": "from data_access.schema import Columns, ColumnsExtra",
            "lineNumber": 3
          },
          {
            "text": "from app.services.i18n_service import i18n_service, Language",
            "lineNumber": 4
          },
          {
            "text": "from business_logic.statistics import query_database",
            "lineNumber": 5
          },
          {
            "text": "from data_access.adapters.data_adapter_factory import DataAdapterSelector",
            "lineNumber": 6
          },
          {
            "text": "import traceback",
            "lineNumber": 7
          },
          {
            "text": "import sys",
            "lineNumber": 8
          },
          {
            "text": "from app.services.data_dict import DataDict",
            "lineNumber": 9
          },
          {
            "text": "from app.config.debug_config import debug_config",
            "lineNumber": 10
          },
          {
            "text": "from app.models.table_data import TableData, ColumnGroup, Column",
            "lineNumber": 11
          },
          {
            "text": "from business_logic.league import longNames",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "bp = Blueprint('league', __name__)",
            "lineNumber": 14
          },
          {
            "lineNumber": 15
          },
          {
            "text": "def get_league_service():",
            "lineNumber": 16,
            "isSignature": true
          },
          {
            "text": "    \"\"\"Helper function to get LeagueService with database parameter\"\"\"",
            "lineNumber": 17
          },
          {
            "text": "    database = request.args.get('database') or 'db_real'  # Default to db_real if no database specified",
            "lineNumber": 18
          },
          {
            "text": "    debug_config.log_service('LeagueService', 'create', f\"database={database}\")",
            "lineNumber": 19
          },
          {
            "text": "    return LeagueService(database=database)",
            "lineNumber": 20,
            "isSignature": true
          },
          {
            "lineNumber": 21
          },
          {
            "text": "@bp.route('/league/funsies')",
            "lineNumber": 22
          },
          {
            "text": "def funsies():",
            "lineNumber": 23,
            "isSignature": true
          },
          {
            "text": "    return render_template('funsies.html')",
            "lineNumber": 24,
            "isSignature": true
          }
        ]
      },
      "score": 0.12265340238809586
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\TEAM_STATS_ENHANCEMENT_PLAN.md",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 45
          }
        },
        "contents": "# Team Stats Enhancement Plan\n\n## Overview\nThis document outlines the complete implementation plan for enhancing the team statistics page with advanced analytics and insights.\n\n## Phase 0: Foundation &amp; Documentation\n- [ ] Create comprehensive data glossary and definitions\n- [ ] Document database schema and column meanings  \n- [ ] Define key metrics and calculation methods\n- [ ] Establish common terminology across team/player/league contexts\n- [ ] Document data types (input_data vs computed_data, individual vs team totals)\n## Phase 1: League Comparison + History ✅ COMPLETED\n\n### ✅ Backend Implementation\n- [x] Add &#96;get_league_comparison_data()&#96; method to TeamService\n- [x] Add &#96;get_league_averages()&#96; method to TeamService  \n- [x] Add &#96;get_team_vs_league_performance()&#96; method to TeamService\n- [x] Add &#96;/team/get_league_comparison&#96; API endpoint\n\n### ✅ Frontend Implementation\n- [x] Add \"Leistung vs. Liga-Durchschnitt\" section to team stats page\n- [x] Create area chart showing team vs league average with conditional coloring\n- [x] Create league comparison table with detailed metrics (reordered columns)\n- [x] Add &#96;updateLeagueComparison()&#96; JavaScript function\n- [x] Integrate with team selection handler\n- [x] Remove deprecated \"Durchschnittliche Leistung pro Saison\" chart\n- [x] Clean up deprecated backend functions and routes\n\n### ✅ Features Delivered\n- League average scores and points per season (using individual data)\n- Team performance vs league average (difference, Z-scores)\n- Historical league strength context\n- Visual area chart with green/red coloring for performance gaps\n- Clean, focused layout with full-width team history chart\n- Proper column ordering in comparison table\n\n---\n\n## Phase 2: Clutch &amp; Consistency ✅ COMPLETED\n\n### ✅ Backend Implementation\n- [x] Add &#96;get_clutch_performance()&#96; method to TeamService\n- [x] Add &#96;get_consistency_metrics()&#96; method to TeamService\n- [x] Add &#96;get_streak_analysis()&#96; method to TeamService\n- [x] Add &#96;/team/get_clutch_analysis&#96; API endpoint",
        "signatures": {},
        "detailedLines": [
          {
            "text": "# Team Stats Enhancement Plan",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "## Overview",
            "lineNumber": 3
          },
          {
            "text": "This document outlines the complete implementation plan for enhancing the team statistics page with advanced analytics and insights.",
            "lineNumber": 4
          },
          {
            "lineNumber": 5
          },
          {
            "text": "## Phase 0: Foundation &amp; Documentation",
            "lineNumber": 6
          },
          {
            "text": "- [ ] Create comprehensive data glossary and definitions",
            "lineNumber": 7
          },
          {
            "text": "- [ ] Document database schema and column meanings  ",
            "lineNumber": 8
          },
          {
            "text": "- [ ] Define key metrics and calculation methods",
            "lineNumber": 9
          },
          {
            "text": "- [ ] Establish common terminology across team/player/league contexts",
            "lineNumber": 10
          },
          {
            "text": "- [ ] Document data types (input_data vs computed_data, individual vs team totals)",
            "lineNumber": 11
          },
          {
            "text": "## Phase 1: League Comparison + History ✅ COMPLETED",
            "lineNumber": 12
          },
          {
            "lineNumber": 13
          },
          {
            "text": "### ✅ Backend Implementation",
            "lineNumber": 14
          },
          {
            "text": "- [x] Add &#96;get_league_comparison_data()&#96; method to TeamService",
            "lineNumber": 15
          },
          {
            "text": "- [x] Add &#96;get_league_averages()&#96; method to TeamService  ",
            "lineNumber": 16
          },
          {
            "text": "- [x] Add &#96;get_team_vs_league_performance()&#96; method to TeamService",
            "lineNumber": 17
          },
          {
            "text": "- [x] Add &#96;/team/get_league_comparison&#96; API endpoint",
            "lineNumber": 18
          },
          {
            "lineNumber": 19
          },
          {
            "text": "### ✅ Frontend Implementation",
            "lineNumber": 20
          },
          {
            "text": "- [x] Add \"Leistung vs. Liga-Durchschnitt\" section to team stats page",
            "lineNumber": 21
          },
          {
            "text": "- [x] Create area chart showing team vs league average with conditional coloring",
            "lineNumber": 22
          },
          {
            "text": "- [x] Create league comparison table with detailed metrics (reordered columns)",
            "lineNumber": 23
          },
          {
            "text": "- [x] Add &#96;updateLeagueComparison()&#96; JavaScript function",
            "lineNumber": 24
          },
          {
            "text": "- [x] Integrate with team selection handler",
            "lineNumber": 25
          },
          {
            "text": "- [x] Remove deprecated \"Durchschnittliche Leistung pro Saison\" chart",
            "lineNumber": 26
          },
          {
            "text": "- [x] Clean up deprecated backend functions and routes",
            "lineNumber": 27
          },
          {
            "lineNumber": 28
          },
          {
            "text": "### ✅ Features Delivered",
            "lineNumber": 29
          },
          {
            "text": "- League average scores and points per season (using individual data)",
            "lineNumber": 30
          },
          {
            "text": "- Team performance vs league average (difference, Z-scores)",
            "lineNumber": 31
          },
          {
            "text": "- Historical league strength context",
            "lineNumber": 32
          },
          {
            "text": "- Visual area chart with green/red coloring for performance gaps",
            "lineNumber": 33
          },
          {
            "text": "- Clean, focused layout with full-width team history chart",
            "lineNumber": 34
          },
          {
            "text": "- Proper column ordering in comparison table",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "---",
            "lineNumber": 37
          },
          {
            "lineNumber": 38
          },
          {
            "text": "## Phase 2: Clutch &amp; Consistency ✅ COMPLETED",
            "lineNumber": 39
          },
          {
            "lineNumber": 40
          },
          {
            "text": "### ✅ Backend Implementation",
            "lineNumber": 41
          },
          {
            "text": "- [x] Add &#96;get_clutch_performance()&#96; method to TeamService",
            "lineNumber": 42
          },
          {
            "text": "- [x] Add &#96;get_consistency_metrics()&#96; method to TeamService",
            "lineNumber": 43
          },
          {
            "text": "- [x] Add &#96;get_streak_analysis()&#96; method to TeamService",
            "lineNumber": 44
          },
          {
            "text": "- [x] Add &#96;/team/get_clutch_analysis&#96; API endpoint",
            "lineNumber": 45
          }
        ]
      },
      "score": 0.12117534875869751
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\league-stats-app.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 334,
            "column": 1
          }
        },
        "contents": "/**\n * LeagueStatsApp - Main application coordinator for league statistics page\n * Manages content blocks and state synchronization\n */\nclass LeagueStatsApp {\n    constructor() {\n        this.contentBlocks = new Map();\n        this.currentState = {\n            season: null,\n            league: null,\n            league_long: null,\n            week: null,\n            round: null,\n            team: null\n        };\n        this.urlStateManager = new URLStateManager();\n        this.contentRenderer = new LeagueStatsContentRenderer();\n        this.filterManager = null;\n        \n        // Debouncing for content updates\n        this.contentUpdateTimeout = null;\n        this.isRenderingContent = false;\n    }\n\n    async initialize() {\n        try {\n            console.log\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * LeagueStatsApp - Main application coordinator for league statistics page",
            "lineNumber": 2
          },
          {
            "text": " * Manages content blocks and state synchronization",
            "lineNumber": 3
          },
          {
            "text": " */",
            "lineNumber": 4
          },
          {
            "text": "class LeagueStatsApp {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "text": "    constructor() {",
            "lineNumber": 6,
            "isSignature": true
          },
          {
            "text": "        this.contentBlocks = new Map();",
            "lineNumber": 7
          },
          {
            "text": "        this.currentState = {",
            "lineNumber": 8
          },
          {
            "text": "            season: null,",
            "lineNumber": 9
          },
          {
            "text": "            league: null,",
            "lineNumber": 10
          },
          {
            "text": "            league_long: null,",
            "lineNumber": 11
          },
          {
            "text": "            week: null,",
            "lineNumber": 12
          },
          {
            "text": "            round: null,",
            "lineNumber": 13
          },
          {
            "text": "            team: null",
            "lineNumber": 14
          },
          {
            "text": "        };",
            "lineNumber": 15
          },
          {
            "text": "        this.urlStateManager = new URLStateManager();",
            "lineNumber": 16
          },
          {
            "text": "        this.contentRenderer = new LeagueStatsContentRenderer();",
            "lineNumber": 17
          },
          {
            "text": "        this.filterManager = null;",
            "lineNumber": 18
          },
          {
            "text": "        ",
            "lineNumber": 19
          },
          {
            "text": "        // Debouncing for content updates",
            "lineNumber": 20
          },
          {
            "text": "        this.contentUpdateTimeout = null;",
            "lineNumber": 21
          },
          {
            "text": "        this.isRenderingContent = false;",
            "lineNumber": 22
          },
          {
            "text": "    }",
            "lineNumber": 23,
            "isSignature": true
          },
          {
            "lineNumber": 24
          },
          {
            "text": "    async initialize() {",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 26
          },
          {
            "text": "            console.log",
            "lineNumber": 27
          },
          {
            "text": "    }",
            "lineNumber": 71,
            "isSignature": true
          }
        ]
      },
      "score": 0.11919579654932022
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\base.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 14,
            "column": 15
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block content %}\n&lt;div class=\"row\"&gt;\n    &lt;!-- Player Selection Sidebar --&gt;\n    &lt;div class=\"col-md-3\"&gt;\n        {% include 'components/player_select.html' %}\n    &lt;/div&gt;\n    \n    &lt;!-- Main Content Area --&gt;\n    &lt;div class=\"col-md-9\"&gt;\n        {% block player_content %}{% endblock %}\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endblock %} ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block content %}",
            "lineNumber": 3
          },
          {
            "text": "&lt;div class=\"row\"&gt;",
            "lineNumber": 4
          },
          {
            "text": "    &lt;!-- Player Selection Sidebar --&gt;",
            "lineNumber": 5
          },
          {
            "text": "    &lt;div class=\"col-md-3\"&gt;",
            "lineNumber": 6
          },
          {
            "text": "        {% include 'components/player_select.html' %}",
            "lineNumber": 7
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 8
          },
          {
            "text": "    ",
            "lineNumber": 9
          },
          {
            "text": "    &lt;!-- Main Content Area --&gt;",
            "lineNumber": 10
          },
          {
            "text": "    &lt;div class=\"col-md-9\"&gt;",
            "lineNumber": 11
          },
          {
            "text": "        {% block player_content %}{% endblock %}",
            "lineNumber": 12
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 13
          },
          {
            "text": "&lt;/div&gt;",
            "lineNumber": 14
          },
          {
            "text": "{% endblock %} ",
            "lineNumber": 15
          }
        ]
      },
      "score": 0.11575450003147125
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 19,
            "column": 29
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": ")\n# from data_access.series_data import calculate_series_data, get_player_series_data, get_team_series_data\n\n\nclass LeagueService:\n    def __init__(self, adapter_type=DataAdapterSelector.PANDAS, database: str = None):\n        self.database = database\n        self.adapter = DataAdapterFactory.create_adapter(adapter_type, database=database)\n        self.stats_service = StatisticsService(database=database)\n        \n        # Register this adapter with DataManager for automatic refresh\n        try:\n            from app.services.data_manager import DataManager\n            data_manager = DataManager()\n            data_manager.register_server_instance(self)\n        except ImportError:\n            # DataManager not available, continue without registration\n            pass\n\n    def refresh_data_adapter(self, database: str = None):\n        \"\"\"Refresh the data adapter with the current data source\"\"\"\n        if database:\n            self.database = database\n        debug_config.log_service('LeagueService', 'refresh_adapter', f\"database={self.database}\")\n        self.adapter = DataAdapterFactory.create_adapter(DataAdapterSelector.PANDAS, database=self.database)\n\n    def get_available_weeks(self, season: str, league: str) -&gt; List[int]:\n        \"\"\"Get available weeks for a season and league\"\"\"\n        return self.adapter.get_weeks(season, league)\n    \n    def get_latest_week(self, season: str, league: str) -&gt; int:\n        \"\"\"Get the latest week number for a season and league\"\"\"\n        weeks = self.get_available_weeks(season, league)\n        return max(weeks) if weeks else 1\n    \n    def get_seasons(self, league_name: str=None, team_name: str=None) -&gt; List[str]:\n        \"\"\"Get all available seasons\"\"\"\n        # print(f\"####################### Getting seasons for league_name: {league_name} and team_name: {team_name}\")\n        return self.adapter.get_seasons(league_name=league_name, team_name=team_name)\n\n    def get_leagues(self) -&gt; List[str]:\n        \"\"\"Get all available leagues for a season\"\"\"",
        "signatures": {},
        "detailedLines": [
          {
            "text": ")",
            "lineNumber": 21
          },
          {
            "text": "# from data_access.series_data import calculate_series_data, get_player_series_data, get_team_series_data",
            "lineNumber": 22
          },
          {
            "lineNumber": 23
          },
          {
            "lineNumber": 24
          },
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "    def __init__(self, adapter_type=DataAdapterSelector.PANDAS, database: str = None):",
            "lineNumber": 26
          },
          {
            "text": "        self.database = database",
            "lineNumber": 27
          },
          {
            "text": "        self.adapter = DataAdapterFactory.create_adapter(adapter_type, database=database)",
            "lineNumber": 28
          },
          {
            "text": "        self.stats_service = StatisticsService(database=database)",
            "lineNumber": 29
          },
          {
            "text": "        ",
            "lineNumber": 30
          },
          {
            "text": "        # Register this adapter with DataManager for automatic refresh",
            "lineNumber": 31
          },
          {
            "text": "        try:",
            "lineNumber": 32
          },
          {
            "text": "            from app.services.data_manager import DataManager",
            "lineNumber": 33
          },
          {
            "text": "            data_manager = DataManager()",
            "lineNumber": 34
          },
          {
            "text": "            data_manager.register_server_instance(self)",
            "lineNumber": 35
          },
          {
            "text": "        except ImportError:",
            "lineNumber": 36
          },
          {
            "text": "            # DataManager not available, continue without registration",
            "lineNumber": 37
          },
          {
            "text": "            pass",
            "lineNumber": 38
          },
          {
            "lineNumber": 39
          },
          {
            "text": "    def refresh_data_adapter(self, database: str = None):",
            "lineNumber": 40
          },
          {
            "text": "        \"\"\"Refresh the data adapter with the current data source\"\"\"",
            "lineNumber": 41
          },
          {
            "text": "        if database:",
            "lineNumber": 42
          },
          {
            "text": "            self.database = database",
            "lineNumber": 43
          },
          {
            "text": "        debug_config.log_service('LeagueService', 'refresh_adapter', f\"database={self.database}\")",
            "lineNumber": 44
          },
          {
            "text": "        self.adapter = DataAdapterFactory.create_adapter(DataAdapterSelector.PANDAS, database=self.database)",
            "lineNumber": 45
          },
          {
            "lineNumber": 46
          },
          {
            "text": "    def get_available_weeks(self, season: str, league: str) -&gt; List[int]:",
            "lineNumber": 47
          },
          {
            "text": "        \"\"\"Get available weeks for a season and league\"\"\"",
            "lineNumber": 48
          },
          {
            "text": "        return self.adapter.get_weeks(season, league)",
            "lineNumber": 49
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    def get_latest_week(self, season: str, league: str) -&gt; int:",
            "lineNumber": 51
          },
          {
            "text": "        \"\"\"Get the latest week number for a season and league\"\"\"",
            "lineNumber": 52
          },
          {
            "text": "        weeks = self.get_available_weeks(season, league)",
            "lineNumber": 53
          },
          {
            "text": "        return max(weeks) if weeks else 1",
            "lineNumber": 54
          },
          {
            "text": "    ",
            "lineNumber": 55
          },
          {
            "text": "    def get_seasons(self, league_name: str=None, team_name: str=None) -&gt; List[str]:",
            "lineNumber": 56
          },
          {
            "text": "        \"\"\"Get all available seasons\"\"\"",
            "lineNumber": 57
          },
          {
            "text": "        # print(f\"####################### Getting seasons for league_name: {league_name} and team_name: {team_name}\")",
            "lineNumber": 58
          },
          {
            "text": "        return self.adapter.get_seasons(league_name=league_name, team_name=team_name)",
            "lineNumber": 59
          },
          {
            "lineNumber": 60
          },
          {
            "text": "    def get_leagues(self) -&gt; List[str]:",
            "lineNumber": 61
          },
          {
            "text": "        \"\"\"Get all available leagues for a season\"\"\"",
            "lineNumber": 62
          }
        ]
      },
      "score": 0.11540467292070389
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\test.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 51,
            "column": 12
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block title %}API Test Page{% endblock %}\n\n{% block content %}\n{% include \"components/tables.html\" %}\n{% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n    &lt;h1 class=\"mb-4\"&gt;API Test Page&lt;/h1&gt;\n    \n    &lt;!-- Selection Area --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4&gt;Selection Controls&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;div class=\"row mb-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"seasonSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;League&lt;/h5&gt;\n                    &lt;div id=\"leagueSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"weekSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-12\"&gt;\n                    &lt;h5&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"teamSelector\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    \n    &lt;!-- League Routes Card --&gt;\n    &lt;div class=\"card mb-4\"&gt;\n        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block title %}API Test Page{% endblock %}",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "{% block content %}",
            "lineNumber": 5
          },
          {
            "text": "{% include \"components/tables.html\" %}",
            "lineNumber": 6
          },
          {
            "text": "{% include \"components/charts.html\" %}",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;h1 class=\"mb-4\"&gt;API Test Page&lt;/h1&gt;",
            "lineNumber": 10
          },
          {
            "text": "    ",
            "lineNumber": 11
          },
          {
            "text": "    &lt;!-- Selection Area --&gt;",
            "lineNumber": 12
          },
          {
            "text": "    &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;h4&gt;Selection Controls&lt;/h4&gt;",
            "lineNumber": 15
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 16
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "            &lt;div class=\"row mb-3\"&gt;",
            "lineNumber": 18
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                    &lt;h5&gt;Season&lt;/h5&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;div id=\"seasonSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 21
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 22
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 23
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 24
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                    &lt;h5&gt;League&lt;/h5&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;div id=\"leagueSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 27
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 28
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 29
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 30
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                    &lt;h5&gt;Week&lt;/h5&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;div id=\"weekSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 33
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 34
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 36
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 37
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 38
          },
          {
            "text": "                &lt;div class=\"col-md-12\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                    &lt;h5&gt;Team&lt;/h5&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;div id=\"teamSelector\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 41
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 43
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 44
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 45
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 46
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "    ",
            "lineNumber": 48
          },
          {
            "text": "    &lt;!-- League Routes Card --&gt;",
            "lineNumber": 49
          },
          {
            "text": "    &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &lt;div class=\"card-header d-flex justify-content-between align-items-center\"&gt;",
            "lineNumber": 51
          },
          {
            "text": "            ",
            "lineNumber": 52
          }
        ]
      },
      "score": 0.11123070120811462
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "lst|team.*view|team.*details",
  "path": "app/static/js/content-blocks",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "lst|team.*view|team.*details",
    "path": "app/static/js/content-blocks",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\team-details-block.js",
              "matches": [
                {
                  "lineNumber": 2,
                  "content": " * TeamDetailsBlock - Shows team-specific score sheets and details"
                },
                {
                  "lineNumber": 5,
                  "content": "class TeamDetailsBlock extends BaseContentBlock {"
                },
                {
                  "lineNumber": 8,
                  "content": "            id: 'team-details',"
                },
                {
                  "lineNumber": 9,
                  "content": "            containerId: 'teamDetailsContainer',"
                },
                {
                  "lineNumber": 10,
                  "content": "            dataEndpoint: '/league/get_team_week_details_table',"
                },
                {
                  "lineNumber": 12,
                  "content": "            title: 'Team Details'"
                },
                {
                  "lineNumber": 59,
                  "content": "            console.log('team-details: Team details rendered');"
                },
                {
                  "lineNumber": 61,
                  "content": "            console.error('Error rendering team details:', error);"
                },
                {
                  "lineNumber": 62,
                  "content": "            this.container.innerHTML = this.renderError('Failed to load team details');"
                },
                {
                  "lineNumber": 68,
                  "content": "        // (when round is selected, game-team-details-block should show instead)"
                },
                {
                  "lineNumber": 85,
                  "content": "                                &lt;div id=\"teamDetailsMetadata\" class=\"text-muted small\"&gt;"
                },
                {
                  "lineNumber": 90,
                  "content": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewClassic\" value=\"classic\" checked&gt;"
                },
                {
                  "lineNumber": 91,
                  "content": "                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewClassic\"&gt;${typeof t === 'function' ? t('block.team_details.view.classic', 'Classic') : 'Classic'}&lt;/label&gt;"
                },
                {
                  "lineNumber": 92,
                  "content": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewNew\" value=\"new\"&gt;"
                },
                {
                  "lineNumber": 93,
                  "content": "                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewNew\"&gt;${typeof t === 'function' ? t('block.team_details.view.new', 'New') : 'New'}&lt;/label&gt;"
                },
                {
                  "lineNumber": 97,
                  "content": "                            &lt;div id=\"teamTableWeekDetails\"&gt;"
                },
                {
                  "lineNumber": 100,
                  "content": "                                        &lt;span class=\"visually-hidden\"&gt;Loading team details...&lt;/span&gt;"
                },
                {
                  "lineNumber": 128,
                  "content": "            message = typeof t === 'function' ? t('msg.please_select.match_day', 'Please select a match day to view team details.') : 'Please select a match day to view team details.';"
                },
                {
                  "lineNumber": 139,
                  "content": "                                &lt;h5&gt;${typeof t === 'function' ? t('block.team_details.title', 'Score Sheet for Selected Team') : 'Score Sheet for Selected Team'}&lt;/h5&gt;"
                },
                {
                  "lineNumber": 140,
                  "content": "                                &lt;div id=\"teamDetailsMetadata\" class=\"text-muted small\"&gt;&lt;/div&gt;"
                },
                {
                  "lineNumber": 143,
                  "content": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewClassic\" value=\"classic\" checked&gt;"
                },
                {
                  "lineNumber": 144,
                  "content": "                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewClassic\"&gt;Classic&lt;/label&gt;"
                },
                {
                  "lineNumber": 145,
                  "content": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"teamView\" id=\"teamViewNew\" value=\"new\"&gt;"
                },
                {
                  "lineNumber": 146,
                  "content": "                                &lt;label class=\"btn btn-outline-primary btn-sm\" for=\"teamViewNew\"&gt;New&lt;/label&gt;"
                },
                {
                  "lineNumber": 150,
                  "content": "                            &lt;div id=\"teamTableWeekDetails\"&gt;"
                },
                {
                  "lineNumber": 163,
                  "content": "            if (event.target.name === 'teamView') {"
                },
                {
                  "lineNumber": 174,
                  "content": "            // Load team details and individual averages in parallel"
                },
                {
                  "lineNumber": 176,
                  "content": "                this.loadTeamWeekDetails(season, league, week, team, this.currentView),"
                },
                {
                  "lineNumber": 184,
                  "content": "    async loadTeamWeekDetails(season, league, week, team, view = 'classic') {"
                },
                {
                  "lineNumber": 187,
                  "content": "            let endpoint = '/league/get_team_week_details_table';"
                },
                {
                  "lineNumber": 194,
                  "content": "            console.log(&#96;Loading team details with view: ${view}, endpoint: ${endpoint}&#96;);"
                },
                {
                  "lineNumber": 199,
                  "content": "            console.log('Team week details table data:', tableData); // Debug logging"
                },
                {
                  "lineNumber": 201,
                  "content": "            const container = document.getElementById('teamTableWeekDetails');"
                },
                {
                  "lineNumber": 205,
                  "content": "                    disablePositionCircle: true, // Team details should never show color circles for player numbers"
                },
                {
                  "lineNumber": 212,
                  "content": "                    console.log(&#96;Using createTableTabulator function for team details (${view} view)&#96;);"
                },
                {
                  "lineNumber": 213,
                  "content": "                    createTableTabulator('teamTableWeekDetails', tableData, {"
                },
                {
                  "lineNumber": 219,
                  "content": "                    console.log(&#96;Fallback: Using createTableBootstrap3 function for team details (${view} view)&#96;);"
                },
                {
                  "lineNumber": 220,
                  "content": "                    createTableBootstrap3('teamTableWeekDetails', tableData, tableOptions);"
                },
                {
                  "lineNumber": 227,
                  "content": "            console.error('Error loading team week details:', error);"
                },
                {
                  "lineNumber": 228,
                  "content": "            const container = document.getElementById('teamTableWeekDetails');"
                },
                {
                  "lineNumber": 230,
                  "content": "                container.innerHTML = '&lt;div class=\"alert alert-danger\"&gt;Error loading team details&lt;/div&gt;';"
                },
                {
                  "lineNumber": 240,
                  "content": "            // Reload team details with new view"
                },
                {
                  "lineNumber": 241,
                  "content": "            await this.loadTeamWeekDetails("
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-history-block.js",
              "matches": [
                {
                  "lineNumber": 167,
                  "content": "                        ctx.fillStyle = this.getTeamColor(filterState.team);"
                },
                {
                  "lineNumber": 373,
                  "content": "                        &lt;p&gt;${typeof t === 'function' ? t('msg.please_select.team', 'Select a team to view position history') : 'Select a team to view position history'}&lt;/p&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\league-aggregation-block.js",
              "matches": [
                {
                  "lineNumber": 152,
                  "content": "            this.createTopIndividualsTable(topIndividualsData);"
                },
                {
                  "lineNumber": 341,
                  "content": "    createTopIndividualsTable(data) {"
                },
                {
                  "lineNumber": 343,
                  "content": "        console.log(&#96;DEBUG: createTopIndividualsTable called with data:&#96;, data);"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\game-team-details-block.js",
              "matches": [
                {
                  "lineNumber": 2,
                  "content": " * GameTeamDetailsBlock - Shows individual player scores for a specific team in a specific round"
                },
                {
                  "lineNumber": 5,
                  "content": "class GameTeamDetailsBlock extends BaseContentBlock {"
                },
                {
                  "lineNumber": 8,
                  "content": "            id: 'game-team-details',"
                },
                {
                  "lineNumber": 9,
                  "content": "            containerId: 'gameTeamDetailsContainer',"
                },
                {
                  "lineNumber": 10,
                  "content": "            dataEndpoint: '/league/get_game_team_details',"
                },
                {
                  "lineNumber": 12,
                  "content": "            title: 'Game Team Details'"
                },
                {
                  "lineNumber": 52,
                  "content": "            // Load game team details data"
                },
                {
                  "lineNumber": 53,
                  "content": "            await this.loadGameTeamDetailsData(state);"
                },
                {
                  "lineNumber": 55,
                  "content": "            console.log('game-team-details: Game team details content rendered');"
                },
                {
                  "lineNumber": 57,
                  "content": "            console.error('Error rendering game team details content:', error);"
                },
                {
                  "lineNumber": 58,
                  "content": "            this.container.innerHTML = this.renderError('Failed to load game team details content');"
                },
                {
                  "lineNumber": 66,
                  "content": "        console.log(&#96;🎮 GameTeamDetailsBlock.shouldRender:&#96;, {"
                },
                {
                  "lineNumber": 83,
                  "content": "                    &lt;h5 data-i18n=\"game_team_details\"&gt;Game Team Details&lt;/h5&gt;"
                },
                {
                  "lineNumber": 86,
                  "content": "                    &lt;div id=\"tableGameTeamDetails\"&gt;"
                },
                {
                  "lineNumber": 89,
                  "content": "                                &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading_data', 'Loading team details...') : 'Loading team details...'}&lt;/span&gt;"
                },
                {
                  "lineNumber": 102,
                  "content": "                    &lt;h5&gt;${typeof t === 'function' ? t('block.game_team_details.title', 'Game Team Details') : 'Game Team Details'}&lt;/h5&gt;"
                },
                {
                  "lineNumber": 105,
                  "content": "                    &lt;div id=\"gameTeamDetailsMessage\" class=\"alert alert-info\"&gt;"
                },
                {
                  "lineNumber": 113,
                  "content": "    async loadGameTeamDetailsData(state) {"
                },
                {
                  "lineNumber": 117,
                  "content": "            const response = await fetchWithDatabase(&#96;/league/get_game_team_details?season=${season}&amp;league=${league}&amp;week=${week}&amp;team=${encodeURIComponent(team)}&amp;round=${round}&#96;);"
                },
                {
                  "lineNumber": 123,
                  "content": "                const container = document.getElementById('tableGameTeamDetails');"
                },
                {
                  "lineNumber": 125,
                  "content": "                    container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Error loading game team details') : 'Error loading game team details'}: ${errorData.error || response.statusText}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 135,
                  "content": "                const container = document.getElementById('tableGameTeamDetails');"
                },
                {
                  "lineNumber": 137,
                  "content": "                    container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Error loading game team details') : 'Error loading game team details'}: ${tableData.error}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 142,
                  "content": "            console.log('Game team details data:', tableData);"
                },
                {
                  "lineNumber": 144,
                  "content": "            const container = document.getElementById('tableGameTeamDetails');"
                },
                {
                  "lineNumber": 148,
                  "content": "                    console.log('Using createTableBootstrap3 function for game team details table');"
                },
                {
                  "lineNumber": 149,
                  "content": "                    createTableBootstrap3('tableGameTeamDetails', tableData, { "
                },
                {
                  "lineNumber": 150,
                  "content": "                        disablePositionCircle: true, // Game team details doesn't need team color circles"
                },
                {
                  "lineNumber": 164,
                  "content": "            console.error('Error loading game team details:', error);"
                },
                {
                  "lineNumber": 165,
                  "content": "            const container = document.getElementById('tableGameTeamDetails');"
                },
                {
                  "lineNumber": 167,
                  "content": "                container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Error loading game team details') : 'Error loading game team details'}: ${error.message || error}&lt;/div&gt;&#96;;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\league-comparison-block.js",
              "matches": [
                {
                  "lineNumber": 344,
                  "content": "                        &lt;p&gt;${typeof t === 'function' ? t('msg.please_select.team', 'Select a team to view league comparison') : 'Select a team to view league comparison'}&lt;/p&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\clutch-analysis-block.js",
              "matches": [
                {
                  "lineNumber": 396,
                  "content": "                    &lt;p&gt;${typeof t === 'function' ? t('msg.please_select.team', 'Select a team to view clutch performance') : 'Select a team to view clutch performance'}&lt;/p&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\consistency-metrics-block.js",
              "matches": [
                {
                  "lineNumber": 106,
                  "content": "                    &lt;p&gt;${typeof t === 'function' ? t('msg.please_select.team', 'Select a team to view consistency metrics') : 'Select a team to view consistency metrics'}&lt;/p&gt;"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\special-matches-block.js",
              "matches": [
                {
                  "lineNumber": 189,
                  "content": "        const placeholderHtml = &#96;&lt;tr&gt;&lt;td colspan=\"4\" class=\"text-center text-muted\"&gt;${typeof t === 'function' ? t('msg.please_select.team', 'Select a team to view special moments') : 'Select a team to view special moments'}&lt;/td&gt;&lt;/tr&gt;&#96;;"
                },
                {
                  "lineNumber": 190,
                  "content": "        const placeholderHtml3Col = &#96;&lt;tr&gt;&lt;td colspan=\"3\" class=\"text-center text-muted\"&gt;${typeof t === 'function' ? t('msg.please_select.team', 'Select a team to view special moments') : 'Select a team to view special moments'}&lt;/td&gt;&lt;/tr&gt;&#96;;"
                }
              ]
            }
          ],
          "totalLines": 84,
          "totalMatchedLines": 84
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "undefined" • **5** results in **1** directory</summary>

Directory: **app/static/js/content-blocks** (5 files)

| File |
|------|
| `../../../../app\static\js\content-blocks\team-details-block.js` |
| `../../../../app\static\js\content-blocks\team-win-percentage-block.js` |
| `../../../../app\static\js\content-blocks\team-performance-block.js` |
| `../../../../app\static\js\content-blocks\team-history-block.js` |
| `../../../../app\static\js\content-blocks\game-team-details-block.js` |

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "Where are line graphs displayed for team performance with player data?",
  "includePattern": "app/static/js",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking team-performance-block.js and team-win-percentage-block.js for the tables and line graphs:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "Where are bubble charts displayed for points per week in the ls view?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "shouldRender(state) {\n\n    }\n\n    generateHTML(state) {\n        return &#96;\n            &lt;div class=\"card mb-4\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;\n                &lt;/div&gt;\n                \n                &lt;!-- League History Table --&gt;\n                &lt;div id=\"leagueTableHistory\"&gt;\n                    &lt;div class=\"text-center py-3\"&gt;\n                        &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                            &lt;span class=\"visually-hidden\"&gt;Loading table...&lt;/span&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"card-body\"&gt;\n                    &lt;!-- Position Charts --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;!-- Positions over the course of the season --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;            \n                        &lt;!-- Points over the course of the season --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"points_in_season_progress\"&gt;Points in Season Progress&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Shared Legend --&gt;\n                    &lt;div class=\"row mt-3\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"sharedLegend\" class=\"d-flex justify-content-center flex-wrap\"&gt;\n                                &lt;!-- Legend will be dynamically inserted here --&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Points Charts --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;!-- Points per Week Chart --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"points_per_match_day\"&gt;Points per Match Day&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;!-- Average per Week Chart --&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card h-100\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h5 data-i18n=\"average_per_match_day\"&gt;Average per Match Day&lt;/h5&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamAverageScoreWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;!-- Shared Legend --&gt;\n                    &lt;div class=\"row mt-3\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"sharedLegendMiddle\" class=\"d-flex justify-content-center flex-wrap\"&gt;\n                                &lt;!-- Legend will be dynamically inserted here --&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    renderSelectionMessage() {\n        return\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "shouldRender(state) {",
            "lineNumber": 62,
            "isSignature": true
          },
          {
            "lineNumber": 64
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          },
          {
            "lineNumber": 66
          },
          {
            "text": "    generateHTML(state) {",
            "lineNumber": 67,
            "isSignature": true
          },
          {
            "text": "        return &#96;",
            "lineNumber": 68
          },
          {
            "text": "            &lt;div class=\"card mb-4\"&gt;",
            "lineNumber": 69
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 70
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season_overview\"&gt;Season Overview&lt;/h5&gt;",
            "lineNumber": 71
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 72
          },
          {
            "text": "                ",
            "lineNumber": 73
          },
          {
            "text": "                &lt;!-- League History Table --&gt;",
            "lineNumber": 74
          },
          {
            "text": "                &lt;div id=\"leagueTableHistory\"&gt;",
            "lineNumber": 75
          },
          {
            "text": "                    &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 76
          },
          {
            "text": "                        &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;span class=\"visually-hidden\"&gt;Loading table...&lt;/span&gt;",
            "lineNumber": 78
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 81
          },
          {
            "lineNumber": 82
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                    &lt;!-- Position Charts --&gt;",
            "lineNumber": 84
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                        &lt;!-- Positions over the course of the season --&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"position_in_season_progress\"&gt;Position in Season Progress&lt;/h5&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 93
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                        &lt;/div&gt;            ",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;!-- Points over the course of the season --&gt;",
            "lineNumber": 97
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 99
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 100
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"points_in_season_progress\"&gt;Points in Season Progress&lt;/h5&gt;",
            "lineNumber": 101
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 105
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 107
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                    ",
            "lineNumber": 109
          },
          {
            "text": "                    &lt;!-- Shared Legend --&gt;",
            "lineNumber": 110
          },
          {
            "text": "                    &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 111
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                            &lt;div id=\"sharedLegend\" class=\"d-flex justify-content-center flex-wrap\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                &lt;!-- Legend will be dynamically inserted here --&gt;",
            "lineNumber": 114
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 115
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "                    ",
            "lineNumber": 118
          },
          {
            "text": "                    &lt;!-- Points Charts --&gt;",
            "lineNumber": 119
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;!-- Points per Week Chart --&gt;",
            "lineNumber": 121
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 122
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 123
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 124
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"points_per_match_day\"&gt;Points per Match Day&lt;/h5&gt;",
            "lineNumber": 125
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 126
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 129
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 130
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 131
          },
          {
            "text": "                        &lt;!-- Average per Week Chart --&gt;",
            "lineNumber": 132
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 133
          },
          {
            "text": "                            &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 134
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 135
          },
          {
            "text": "                                    &lt;h5 data-i18n=\"average_per_match_day\"&gt;Average per Match Day&lt;/h5&gt;",
            "lineNumber": 136
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 137
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 138
          },
          {
            "text": "                                    &lt;div id=\"chartTeamAverageScoreWeekly\" style=\"width: 100%; min-width: 100%; height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 139
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 140
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 141
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 142
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 143
          },
          {
            "text": "                    ",
            "lineNumber": 144
          },
          {
            "text": "                    &lt;!-- Shared Legend --&gt;",
            "lineNumber": 145
          },
          {
            "text": "                    &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 146
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 147
          },
          {
            "text": "                            &lt;div id=\"sharedLegendMiddle\" class=\"d-flex justify-content-center flex-wrap\"&gt;",
            "lineNumber": 148
          },
          {
            "text": "                                &lt;!-- Legend will be dynamically inserted here --&gt;",
            "lineNumber": 149
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 150
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 151
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 152
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 153
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 154
          },
          {
            "text": "        &#96;;",
            "lineNumber": 155
          },
          {
            "text": "    }",
            "lineNumber": 156,
            "isSignature": true
          },
          {
            "lineNumber": 157
          },
          {
            "text": "    renderSelectionMessage() {",
            "lineNumber": 158,
            "isSignature": true
          },
          {
            "text": "        return",
            "lineNumber": 159
          },
          {
            "text": "    }",
            "lineNumber": 169,
            "isSignature": true
          }
        ]
      },
      "score": 0.32425209879875183
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n 'Match Schedule'}&lt;/p&gt;--&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('position_in_season_progress', 'Position in Season Progress') : 'Position in Season Progress'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 3rd Row: Points per Match Day + Points in Season Progress --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('points_in_season_progress', 'Points in Season Progress') : 'Points in Season Progress'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"individualAveragesCard\"&gt;\n                                &lt;div class=\"text-center py-3\"&gt;\n                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                        &lt;span class=\"visually-hidden\"&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 51,
                "column": 5
              },
              "endPosition": {
                "line": 52,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": " 'Match Schedule'}&lt;/p&gt;--&gt;",
            "lineNumber": 81
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 82
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;",
            "lineNumber": 84
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 85
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 87
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 88
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('position_in_season_progress', 'Position in Season Progress') : 'Position in Season Progress'}&lt;/h6&gt;",
            "lineNumber": 91
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 93
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPositionCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 94
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 95
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 96
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 97
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 98
          },
          {
            "lineNumber": 99
          },
          {
            "text": "                    &lt;!-- 3rd Row: Points per Match Day + Points in Season Progress --&gt;",
            "lineNumber": 100
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 101
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 102
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 103
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 104
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'}&lt;/h6&gt;",
            "lineNumber": 105
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 106
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsWeekly\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 108
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 109
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 110
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 111
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 112
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 114
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('points_in_season_progress', 'Points in Season Progress') : 'Points in Season Progress'}&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 119
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;",
            "lineNumber": 124
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 126
          },
          {
            "text": "                            &lt;div id=\"individualAveragesCard\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;span class=\"visually-hidden\"&gt;",
            "lineNumber": 130
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          }
        ]
      },
      "score": 0.3216952681541443
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "class SeasonOverviewBlock extends BaseContentBlock {\n\n\n    async loadPointsCharts(season, league) {\n        try {\n            const response = await fetchWithDatabase(&#96;/league/get_team_points?season=${season}&amp;league=${league}&#96;);\n            const data = await response.json();\n            \n            // Create labels based on number of weeks\n            const numWeeks = Object.values(data.data)[0]?.length || 0;\n            const matchDayFormat = window.translations ? \n                (window.translations['match_day_format'] || 'Match Day #{week}') : \n                'Match Day #{week}';\n            const labels = Array.from({length: numWeeks}, (_, i) =&gt; \n                matchDayFormat.replace('{week}', i + 1)\n            );\n\n            if (typeof createScatterChartMultiAxis === 'function') {\n                createScatterChartMultiAxis(\n                    data.data,\n                    data.sorted_by_total,\n                    'chartTeamPointsWeekly',\n                    'Points per Match Day',\n                    labels\n                );\n            }\n\n            if (typeof createLineChart === 'function') {\n                createLineChart(\n                    data.data_accumulated,\n                    data.sorted_by_total,\n                    'chartTeamPointsCumulated',\n                    'Points in Season Progress',\n                    labels,\n                    false, // don't reverse Y axis for points\n                    'auto' // use auto Y-axis limits with padding for points\n                );\n            }\n            \n        } catch (error) {\n            console.error('Error loading points charts:', error);\n        }\n    }\n\n    async loadAverageChart(season, league) {\n        try\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    async loadPointsCharts(season, league) {",
            "lineNumber": 262,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 263
          },
          {
            "text": "            const response = await fetchWithDatabase(&#96;/league/get_team_points?season=${season}&amp;league=${league}&#96;);",
            "lineNumber": 264
          },
          {
            "text": "            const data = await response.json();",
            "lineNumber": 265
          },
          {
            "text": "            ",
            "lineNumber": 266
          },
          {
            "text": "            // Create labels based on number of weeks",
            "lineNumber": 267
          },
          {
            "text": "            const numWeeks = Object.values(data.data)[0]?.length || 0;",
            "lineNumber": 268
          },
          {
            "text": "            const matchDayFormat = window.translations ? ",
            "lineNumber": 269
          },
          {
            "text": "                (window.translations['match_day_format'] || 'Match Day #{week}') : ",
            "lineNumber": 270
          },
          {
            "text": "                'Match Day #{week}';",
            "lineNumber": 271
          },
          {
            "text": "            const labels = Array.from({length: numWeeks}, (_, i) =&gt; ",
            "lineNumber": 272
          },
          {
            "text": "                matchDayFormat.replace('{week}', i + 1)",
            "lineNumber": 273
          },
          {
            "text": "            );",
            "lineNumber": 274
          },
          {
            "lineNumber": 275
          },
          {
            "text": "            if (typeof createScatterChartMultiAxis === 'function') {",
            "lineNumber": 276
          },
          {
            "text": "                createScatterChartMultiAxis(",
            "lineNumber": 277
          },
          {
            "text": "                    data.data,",
            "lineNumber": 278
          },
          {
            "text": "                    data.sorted_by_total,",
            "lineNumber": 279
          },
          {
            "text": "                    'chartTeamPointsWeekly',",
            "lineNumber": 280
          },
          {
            "text": "                    'Points per Match Day',",
            "lineNumber": 281
          },
          {
            "text": "                    labels",
            "lineNumber": 282
          },
          {
            "text": "                );",
            "lineNumber": 283
          },
          {
            "text": "            }",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "            if (typeof createLineChart === 'function') {",
            "lineNumber": 286
          },
          {
            "text": "                createLineChart(",
            "lineNumber": 287
          },
          {
            "text": "                    data.data_accumulated,",
            "lineNumber": 288
          },
          {
            "text": "                    data.sorted_by_total,",
            "lineNumber": 289
          },
          {
            "text": "                    'chartTeamPointsCumulated',",
            "lineNumber": 290
          },
          {
            "text": "                    'Points in Season Progress',",
            "lineNumber": 291
          },
          {
            "text": "                    labels,",
            "lineNumber": 292
          },
          {
            "text": "                    false, // don't reverse Y axis for points",
            "lineNumber": 293
          },
          {
            "text": "                    'auto' // use auto Y-axis limits with padding for points",
            "lineNumber": 294
          },
          {
            "text": "                );",
            "lineNumber": 295
          },
          {
            "text": "            }",
            "lineNumber": 296
          },
          {
            "text": "            ",
            "lineNumber": 297
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 298
          },
          {
            "text": "            console.error('Error loading points charts:', error);",
            "lineNumber": 299
          },
          {
            "text": "        }",
            "lineNumber": 300
          },
          {
            "text": "    }",
            "lineNumber": 301,
            "isSignature": true
          },
          {
            "lineNumber": 302
          },
          {
            "text": "    async loadAverageChart(season, league) {",
            "lineNumber": 303,
            "isSignature": true
          },
          {
            "text": "        try",
            "lineNumber": 304
          },
          {
            "text": "    }",
            "lineNumber": 332,
            "isSignature": true
          }
        ]
      },
      "score": 0.3119438886642456
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    createWeeklyPointsChart(data) {\n        console.log('DEBUG: createWeeklyPointsChart called with data:', data);\n        \n        if (typeof createScatterChartMultiAxis === 'function' &amp;&amp; data &amp;&amp; data.data) {\n            const firstTeamData = Object.values(data.data)[0];\n            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {\n                const numWeeks = firstTeamData.length;\n                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';\n                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);\n                \n                createScatterChartMultiAxis(\n                    data.data,\n                    data.sorted_by_total,\n                    'chartTeamPointsWeekly',\n                    'Points per Match Day',\n                    labels\n                );\n            } else {\n                console.warn('createWeeklyPointsChart: data.data does not contain valid array data');\n            }\n        } else {\n            console.warn('createWeeklyPointsChart: createScatterChartMultiAxis not available or data.data missing', {\n                hasCreateScatterChartMultiAxis: typeof createScatterChartMultiAxis === 'function',\n                hasData: !!data,\n                hasDataProperty: data &amp;&amp; !!data.data\n            });\n        }\n    }\n\n    async loadTeamVsTeamComparison(league, season) {\n        // Use shared utility function that handles both loading and rendering\n        if\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 375
          },
          {
            "lineNumber": 376
          },
          {
            "text": "    createWeeklyPointsChart(data) {",
            "lineNumber": 377,
            "isSignature": true
          },
          {
            "text": "        console.log('DEBUG: createWeeklyPointsChart called with data:', data);",
            "lineNumber": 378
          },
          {
            "text": "        ",
            "lineNumber": 379
          },
          {
            "text": "        if (typeof createScatterChartMultiAxis === 'function' &amp;&amp; data &amp;&amp; data.data) {",
            "lineNumber": 380
          },
          {
            "text": "            const firstTeamData = Object.values(data.data)[0];",
            "lineNumber": 381
          },
          {
            "text": "            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {",
            "lineNumber": 382
          },
          {
            "text": "                const numWeeks = firstTeamData.length;",
            "lineNumber": 383
          },
          {
            "text": "                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';",
            "lineNumber": 384
          },
          {
            "text": "                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);",
            "lineNumber": 385
          },
          {
            "text": "                ",
            "lineNumber": 386
          },
          {
            "text": "                createScatterChartMultiAxis(",
            "lineNumber": 387
          },
          {
            "text": "                    data.data,",
            "lineNumber": 388
          },
          {
            "text": "                    data.sorted_by_total,",
            "lineNumber": 389
          },
          {
            "text": "                    'chartTeamPointsWeekly',",
            "lineNumber": 390
          },
          {
            "text": "                    'Points per Match Day',",
            "lineNumber": 391
          },
          {
            "text": "                    labels",
            "lineNumber": 392
          },
          {
            "text": "                );",
            "lineNumber": 393
          },
          {
            "text": "            } else {",
            "lineNumber": 394
          },
          {
            "text": "                console.warn('createWeeklyPointsChart: data.data does not contain valid array data');",
            "lineNumber": 395
          },
          {
            "text": "            }",
            "lineNumber": 396
          },
          {
            "text": "        } else {",
            "lineNumber": 397
          },
          {
            "text": "            console.warn('createWeeklyPointsChart: createScatterChartMultiAxis not available or data.data missing', {",
            "lineNumber": 398
          },
          {
            "text": "                hasCreateScatterChartMultiAxis: typeof createScatterChartMultiAxis === 'function',",
            "lineNumber": 399
          },
          {
            "text": "                hasData: !!data,",
            "lineNumber": 400
          },
          {
            "text": "                hasDataProperty: data &amp;&amp; !!data.data",
            "lineNumber": 401
          },
          {
            "text": "            });",
            "lineNumber": 402
          },
          {
            "text": "        }",
            "lineNumber": 403
          },
          {
            "text": "    }",
            "lineNumber": 404,
            "isSignature": true
          },
          {
            "lineNumber": 405
          },
          {
            "text": "    async loadTeamVsTeamComparison(league, season) {",
            "lineNumber": 406,
            "isSignature": true
          },
          {
            "text": "        // Use shared utility function that handles both loading and rendering",
            "lineNumber": 407
          },
          {
            "text": "        if",
            "lineNumber": 408
          },
          {
            "text": "    }",
            "lineNumber": 428,
            "isSignature": true
          }
        ]
      },
      "score": 0.30731120705604553
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\content.html",
        "range": {
          "startPosition": {
            "line": 333
          },
          "endPosition": {
            "line": 384,
            "column": 15
          }
        },
        "contents": "                }\n            ]\n        };\n\n        window.trendChart = new Chart(ctx, {\n            type: 'bubble',\n            data: chartData,\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    x: {\n                        type: 'category',\n                        title: {\n                            display: true,\n                            text: 'Season'\n                        }\n                    },\n                    y: {\n                        title: {\n                            display: true,\n                            text: 'Average Score'\n                        },\n                        beginAtZero: false\n                    }\n                },\n                plugins: {\n                    tooltip: {\n                        callbacks: {\n                            label: function(context) {\n                                const dataIndex = context.dataIndex;\n                                if (context.dataset.label === 'Season Average') {\n                                    return [\n                                        &#96;Average: ${(data.seasons[dataIndex]?.average || 0).toFixed(1)}&#96;,\n                                        &#96;Games: ${data.seasons[dataIndex]?.games || 0}&#96;\n                                    ];\n                                }\n                                return &#96;All-Time Average: ${(data.lifetime?.average_score || 0).toFixed(1)}&#96;;\n                            }\n                        }\n                    },\n                    legend: {\n                        display: true,\n                        position: 'top'\n                    }\n                }\n            }\n        });\n    }\n});\n&lt;/script&gt;\n{% endblock %} ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                }",
            "lineNumber": 334
          },
          {
            "text": "            ]",
            "lineNumber": 335
          },
          {
            "text": "        };",
            "lineNumber": 336
          },
          {
            "lineNumber": 337
          },
          {
            "text": "        window.trendChart = new Chart(ctx, {",
            "lineNumber": 338
          },
          {
            "text": "            type: 'bubble',",
            "lineNumber": 339
          },
          {
            "text": "            data: chartData,",
            "lineNumber": 340
          },
          {
            "text": "            options: {",
            "lineNumber": 341
          },
          {
            "text": "                responsive: true,",
            "lineNumber": 342
          },
          {
            "text": "                maintainAspectRatio: false,",
            "lineNumber": 343
          },
          {
            "text": "                scales: {",
            "lineNumber": 344
          },
          {
            "text": "                    x: {",
            "lineNumber": 345
          },
          {
            "text": "                        type: 'category',",
            "lineNumber": 346
          },
          {
            "text": "                        title: {",
            "lineNumber": 347
          },
          {
            "text": "                            display: true,",
            "lineNumber": 348
          },
          {
            "text": "                            text: 'Season'",
            "lineNumber": 349
          },
          {
            "text": "                        }",
            "lineNumber": 350
          },
          {
            "text": "                    },",
            "lineNumber": 351
          },
          {
            "text": "                    y: {",
            "lineNumber": 352
          },
          {
            "text": "                        title: {",
            "lineNumber": 353
          },
          {
            "text": "                            display: true,",
            "lineNumber": 354
          },
          {
            "text": "                            text: 'Average Score'",
            "lineNumber": 355
          },
          {
            "text": "                        },",
            "lineNumber": 356
          },
          {
            "text": "                        beginAtZero: false",
            "lineNumber": 357
          },
          {
            "text": "                    }",
            "lineNumber": 358
          },
          {
            "text": "                },",
            "lineNumber": 359
          },
          {
            "text": "                plugins: {",
            "lineNumber": 360
          },
          {
            "text": "                    tooltip: {",
            "lineNumber": 361
          },
          {
            "text": "                        callbacks: {",
            "lineNumber": 362
          },
          {
            "text": "                            label: function(context) {",
            "lineNumber": 363
          },
          {
            "text": "                                const dataIndex = context.dataIndex;",
            "lineNumber": 364
          },
          {
            "text": "                                if (context.dataset.label === 'Season Average') {",
            "lineNumber": 365
          },
          {
            "text": "                                    return [",
            "lineNumber": 366
          },
          {
            "text": "                                        &#96;Average: ${(data.seasons[dataIndex]?.average || 0).toFixed(1)}&#96;,",
            "lineNumber": 367
          },
          {
            "text": "                                        &#96;Games: ${data.seasons[dataIndex]?.games || 0}&#96;",
            "lineNumber": 368
          },
          {
            "text": "                                    ];",
            "lineNumber": 369
          },
          {
            "text": "                                }",
            "lineNumber": 370
          },
          {
            "text": "                                return &#96;All-Time Average: ${(data.lifetime?.average_score || 0).toFixed(1)}&#96;;",
            "lineNumber": 371
          },
          {
            "text": "                            }",
            "lineNumber": 372
          },
          {
            "text": "                        }",
            "lineNumber": 373
          },
          {
            "text": "                    },",
            "lineNumber": 374
          },
          {
            "text": "                    legend: {",
            "lineNumber": 375
          },
          {
            "text": "                        display: true,",
            "lineNumber": 376
          },
          {
            "text": "                        position: 'top'",
            "lineNumber": 377
          },
          {
            "text": "                    }",
            "lineNumber": 378
          },
          {
            "text": "                }",
            "lineNumber": 379
          },
          {
            "text": "            }",
            "lineNumber": 380
          },
          {
            "text": "        });",
            "lineNumber": 381
          },
          {
            "text": "    }",
            "lineNumber": 382
          },
          {
            "text": "});",
            "lineNumber": 383
          },
          {
            "text": "&lt;/script&gt;",
            "lineNumber": 384
          },
          {
            "text": "{% endblock %} ",
            "lineNumber": 385
          }
        ]
      },
      "score": 0.29245078563690186
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\team\\stats.html",
        "range": {
          "startPosition": {
            "line": 45
          },
          "endPosition": {
            "line": 107,
            "column": 12
          }
        },
        "contents": "        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-3\"&gt;\n                &lt;div class=\"card h-100\"&gt;\n                    &lt;div class=\"card-header\"&gt;\n                        &lt;h5&gt;Spieltag&lt;/h5&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"card-body\"&gt;\n                        &lt;div id=\"buttonsWeek\" class=\"btn-group-vertical w-100\"&gt;\n                            &lt;!-- Buttons will be inserted here --&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Team History Chart (Content Block) --&gt;\n    &lt;div class=\"row mt-4\"&gt;\n        &lt;div class=\"col-md-12\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;Platzierungsverlauf \n                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;\n                    &lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;canvas id=\"chartTeamHistory\" width=\"800\" height=\"400\"&gt;&lt;/canvas&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- League Comparison Section (Content Block) --&gt;\n    &lt;div class=\"row mt-4\"&gt;\n        &lt;div class=\"col-md-8\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;Leistung vs. Liga-Durchschnitt \n                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;\n                    &lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;canvas id=\"chartLeagueComparison\" width=\"600\" height=\"400\"&gt;&lt;/canvas&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        \n        &lt;div class=\"col-md-4\"&gt;\n            &lt;div class=\"card\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                    &lt;h5&gt;Liga-Vergleich Details&lt;/h5&gt;\n                &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                    &lt;div id=\"tableLeagueComparison\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Clutch &amp; Consistency Section (Legacy) --&gt;\n    &lt;div class=\"row mt-4\"&gt;\n        &lt;div class=\"col-md-6\"&gt;\n            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        &lt;div class=\"row\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "            &lt;div class=\"col-md-3\"&gt;",
            "lineNumber": 47
          },
          {
            "text": "                &lt;div class=\"card h-100\"&gt;",
            "lineNumber": 48
          },
          {
            "text": "                    &lt;div class=\"card-header\"&gt;",
            "lineNumber": 49
          },
          {
            "text": "                        &lt;h5&gt;Spieltag&lt;/h5&gt;",
            "lineNumber": 50
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 51
          },
          {
            "text": "                    &lt;div class=\"card-body\"&gt;",
            "lineNumber": 52
          },
          {
            "text": "                        &lt;div id=\"buttonsWeek\" class=\"btn-group-vertical w-100\"&gt;",
            "lineNumber": 53
          },
          {
            "text": "                            &lt;!-- Buttons will be inserted here --&gt;",
            "lineNumber": 54
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 55
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 56
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 57
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 58
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 59
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 60
          },
          {
            "lineNumber": 61
          },
          {
            "text": "    &lt;!-- Team History Chart (Content Block) --&gt;",
            "lineNumber": 62
          },
          {
            "text": "    &lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 63
          },
          {
            "text": "        &lt;div class=\"col-md-12\"&gt;",
            "lineNumber": 64
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 65
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 66
          },
          {
            "text": "                    &lt;h5&gt;Platzierungsverlauf ",
            "lineNumber": 67
          },
          {
            "text": "                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;",
            "lineNumber": 68
          },
          {
            "text": "                    &lt;/h5&gt;",
            "lineNumber": 69
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 70
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 71
          },
          {
            "text": "                    &lt;canvas id=\"chartTeamHistory\" width=\"800\" height=\"400\"&gt;&lt;/canvas&gt;",
            "lineNumber": 72
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 73
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 74
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 75
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 76
          },
          {
            "lineNumber": 77
          },
          {
            "text": "    &lt;!-- League Comparison Section (Content Block) --&gt;",
            "lineNumber": 78
          },
          {
            "text": "    &lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 79
          },
          {
            "text": "        &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 81
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 82
          },
          {
            "text": "                    &lt;h5&gt;Leistung vs. Liga-Durchschnitt ",
            "lineNumber": 83
          },
          {
            "text": "                        &lt;span class=\"badge bg-success ms-2\"&gt;Content Block&lt;/span&gt;",
            "lineNumber": 84
          },
          {
            "text": "                    &lt;/h5&gt;",
            "lineNumber": 85
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 86
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 87
          },
          {
            "text": "                    &lt;canvas id=\"chartLeagueComparison\" width=\"600\" height=\"400\"&gt;&lt;/canvas&gt;",
            "lineNumber": 88
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 90
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "        ",
            "lineNumber": 92
          },
          {
            "text": "        &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 93
          },
          {
            "text": "            &lt;div class=\"card\"&gt;",
            "lineNumber": 94
          },
          {
            "text": "                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 95
          },
          {
            "text": "                    &lt;h5&gt;Liga-Vergleich Details&lt;/h5&gt;",
            "lineNumber": 96
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 97
          },
          {
            "text": "                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 98
          },
          {
            "text": "                    &lt;div id=\"tableLeagueComparison\"&gt;&lt;/div&gt;",
            "lineNumber": 99
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 100
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "lineNumber": 104
          },
          {
            "text": "    &lt;!-- Clutch &amp; Consistency Section (Legacy) --&gt;",
            "lineNumber": 105
          },
          {
            "text": "    &lt;div class=\"row mt-4\"&gt;",
            "lineNumber": 106
          },
          {
            "text": "        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "            ",
            "lineNumber": 108
          }
        ]
      },
      "score": 0.2870999872684479
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n\n    createPointsChart(data) {\n        console.log('DEBUG: createPointsChart called with data:', data);\n        \n        if (typeof createLineChart === 'function' &amp;&amp; data &amp;&amp; data.data_accumulated) {\n            const firstTeamData = Object.values(data.data_accumulated)[0];\n            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {\n                const numWeeks = firstTeamData.length;\n                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';\n                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);\n                \n                createLineChart(\n                    data.data_accumulated,\n                    data.sorted_by_total,\n                    'chartTeamPointsCumulated',\n                    'Points in Season Progress',\n                    labels,\n                    false,\n                    'auto'\n                );\n            } else {\n                console.warn('createPointsChart: data.data_accumulated does not contain valid array data');\n            }\n        } else {\n            console.warn('createPointsChart: createLineChart not available or data.data_accumulated missing', {\n                hasCreateLineChart: typeof createLineChart === 'function',\n                hasData: !!data,\n                hasDataAccumulated: data &amp;&amp; !!data.data_accumulated\n            });\n        }\n    }\n\n    createPositionsChart(data) {\n        console.log('DEBUG: createPositionsChart called with data:', data);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 312
          },
          {
            "lineNumber": 313
          },
          {
            "lineNumber": 314
          },
          {
            "text": "    createPointsChart(data) {",
            "lineNumber": 315,
            "isSignature": true
          },
          {
            "text": "        console.log('DEBUG: createPointsChart called with data:', data);",
            "lineNumber": 316
          },
          {
            "text": "        ",
            "lineNumber": 317
          },
          {
            "text": "        if (typeof createLineChart === 'function' &amp;&amp; data &amp;&amp; data.data_accumulated) {",
            "lineNumber": 318
          },
          {
            "text": "            const firstTeamData = Object.values(data.data_accumulated)[0];",
            "lineNumber": 319
          },
          {
            "text": "            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {",
            "lineNumber": 320
          },
          {
            "text": "                const numWeeks = firstTeamData.length;",
            "lineNumber": 321
          },
          {
            "text": "                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';",
            "lineNumber": 322
          },
          {
            "text": "                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);",
            "lineNumber": 323
          },
          {
            "text": "                ",
            "lineNumber": 324
          },
          {
            "text": "                createLineChart(",
            "lineNumber": 325
          },
          {
            "text": "                    data.data_accumulated,",
            "lineNumber": 326
          },
          {
            "text": "                    data.sorted_by_total,",
            "lineNumber": 327
          },
          {
            "text": "                    'chartTeamPointsCumulated',",
            "lineNumber": 328
          },
          {
            "text": "                    'Points in Season Progress',",
            "lineNumber": 329
          },
          {
            "text": "                    labels,",
            "lineNumber": 330
          },
          {
            "text": "                    false,",
            "lineNumber": 331
          },
          {
            "text": "                    'auto'",
            "lineNumber": 332
          },
          {
            "text": "                );",
            "lineNumber": 333
          },
          {
            "text": "            } else {",
            "lineNumber": 334
          },
          {
            "text": "                console.warn('createPointsChart: data.data_accumulated does not contain valid array data');",
            "lineNumber": 335
          },
          {
            "text": "            }",
            "lineNumber": 336
          },
          {
            "text": "        } else {",
            "lineNumber": 337
          },
          {
            "text": "            console.warn('createPointsChart: createLineChart not available or data.data_accumulated missing', {",
            "lineNumber": 338
          },
          {
            "text": "                hasCreateLineChart: typeof createLineChart === 'function',",
            "lineNumber": 339
          },
          {
            "text": "                hasData: !!data,",
            "lineNumber": 340
          },
          {
            "text": "                hasDataAccumulated: data &amp;&amp; !!data.data_accumulated",
            "lineNumber": 341
          },
          {
            "text": "            });",
            "lineNumber": 342
          },
          {
            "text": "        }",
            "lineNumber": 343
          },
          {
            "text": "    }",
            "lineNumber": 344,
            "isSignature": true
          },
          {
            "lineNumber": 345
          },
          {
            "text": "    createPositionsChart(data) {",
            "lineNumber": 346,
            "isSignature": true
          },
          {
            "text": "        console.log('DEBUG: createPositionsChart called with data:', data);",
            "lineNumber": 347
          },
          {
            "text": "    }",
            "lineNumber": 375,
            "isSignature": true
          }
        ]
      },
      "score": 0.27302899956703186
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\response-display-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 1019,
            "column": 1
          }
        },
        "contents": "class ResponseDisplayBlock extends BaseContentBlock {\n\n    \n    /**\n     * Render chart using existing ECharts functions\n     */\n    async renderChart() {\n        // Wait for container to be available\n        await new Promise(resolve =&gt; setTimeout(resolve, 100));\n        \n        const container = document.getElementById('responseChart');\n        if (!container) {\n            console.warn('Chart container not found');\n            return;\n        }\n        \n        const data = this.currentResponse.data;\n        const chartData = this.prepareChartData(data, this.chartType);\n        \n        if (!chartData) {\n            console.warn('Could not prepare chart data');\n            return;\n        }\n        \n        try {\n            // Use existing chart functions based on chart type\n            switch (this.chartType) {\n                case 'line':\n                    createLineChart(chartData.data, chartData.order, 'responseChart', 'API Response Data', chartData.labels);\n                    break;\n                case 'bar':\n                    createHorizontalBarChart(chartData.values, 'responseChart', 'API Response Data', chartData.labels);\n                    break;\n                case 'scatter':\n                    if (chartData.isTeamPointsFormat) {\n                        // Use multi-axis scatter chart for team points data (like \"Points per Match Day\")\n                        createScatterChartMultiAxis(chartData.data, chartData.order, 'responseChart', 'Points per Match Day', chartData.labels);\n                    } else {\n                        // Use vanilla scatter chart for regular array data\n                        createScatterChart_vanilla(chartData.scatterData, 'responseChart', 'API Response Data', chartData.axisLabels);\n                    }\n                    break;\n                case 'area':\n                    // Use line chart with area fill for now\n                    createLineChart\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ResponseDisplayBlock extends BaseContentBlock {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 755
          },
          {
            "text": "    ",
            "lineNumber": 756
          },
          {
            "text": "    /**",
            "lineNumber": 757
          },
          {
            "text": "     * Render chart using existing ECharts functions",
            "lineNumber": 758
          },
          {
            "text": "     */",
            "lineNumber": 759
          },
          {
            "text": "    async renderChart() {",
            "lineNumber": 760,
            "isSignature": true
          },
          {
            "text": "        // Wait for container to be available",
            "lineNumber": 761
          },
          {
            "text": "        await new Promise(resolve =&gt; setTimeout(resolve, 100));",
            "lineNumber": 762
          },
          {
            "text": "        ",
            "lineNumber": 763
          },
          {
            "text": "        const container = document.getElementById('responseChart');",
            "lineNumber": 764
          },
          {
            "text": "        if (!container) {",
            "lineNumber": 765
          },
          {
            "text": "            console.warn('Chart container not found');",
            "lineNumber": 766
          },
          {
            "text": "            return;",
            "lineNumber": 767
          },
          {
            "text": "        }",
            "lineNumber": 768
          },
          {
            "text": "        ",
            "lineNumber": 769
          },
          {
            "text": "        const data = this.currentResponse.data;",
            "lineNumber": 770
          },
          {
            "text": "        const chartData = this.prepareChartData(data, this.chartType);",
            "lineNumber": 771
          },
          {
            "text": "        ",
            "lineNumber": 772
          },
          {
            "text": "        if (!chartData) {",
            "lineNumber": 773
          },
          {
            "text": "            console.warn('Could not prepare chart data');",
            "lineNumber": 774
          },
          {
            "text": "            return;",
            "lineNumber": 775
          },
          {
            "text": "        }",
            "lineNumber": 776
          },
          {
            "text": "        ",
            "lineNumber": 777
          },
          {
            "text": "        try {",
            "lineNumber": 778
          },
          {
            "text": "            // Use existing chart functions based on chart type",
            "lineNumber": 779
          },
          {
            "text": "            switch (this.chartType) {",
            "lineNumber": 780
          },
          {
            "text": "                case 'line':",
            "lineNumber": 781
          },
          {
            "text": "                    createLineChart(chartData.data, chartData.order, 'responseChart', 'API Response Data', chartData.labels);",
            "lineNumber": 782
          },
          {
            "text": "                    break;",
            "lineNumber": 783
          },
          {
            "text": "                case 'bar':",
            "lineNumber": 784
          },
          {
            "text": "                    createHorizontalBarChart(chartData.values, 'responseChart', 'API Response Data', chartData.labels);",
            "lineNumber": 785
          },
          {
            "text": "                    break;",
            "lineNumber": 786
          },
          {
            "text": "                case 'scatter':",
            "lineNumber": 787
          },
          {
            "text": "                    if (chartData.isTeamPointsFormat) {",
            "lineNumber": 788
          },
          {
            "text": "                        // Use multi-axis scatter chart for team points data (like \"Points per Match Day\")",
            "lineNumber": 789
          },
          {
            "text": "                        createScatterChartMultiAxis(chartData.data, chartData.order, 'responseChart', 'Points per Match Day', chartData.labels);",
            "lineNumber": 790
          },
          {
            "text": "                    } else {",
            "lineNumber": 791
          },
          {
            "text": "                        // Use vanilla scatter chart for regular array data",
            "lineNumber": 792
          },
          {
            "text": "                        createScatterChart_vanilla(chartData.scatterData, 'responseChart', 'API Response Data', chartData.axisLabels);",
            "lineNumber": 793
          },
          {
            "text": "                    }",
            "lineNumber": 794
          },
          {
            "text": "                    break;",
            "lineNumber": 795
          },
          {
            "text": "                case 'area':",
            "lineNumber": 796
          },
          {
            "text": "                    // Use line chart with area fill for now",
            "lineNumber": 797
          },
          {
            "text": "                    createLineChart",
            "lineNumber": 798
          },
          {
            "text": "    }",
            "lineNumber": 806,
            "isSignature": true
          }
        ]
      },
      "score": 0.2712324857711792
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\response-display-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 1019,
            "column": 1
          }
        },
        "contents": "class ResponseDisplayBlock extends BaseContentBlock {\n\n    \n    /**\n     * Render chart view\n     */\n    renderChartView() {\n        const data = this.currentResponse.data;\n        const availableCharts = this.detectAvailableChartTypes(data);\n        \n        return &#96;\n            &lt;div class=\"chart-viewer\"&gt;\n                &lt;div class=\"d-flex justify-content-between align-items-center mb-3\"&gt;\n                    &lt;div&gt;\n                        &lt;small class=\"text-muted\"&gt;Chart Type:&lt;/small&gt;\n                        &lt;div class=\"btn-group btn-group-sm ms-2\" role=\"group\"&gt;\n                            ${availableCharts.map(type =&gt; &#96;\n                                &lt;input type=\"radio\" class=\"btn-check\" name=\"chartType\" id=\"chart${type}\" value=\"${type}\" ${type === this.chartType ? 'checked' : ''}&gt;\n                                &lt;label class=\"btn btn-outline-secondary\" for=\"chart${type}\"&gt;\n                                    ${this.getChartIcon(type)} ${this.capitalize(type)}\n                                &lt;/label&gt;\n                            &#96;).join('')}\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;button class=\"btn btn-outline-secondary btn-sm\" onclick=\"window.responseDisplayBlock.exportChart()\"&gt;\n                        &lt;i class=\"bi bi-download me-1\"&gt;&lt;/i&gt;Export\n                    &lt;/button&gt;\n                &lt;/div&gt;\n                \n                &lt;div class=\"chart-container\" style=\"position: relative; height: 400px; width: 100%;\"&gt;\n                    &lt;div id=\"responseChart\" style=\"width: 100%; height: 400px;\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n                \n                &lt;div class=\"chart-info mt-2\"&gt;\n                    &lt;small class=\"text-muted\"&gt;\n                        &lt;i class=\"bi bi-info-circle me-1\"&gt;&lt;/i&gt;\n                        Data points: ${this.getDataPointCount(data)} | \n                        Chart type: ${this.capitalize(this.chartType)}\n                    &lt;/small&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n    \n    /**\n     * Format JSON with syntax highlighting\n     */\n    formatJSON(data) {\n        if\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ResponseDisplayBlock extends BaseContentBlock {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 294
          },
          {
            "text": "    ",
            "lineNumber": 295
          },
          {
            "text": "    /**",
            "lineNumber": 296
          },
          {
            "text": "     * Render chart view",
            "lineNumber": 297
          },
          {
            "text": "     */",
            "lineNumber": 298
          },
          {
            "text": "    renderChartView() {",
            "lineNumber": 299,
            "isSignature": true
          },
          {
            "text": "        const data = this.currentResponse.data;",
            "lineNumber": 300
          },
          {
            "text": "        const availableCharts = this.detectAvailableChartTypes(data);",
            "lineNumber": 301
          },
          {
            "text": "        ",
            "lineNumber": 302
          },
          {
            "text": "        return &#96;",
            "lineNumber": 303
          },
          {
            "text": "            &lt;div class=\"chart-viewer\"&gt;",
            "lineNumber": 304
          },
          {
            "text": "                &lt;div class=\"d-flex justify-content-between align-items-center mb-3\"&gt;",
            "lineNumber": 305
          },
          {
            "text": "                    &lt;div&gt;",
            "lineNumber": 306
          },
          {
            "text": "                        &lt;small class=\"text-muted\"&gt;Chart Type:&lt;/small&gt;",
            "lineNumber": 307
          },
          {
            "text": "                        &lt;div class=\"btn-group btn-group-sm ms-2\" role=\"group\"&gt;",
            "lineNumber": 308
          },
          {
            "text": "                            ${availableCharts.map(type =&gt; &#96;",
            "lineNumber": 309
          },
          {
            "text": "                                &lt;input type=\"radio\" class=\"btn-check\" name=\"chartType\" id=\"chart${type}\" value=\"${type}\" ${type === this.chartType ? 'checked' : ''}&gt;",
            "lineNumber": 310
          },
          {
            "text": "                                &lt;label class=\"btn btn-outline-secondary\" for=\"chart${type}\"&gt;",
            "lineNumber": 311
          },
          {
            "text": "                                    ${this.getChartIcon(type)} ${this.capitalize(type)}",
            "lineNumber": 312
          },
          {
            "text": "                                &lt;/label&gt;",
            "lineNumber": 313
          },
          {
            "text": "                            &#96;).join('')}",
            "lineNumber": 314
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 315
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 316
          },
          {
            "text": "                    &lt;button class=\"btn btn-outline-secondary btn-sm\" onclick=\"window.responseDisplayBlock.exportChart()\"&gt;",
            "lineNumber": 317
          },
          {
            "text": "                        &lt;i class=\"bi bi-download me-1\"&gt;&lt;/i&gt;Export",
            "lineNumber": 318
          },
          {
            "text": "                    &lt;/button&gt;",
            "lineNumber": 319
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 320
          },
          {
            "text": "                ",
            "lineNumber": 321
          },
          {
            "text": "                &lt;div class=\"chart-container\" style=\"position: relative; height: 400px; width: 100%;\"&gt;",
            "lineNumber": 322
          },
          {
            "text": "                    &lt;div id=\"responseChart\" style=\"width: 100%; height: 400px;\"&gt;&lt;/div&gt;",
            "lineNumber": 323
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 324
          },
          {
            "text": "                ",
            "lineNumber": 325
          },
          {
            "text": "                &lt;div class=\"chart-info mt-2\"&gt;",
            "lineNumber": 326
          },
          {
            "text": "                    &lt;small class=\"text-muted\"&gt;",
            "lineNumber": 327
          },
          {
            "text": "                        &lt;i class=\"bi bi-info-circle me-1\"&gt;&lt;/i&gt;",
            "lineNumber": 328
          },
          {
            "text": "                        Data points: ${this.getDataPointCount(data)} | ",
            "lineNumber": 329
          },
          {
            "text": "                        Chart type: ${this.capitalize(this.chartType)}",
            "lineNumber": 330
          },
          {
            "text": "                    &lt;/small&gt;",
            "lineNumber": 331
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 332
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 333
          },
          {
            "text": "        &#96;;",
            "lineNumber": 334
          },
          {
            "text": "    }",
            "lineNumber": 335,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 336
          },
          {
            "text": "    /**",
            "lineNumber": 337
          },
          {
            "text": "     * Format JSON with syntax highlighting",
            "lineNumber": 338
          },
          {
            "text": "     */",
            "lineNumber": 339
          },
          {
            "text": "    formatJSON(data) {",
            "lineNumber": 340,
            "isSignature": true
          },
          {
            "text": "        if",
            "lineNumber": 341
          },
          {
            "text": "    }",
            "lineNumber": 356,
            "isSignature": true
          }
        ]
      },
      "score": 0.2658613920211792
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\league\\stats.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 52
          }
        },
        "contents": "{% extends \"base.html\" %}\n\n{% block content %}\n    {% include \"components/tables.html\" %}\n    {% include \"components/charts.html\" %}\n\n&lt;div class=\"container-fluid\"&gt;\n\n    &lt;!-- Filter Controls --&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;div class=\"card-header\"&gt;\n            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"card-body\"&gt;\n            &lt;!-- Selection Area --&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;\n                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Leagues will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;\n                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Seasons will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;\n                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Weeks will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row mt-3\"&gt;\n                &lt;div class=\"col-md-4\"&gt;\n                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;\n                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Rounds/Games will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"col-md-8\"&gt;\n                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;\n                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;\n                        &lt;!-- Teams will be inserted here --&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;",
        "signatures": {},
        "detailedLines": [
          {
            "text": "{% extends \"base.html\" %}",
            "lineNumber": 1
          },
          {
            "lineNumber": 2
          },
          {
            "text": "{% block content %}",
            "lineNumber": 3
          },
          {
            "text": "    {% include \"components/tables.html\" %}",
            "lineNumber": 4
          },
          {
            "text": "    {% include \"components/charts.html\" %}",
            "lineNumber": 5
          },
          {
            "lineNumber": 6
          },
          {
            "text": "&lt;div class=\"container-fluid\"&gt;",
            "lineNumber": 7
          },
          {
            "lineNumber": 8
          },
          {
            "text": "    &lt;!-- Filter Controls --&gt;",
            "lineNumber": 9
          },
          {
            "text": "    &lt;div class=\"card\"&gt;",
            "lineNumber": 10
          },
          {
            "text": "        &lt;div class=\"card-header\"&gt;",
            "lineNumber": 11
          },
          {
            "text": "            &lt;h4 data-i18n=\"league_statistics\"&gt;League Statistics&lt;/h4&gt;",
            "lineNumber": 12
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 13
          },
          {
            "text": "        &lt;div class=\"card-body\"&gt;",
            "lineNumber": 14
          },
          {
            "text": "            &lt;!-- Selection Area --&gt;",
            "lineNumber": 15
          },
          {
            "text": "            &lt;div class=\"row\"&gt;",
            "lineNumber": 16
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 17
          },
          {
            "text": "                    &lt;h5 data-i18n=\"league\"&gt;League&lt;/h5&gt;",
            "lineNumber": 18
          },
          {
            "text": "                    &lt;div id=\"buttonsLeague\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 19
          },
          {
            "text": "                        &lt;!-- Leagues will be inserted here --&gt;",
            "lineNumber": 20
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 21
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 22
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 23
          },
          {
            "text": "                    &lt;h5 data-i18n=\"season\"&gt;Season&lt;/h5&gt;",
            "lineNumber": 24
          },
          {
            "text": "                    &lt;div id=\"buttonsSeason\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 25
          },
          {
            "text": "                        &lt;!-- Seasons will be inserted here --&gt;",
            "lineNumber": 26
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 27
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 28
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 29
          },
          {
            "text": "                    &lt;h5 data-i18n=\"week\"&gt;Week&lt;/h5&gt;",
            "lineNumber": 30
          },
          {
            "text": "                    &lt;div id=\"buttonsWeek\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 31
          },
          {
            "text": "                        &lt;!-- Weeks will be inserted here --&gt;",
            "lineNumber": 32
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 33
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 34
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 35
          },
          {
            "text": "            &lt;div class=\"row mt-3\"&gt;",
            "lineNumber": 36
          },
          {
            "text": "                &lt;div class=\"col-md-4\"&gt;",
            "lineNumber": 37
          },
          {
            "text": "                    &lt;h5 data-i18n=\"game\"&gt;Game / Spiel&lt;/h5&gt;",
            "lineNumber": 38
          },
          {
            "text": "                    &lt;div id=\"buttonsRound\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 39
          },
          {
            "text": "                        &lt;!-- Rounds/Games will be inserted here --&gt;",
            "lineNumber": 40
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 41
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 42
          },
          {
            "text": "                &lt;div class=\"col-md-8\"&gt;",
            "lineNumber": 43
          },
          {
            "text": "                    &lt;h5 data-i18n=\"team\"&gt;Team&lt;/h5&gt;",
            "lineNumber": 44
          },
          {
            "text": "                    &lt;div id=\"buttonsTeam\" class=\"btn-group-horizontal w-100\"&gt;",
            "lineNumber": 45
          },
          {
            "text": "                        &lt;!-- Teams will be inserted here --&gt;",
            "lineNumber": 46
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 47
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 48
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 49
          },
          {
            "text": "        &lt;/div&gt;",
            "lineNumber": 50
          },
          {
            "text": "    &lt;/div&gt;",
            "lineNumber": 51
          }
        ]
      },
      "score": 0.26552510261535645
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": "class LeagueService:\n\n\n    def _get_league_level(self, league: str) -&gt; int:\n        \"\"\"Get the level of a league (delegates to utility function)\"\"\"\n        return get_league_level(league)\n\n    def get_league_performance_chart(self, season: str, league: str, team_id: Optional[str] = None) -&gt; PlotData:\n        \"\"\"\n        Get a chart showing team performance over time.\n        \n        Args:\n            season: The season identifier\n            league: The league name\n            team_id: Optional team ID to highlight (if None, shows all teams)\n            \n        Returns:\n            PlotData object with team performance data\n        \"\"\"\n        # Get league standings\n        standings = self.get_league_standings(season, league)\n        \n        if not standings.teams:\n            return PlotData(\n                title=f\"{i18n_service.get_text('no_data_available_for')} {league} - {season}\",\n                series=[]\n            )\n        \n        # Get all weeks in the season\n        weeks = sorted(set(\n            perf.week for team in standings.teams \n            for perf in team.weekly_performances\n        ))\n        \n        # Prepare series data for each team\n        series = []\n        for team in standings.teams:\n            # Skip teams that aren't the highlighted team (if specified)\n            if team_id and team.team_id != team_id:\n                continue\n                \n            # Create a map of week to points for this team\n            week_to_points = {p.week: p.points for p in team.weekly_performances}\n            \n            # Calculate cumulative points for each week\n            cumulative_points = []\n            total = 0\n            for week in weeks:\n                total += week_to_points.get(week, 0)\n                cumulative_points.append(total)\n            \n            # Add this team's series\n            series.append({\n                \"name\": team.team_name,\n                \"data\": cumulative_points\n            })\n        \n        # Create and return the PlotData\n        return",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 259,
                "column": 5
              },
              "endPosition": {
                "line": 260,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "lineNumber": 576
          },
          {
            "lineNumber": 577
          },
          {
            "text": "    def _get_league_level(self, league: str) -&gt; int:",
            "lineNumber": 578
          },
          {
            "text": "        \"\"\"Get the level of a league (delegates to utility function)\"\"\"",
            "lineNumber": 579
          },
          {
            "text": "        return get_league_level(league)",
            "lineNumber": 580
          },
          {
            "lineNumber": 581
          },
          {
            "text": "    def get_league_performance_chart(self, season: str, league: str, team_id: Optional[str] = None) -&gt; PlotData:",
            "lineNumber": 582
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 583
          },
          {
            "text": "        Get a chart showing team performance over time.",
            "lineNumber": 584
          },
          {
            "text": "        ",
            "lineNumber": 585
          },
          {
            "text": "        Args:",
            "lineNumber": 586
          },
          {
            "text": "            season: The season identifier",
            "lineNumber": 587
          },
          {
            "text": "            league: The league name",
            "lineNumber": 588
          },
          {
            "text": "            team_id: Optional team ID to highlight (if None, shows all teams)",
            "lineNumber": 589
          },
          {
            "text": "            ",
            "lineNumber": 590
          },
          {
            "text": "        Returns:",
            "lineNumber": 591
          },
          {
            "text": "            PlotData object with team performance data",
            "lineNumber": 592
          },
          {
            "text": "        \"\"\"",
            "lineNumber": 593
          },
          {
            "text": "        # Get league standings",
            "lineNumber": 594
          },
          {
            "text": "        standings = self.get_league_standings(season, league)",
            "lineNumber": 595
          },
          {
            "text": "        ",
            "lineNumber": 596
          },
          {
            "text": "        if not standings.teams:",
            "lineNumber": 597
          },
          {
            "text": "            return PlotData(",
            "lineNumber": 598
          },
          {
            "text": "                title=f\"{i18n_service.get_text('no_data_available_for')} {league} - {season}\",",
            "lineNumber": 599
          },
          {
            "text": "                series=[]",
            "lineNumber": 600
          },
          {
            "text": "            )",
            "lineNumber": 601
          },
          {
            "text": "        ",
            "lineNumber": 602
          },
          {
            "text": "        # Get all weeks in the season",
            "lineNumber": 603
          },
          {
            "text": "        weeks = sorted(set(",
            "lineNumber": 604
          },
          {
            "text": "            perf.week for team in standings.teams ",
            "lineNumber": 605
          },
          {
            "text": "            for perf in team.weekly_performances",
            "lineNumber": 606
          },
          {
            "text": "        ))",
            "lineNumber": 607
          },
          {
            "text": "        ",
            "lineNumber": 608
          },
          {
            "text": "        # Prepare series data for each team",
            "lineNumber": 609
          },
          {
            "text": "        series = []",
            "lineNumber": 610
          },
          {
            "text": "        for team in standings.teams:",
            "lineNumber": 611
          },
          {
            "text": "            # Skip teams that aren't the highlighted team (if specified)",
            "lineNumber": 612
          },
          {
            "text": "            if team_id and team.team_id != team_id:",
            "lineNumber": 613
          },
          {
            "text": "                continue",
            "lineNumber": 614
          },
          {
            "text": "                ",
            "lineNumber": 615
          },
          {
            "text": "            # Create a map of week to points for this team",
            "lineNumber": 616
          },
          {
            "text": "            week_to_points = {p.week: p.points for p in team.weekly_performances}",
            "lineNumber": 617
          },
          {
            "text": "            ",
            "lineNumber": 618
          },
          {
            "text": "            # Calculate cumulative points for each week",
            "lineNumber": 619
          },
          {
            "text": "            cumulative_points = []",
            "lineNumber": 620
          },
          {
            "text": "            total = 0",
            "lineNumber": 621
          },
          {
            "text": "            for week in weeks:",
            "lineNumber": 622
          },
          {
            "text": "                total += week_to_points.get(week, 0)",
            "lineNumber": 623
          },
          {
            "text": "                cumulative_points.append(total)",
            "lineNumber": 624
          },
          {
            "text": "            ",
            "lineNumber": 625
          },
          {
            "text": "            # Add this team's series",
            "lineNumber": 626
          },
          {
            "text": "            series.append({",
            "lineNumber": 627
          },
          {
            "text": "                \"name\": team.team_name,",
            "lineNumber": 628
          },
          {
            "text": "                \"data\": cumulative_points",
            "lineNumber": 629
          },
          {
            "text": "            })",
            "lineNumber": 630
          },
          {
            "text": "        ",
            "lineNumber": 631
          },
          {
            "text": "        # Create and return the PlotData",
            "lineNumber": 632
          },
          {
            "text": "        return",
            "lineNumber": 633
          }
        ]
      },
      "score": 0.2569405138492584
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "async loadSeasonData(state) {\n\n            if (pointsData) {\n                this.createPointsChart(pointsData);\n                this.createWeeklyPointsChart(pointsData);\n            }\n            if (positionsData) this.createPositionsChart(positionsData);\n            \n            // Load and render individual averages using shared utility\n            this.loadIndividualAverages(league, season);\n            \n            // Load and render team vs team comparison using shared utility\n            this.loadTeamVsTeamComparison(league, season);\n\n        } catch (error) {\n            console.error('Error loading season data:', error);\n        }\n    }\n\n    async loadTimetable(league, season) {\n        // TODO: Create endpoint for season timetable\n        const response = await fetchWithDatabase;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 148,
                "column": 5
              },
              "endPosition": {
                "line": 149,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async loadSeasonData(state) {",
            "lineNumber": 148,
            "isSignature": true
          },
          {
            "lineNumber": 191
          },
          {
            "text": "            if (pointsData) {",
            "lineNumber": 192
          },
          {
            "text": "                this.createPointsChart(pointsData);",
            "lineNumber": 193
          },
          {
            "text": "                this.createWeeklyPointsChart(pointsData);",
            "lineNumber": 194
          },
          {
            "text": "            }",
            "lineNumber": 195
          },
          {
            "text": "            if (positionsData) this.createPositionsChart(positionsData);",
            "lineNumber": 196
          },
          {
            "text": "            ",
            "lineNumber": 197
          },
          {
            "text": "            // Load and render individual averages using shared utility",
            "lineNumber": 198
          },
          {
            "text": "            this.loadIndividualAverages(league, season);",
            "lineNumber": 199
          },
          {
            "text": "            ",
            "lineNumber": 200
          },
          {
            "text": "            // Load and render team vs team comparison using shared utility",
            "lineNumber": 201
          },
          {
            "text": "            this.loadTeamVsTeamComparison(league, season);",
            "lineNumber": 202
          },
          {
            "lineNumber": 203
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 204
          },
          {
            "text": "            console.error('Error loading season data:', error);",
            "lineNumber": 205
          },
          {
            "text": "        }",
            "lineNumber": 206
          },
          {
            "text": "    }",
            "lineNumber": 207,
            "isSignature": true
          },
          {
            "lineNumber": 208
          },
          {
            "text": "    async loadTimetable(league, season) {",
            "lineNumber": 209,
            "isSignature": true
          },
          {
            "text": "        // TODO: Create endpoint for season timetable",
            "lineNumber": 210
          },
          {
            "text": "        const response = await fetchWithDatabase;",
            "lineNumber": 211
          },
          {
            "text": "    }",
            "lineNumber": 216,
            "isSignature": true
          }
        ]
      },
      "score": 0.2547709047794342
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": "class LeagueService:\ndef get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:\n\n                )\n            ]\n            \n            # Add totals column group first (after ranking) - matches data order\n            columns.append(\n                ColumnGroup(\n                    title=\"Total\",\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    highlighted=True,  # Highlight the Total group\n                    columns=[\n                        Column(title=i18n_service.get_text(\"points\"), field=\"season_points\", format=\"{:,}\", width=\"75px\"),\n                        Column(title=i18n_service.get_text(\"pins\"), field=\"season_score\", format=\"{:,}\", width=\"75px\"),\n                        Column(title=i18n_service.get_text(\"average\"), field=\"season_avg\", format=\"{:.1f}\", width=\"75px\")\n                    ]\n                )\n            )\n\n            # Add weekly column groups after totals\n            for w in weeks_to_show:\n                columns.append(\n                    ColumnGroup(\n                        title=f\"{i18n_service.get_text('week')} {w}\",\n                        columns=[\n                            Column(title=i18n_service.get_text(\"points\"), field=f\"week{w}_points\", format=\"{:.1f}\", width=\"75px\"),\n                            Column(title=i18n_service.get_text(\"score\"), field=f\"week{w}_score\", format=\"{:,}\", width=\"75px\"),\n                            Column(title=i18n_service.get_text(\"average\"), field=f\"week{w}_avg\", format=\"{:.1f}\", width=\"75px\")\n                        ]\n                    )\n                )\n\n            \n            # Prepare the data rows\n            data = []\n            for i, team in enumerate(sorted_teams, 1):\n                team_info = team_data[team]\n                \n                # Start with position and team name\n                row = [i, team]",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1420,
                "column": 5
              },
              "endPosition": {
                "line": 1421,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:",
            "lineNumber": 1420
          },
          {
            "lineNumber": 1578
          },
          {
            "text": "                )",
            "lineNumber": 1579
          },
          {
            "text": "            ]",
            "lineNumber": 1580
          },
          {
            "text": "            ",
            "lineNumber": 1581
          },
          {
            "text": "            # Add totals column group first (after ranking) - matches data order",
            "lineNumber": 1582
          },
          {
            "text": "            columns.append(",
            "lineNumber": 1583
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1584
          },
          {
            "text": "                    title=\"Total\",",
            "lineNumber": 1585
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 1586
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 1587
          },
          {
            "text": "                    highlighted=True,  # Highlight the Total group",
            "lineNumber": 1588
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1589
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"season_points\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1590
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"season_score\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1591
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"average\"), field=\"season_avg\", format=\"{:.1f}\", width=\"75px\")",
            "lineNumber": 1592
          },
          {
            "text": "                    ]",
            "lineNumber": 1593
          },
          {
            "text": "                )",
            "lineNumber": 1594
          },
          {
            "text": "            )",
            "lineNumber": 1595
          },
          {
            "lineNumber": 1596
          },
          {
            "text": "            # Add weekly column groups after totals",
            "lineNumber": 1597
          },
          {
            "text": "            for w in weeks_to_show:",
            "lineNumber": 1598
          },
          {
            "text": "                columns.append(",
            "lineNumber": 1599
          },
          {
            "text": "                    ColumnGroup(",
            "lineNumber": 1600
          },
          {
            "text": "                        title=f\"{i18n_service.get_text('week')} {w}\",",
            "lineNumber": 1601
          },
          {
            "text": "                        columns=[",
            "lineNumber": 1602
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"points\"), field=f\"week{w}_points\", format=\"{:.1f}\", width=\"75px\"),",
            "lineNumber": 1603
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"score\"), field=f\"week{w}_score\", format=\"{:,}\", width=\"75px\"),",
            "lineNumber": 1604
          },
          {
            "text": "                            Column(title=i18n_service.get_text(\"average\"), field=f\"week{w}_avg\", format=\"{:.1f}\", width=\"75px\")",
            "lineNumber": 1605
          },
          {
            "text": "                        ]",
            "lineNumber": 1606
          },
          {
            "text": "                    )",
            "lineNumber": 1607
          },
          {
            "text": "                )",
            "lineNumber": 1608
          },
          {
            "lineNumber": 1609
          },
          {
            "text": "            ",
            "lineNumber": 1610
          },
          {
            "text": "            # Prepare the data rows",
            "lineNumber": 1611
          },
          {
            "text": "            data = []",
            "lineNumber": 1612
          },
          {
            "text": "            for i, team in enumerate(sorted_teams, 1):",
            "lineNumber": 1613
          },
          {
            "text": "                team_info = team_data[team]",
            "lineNumber": 1614
          },
          {
            "text": "                ",
            "lineNumber": 1615
          },
          {
            "text": "                # Start with position and team name",
            "lineNumber": 1616
          },
          {
            "text": "                row = [i, team]",
            "lineNumber": 1617
          }
        ]
      },
      "score": 0.25183725357055664
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"individualAveragesCard\"&gt;\n                                &lt;div class=\"text-center py-3\"&gt;\n                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;\n                                        &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading individual averages...') : 'Loading individual averages...'}&lt;/span&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- 5th Row: Team vs Team Comparison Matrix (Full Width) --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-12\"&gt;\n                            &lt;div id=\"team-vs-team-comparison-inline\"&gt;&lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n\n    async loadSeasonData(state) {\n        const { league, season } = state;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 51,
                "column": 5
              },
              "endPosition": {
                "line": 52,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 51,
            "isSignature": true
          },
          {
            "text": "&lt;/h6&gt;",
            "lineNumber": 115
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 117
          },
          {
            "text": "                                    &lt;div id=\"chartTeamPointsCumulated\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 118
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 119
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 121
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 122
          },
          {
            "lineNumber": 123
          },
          {
            "text": "                    &lt;!-- 4th Row: Individual Averages (Full Width) --&gt;",
            "lineNumber": 124
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 125
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 126
          },
          {
            "text": "                            &lt;div id=\"individualAveragesCard\"&gt;",
            "lineNumber": 127
          },
          {
            "text": "                                &lt;div class=\"text-center py-3\"&gt;",
            "lineNumber": 128
          },
          {
            "text": "                                    &lt;div class=\"spinner-border text-primary\" role=\"status\"&gt;",
            "lineNumber": 129
          },
          {
            "text": "                                        &lt;span class=\"visually-hidden\"&gt;${typeof t === 'function' ? t('status.loading', 'Loading individual averages...') : 'Loading individual averages...'}&lt;/span&gt;",
            "lineNumber": 130
          },
          {
            "text": "                                    &lt;/div&gt;",
            "lineNumber": 131
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 132
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 133
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 134
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 135
          },
          {
            "lineNumber": 136
          },
          {
            "text": "                    &lt;!-- 5th Row: Team vs Team Comparison Matrix (Full Width) --&gt;",
            "lineNumber": 137
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 138
          },
          {
            "text": "                        &lt;div class=\"col-12\"&gt;",
            "lineNumber": 139
          },
          {
            "text": "                            &lt;div id=\"team-vs-team-comparison-inline\"&gt;&lt;/div&gt;",
            "lineNumber": 140
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 141
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 142
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 143
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 144
          },
          {
            "text": "        &#96;;",
            "lineNumber": 145
          },
          {
            "text": "    }",
            "lineNumber": 146,
            "isSignature": true
          },
          {
            "lineNumber": 147
          },
          {
            "text": "    async loadSeasonData(state) {",
            "lineNumber": 148,
            "isSignature": true
          },
          {
            "text": "        const { league, season } = state;",
            "lineNumber": 149
          },
          {
            "text": "    }",
            "lineNumber": 207,
            "isSignature": true
          }
        ]
      },
      "score": 0.24318963289260864
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\player\\content.html",
        "range": {
          "startPosition": {
            "line": 281
          },
          "endPosition": {
            "line": 337
          }
        },
        "contents": "        if (existingChart) {\n            existingChart.destroy();\n        }\n\n        // Check if we have valid data for the chart\n        if (!data || !data.seasons || !Array.isArray(data.seasons) || data.seasons.length === 0 || !data.lifetime) {\n            console.warn('Insufficient data for trend chart:', data);\n            ctx.style.display = 'none';\n            return;\n        }\n\n        ctx.style.display = 'block';\n\n        const chartData = {\n            datasets: [\n                {\n                    label: 'Season Average',\n                    data: data.seasons.map((season, i) =&gt; ({\n                        x: season.season || &#96;Season ${i}&#96;,\n                        y: season.average || 0,\n                        r: (season.games || 0) / 5\n                    })),\n                    backgroundColor: 'rgba(54, 162, 235, 0.6)',\n                    borderColor: 'rgba(54, 162, 235, 1)',\n                    pointStyle: 'circle'\n                },\n                {\n                    label: 'Trend Line',\n                    showInLegend: false,\n                    data: data.seasons.map((season, i) =&gt; ({\n                        x: season.season || &#96;Season ${i}&#96;,\n                        y: season.average || 0\n                    })),\n                    type: 'line',\n                    borderColor: 'rgba(54, 162, 235, 0.6)',\n                    fill: false,\n                    tension: 0.1,\n                    showLine: true,\n                    pointRadius: 0\n                },\n                {\n                    label: 'All-Time Average',\n                    data: data.seasons.map(season =&gt; ({\n                        x: season.season || 'Unknown',\n                        y: data.lifetime.average_score || 0\n                    })),\n                    type: 'line',\n                    borderColor: 'rgba(128, 128, 128, 0.6)',\n                    borderDash: [5, 5],\n                    pointStyle: 'line',\n                    fill: false,\n                    tension: 0\n                }\n            ]\n        };",
        "signatures": {},
        "detailedLines": [
          {
            "text": "        if (existingChart) {",
            "lineNumber": 282
          },
          {
            "text": "            existingChart.destroy();",
            "lineNumber": 283
          },
          {
            "text": "        }",
            "lineNumber": 284
          },
          {
            "lineNumber": 285
          },
          {
            "text": "        // Check if we have valid data for the chart",
            "lineNumber": 286
          },
          {
            "text": "        if (!data || !data.seasons || !Array.isArray(data.seasons) || data.seasons.length === 0 || !data.lifetime) {",
            "lineNumber": 287
          },
          {
            "text": "            console.warn('Insufficient data for trend chart:', data);",
            "lineNumber": 288
          },
          {
            "text": "            ctx.style.display = 'none';",
            "lineNumber": 289
          },
          {
            "text": "            return;",
            "lineNumber": 290
          },
          {
            "text": "        }",
            "lineNumber": 291
          },
          {
            "lineNumber": 292
          },
          {
            "text": "        ctx.style.display = 'block';",
            "lineNumber": 293
          },
          {
            "lineNumber": 294
          },
          {
            "text": "        const chartData = {",
            "lineNumber": 295
          },
          {
            "text": "            datasets: [",
            "lineNumber": 296
          },
          {
            "text": "                {",
            "lineNumber": 297
          },
          {
            "text": "                    label: 'Season Average',",
            "lineNumber": 298
          },
          {
            "text": "                    data: data.seasons.map((season, i) =&gt; ({",
            "lineNumber": 299
          },
          {
            "text": "                        x: season.season || &#96;Season ${i}&#96;,",
            "lineNumber": 300
          },
          {
            "text": "                        y: season.average || 0,",
            "lineNumber": 301
          },
          {
            "text": "                        r: (season.games || 0) / 5",
            "lineNumber": 302
          },
          {
            "text": "                    })),",
            "lineNumber": 303
          },
          {
            "text": "                    backgroundColor: 'rgba(54, 162, 235, 0.6)',",
            "lineNumber": 304
          },
          {
            "text": "                    borderColor: 'rgba(54, 162, 235, 1)',",
            "lineNumber": 305
          },
          {
            "text": "                    pointStyle: 'circle'",
            "lineNumber": 306
          },
          {
            "text": "                },",
            "lineNumber": 307
          },
          {
            "text": "                {",
            "lineNumber": 308
          },
          {
            "text": "                    label: 'Trend Line',",
            "lineNumber": 309
          },
          {
            "text": "                    showInLegend: false,",
            "lineNumber": 310
          },
          {
            "text": "                    data: data.seasons.map((season, i) =&gt; ({",
            "lineNumber": 311
          },
          {
            "text": "                        x: season.season || &#96;Season ${i}&#96;,",
            "lineNumber": 312
          },
          {
            "text": "                        y: season.average || 0",
            "lineNumber": 313
          },
          {
            "text": "                    })),",
            "lineNumber": 314
          },
          {
            "text": "                    type: 'line',",
            "lineNumber": 315
          },
          {
            "text": "                    borderColor: 'rgba(54, 162, 235, 0.6)',",
            "lineNumber": 316
          },
          {
            "text": "                    fill: false,",
            "lineNumber": 317
          },
          {
            "text": "                    tension: 0.1,",
            "lineNumber": 318
          },
          {
            "text": "                    showLine: true,",
            "lineNumber": 319
          },
          {
            "text": "                    pointRadius: 0",
            "lineNumber": 320
          },
          {
            "text": "                },",
            "lineNumber": 321
          },
          {
            "text": "                {",
            "lineNumber": 322
          },
          {
            "text": "                    label: 'All-Time Average',",
            "lineNumber": 323
          },
          {
            "text": "                    data: data.seasons.map(season =&gt; ({",
            "lineNumber": 324
          },
          {
            "text": "                        x: season.season || 'Unknown',",
            "lineNumber": 325
          },
          {
            "text": "                        y: data.lifetime.average_score || 0",
            "lineNumber": 326
          },
          {
            "text": "                    })),",
            "lineNumber": 327
          },
          {
            "text": "                    type: 'line',",
            "lineNumber": 328
          },
          {
            "text": "                    borderColor: 'rgba(128, 128, 128, 0.6)',",
            "lineNumber": 329
          },
          {
            "text": "                    borderDash: [5, 5],",
            "lineNumber": 330
          },
          {
            "text": "                    pointStyle: 'line',",
            "lineNumber": 331
          },
          {
            "text": "                    fill: false,",
            "lineNumber": 332
          },
          {
            "text": "                    tension: 0",
            "lineNumber": 333
          },
          {
            "text": "                }",
            "lineNumber": 334
          },
          {
            "text": "            ]",
            "lineNumber": 335
          },
          {
            "text": "        };",
            "lineNumber": 336
          }
        ]
      },
      "score": 0.24209916591644287
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    createPositionsChart(data) {\n        console.log('DEBUG: createPositionsChart called with data:', data);\n        \n        if (typeof createLineChart === 'function' &amp;&amp; data &amp;&amp; data.data) {\n            const firstTeamData = Object.values(data.data)[0];\n            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {\n                const numWeeks = firstTeamData.length;\n                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';\n                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);\n                \n                createLineChart(\n                    data.data,\n                    data.sorted_by_best || data.sorted_by_total || Object.keys(data.data),\n                    'chartTeamPositionCumulated',\n                    'Position in Season Progress',\n                    labels,\n                    true, // reverse Y axis for positions\n                    'exact' // use exact Y-axis limits for positions\n                );\n            } else {\n                console.warn('createPositionsChart: data.data does not contain valid array data');\n            }\n        } else {\n            console.warn('createPositionsChart: createLineChart not available or data.data missing', {\n                hasCreateLineChart: typeof createLineChart === 'function',\n                hasData: !!data,\n                hasDataProperty: data &amp;&amp; !!data.data\n            });\n        }\n    }\n\n    createWeeklyPointsChart(data) {\n        console.log('DEBUG: createWeeklyPointsChart called with data:', data);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 344
          },
          {
            "lineNumber": 345
          },
          {
            "text": "    createPositionsChart(data) {",
            "lineNumber": 346,
            "isSignature": true
          },
          {
            "text": "        console.log('DEBUG: createPositionsChart called with data:', data);",
            "lineNumber": 347
          },
          {
            "text": "        ",
            "lineNumber": 348
          },
          {
            "text": "        if (typeof createLineChart === 'function' &amp;&amp; data &amp;&amp; data.data) {",
            "lineNumber": 349
          },
          {
            "text": "            const firstTeamData = Object.values(data.data)[0];",
            "lineNumber": 350
          },
          {
            "text": "            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {",
            "lineNumber": 351
          },
          {
            "text": "                const numWeeks = firstTeamData.length;",
            "lineNumber": 352
          },
          {
            "text": "                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';",
            "lineNumber": 353
          },
          {
            "text": "                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);",
            "lineNumber": 354
          },
          {
            "text": "                ",
            "lineNumber": 355
          },
          {
            "text": "                createLineChart(",
            "lineNumber": 356
          },
          {
            "text": "                    data.data,",
            "lineNumber": 357
          },
          {
            "text": "                    data.sorted_by_best || data.sorted_by_total || Object.keys(data.data),",
            "lineNumber": 358
          },
          {
            "text": "                    'chartTeamPositionCumulated',",
            "lineNumber": 359
          },
          {
            "text": "                    'Position in Season Progress',",
            "lineNumber": 360
          },
          {
            "text": "                    labels,",
            "lineNumber": 361
          },
          {
            "text": "                    true, // reverse Y axis for positions",
            "lineNumber": 362
          },
          {
            "text": "                    'exact' // use exact Y-axis limits for positions",
            "lineNumber": 363
          },
          {
            "text": "                );",
            "lineNumber": 364
          },
          {
            "text": "            } else {",
            "lineNumber": 365
          },
          {
            "text": "                console.warn('createPositionsChart: data.data does not contain valid array data');",
            "lineNumber": 366
          },
          {
            "text": "            }",
            "lineNumber": 367
          },
          {
            "text": "        } else {",
            "lineNumber": 368
          },
          {
            "text": "            console.warn('createPositionsChart: createLineChart not available or data.data missing', {",
            "lineNumber": 369
          },
          {
            "text": "                hasCreateLineChart: typeof createLineChart === 'function',",
            "lineNumber": 370
          },
          {
            "text": "                hasData: !!data,",
            "lineNumber": 371
          },
          {
            "text": "                hasDataProperty: data &amp;&amp; !!data.data",
            "lineNumber": 372
          },
          {
            "text": "            });",
            "lineNumber": 373
          },
          {
            "text": "        }",
            "lineNumber": 374
          },
          {
            "text": "    }",
            "lineNumber": 375,
            "isSignature": true
          },
          {
            "lineNumber": 376
          },
          {
            "text": "    createWeeklyPointsChart(data) {",
            "lineNumber": 377,
            "isSignature": true
          },
          {
            "text": "        console.log('DEBUG: createWeeklyPointsChart called with data:', data);",
            "lineNumber": 378
          },
          {
            "text": "    }",
            "lineNumber": 404,
            "isSignature": true
          }
        ]
      },
      "score": 0.2315579056739807
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-aggregation-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 411,
            "column": 1
          }
        },
        "contents": "generateHTML(state) {\n : 'League Points to Win'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"chartPointsToWin\" style=\"height: 300px;\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- High Performance Tables --&gt;\n                    &lt;div class=\"row mb-4\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('top_team_performances', 'Top Team Performances') : 'Top Team Performances'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"tableTopTeams\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('top_individual_performances', 'Top Individual Performances') : 'Top Individual Performances'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"tableTopIndividuals\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- Record Games Section --&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;${typeof t === 'function' ? t('record_individual_games', 'Record Individual Games') : 'Record Individual Games'}&lt;/h6&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;div id=\"tableRecordIndividualGames\"&gt;&lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-md-6\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-header\"&gt;\n                                    &lt;h6&gt;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 49,
                "column": 5
              },
              "endPosition": {
                "line": 50,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "generateHTML(state) {",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": " : 'League Points to Win'}&lt;/h6&gt;",
            "lineNumber": 73
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 74
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 75
          },
          {
            "text": "                                    &lt;div id=\"chartPointsToWin\" style=\"height: 300px;\"&gt;&lt;/div&gt;",
            "lineNumber": 76
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 77
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 78
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 79
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "                    &lt;!-- High Performance Tables --&gt;",
            "lineNumber": 82
          },
          {
            "text": "                    &lt;div class=\"row mb-4\"&gt;",
            "lineNumber": 83
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 84
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 85
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 86
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('top_team_performances', 'Top Team Performances') : 'Top Team Performances'}&lt;/h6&gt;",
            "lineNumber": 87
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 88
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "                                    &lt;div id=\"tableTopTeams\"&gt;&lt;/div&gt;",
            "lineNumber": 90
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 91
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 93
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 94
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 95
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 96
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('top_individual_performances', 'Top Individual Performances') : 'Top Individual Performances'}&lt;/h6&gt;",
            "lineNumber": 97
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 98
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 99
          },
          {
            "text": "                                    &lt;div id=\"tableTopIndividuals\"&gt;&lt;/div&gt;",
            "lineNumber": 100
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 101
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 102
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 103
          },
          {
            "text": "                    &lt;/div&gt;",
            "lineNumber": 104
          },
          {
            "lineNumber": 105
          },
          {
            "text": "                    &lt;!-- Record Games Section --&gt;",
            "lineNumber": 106
          },
          {
            "text": "                    &lt;div class=\"row\"&gt;",
            "lineNumber": 107
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 108
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 109
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 110
          },
          {
            "text": "                                    &lt;h6&gt;${typeof t === 'function' ? t('record_individual_games', 'Record Individual Games') : 'Record Individual Games'}&lt;/h6&gt;",
            "lineNumber": 111
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 112
          },
          {
            "text": "                                &lt;div class=\"card-body\"&gt;",
            "lineNumber": 113
          },
          {
            "text": "                                    &lt;div id=\"tableRecordIndividualGames\"&gt;&lt;/div&gt;",
            "lineNumber": 114
          },
          {
            "text": "                                &lt;/div&gt;",
            "lineNumber": 115
          },
          {
            "text": "                            &lt;/div&gt;",
            "lineNumber": 116
          },
          {
            "text": "                        &lt;/div&gt;",
            "lineNumber": 117
          },
          {
            "text": "                        &lt;div class=\"col-md-6\"&gt;",
            "lineNumber": 118
          },
          {
            "text": "                            &lt;div class=\"card\"&gt;",
            "lineNumber": 119
          },
          {
            "text": "                                &lt;div class=\"card-header\"&gt;",
            "lineNumber": 120
          },
          {
            "text": "                                    &lt;h6&gt;",
            "lineNumber": 121
          },
          {
            "text": "    }",
            "lineNumber": 132,
            "isSignature": true
          }
        ]
      },
      "score": 0.22681580483913422
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\core\\league-content-renderer.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 236,
            "column": 1
          }
        },
        "contents": "/**\n * League Content Renderer\n * \n * Orchestrates league content rendering based on filter state\n * Uses different filter hierarchy than team stats: Season → League → Week → Team\n */\n\nclass LeagueContentRenderer {\n    constructor(urlStateManager, eventBus = null) {\n        this.urlStateManager = urlStateManager;\n        this.eventBus = eventBus || window.EventBus;\n        this.lastRenderedState = {};\n        this.isRendering = false;\n        \n        // Content blocks registry (will be populated in Phase 3)\n        this.contentBlocks = {};\n        \n        // Initialize content blocks (placeholder for now)\n        this.initializeContentBlocks();\n        \n        // League content modes based on filter combinations\n        this.contentModes = {\n            'no-selection': {\n                title: 'League Statistics',\n                description: 'Select season and league to view statistics',\n                blocks: []\n            },\n            'season-only': {\n                title: 'Season Overview',\n                description: 'Historical data across all leagues',\n                blocks: ['season-overview', 'honor-scores']\n            },\n            'season-league': {\n                title: 'League Analysis',\n                description: 'Comprehensive league performance analysis',\n                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']\n            },\n            'season-league-week': {\n                title: 'Week Analysis', \n                description: 'Current week standings and performance',\n                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']\n            },\n            'season-league-week-team': {\n                title: 'Team Analysis',\n                description: 'Detailed team performance analysis',\n                blocks: ['team-details', 'week-standings', 'points-vs-average']\n            }\n        };\n    }\n    \n    /**\n     * Initialize content blocks (placeholder for Phase 3)\n     */\n    initializeContentBlocks() {\n        console.log('League content blocks will be initialized in Phase 3...');\n    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 1
          },
          {
            "text": " * League Content Renderer",
            "lineNumber": 2
          },
          {
            "text": " * ",
            "lineNumber": 3
          },
          {
            "text": " * Orchestrates league content rendering based on filter state",
            "lineNumber": 4
          },
          {
            "text": " * Uses different filter hierarchy than team stats: Season → League → Week → Team",
            "lineNumber": 5
          },
          {
            "text": " */",
            "lineNumber": 6
          },
          {
            "lineNumber": 7
          },
          {
            "text": "class LeagueContentRenderer {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "text": "    constructor(urlStateManager, eventBus = null) {",
            "lineNumber": 9,
            "isSignature": true
          },
          {
            "text": "        this.urlStateManager = urlStateManager;",
            "lineNumber": 10
          },
          {
            "text": "        this.eventBus = eventBus || window.EventBus;",
            "lineNumber": 11
          },
          {
            "text": "        this.lastRenderedState = {};",
            "lineNumber": 12
          },
          {
            "text": "        this.isRendering = false;",
            "lineNumber": 13
          },
          {
            "text": "        ",
            "lineNumber": 14
          },
          {
            "text": "        // Content blocks registry (will be populated in Phase 3)",
            "lineNumber": 15
          },
          {
            "text": "        this.contentBlocks = {};",
            "lineNumber": 16
          },
          {
            "text": "        ",
            "lineNumber": 17
          },
          {
            "text": "        // Initialize content blocks (placeholder for now)",
            "lineNumber": 18
          },
          {
            "text": "        this.initializeContentBlocks();",
            "lineNumber": 19
          },
          {
            "text": "        ",
            "lineNumber": 20
          },
          {
            "text": "        // League content modes based on filter combinations",
            "lineNumber": 21
          },
          {
            "text": "        this.contentModes = {",
            "lineNumber": 22
          },
          {
            "text": "            'no-selection': {",
            "lineNumber": 23
          },
          {
            "text": "                title: 'League Statistics',",
            "lineNumber": 24
          },
          {
            "text": "                description: 'Select season and league to view statistics',",
            "lineNumber": 25
          },
          {
            "text": "                blocks: []",
            "lineNumber": 26
          },
          {
            "text": "            },",
            "lineNumber": 27
          },
          {
            "text": "            'season-only': {",
            "lineNumber": 28
          },
          {
            "text": "                title: 'Season Overview',",
            "lineNumber": 29
          },
          {
            "text": "                description: 'Historical data across all leagues',",
            "lineNumber": 30
          },
          {
            "text": "                blocks: ['season-overview', 'honor-scores']",
            "lineNumber": 31
          },
          {
            "text": "            },",
            "lineNumber": 32
          },
          {
            "text": "            'season-league': {",
            "lineNumber": 33
          },
          {
            "text": "                title: 'League Analysis',",
            "lineNumber": 34
          },
          {
            "text": "                description: 'Comprehensive league performance analysis',",
            "lineNumber": 35
          },
          {
            "text": "                blocks: ['season-overview', 'position-progress', 'points-progress', 'honor-scores']",
            "lineNumber": 36
          },
          {
            "text": "            },",
            "lineNumber": 37
          },
          {
            "text": "            'season-league-week': {",
            "lineNumber": 38
          },
          {
            "text": "                title: 'Week Analysis', ",
            "lineNumber": 39
          },
          {
            "text": "                description: 'Current week standings and performance',",
            "lineNumber": 40
          },
          {
            "text": "                blocks: ['week-standings', 'match-day-points', 'match-day-averages', 'match-day-positions', 'points-vs-average']",
            "lineNumber": 41
          },
          {
            "text": "            },",
            "lineNumber": 42
          },
          {
            "text": "            'season-league-week-team': {",
            "lineNumber": 43
          },
          {
            "text": "                title: 'Team Analysis',",
            "lineNumber": 44
          },
          {
            "text": "                description: 'Detailed team performance analysis',",
            "lineNumber": 45
          },
          {
            "text": "                blocks: ['team-details', 'week-standings', 'points-vs-average']",
            "lineNumber": 46
          },
          {
            "text": "            }",
            "lineNumber": 47
          },
          {
            "text": "        };",
            "lineNumber": 48
          },
          {
            "text": "    }",
            "lineNumber": 49,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 50
          },
          {
            "text": "    /**",
            "lineNumber": 51
          },
          {
            "text": "     * Initialize content blocks (placeholder for Phase 3)",
            "lineNumber": 52
          },
          {
            "text": "     */",
            "lineNumber": 53
          },
          {
            "text": "    initializeContentBlocks() {",
            "lineNumber": 54,
            "isSignature": true
          },
          {
            "text": "        console.log('League content blocks will be initialized in Phase 3...');",
            "lineNumber": 55
          },
          {
            "text": "    }",
            "lineNumber": 65,
            "isSignature": true
          }
        ]
      },
      "score": 0.22442780435085297
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\league-season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 444,
            "column": 1
          }
        },
        "contents": "class LeagueSeasonOverviewBlock extends BaseContentBlock {\n\n\n    async loadWeeklyPoints(league, season) {\n        // Use same data as team points for scatter plot\n        const response = await fetchWithDatabase(&#96;/league/get_team_points?season=${season}&amp;league=${league}&#96;);\n        return await response.json();\n    }\n\n    createTimetable(data) {\n        console.log('DEBUG: createTimetable called with data:', data);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueSeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 271
          },
          {
            "lineNumber": 272
          },
          {
            "text": "    async loadWeeklyPoints(league, season) {",
            "lineNumber": 273,
            "isSignature": true
          },
          {
            "text": "        // Use same data as team points for scatter plot",
            "lineNumber": 274
          },
          {
            "text": "        const response = await fetchWithDatabase(&#96;/league/get_team_points?season=${season}&amp;league=${league}&#96;);",
            "lineNumber": 275
          },
          {
            "text": "        return await response.json();",
            "lineNumber": 276
          },
          {
            "text": "    }",
            "lineNumber": 277,
            "isSignature": true
          },
          {
            "lineNumber": 278
          },
          {
            "text": "    createTimetable(data) {",
            "lineNumber": 279,
            "isSignature": true
          },
          {
            "text": "        console.log('DEBUG: createTimetable called with data:', data);",
            "lineNumber": 280
          },
          {
            "text": "    }",
            "lineNumber": 302,
            "isSignature": true
          }
        ]
      },
      "score": 0.2233273983001709
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-performance-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 318,
            "column": 1
          }
        },
        "contents": "class TeamPerformanceBlock {\n\n\n    renderChart(data) {\n        const chartContainer = document.getElementById(this.chartContainerId);\n        if (!chartContainer) {\n            console.error(&#96;${this.containerId}: Chart container not found&#96;);\n            return;\n        }\n\n        if (typeof createLineChart !== 'function') {\n            console.error('createLineChart function not available');\n            return;\n        }\n\n        // Extract data from SeriesData format\n        const performanceData = data.performance_data;\n        const labels = data.weeks;\n        \n        // Convert SeriesData format to chart format\n        const chartData = {};\n        \n        // Process each player/team in the performance data\n        Object.keys(performanceData.data).forEach(playerName =&gt; {\n            const playerData = performanceData.data[playerName];\n            // Filter out null/undefined values for chart display\n            chartData[playerName] = playerData.map(value =&gt; \n                value === null || value === undefined ? null : value\n            );\n        });\n\n        // Create chart using existing function\n        createLineChart(\n            chartData,\n            Object.keys(chartData),\n            this.chartContainerId,\n            (typeof t === 'function' ? t('ui.team_performance.trends', 'Player Performance Trends') : 'Player Performance Trends'),\n            labels,\n            false, // don't invert Y axis\n            'auto' // auto Y-axis range\n        );\n    }\n\n    renderError(message) {\n        if (this.container)\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class TeamPerformanceBlock {",
            "lineNumber": 1,
            "isSignature": true
          },
          {
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    renderChart(data) {",
            "lineNumber": 262,
            "isSignature": true
          },
          {
            "text": "        const chartContainer = document.getElementById(this.chartContainerId);",
            "lineNumber": 263
          },
          {
            "text": "        if (!chartContainer) {",
            "lineNumber": 264
          },
          {
            "text": "            console.error(&#96;${this.containerId}: Chart container not found&#96;);",
            "lineNumber": 265
          },
          {
            "text": "            return;",
            "lineNumber": 266
          },
          {
            "text": "        }",
            "lineNumber": 267
          },
          {
            "lineNumber": 268
          },
          {
            "text": "        if (typeof createLineChart !== 'function') {",
            "lineNumber": 269
          },
          {
            "text": "            console.error('createLineChart function not available');",
            "lineNumber": 270
          },
          {
            "text": "            return;",
            "lineNumber": 271
          },
          {
            "text": "        }",
            "lineNumber": 272
          },
          {
            "lineNumber": 273
          },
          {
            "text": "        // Extract data from SeriesData format",
            "lineNumber": 274
          },
          {
            "text": "        const performanceData = data.performance_data;",
            "lineNumber": 275
          },
          {
            "text": "        const labels = data.weeks;",
            "lineNumber": 276
          },
          {
            "text": "        ",
            "lineNumber": 277
          },
          {
            "text": "        // Convert SeriesData format to chart format",
            "lineNumber": 278
          },
          {
            "text": "        const chartData = {};",
            "lineNumber": 279
          },
          {
            "text": "        ",
            "lineNumber": 280
          },
          {
            "text": "        // Process each player/team in the performance data",
            "lineNumber": 281
          },
          {
            "text": "        Object.keys(performanceData.data).forEach(playerName =&gt; {",
            "lineNumber": 282
          },
          {
            "text": "            const playerData = performanceData.data[playerName];",
            "lineNumber": 283
          },
          {
            "text": "            // Filter out null/undefined values for chart display",
            "lineNumber": 284
          },
          {
            "text": "            chartData[playerName] = playerData.map(value =&gt; ",
            "lineNumber": 285
          },
          {
            "text": "                value === null || value === undefined ? null : value",
            "lineNumber": 286
          },
          {
            "text": "            );",
            "lineNumber": 287
          },
          {
            "text": "        });",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "        // Create chart using existing function",
            "lineNumber": 290
          },
          {
            "text": "        createLineChart(",
            "lineNumber": 291
          },
          {
            "text": "            chartData,",
            "lineNumber": 292
          },
          {
            "text": "            Object.keys(chartData),",
            "lineNumber": 293
          },
          {
            "text": "            this.chartContainerId,",
            "lineNumber": 294
          },
          {
            "text": "            (typeof t === 'function' ? t('ui.team_performance.trends', 'Player Performance Trends') : 'Player Performance Trends'),",
            "lineNumber": 295
          },
          {
            "text": "            labels,",
            "lineNumber": 296
          },
          {
            "text": "            false, // don't invert Y axis",
            "lineNumber": 297
          },
          {
            "text": "            'auto' // auto Y-axis range",
            "lineNumber": 298
          },
          {
            "text": "        );",
            "lineNumber": 299
          },
          {
            "text": "    }",
            "lineNumber": 300,
            "isSignature": true
          },
          {
            "lineNumber": 301
          },
          {
            "text": "    renderError(message) {",
            "lineNumber": 302,
            "isSignature": true
          },
          {
            "text": "        if (this.container)",
            "lineNumber": 303
          },
          {
            "text": "    }",
            "lineNumber": 318,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 319,
            "isSignature": true
          }
        ]
      },
      "score": 0.21765020489692688
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\season-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 360,
            "column": 1
          }
        },
        "contents": "class SeasonOverviewBlock extends BaseContentBlock {\n\n\n    async loadPositionChart(season, league) {\n        try {\n            const response = await fetchWithDatabase(&#96;/league/get_team_positions?season=${season}&amp;league=${league}&#96;);\n            const data = await response.json();\n            \n            console.log('Position chart data:', data); // Debug logging\n            \n            // Check if data has expected structure\n            if (!data || !data.data) {\n                console.error('Invalid position data structure:', data);\n                return;\n            }\n            \n            // Create labels based on number of weeks\n            const numWeeks = Object.values(data.data)[0]?.length || 0;\n            const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;Week ${i + 1}&#96;);\n            \n            if (typeof createLineChart === 'function') {\n                createLineChart(\n                    data.data,\n                    data.sorted_by_best || data.sorted_by_total || Object.keys(data.data),\n                    'chartTeamPositionCumulated',\n                    'Position in Season Progress',\n                    labels,\n                    true, // reverse Y axis for positions\n                    'exact' // use exact Y-axis limits for positions\n                );\n            }\n            \n            // Update shared legend with safe fallback\n            const teams = data.sorted_by_best || data.sorted_by_total || Object.keys(data.data) || [];\n            this.updateSharedLegend(teams);\n            \n        } catch (error) {\n            console.error('Error loading position chart:', error);\n        }\n    }\n\n    async loadPointsCharts(season, league) {\n        try\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class SeasonOverviewBlock extends BaseContentBlock {",
            "lineNumber": 5,
            "isSignature": true
          },
          {
            "lineNumber": 222
          },
          {
            "lineNumber": 223
          },
          {
            "text": "    async loadPositionChart(season, league) {",
            "lineNumber": 224,
            "isSignature": true
          },
          {
            "text": "        try {",
            "lineNumber": 225
          },
          {
            "text": "            const response = await fetchWithDatabase(&#96;/league/get_team_positions?season=${season}&amp;league=${league}&#96;);",
            "lineNumber": 226
          },
          {
            "text": "            const data = await response.json();",
            "lineNumber": 227
          },
          {
            "text": "            ",
            "lineNumber": 228
          },
          {
            "text": "            console.log('Position chart data:', data); // Debug logging",
            "lineNumber": 229
          },
          {
            "text": "            ",
            "lineNumber": 230
          },
          {
            "text": "            // Check if data has expected structure",
            "lineNumber": 231
          },
          {
            "text": "            if (!data || !data.data) {",
            "lineNumber": 232
          },
          {
            "text": "                console.error('Invalid position data structure:', data);",
            "lineNumber": 233
          },
          {
            "text": "                return;",
            "lineNumber": 234
          },
          {
            "text": "            }",
            "lineNumber": 235
          },
          {
            "text": "            ",
            "lineNumber": 236
          },
          {
            "text": "            // Create labels based on number of weeks",
            "lineNumber": 237
          },
          {
            "text": "            const numWeeks = Object.values(data.data)[0]?.length || 0;",
            "lineNumber": 238
          },
          {
            "text": "            const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;Week ${i + 1}&#96;);",
            "lineNumber": 239
          },
          {
            "text": "            ",
            "lineNumber": 240
          },
          {
            "text": "            if (typeof createLineChart === 'function') {",
            "lineNumber": 241
          },
          {
            "text": "                createLineChart(",
            "lineNumber": 242
          },
          {
            "text": "                    data.data,",
            "lineNumber": 243
          },
          {
            "text": "                    data.sorted_by_best || data.sorted_by_total || Object.keys(data.data),",
            "lineNumber": 244
          },
          {
            "text": "                    'chartTeamPositionCumulated',",
            "lineNumber": 245
          },
          {
            "text": "                    'Position in Season Progress',",
            "lineNumber": 246
          },
          {
            "text": "                    labels,",
            "lineNumber": 247
          },
          {
            "text": "                    true, // reverse Y axis for positions",
            "lineNumber": 248
          },
          {
            "text": "                    'exact' // use exact Y-axis limits for positions",
            "lineNumber": 249
          },
          {
            "text": "                );",
            "lineNumber": 250
          },
          {
            "text": "            }",
            "lineNumber": 251
          },
          {
            "text": "            ",
            "lineNumber": 252
          },
          {
            "text": "            // Update shared legend with safe fallback",
            "lineNumber": 253
          },
          {
            "text": "            const teams = data.sorted_by_best || data.sorted_by_total || Object.keys(data.data) || [];",
            "lineNumber": 254
          },
          {
            "text": "            this.updateSharedLegend(teams);",
            "lineNumber": 255
          },
          {
            "text": "            ",
            "lineNumber": 256
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 257
          },
          {
            "text": "            console.error('Error loading position chart:', error);",
            "lineNumber": 258
          },
          {
            "text": "        }",
            "lineNumber": 259
          },
          {
            "text": "    }",
            "lineNumber": 260,
            "isSignature": true
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    async loadPointsCharts(season, league) {",
            "lineNumber": 262,
            "isSignature": true
          },
          {
            "text": "        try",
            "lineNumber": 263
          },
          {
            "text": "    }",
            "lineNumber": 301,
            "isSignature": true
          }
        ]
      },
      "score": 0.2165583372116089
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\response-display-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 1019,
            "column": 1
          }
        },
        "contents": "class ResponseDisplayBlock extends BaseContentBlock {\n\n    \n    /**\n     * Prepare line chart data for createLineChart\n     */\n    prepareLineChartData(data, labels, numericKeys) {\n        // Handle team points format (object with team names as keys and arrays as values)\n        if (typeof data === 'object' &amp;&amp; !Array.isArray(data) &amp;&amp; data &amp;&amp; data.data) {\n            // This is team points data format: { data: { \"Team1\": [1,2,3], \"Team2\": [4,5,6] }, sorted_by_total: [...] }\n            const teamData = data.data || data.data_accumulated || {};\n            const teamOrder = data.sorted_by_total || Object.keys(teamData);\n            \n            // Generate labels for weeks if not provided\n            const numWeeks = Object.values(teamData)[0]?.length || 0;\n            const weekLabels = labels || Array.from({length: numWeeks}, (_, i) =&gt; &#96;Week ${i + 1}&#96;);\n            \n            return {\n                data: teamData,\n                order: teamOrder,\n                labels: weekLabels\n            };\n        }\n        \n        // Handle array format (original logic)\n        if (!Array.isArray(data) || numericKeys.length === 0) {\n            return null;\n        }\n        \n        // Create data object in format expected by createLineChart\n        const chartData = {};\n        const order = [];\n        \n        // Group by label (team/category) and create series for each numeric key\n        numericKeys.slice(0, 3).forEach(key =&gt; {\n            chartData[key] = data.map(item =&gt; item[key]);\n            order.push(key);\n        });\n        \n        return {\n            data: chartData,\n            order: order,\n            labels: labels\n        };\n    }\n    \n    /**\n     * Prepare scatter chart data for createScatterChart_vanilla\n     */\n    prepareScatterChartData(data, numericKeys) {\n        if (numericKeys.length &lt; 2) return null;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ResponseDisplayBlock extends BaseContentBlock {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 901
          },
          {
            "text": "    ",
            "lineNumber": 902
          },
          {
            "text": "    /**",
            "lineNumber": 903
          },
          {
            "text": "     * Prepare line chart data for createLineChart",
            "lineNumber": 904
          },
          {
            "text": "     */",
            "lineNumber": 905
          },
          {
            "text": "    prepareLineChartData(data, labels, numericKeys) {",
            "lineNumber": 906,
            "isSignature": true
          },
          {
            "text": "        // Handle team points format (object with team names as keys and arrays as values)",
            "lineNumber": 907
          },
          {
            "text": "        if (typeof data === 'object' &amp;&amp; !Array.isArray(data) &amp;&amp; data &amp;&amp; data.data) {",
            "lineNumber": 908
          },
          {
            "text": "            // This is team points data format: { data: { \"Team1\": [1,2,3], \"Team2\": [4,5,6] }, sorted_by_total: [...] }",
            "lineNumber": 909
          },
          {
            "text": "            const teamData = data.data || data.data_accumulated || {};",
            "lineNumber": 910
          },
          {
            "text": "            const teamOrder = data.sorted_by_total || Object.keys(teamData);",
            "lineNumber": 911
          },
          {
            "text": "            ",
            "lineNumber": 912
          },
          {
            "text": "            // Generate labels for weeks if not provided",
            "lineNumber": 913
          },
          {
            "text": "            const numWeeks = Object.values(teamData)[0]?.length || 0;",
            "lineNumber": 914
          },
          {
            "text": "            const weekLabels = labels || Array.from({length: numWeeks}, (_, i) =&gt; &#96;Week ${i + 1}&#96;);",
            "lineNumber": 915
          },
          {
            "text": "            ",
            "lineNumber": 916
          },
          {
            "text": "            return {",
            "lineNumber": 917
          },
          {
            "text": "                data: teamData,",
            "lineNumber": 918
          },
          {
            "text": "                order: teamOrder,",
            "lineNumber": 919
          },
          {
            "text": "                labels: weekLabels",
            "lineNumber": 920
          },
          {
            "text": "            };",
            "lineNumber": 921
          },
          {
            "text": "        }",
            "lineNumber": 922
          },
          {
            "text": "        ",
            "lineNumber": 923
          },
          {
            "text": "        // Handle array format (original logic)",
            "lineNumber": 924
          },
          {
            "text": "        if (!Array.isArray(data) || numericKeys.length === 0) {",
            "lineNumber": 925
          },
          {
            "text": "            return null;",
            "lineNumber": 926
          },
          {
            "text": "        }",
            "lineNumber": 927
          },
          {
            "text": "        ",
            "lineNumber": 928
          },
          {
            "text": "        // Create data object in format expected by createLineChart",
            "lineNumber": 929
          },
          {
            "text": "        const chartData = {};",
            "lineNumber": 930
          },
          {
            "text": "        const order = [];",
            "lineNumber": 931
          },
          {
            "text": "        ",
            "lineNumber": 932
          },
          {
            "text": "        // Group by label (team/category) and create series for each numeric key",
            "lineNumber": 933
          },
          {
            "text": "        numericKeys.slice(0, 3).forEach(key =&gt; {",
            "lineNumber": 934
          },
          {
            "text": "            chartData[key] = data.map(item =&gt; item[key]);",
            "lineNumber": 935
          },
          {
            "text": "            order.push(key);",
            "lineNumber": 936
          },
          {
            "text": "        });",
            "lineNumber": 937
          },
          {
            "text": "        ",
            "lineNumber": 938
          },
          {
            "text": "        return {",
            "lineNumber": 939
          },
          {
            "text": "            data: chartData,",
            "lineNumber": 940
          },
          {
            "text": "            order: order,",
            "lineNumber": 941
          },
          {
            "text": "            labels: labels",
            "lineNumber": 942
          },
          {
            "text": "        };",
            "lineNumber": 943
          },
          {
            "text": "    }",
            "lineNumber": 944,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 945
          },
          {
            "text": "    /**",
            "lineNumber": 946
          },
          {
            "text": "     * Prepare scatter chart data for createScatterChart_vanilla",
            "lineNumber": 947
          },
          {
            "text": "     */",
            "lineNumber": 948
          },
          {
            "text": "    prepareScatterChartData(data, numericKeys) {",
            "lineNumber": 949,
            "isSignature": true
          },
          {
            "text": "        if (numericKeys.length &lt; 2) return null;",
            "lineNumber": 950
          },
          {
            "text": "    }",
            "lineNumber": 964,
            "isSignature": true
          }
        ]
      },
      "score": 0.2150883674621582
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\response-display-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 1019,
            "column": 1
          }
        },
        "contents": "exportTable() {\n\n    }\n    \n    /**\n     * Detect available chart types based on data structure\n     */\n    detectAvailableChartTypes(data) {\n        const available = ['json']; // Always available\n        \n        // Handle TableData structure\n        if (data &amp;&amp; typeof data === 'object' &amp;&amp; data.columns &amp;&amp; data.data) {\n            available.push('table'); // TableData always supports table view\n            \n            // Check if TableData contains numeric columns for charts\n            const hasNumericColumns = data.columns.some(group =&gt; \n                group.columns.some(col =&gt; \n                    col.format === 'number' || \n                    col.field?.includes('point') ||\n                    col.field?.includes('score') ||\n                    col.field?.includes('average')\n                )\n            );\n            \n            if (hasNumericColumns &amp;&amp; data.data.length &gt; 0) {\n                available.push('bar', 'line');\n                \n                // Check for time series indicators\n                const hasTimeField = data.columns.some(group =&gt;\n                    group.columns.some(col =&gt;\n                        col.field?.toLowerCase().includes('week') ||\n                        col.field?.toLowerCase().includes('date') ||\n                        col.field?.toLowerCase().includes('season')\n                    )\n                );\n                \n                if (hasTimeField) {\n                    available.push('area');\n                }\n            }\n            \n            return available;\n        }\n        \n        // Check for team points format (object with data property containing team arrays)\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "exportTable() {",
            "lineNumber": 565,
            "isSignature": true
          },
          {
            "lineNumber": 631
          },
          {
            "text": "    }",
            "lineNumber": 632,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 633
          },
          {
            "text": "    /**",
            "lineNumber": 634
          },
          {
            "text": "     * Detect available chart types based on data structure",
            "lineNumber": 635
          },
          {
            "text": "     */",
            "lineNumber": 636
          },
          {
            "text": "    detectAvailableChartTypes(data) {",
            "lineNumber": 637,
            "isSignature": true
          },
          {
            "text": "        const available = ['json']; // Always available",
            "lineNumber": 638
          },
          {
            "text": "        ",
            "lineNumber": 639
          },
          {
            "text": "        // Handle TableData structure",
            "lineNumber": 640
          },
          {
            "text": "        if (data &amp;&amp; typeof data === 'object' &amp;&amp; data.columns &amp;&amp; data.data) {",
            "lineNumber": 641
          },
          {
            "text": "            available.push('table'); // TableData always supports table view",
            "lineNumber": 642
          },
          {
            "text": "            ",
            "lineNumber": 643
          },
          {
            "text": "            // Check if TableData contains numeric columns for charts",
            "lineNumber": 644
          },
          {
            "text": "            const hasNumericColumns = data.columns.some(group =&gt; ",
            "lineNumber": 645
          },
          {
            "text": "                group.columns.some(col =&gt; ",
            "lineNumber": 646
          },
          {
            "text": "                    col.format === 'number' || ",
            "lineNumber": 647
          },
          {
            "text": "                    col.field?.includes('point') ||",
            "lineNumber": 648
          },
          {
            "text": "                    col.field?.includes('score') ||",
            "lineNumber": 649
          },
          {
            "text": "                    col.field?.includes('average')",
            "lineNumber": 650
          },
          {
            "text": "                )",
            "lineNumber": 651
          },
          {
            "text": "            );",
            "lineNumber": 652
          },
          {
            "text": "            ",
            "lineNumber": 653
          },
          {
            "text": "            if (hasNumericColumns &amp;&amp; data.data.length &gt; 0) {",
            "lineNumber": 654
          },
          {
            "text": "                available.push('bar', 'line');",
            "lineNumber": 655
          },
          {
            "text": "                ",
            "lineNumber": 656
          },
          {
            "text": "                // Check for time series indicators",
            "lineNumber": 657
          },
          {
            "text": "                const hasTimeField = data.columns.some(group =&gt;",
            "lineNumber": 658
          },
          {
            "text": "                    group.columns.some(col =&gt;",
            "lineNumber": 659
          },
          {
            "text": "                        col.field?.toLowerCase().includes('week') ||",
            "lineNumber": 660
          },
          {
            "text": "                        col.field?.toLowerCase().includes('date') ||",
            "lineNumber": 661
          },
          {
            "text": "                        col.field?.toLowerCase().includes('season')",
            "lineNumber": 662
          },
          {
            "text": "                    )",
            "lineNumber": 663
          },
          {
            "text": "                );",
            "lineNumber": 664
          },
          {
            "text": "                ",
            "lineNumber": 665
          },
          {
            "text": "                if (hasTimeField) {",
            "lineNumber": 666
          },
          {
            "text": "                    available.push('area');",
            "lineNumber": 667
          },
          {
            "text": "                }",
            "lineNumber": 668
          },
          {
            "text": "            }",
            "lineNumber": 669
          },
          {
            "text": "            ",
            "lineNumber": 670
          },
          {
            "text": "            return available;",
            "lineNumber": 671
          },
          {
            "text": "        }",
            "lineNumber": 672
          },
          {
            "text": "        ",
            "lineNumber": 673
          },
          {
            "text": "        // Check for team points format (object with data property containing team arrays)",
            "lineNumber": 674
          },
          {
            "text": "    }",
            "lineNumber": 719,
            "isSignature": true
          }
        ]
      },
      "score": 0.2133478969335556
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3504
          }
        },
        "contents": "class LeagueService:\ndef get_team_points_simple(self, league_name: str, season: str) -&gt; Dict[str, Any]:\n\n        weekly_points = {}\n        for team in all_teams:\n            weekly_points[team] = []\n            for week in all_weeks:\n                # Get individual player points for this team and week\n                individual_week_data = individual_data[(individual_data[Columns.team_name] == team) &amp; (individual_data[Columns.week] == week)]\n                individual_points = individual_week_data[Columns.points].sum() if not individual_week_data.empty else 0\n                \n                # Get team bonus points for this team and week\n                team_week_data = team_data[(team_data[Columns.team_name] == team) &amp; (team_data[Columns.week] == week)]\n                team_points = team_week_data[Columns.points].sum() if not team_week_data.empty else 0\n                \n                # Total points = individual + team bonus\n                total_week_points = individual_points + team_points\n                weekly_points[team].append(total_week_points)\n        \n        # Create SeriesData\n        series_data = SeriesData(\n            label_x_axis=\"Spieltag\", \n            label_y_axis=\"Punkte\", \n            name=\"Punkte im Saisonverlauf\", \n            query_params={\"season\": season, \"league\": league_name}\n        )\n        \n        # Add data for each team\n        for team in all_teams:\n            series_data.add_data(team, weekly_points[team])\n        \n        return series_data.to_dict()\n\n    def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:\n        ",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1729,
                "column": 5
              },
              "endPosition": {
                "line": 1730,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_points_simple(self, league_name: str, season: str) -&gt; Dict[str, Any]:",
            "lineNumber": 1729
          },
          {
            "lineNumber": 1761
          },
          {
            "text": "        weekly_points = {}",
            "lineNumber": 1762
          },
          {
            "text": "        for team in all_teams:",
            "lineNumber": 1763
          },
          {
            "text": "            weekly_points[team] = []",
            "lineNumber": 1764
          },
          {
            "text": "            for week in all_weeks:",
            "lineNumber": 1765
          },
          {
            "text": "                # Get individual player points for this team and week",
            "lineNumber": 1766
          },
          {
            "text": "                individual_week_data = individual_data[(individual_data[Columns.team_name] == team) &amp; (individual_data[Columns.week] == week)]",
            "lineNumber": 1767
          },
          {
            "text": "                individual_points = individual_week_data[Columns.points].sum() if not individual_week_data.empty else 0",
            "lineNumber": 1768
          },
          {
            "text": "                ",
            "lineNumber": 1769
          },
          {
            "text": "                # Get team bonus points for this team and week",
            "lineNumber": 1770
          },
          {
            "text": "                team_week_data = team_data[(team_data[Columns.team_name] == team) &amp; (team_data[Columns.week] == week)]",
            "lineNumber": 1771
          },
          {
            "text": "                team_points = team_week_data[Columns.points].sum() if not team_week_data.empty else 0",
            "lineNumber": 1772
          },
          {
            "text": "                ",
            "lineNumber": 1773
          },
          {
            "text": "                # Total points = individual + team bonus",
            "lineNumber": 1774
          },
          {
            "text": "                total_week_points = individual_points + team_points",
            "lineNumber": 1775
          },
          {
            "text": "                weekly_points[team].append(total_week_points)",
            "lineNumber": 1776
          },
          {
            "text": "        ",
            "lineNumber": 1777
          },
          {
            "text": "        # Create SeriesData",
            "lineNumber": 1778
          },
          {
            "text": "        series_data = SeriesData(",
            "lineNumber": 1779
          },
          {
            "text": "            label_x_axis=\"Spieltag\", ",
            "lineNumber": 1780
          },
          {
            "text": "            label_y_axis=\"Punkte\", ",
            "lineNumber": 1781
          },
          {
            "text": "            name=\"Punkte im Saisonverlauf\", ",
            "lineNumber": 1782
          },
          {
            "text": "            query_params={\"season\": season, \"league\": league_name}",
            "lineNumber": 1783
          },
          {
            "text": "        )",
            "lineNumber": 1784
          },
          {
            "text": "        ",
            "lineNumber": 1785
          },
          {
            "text": "        # Add data for each team",
            "lineNumber": 1786
          },
          {
            "text": "        for team in all_teams:",
            "lineNumber": 1787
          },
          {
            "text": "            series_data.add_data(team, weekly_points[team])",
            "lineNumber": 1788
          },
          {
            "text": "        ",
            "lineNumber": 1789
          },
          {
            "text": "        return series_data.to_dict()",
            "lineNumber": 1790
          },
          {
            "lineNumber": 1791
          },
          {
            "text": "    def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:",
            "lineNumber": 1792
          },
          {
            "text": "        ",
            "lineNumber": 1793
          }
        ]
      },
      "score": 0.21158349514007568
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\response-display-block.js",
        "range": {
          "startPosition": {
            "line": 7
          },
          "endPosition": {
            "line": 1019,
            "column": 1
          }
        },
        "contents": "class ResponseDisplayBlock extends BaseContentBlock {\n\n    \n    /**\n     * Update the response display based on current view mode\n     */\n    updateResponseDisplay() {\n        const container = this.getContainer();\n        const contentArea = container.querySelector('.response-content-area');\n        \n        if (!this.currentResponse) {\n            contentArea.innerHTML = &#96;\n                &lt;div class=\"empty-state text-center p-5\"&gt;\n                    &lt;i class=\"bi bi-box text-muted\" style=\"font-size: 3rem;\"&gt;&lt;/i&gt;\n                    &lt;h6 class=\"text-muted mt-2\"&gt;No Response Data&lt;/h6&gt;\n                    &lt;p class=\"text-muted small\"&gt;Test an API route to see response data here&lt;/p&gt;\n                &lt;/div&gt;\n            &#96;;\n            return;\n        }\n        \n        switch (this.viewMode) {\n            case 'json':\n                contentArea.innerHTML = this.renderJsonView();\n                break;\n            case 'table':\n                contentArea.innerHTML = this.renderTableView();\n                break;\n            case 'stats':\n                contentArea.innerHTML = this.renderStatsView();\n                break;\n            case 'chart':\n                contentArea.innerHTML = this.renderChartView();\n                this.renderChart();\n                break;\n        }\n    }\n    \n    /**\n     * Render JSON view\n     */\n    renderJsonView() {\n        const responseInfo = this.currentResponse.success\n;\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 8,
                "column": 1
              },
              "endPosition": {
                "line": 9,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class ResponseDisplayBlock extends BaseContentBlock {",
            "lineNumber": 8,
            "isSignature": true
          },
          {
            "lineNumber": 130
          },
          {
            "text": "    ",
            "lineNumber": 131
          },
          {
            "text": "    /**",
            "lineNumber": 132
          },
          {
            "text": "     * Update the response display based on current view mode",
            "lineNumber": 133
          },
          {
            "text": "     */",
            "lineNumber": 134
          },
          {
            "text": "    updateResponseDisplay() {",
            "lineNumber": 135,
            "isSignature": true
          },
          {
            "text": "        const container = this.getContainer();",
            "lineNumber": 136
          },
          {
            "text": "        const contentArea = container.querySelector('.response-content-area');",
            "lineNumber": 137
          },
          {
            "text": "        ",
            "lineNumber": 138
          },
          {
            "text": "        if (!this.currentResponse) {",
            "lineNumber": 139
          },
          {
            "text": "            contentArea.innerHTML = &#96;",
            "lineNumber": 140
          },
          {
            "text": "                &lt;div class=\"empty-state text-center p-5\"&gt;",
            "lineNumber": 141
          },
          {
            "text": "                    &lt;i class=\"bi bi-box text-muted\" style=\"font-size: 3rem;\"&gt;&lt;/i&gt;",
            "lineNumber": 142
          },
          {
            "text": "                    &lt;h6 class=\"text-muted mt-2\"&gt;No Response Data&lt;/h6&gt;",
            "lineNumber": 143
          },
          {
            "text": "                    &lt;p class=\"text-muted small\"&gt;Test an API route to see response data here&lt;/p&gt;",
            "lineNumber": 144
          },
          {
            "text": "                &lt;/div&gt;",
            "lineNumber": 145
          },
          {
            "text": "            &#96;;",
            "lineNumber": 146
          },
          {
            "text": "            return;",
            "lineNumber": 147
          },
          {
            "text": "        }",
            "lineNumber": 148
          },
          {
            "text": "        ",
            "lineNumber": 149
          },
          {
            "text": "        switch (this.viewMode) {",
            "lineNumber": 150
          },
          {
            "text": "            case 'json':",
            "lineNumber": 151
          },
          {
            "text": "                contentArea.innerHTML = this.renderJsonView();",
            "lineNumber": 152
          },
          {
            "text": "                break;",
            "lineNumber": 153
          },
          {
            "text": "            case 'table':",
            "lineNumber": 154
          },
          {
            "text": "                contentArea.innerHTML = this.renderTableView();",
            "lineNumber": 155
          },
          {
            "text": "                break;",
            "lineNumber": 156
          },
          {
            "text": "            case 'stats':",
            "lineNumber": 157
          },
          {
            "text": "                contentArea.innerHTML = this.renderStatsView();",
            "lineNumber": 158
          },
          {
            "text": "                break;",
            "lineNumber": 159
          },
          {
            "text": "            case 'chart':",
            "lineNumber": 160
          },
          {
            "text": "                contentArea.innerHTML = this.renderChartView();",
            "lineNumber": 161
          },
          {
            "text": "                this.renderChart();",
            "lineNumber": 162
          },
          {
            "text": "                break;",
            "lineNumber": 163
          },
          {
            "text": "        }",
            "lineNumber": 164
          },
          {
            "text": "    }",
            "lineNumber": 165,
            "isSignature": true
          },
          {
            "text": "    ",
            "lineNumber": 166
          },
          {
            "text": "    /**",
            "lineNumber": 167
          },
          {
            "text": "     * Render JSON view",
            "lineNumber": 168
          },
          {
            "text": "     */",
            "lineNumber": 169
          },
          {
            "text": "    renderJsonView() {",
            "lineNumber": 170,
            "isSignature": true
          },
          {
            "text": "        const responseInfo = this.currentResponse.success",
            "lineNumber": 171
          },
          {
            "text": ";",
            "lineNumber": 178
          },
          {
            "text": "    }",
            "lineNumber": 192,
            "isSignature": true
          }
        ]
      },
      "score": 0.2082403302192688
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Searching for bubble chart implementations in the ls view:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "bubble|scatter|createScatterChart|createBubbleChart",
  "path": "app/static/js",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "bubble|scatter|createScatterChart|createBubbleChart",
    "path": "app/static/js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 274,
                  "content": "        // Use same data as team points for scatter plot"
                },
                {
                  "lineNumber": 380,
                  "content": "        if (typeof createScatterChartMultiAxis === 'function' &amp;&amp; data &amp;&amp; data.data) {"
                },
                {
                  "lineNumber": 387,
                  "content": "                createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 398,
                  "content": "            console.warn('createWeeklyPointsChart: createScatterChartMultiAxis not available or data.data missing', {"
                },
                {
                  "lineNumber": 399,
                  "content": "                hasCreateScatterChartMultiAxis: typeof createScatterChartMultiAxis === 'function',"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 276,
                  "content": "            if (typeof createScatterChartMultiAxis === 'function') {"
                },
                {
                  "lineNumber": 277,
                  "content": "                createScatterChartMultiAxis("
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\response-display-block.js",
              "matches": [
                {
                  "lineNumber": 19,
                  "content": "        this.chartType = 'line'; // line, bar, scatter, area"
                },
                {
                  "lineNumber": 680,
                  "content": "                    // This is team points/positions data - perfect for line charts and scatter plots"
                },
                {
                  "lineNumber": 681,
                  "content": "                    available.push('line', 'area', 'scatter');"
                },
                {
                  "lineNumber": 700,
                  "content": "                        available.push('scatter');"
                },
                {
                  "lineNumber": 728,
                  "content": "            scatter: '&lt;i class=\"bi bi-scatter-chart me-1\"&gt;&lt;/i&gt;',"
                },
                {
                  "lineNumber": 787,
                  "content": "                case 'scatter':"
                },
                {
                  "lineNumber": 789,
                  "content": "                        // Use multi-axis scatter chart for team points data (like \"Points per Match Day\")"
                },
                {
                  "lineNumber": 790,
                  "content": "                        createScatterChartMultiAxis(chartData.data, chartData.order, 'responseChart', 'Points per Match Day', chartData.labels);"
                }
              ]
            }
          ],
          "totalLines": 15,
          "totalMatchedLines": 15
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are bubble charts created for points per week in the league season overview?",
  "includePattern": "app/static/js",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---



---


Checking how scatter/bubble charts are created:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createScatterChartMultiAxis|function createScatterChart",
  "path": "app/static/js",
  "contextAfter": 30,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "createScatterChartMultiAxis|function createScatterChart",
    "path": "app/static/js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/static/js/content-blocks/response-display-block.js",
              "matches": [
                {
                  "lineNumber": 790,
                  "content": "                        createScatterChartMultiAxis(chartData.data, chartData.order, 'responseChart', 'Points per Match Day', chartData.labels);"
                },
                {
                  "lineNumber": 791,
                  "content": "                    } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 792,
                  "content": "                        // Use vanilla scatter chart for regular array data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 793,
                  "content": "                        createScatterChart_vanilla(chartData.scatterData, 'responseChart', 'API Response Data', chartData.axisLabels);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 794,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 795,
                  "content": "                    break;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 796,
                  "content": "                case 'area':",
                  "isContextLine": true
                },
                {
                  "lineNumber": 797,
                  "content": "                    // Use line chart with area fill for now",
                  "isContextLine": true
                },
                {
                  "lineNumber": 798,
                  "content": "                    createLineChart(chartData.data, chartData.order, 'responseChart', 'API Response Data', chartData.labels);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 799,
                  "content": "                    break;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 800,
                  "content": "                default:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 801,
                  "content": "                    createLineChart(chartData.data, chartData.order, 'responseChart', 'API Response Data', chartData.labels);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 802,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 803,
                  "content": "        } catch (error) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 804,
                  "content": "            console.error('Error creating chart:', error);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 805,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 806,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 807,
                  "isContextLine": true
                },
                {
                  "lineNumber": 808,
                  "content": "    /**",
                  "isContextLine": true
                },
                {
                  "lineNumber": 809,
                  "content": "     * Prepare chart data for existing ECharts functions",
                  "isContextLine": true
                },
                {
                  "lineNumber": 810,
                  "content": "     */",
                  "isContextLine": true
                },
                {
                  "lineNumber": 811,
                  "content": "    prepareChartData(data, chartType) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 812,
                  "content": "        // Handle team points format first (this takes priority)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 813,
                  "content": "        if (typeof data === 'object' &amp;&amp; !Array.isArray(data) &amp;&amp; data &amp;&amp; data.data) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 814,
                  "content": "            switch (chartType) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 815,
                  "content": "                case 'scatter':",
                  "isContextLine": true
                },
                {
                  "lineNumber": 816,
                  "content": "                    return this.prepareTeamPointsScatterData(data);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 817,
                  "content": "                case 'line':",
                  "isContextLine": true
                },
                {
                  "lineNumber": 818,
                  "content": "                case 'area':",
                  "isContextLine": true
                },
                {
                  "lineNumber": 819,
                  "content": "                default:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 820,
                  "content": "                    return this.prepareLineChartData(data, null, []);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 967,
                  "content": "     * Prepare team points scatter chart data for createScatterChartMultiAxis"
                },
                {
                  "lineNumber": 968,
                  "content": "     */",
                  "isContextLine": true
                },
                {
                  "lineNumber": 969,
                  "content": "    prepareTeamPointsScatterData(data) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 970,
                  "content": "        if (!data || !data.data) return null;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 971,
                  "isContextLine": true
                },
                {
                  "lineNumber": 972,
                  "content": "        const teamData = data.data;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 973,
                  "content": "        const teamOrder = data.sorted_by_total || Object.keys(teamData);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 974,
                  "isContextLine": true
                },
                {
                  "lineNumber": 975,
                  "content": "        // Generate labels for weeks",
                  "isContextLine": true
                },
                {
                  "lineNumber": 976,
                  "content": "        const numWeeks = Object.values(teamData)[0]?.length || 0;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 977,
                  "content": "        const weekLabels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;Week ${i + 1}&#96;);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 978,
                  "isContextLine": true
                },
                {
                  "lineNumber": 979,
                  "content": "        return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 980,
                  "content": "            data: teamData,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 981,
                  "content": "            order: teamOrder,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 982,
                  "content": "            labels: weekLabels,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 983,
                  "content": "            isTeamPointsFormat: true",
                  "isContextLine": true
                },
                {
                  "lineNumber": 984,
                  "content": "        };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 985,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 986,
                  "isContextLine": true
                },
                {
                  "lineNumber": 987,
                  "content": "    /**",
                  "isContextLine": true
                },
                {
                  "lineNumber": 988,
                  "content": "     * Export chart as image (for ECharts)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 989,
                  "content": "     */",
                  "isContextLine": true
                },
                {
                  "lineNumber": 990,
                  "content": "    exportChart() {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 991,
                  "content": "        const container = document.getElementById('responseChart');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 992,
                  "content": "        if (!container) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 993,
                  "content": "            console.warn('No chart container found');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 994,
                  "content": "            return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 995,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 996,
                  "isContextLine": true
                },
                {
                  "lineNumber": 997,
                  "content": "        // Get ECharts instance",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/content-blocks/league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 380,
                  "content": "        if (typeof createScatterChartMultiAxis === 'function' &amp;&amp; data &amp;&amp; data.data) {"
                },
                {
                  "lineNumber": 381,
                  "content": "            const firstTeamData = Object.values(data.data)[0];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 382,
                  "content": "            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 383,
                  "content": "                const numWeeks = firstTeamData.length;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 384,
                  "content": "                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 385,
                  "content": "                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 386,
                  "isContextLine": true
                },
                {
                  "lineNumber": 387,
                  "content": "                createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 388,
                  "content": "                    data.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 389,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 390,
                  "content": "                    'chartTeamPointsWeekly',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 391,
                  "content": "                    'Points per Match Day',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "                    labels",
                  "isContextLine": true
                },
                {
                  "lineNumber": 393,
                  "content": "                );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "            } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 395,
                  "content": "                console.warn('createWeeklyPointsChart: data.data does not contain valid array data');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 396,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 397,
                  "content": "        } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 398,
                  "content": "            console.warn('createWeeklyPointsChart: createScatterChartMultiAxis not available or data.data missing', {"
                },
                {
                  "lineNumber": 399,
                  "content": "                hasCreateScatterChartMultiAxis: typeof createScatterChartMultiAxis === 'function',"
                },
                {
                  "lineNumber": 400,
                  "content": "                hasData: !!data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 401,
                  "content": "                hasDataProperty: data &amp;&amp; !!data.data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 402,
                  "content": "            });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 403,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 404,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 405,
                  "isContextLine": true
                },
                {
                  "lineNumber": 406,
                  "content": "    async loadTeamVsTeamComparison(league, season) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 407,
                  "content": "        // Use shared utility function that handles both loading and rendering",
                  "isContextLine": true
                },
                {
                  "lineNumber": 408,
                  "content": "        if (typeof loadAndRenderTeamVsTeamComparison === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 409,
                  "content": "            await loadAndRenderTeamVsTeamComparison(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 410,
                  "content": "                { league, season },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 411,
                  "content": "                {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 412,
                  "content": "                    containerId: 'team-vs-team-comparison-inline',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 413,
                  "content": "                    tableId: 'team-vs-team-comparison-table-inline',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 414,
                  "content": "                    headerLevel: 'h6',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 415,
                  "content": "                    disablePositionCircle: false,  // Enable position circles",
                  "isContextLine": true
                },
                {
                  "lineNumber": 416,
                  "content": "                    enableHeatMap: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 417,
                  "content": "                    teamField: 'team'  // Specify team field for colored circles",
                  "isContextLine": true
                },
                {
                  "lineNumber": 418,
                  "content": "                },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 419,
                  "content": "                typeof t === 'function' ? t('no_data', 'Team vs team comparison not available') : 'Team vs team comparison not available'",
                  "isContextLine": true
                },
                {
                  "lineNumber": 420,
                  "content": "            );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 421,
                  "content": "        } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 422,
                  "content": "            console.error('loadAndRenderTeamVsTeamComparison utility function not available');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 423,
                  "content": "            const container = document.getElementById('team-vs-team-comparison-inline');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 424,
                  "content": "            if (container) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 425,
                  "content": "                container.innerHTML = &#96;&lt;div class=\"alert alert-info\"&gt;${typeof t === 'function' ? t('no_data', 'Team vs team comparison not available') : 'Team vs team comparison not available'}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 426,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 427,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 428,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 429,
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/content-blocks/season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 276,
                  "content": "            if (typeof createScatterChartMultiAxis === 'function') {"
                },
                {
                  "lineNumber": 277,
                  "content": "                createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 278,
                  "content": "                    data.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 279,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 280,
                  "content": "                    'chartTeamPointsWeekly',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 281,
                  "content": "                    'Points per Match Day',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                    labels",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "                );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 284,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "content": "            if (typeof createLineChart === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 287,
                  "content": "                createLineChart(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "                    data.data_accumulated,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 289,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "                    'chartTeamPointsCumulated',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "                    'Points in Season Progress',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "                    labels,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "                    false, // don't reverse Y axis for points",
                  "isContextLine": true
                },
                {
                  "lineNumber": 294,
                  "content": "                    'auto' // use auto Y-axis limits with padding for points",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "                );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 296,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 297,
                  "isContextLine": true
                },
                {
                  "lineNumber": 298,
                  "content": "        } catch (error) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 299,
                  "content": "            console.error('Error loading points charts:', error);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 300,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 301,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 302,
                  "isContextLine": true
                },
                {
                  "lineNumber": 303,
                  "content": "    async loadAverageChart(season, league) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 304,
                  "content": "        try {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 305,
                  "content": "            const response = await fetchWithDatabase(&#96;/league/get_team_averages?season=${season}&amp;league=${league}&#96;);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 306,
                  "content": "            const data = await response.json();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 307,
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 144,
          "totalMatchedLines": 8
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/league-season-overview-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [-] Convert team-performance-block table to Tabulator
- [ ] Convert team-win-percentage-block table to Tabulator
- [ ] Add player name color chooser function to color-utils.js
- [ ] Add colored circle column with first letter of player name to both tables
- [ ] Add bubble chart for team-performance-block line chart
- [ ] Add bubble chart for team-win-percentage-block line chart

</details>
</tool-use>

---



---


Starting implementation: adding a player name color chooser function, then converting the tables and adding bubble charts.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/theme/color-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "cded0f4b-248e-4059-ace3-bd08fea7b9b4"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/theme/color-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "9132c114-e640-473d-8f42-73008e6097f6"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Converting the team-performance-block table to Tabulator and adding the colored circle column:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "tab-position-circle|position.*circle",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "tab-position-circle|position.*circle",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "165:        disablePositionCircle: false,",
              "matches": [
                {
                  "lineNumber": 301,
                  "content": "                                            (!settings.disablePositionCircle &amp;&amp; groupIndex === 0 &amp;&amp; columnIndex === 0);"
                },
                {
                  "lineNumber": 303,
                  "content": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {"
                },
                {
                  "lineNumber": 354,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 503,
                  "content": "                                            (!settings.disablePositionCircle &amp;&amp; columnInfo.groupIndex === 0 &amp;&amp; columnInfo.columnIndex === 0);"
                },
                {
                  "lineNumber": 505,
                  "content": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {"
                },
                {
                  "lineNumber": 556,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 1138,
                  "content": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;"
                },
                {
                  "lineNumber": 1649,
                  "content": "                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {"
                },
                {
                  "lineNumber": 1650,
                  "content": "                                    // Handle position circle for first column of first group - regular tables"
                }
              ]
            }
          ],
          "totalLines": 9,
          "totalMatchedLines": 9
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Converting the team-performance-block table to Tabulator and adding the colored circle column. Starting with the conversion:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "3bdec7ac-c0f4-475d-81ee-e06c90f40dbc"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Converting the team-win-percentage-block table and adding bubble charts. Starting with the table conversion:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "89c527e5-60d9-4248-8403-9976a0ff988f"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Adding bubble charts for both line charts. Updating both blocks to include bubble charts alongside the line charts:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "6e51e632-9e84-43e2-b1bf-46a7b8910f68"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "79a91b0b-5145-4653-ab26-3605e6e812ce"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "ccf82f35-4849-4eed-8942-043c76b84c4e"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "176c936f-7750-4355-b418-3fc9b03cfcf8"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "84b6f550-4c42-430f-ba4b-0023800b5212"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "eebbf2aa-13bd-4e8a-93cc-d01898d5798b"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/team-performance-block.js",
    "app/static/js/content-blocks/team-win-percentage-block.js",
    "app/static/js/theme/color-utils.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-performance-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-win-percentage-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/theme/color-utils.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Convert team-performance-block table to Tabulator
- [x] Convert team-win-percentage-block table to Tabulator
- [x] Add player name color chooser function to color-utils.js
- [x] Add colored circle column with first letter of player name to both tables
- [x] Add bubble chart for team-performance-block line chart
- [x] Add bubble chart for team-win-percentage-block line chart

</details>
</tool-use>

---



---


Completed the requested changes:

1. **Converted both tables to Tabulator** — Both `team-performance-block` and `team-win-percentage-block` now use `createTableTabulator` instead of `createTableBootstrap3`.

2. **Added player name color chooser function** — Added `getPlayerColor()` and `updatePlayerColorMap()` to `color-utils.js`, similar to the team color functions but for player names.

3. **Added colored circle column** — Both tables include a first column with a colored circle showing the first letter of the player name. The color matches the graph colors using `getPlayerColor()`.

4. **Added bubble charts** — Added bubble charts (scatter charts) for both line graphs:
   - Team Performance: "Points per Match Day" bubble chart alongside the line chart
   - Win Percentage: "Weekly Win %" bubble chart alongside the line chart

The bubble charts use `createScatterChartMultiAxis`, the same function used in the ls view for points per week. Both charts are displayed side-by-side in a two-column layout.

All changes are complete and ready for testing. The tables now use Tabulator with colored player initials, and both blocks have bubble charts alongside their line charts.

---

_**User (2025-12-09 14:40Z)**_

so none of the tables are filled with any data, only the second scatterChart is filled 

---

_**Agent (model default, mode Agent)**_



---


Investigating why the tables aren't rendering. Checking the data format and how Tabulator expects it:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "renderBubbleChart|renderChart",
  "path": "app/static/js/content-blocks/team-performance-block.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "renderBubbleChart|renderChart",
    "path": "app/static/js/content-blocks/team-performance-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/static/js/content-blocks/team-performance-block.js",
              "matches": [
                {
                  "lineNumber": 92,
                  "content": "            this.renderChart(data);"
                },
                {
                  "lineNumber": 333,
                  "content": "    renderChart(data) {"
                },
                {
                  "lineNumber": 373,
                  "content": "    renderBubbleChart(data) {"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-performance-block.js",
              "matches": [
                {
                  "lineNumber": 92,
                  "content": "            this.renderChart(data);"
                },
                {
                  "lineNumber": 333,
                  "content": "    renderChart(data) {"
                },
                {
                  "lineNumber": 373,
                  "content": "    renderBubbleChart(data) {"
                }
              ]
            }
          ],
          "totalLines": 6,
          "totalMatchedLines": 6
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How does createTableTabulator expect data to be formatted? What format should the data array be?",
  "includePattern": "app/templates/components",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---



---


Checking how `createTableTabulator` expects data:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "function createTableTabulator|createTableTabulator.*=.*function",
  "path": "app/templates/components/tables.html",
  "contextAfter": 50,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "function createTableTabulator|createTableTabulator.*=.*function",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 162,
                  "content": "function createTableTabulator(tableId, data, options = {}) {"
                },
                {
                  "lineNumber": 163,
                  "isContextLine": true
                },
                {
                  "lineNumber": 164,
                  "content": "    const settings = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 165,
                  "content": "        disablePositionCircle: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 166,
                  "content": "        enableSpecialRowStyling: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 167,
                  "content": "        tooltips: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 168,
                  "content": "        teamField: null,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 169,
                  "content": "        ...options",
                  "isContextLine": true
                },
                {
                  "lineNumber": 170,
                  "content": "    };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 171,
                  "content": "    const tableConfig = data.config || {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 172,
                  "content": "    const isCompactLayout = tableConfig.compact === true;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 173,
                  "content": "    const useStripedGroups = tableConfig.stripedColGroups === true;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 174,
                  "content": "    // Highlighting style constants",
                  "isContextLine": true
                },
                {
                  "lineNumber": 175,
                  "content": "    const HIGHLIGHT_STYLES = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 176,
                  "content": "        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 177,
                  "content": "        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 178,
                  "content": "        headerFontWeight: '900',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 179,
                  "content": "        cellFontWeight: '700'",
                  "isContextLine": true
                },
                {
                  "lineNumber": 180,
                  "content": "    };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 181,
                  "isContextLine": true
                },
                {
                  "lineNumber": 182,
                  "content": "    if (!data || !data.columns || !data.data) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 183,
                  "content": "        console.error('Invalid data format for Tabulator table');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 184,
                  "content": "        return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 185,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 186,
                  "isContextLine": true
                },
                {
                  "lineNumber": 187,
                  "content": "    const container = document.getElementById(tableId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 188,
                  "content": "    if (!container) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 189,
                  "content": "        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 190,
                  "content": "        return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 191,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 192,
                  "isContextLine": true
                },
                {
                  "lineNumber": 193,
                  "content": "    // Ensure container takes full width",
                  "isContextLine": true
                },
                {
                  "lineNumber": 194,
                  "content": "    if (container.style.width === '') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 195,
                  "content": "        container.style.width = '100%';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 196,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 197,
                  "isContextLine": true
                },
                {
                  "lineNumber": 198,
                  "content": "    const columnOrder = flattenColumnMetadata(data.columns);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 199,
                  "content": "    if (!columnOrder.length) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 200,
                  "content": "        console.warn('No column definitions available for Tabulator table');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 201,
                  "content": "        const container = document.getElementById(tableId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 202,
                  "content": "        if (container) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 203,
                  "content": "            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 204,
                  "content": "            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 205,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 206,
                  "content": "        return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 207,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 208,
                  "content": "    const columnLookup = columnOrder.reduce((acc, info) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 209,
                  "content": "        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 210,
                  "content": "        return acc;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 211,
                  "content": "    }, {});",
                  "isContextLine": true
                },
                {
                  "lineNumber": 212,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1929,
                  "content": "            if (typeof createTableTabulator === 'function') {"
                },
                {
                  "lineNumber": 1930,
                  "content": "                createTableTabulator(tableId, data, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1931,
                  "content": "                    ...params.options,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1932,
                  "content": "                    tooltips: true",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1933,
                  "content": "                });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1934,
                  "content": "            } else if (typeof createTableBootstrap3 === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1935,
                  "content": "                // Fallback to Bootstrap if Tabulator not available",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1936,
                  "content": "                createTableBootstrap3(tableId, data, params.options || {});",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1937,
                  "content": "            } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1938,
                  "content": "                console.error('No table creation function available');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1939,
                  "content": "                container.innerHTML = '&lt;div class=\"alert alert-warning\"&gt;Table creation function not available&lt;/div&gt;';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1940,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1941,
                  "content": "        })",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1942,
                  "content": "        .catch(error =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1943,
                  "content": "            console.error('Error fetching table data:', error);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1944,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1945,
                  "content": "            // Show appropriate error message based on error type",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1946,
                  "content": "            const container = document.getElementById(tableId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1947,
                  "content": "            if (error.status === 404 || error.message.includes('No data found')) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1948,
                  "content": "                container.innerHTML = &#96;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1949,
                  "content": "                    &lt;div class=\"alert alert-warning\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1950,
                  "content": "                        &lt;strong&gt;Data Unavailable:&lt;/strong&gt; No data found for the current parameters.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1951,
                  "content": "                        &lt;br&gt;&lt;small&gt;This might be due to a data source change. Try refreshing the page or selecting different parameters.&lt;/small&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1952,
                  "content": "                    &lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1953,
                  "content": "                &#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1954,
                  "content": "            } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1955,
                  "content": "                container.innerHTML = &#96;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1956,
                  "content": "                    &lt;div class=\"alert alert-danger\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1957,
                  "content": "                        &lt;strong&gt;Error:&lt;/strong&gt; Failed to load table data. ${error.message}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1958,
                  "content": "                        &lt;br&gt;&lt;small&gt;Please try refreshing the page or contact support if the problem persists.&lt;/small&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1959,
                  "content": "                    &lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1960,
                  "content": "                &#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1961,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1962,
                  "content": "        });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1963,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1964,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1965,
                  "content": "// Function to get team color",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1966,
                  "content": "function getTeamColor(teamName) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1967,
                  "content": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1968,
                  "content": "        return window.ColorUtils.getTeamColor(teamName);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1969,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1970,
                  "content": "    return '#888';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1971,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1972,
                  "content": "&lt;/script&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1973,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1974,
                  "content": "&lt;style&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1975,
                  "content": "/* Table theme with light/dark support */",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1976,
                  "content": ":root {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1977,
                  "content": "    --table-surface: var(--theme-surface, #ffffff);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1978,
                  "content": "    --table-surface-alt: #f6f8fb;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1979,
                  "content": "    --table-border-soft: rgba(15, 23, 42, 0.08);",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 102,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "data\\.data|tableData\\.data|\\.data\\[",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "data\\.data|tableData\\.data|\\.data\\[",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 182,
                  "content": "    if (!data || !data.columns || !data.data) {"
                },
                {
                  "lineNumber": 222,
                  "content": "    const transformedData = data.data.map((row, rowIndex) =&gt; {"
                },
                {
                  "lineNumber": 311,
                  "content": "                            if (rowIdx !== undefined &amp;&amp; rowIdx &gt;= 0 &amp;&amp; data.data &amp;&amp; data.data[rowIdx]) {"
                },
                {
                  "lineNumber": 314,
                  "content": "                                if (opponentNameIndex &gt;= 0 &amp;&amp; opponentNameIndex &lt; data.data[rowIdx].length) {"
                },
                {
                  "lineNumber": 315,
                  "content": "                                    const rawRow = data.data[rowIdx];"
                },
                {
                  "lineNumber": 513,
                  "content": "                            if (rowIdx !== undefined &amp;&amp; rowIdx &gt;= 0 &amp;&amp; data.data &amp;&amp; data.data[rowIdx]) {"
                },
                {
                  "lineNumber": 516,
                  "content": "                                if (opponentNameIndex &gt;= 0 &amp;&amp; opponentNameIndex &lt; data.data[rowIdx].length) {"
                },
                {
                  "lineNumber": 517,
                  "content": "                                    const rawRow = data.data[rowIdx];"
                },
                {
                  "lineNumber": 707,
                  "content": "        if (data.data &amp;&amp; data.data.length &gt; 0) {"
                },
                {
                  "lineNumber": 710,
                  "content": "                teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');"
                },
                {
                  "lineNumber": 713,
                  "content": "                teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');"
                },
                {
                  "lineNumber": 719,
                  "content": "                    const opponentTeams = data.data.map(row =&gt; row[opponentNameIndex]).filter(team =&gt; team &amp;&amp; typeof team === 'string');"
                },
                {
                  "lineNumber": 1119,
                  "content": "    if (!data || !data.columns || !data.data) {"
                },
                {
                  "lineNumber": 1141,
                  "content": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {"
                },
                {
                  "lineNumber": 1150,
                  "content": "            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');"
                }
              ]
            }
          ],
          "totalLines": 15,
          "totalMatchedLines": 15,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking how `createTableTabulator` transforms the data:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "transformedData|\\.setData\\(",
  "path": "app/templates/components/tables.html",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "transformedData|\\.setData\\(",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 222,
                  "content": "    const transformedData = data.data.map((row, rowIndex) =&gt; {"
                },
                {
                  "lineNumber": 223,
                  "content": "        const rowObject = { __rowIndex: rowIndex };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 224,
                  "content": "        columnOrder.forEach((columnInfo, columnIndex) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 225,
                  "content": "            rowObject[columnInfo.field] = row[columnIndex];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 226,
                  "content": "        });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 227,
                  "content": "        if (rowMetadataMap[rowIndex]) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 361,
                  "content": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;"
                },
                {
                  "lineNumber": 362,
                  "content": "                const isNumberColumn = typeof sampleValue === 'number';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 363,
                  "content": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 364,
                  "isContextLine": true
                },
                {
                  "lineNumber": 365,
                  "content": "                let colCssClass = column.cssClass || '';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 366,
                  "content": "                let colHeaderClass = column.headerClass || '';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 563,
                  "content": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;"
                },
                {
                  "lineNumber": 564,
                  "content": "                const isNumberColumn = typeof sampleValue === 'number';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 565,
                  "content": "                // Check if it's a string that represents a number (e.g., \"100.0\", \"99.5\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 566,
                  "content": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 567,
                  "isContextLine": true
                },
                {
                  "lineNumber": 568,
                  "content": "                // Build column cssClass: combine striped class with any existing",
                  "isContextLine": true
                },
                {
                  "lineNumber": 734,
                  "content": "        data: transformedData,"
                },
                {
                  "lineNumber": 735,
                  "content": "        columns: tabulatorColumns,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 736,
                  "content": "        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",",
                  "isContextLine": true
                },
                {
                  "lineNumber": 737,
                  "content": "        responsiveLayout: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 738,
                  "content": "        pagination: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 739,
                  "content": "        movableColumns: false,",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 24,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


`createTableTabulator` expects `data.data` as an array of arrays (rows), then transforms it to objects. Converting the data to array format:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "da8fff5d-e862-4c5c-b51b-a163882e5081"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "3bda08f7-4df3-4bc5-9847-ecd0fcfb13fa"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "c56c509b-d9d7-4554-99fb-643af1e368b3"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixing the formatter to access the raw data correctly and updating the win-percentage block similarly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "62c77521-c876-4cba-8c96-e6769d7b4787"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Converting both tables to array format, matching the column order:


---

The string to replace was not found in the file.

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app\\static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "501284d0-3d82-4f72-b1a5-7a49caba5a38"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/content-blocks/team-performance-block.js",
    "app/static/js/content-blocks/team-win-percentage-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-performance-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-win-percentage-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking if `renderBubbleChart` is called and verifying the data format:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app\static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Checking if both bubble charts are called and verifying the data format matches what `createScatterChartMultiAxis` expects:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createScatterChartMultiAxis.*function|function createScatterChartMultiAxis",
  "path": "app/static/js",
  "contextAfter": 20,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "createScatterChartMultiAxis.*function|function createScatterChartMultiAxis",
    "path": "app/static/js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/static/js/content-blocks/league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 380,
                  "content": "        if (typeof createScatterChartMultiAxis === 'function' &amp;&amp; data &amp;&amp; data.data) {"
                },
                {
                  "lineNumber": 381,
                  "content": "            const firstTeamData = Object.values(data.data)[0];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 382,
                  "content": "            if (firstTeamData &amp;&amp; Array.isArray(firstTeamData)) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 383,
                  "content": "                const numWeeks = firstTeamData.length;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 384,
                  "content": "                const weekLabel = typeof t === 'function' ? t('week', 'Week') : 'Week';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 385,
                  "content": "                const labels = Array.from({length: numWeeks}, (_, i) =&gt; &#96;${weekLabel} ${i + 1}&#96;);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 386,
                  "isContextLine": true
                },
                {
                  "lineNumber": 387,
                  "content": "                createScatterChartMultiAxis(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 388,
                  "content": "                    data.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 389,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 390,
                  "content": "                    'chartTeamPointsWeekly',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 391,
                  "content": "                    'Points per Match Day',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "                    labels",
                  "isContextLine": true
                },
                {
                  "lineNumber": 393,
                  "content": "                );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "            } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 395,
                  "content": "                console.warn('createWeeklyPointsChart: data.data does not contain valid array data');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 396,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 397,
                  "content": "        } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 398,
                  "content": "            console.warn('createWeeklyPointsChart: createScatterChartMultiAxis not available or data.data missing', {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 399,
                  "content": "                hasCreateScatterChartMultiAxis: typeof createScatterChartMultiAxis === 'function',"
                },
                {
                  "lineNumber": 400,
                  "content": "                hasData: !!data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 401,
                  "content": "                hasDataProperty: data &amp;&amp; !!data.data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 402,
                  "content": "            });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 403,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 404,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 405,
                  "isContextLine": true
                },
                {
                  "lineNumber": 406,
                  "content": "    async loadTeamVsTeamComparison(league, season) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 407,
                  "content": "        // Use shared utility function that handles both loading and rendering",
                  "isContextLine": true
                },
                {
                  "lineNumber": 408,
                  "content": "        if (typeof loadAndRenderTeamVsTeamComparison === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 409,
                  "content": "            await loadAndRenderTeamVsTeamComparison(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 410,
                  "content": "                { league, season },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 411,
                  "content": "                {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 412,
                  "content": "                    containerId: 'team-vs-team-comparison-inline',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 413,
                  "content": "                    tableId: 'team-vs-team-comparison-table-inline',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 414,
                  "content": "                    headerLevel: 'h6',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 415,
                  "content": "                    disablePositionCircle: false,  // Enable position circles",
                  "isContextLine": true
                },
                {
                  "lineNumber": 416,
                  "content": "                    enableHeatMap: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 417,
                  "content": "                    teamField: 'team'  // Specify team field for colored circles",
                  "isContextLine": true
                },
                {
                  "lineNumber": 418,
                  "content": "                },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 419,
                  "content": "                typeof t === 'function' ? t('no_data', 'Team vs team comparison not available') : 'Team vs team comparison not available'",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-performance-block.js",
              "matches": [
                {
                  "lineNumber": 383,
                  "content": "        if (typeof createScatterChartMultiAxis !== 'function') {"
                },
                {
                  "lineNumber": 384,
                  "content": "            console.error('createScatterChartMultiAxis function not available');"
                },
                {
                  "lineNumber": 385,
                  "content": "            return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 386,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 387,
                  "isContextLine": true
                },
                {
                  "lineNumber": 388,
                  "content": "        // Extract data from SeriesData format",
                  "isContextLine": true
                },
                {
                  "lineNumber": 389,
                  "content": "        const performanceData = data.performance_data;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 390,
                  "content": "        const labels = data.weeks;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 391,
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "        // Convert SeriesData format to scatter chart format",
                  "isContextLine": true
                },
                {
                  "lineNumber": 393,
                  "content": "        // The scatter chart expects data in the same format as line chart",
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "        const chartData = {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 395,
                  "isContextLine": true
                },
                {
                  "lineNumber": 396,
                  "content": "        // Process each player/team in the performance data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 397,
                  "content": "        Object.keys(performanceData.data).forEach(playerName =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 398,
                  "content": "            const playerData = performanceData.data[playerName];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 399,
                  "content": "            // Filter out null/undefined values for chart display",
                  "isContextLine": true
                },
                {
                  "lineNumber": 400,
                  "content": "            chartData[playerName] = playerData.map(value =&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 401,
                  "content": "                value === null || value === undefined ? null : value",
                  "isContextLine": true
                },
                {
                  "lineNumber": 402,
                  "content": "            );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 403,
                  "content": "        });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 404,
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/content-blocks/season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 276,
                  "content": "            if (typeof createScatterChartMultiAxis === 'function') {"
                },
                {
                  "lineNumber": 277,
                  "content": "                createScatterChartMultiAxis(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 278,
                  "content": "                    data.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 279,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 280,
                  "content": "                    'chartTeamPointsWeekly',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 281,
                  "content": "                    'Points per Match Day',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                    labels",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "                );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 284,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "content": "            if (typeof createLineChart === 'function') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 287,
                  "content": "                createLineChart(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "                    data.data_accumulated,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 289,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "                    'chartTeamPointsCumulated',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "                    'Points in Season Progress',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "                    labels,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "                    false, // don't reverse Y axis for points",
                  "isContextLine": true
                },
                {
                  "lineNumber": 294,
                  "content": "                    'auto' // use auto Y-axis limits with padding for points",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "                );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 296,
                  "content": "            }",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-win-percentage-block.js",
              "matches": [
                {
                  "lineNumber": 373,
                  "content": "        if (typeof createScatterChartMultiAxis !== 'function') {"
                },
                {
                  "lineNumber": 374,
                  "content": "            console.error('createScatterChartMultiAxis function not available');"
                },
                {
                  "lineNumber": 375,
                  "content": "            return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 376,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 377,
                  "isContextLine": true
                },
                {
                  "lineNumber": 378,
                  "content": "        // Extract data from SeriesData format",
                  "isContextLine": true
                },
                {
                  "lineNumber": 379,
                  "content": "        const winPercentageData = data.win_percentage_data;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 380,
                  "content": "        const labels = data.weeks;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 381,
                  "isContextLine": true
                },
                {
                  "lineNumber": 382,
                  "content": "        // Convert SeriesData format to scatter chart format",
                  "isContextLine": true
                },
                {
                  "lineNumber": 383,
                  "content": "        const chartData = {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 384,
                  "isContextLine": true
                },
                {
                  "lineNumber": 385,
                  "content": "        // Process each player/team in the win percentage data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 386,
                  "content": "        Object.keys(winPercentageData.data).forEach(playerName =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 387,
                  "content": "            const playerData = winPercentageData.data[playerName];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 388,
                  "content": "            // Filter out null/undefined values for chart display",
                  "isContextLine": true
                },
                {
                  "lineNumber": 389,
                  "content": "            chartData[playerName] = playerData.map(value =&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 390,
                  "content": "                value === null || value === undefined ? null : value",
                  "isContextLine": true
                },
                {
                  "lineNumber": 391,
                  "content": "            );",
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "        });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 393,
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "        // Generate week labels",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 105,
          "totalMatchedLines": 7
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking the expected format for `createScatterChartMultiAxis`:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "function createScatterChartMultiAxis|createScatterChartMultiAxis.*=.*function",
  "path": "app/templates/components",
  "contextAfter": 30,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "function createScatterChartMultiAxis|createScatterChartMultiAxis.*=.*function",
    "path": "app/templates/components",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/charts.html",
              "matches": [
                {
                  "lineNumber": 446,
                  "content": "function createScatterChartMultiAxis(data, order, containerId, title, labels) {"
                },
                {
                  "lineNumber": 447,
                  "content": "    const container = document.getElementById(containerId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 448,
                  "isContextLine": true
                },
                {
                  "lineNumber": 449,
                  "content": "    console.log('Order:', order);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 450,
                  "isContextLine": true
                },
                {
                  "lineNumber": 451,
                  "content": "    // Dispose of existing chart instance if it exists",
                  "isContextLine": true
                },
                {
                  "lineNumber": 452,
                  "content": "    const existingChart = echarts.getInstanceByDom(container);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 453,
                  "content": "    if (existingChart) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 454,
                  "content": "        existingChart.dispose();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 455,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 456,
                  "isContextLine": true
                },
                {
                  "lineNumber": 457,
                  "content": "    // Initialize new chart instance",
                  "isContextLine": true
                },
                {
                  "lineNumber": 458,
                  "content": "    const chart = echarts.init(container, null, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 459,
                  "content": "        devicePixelRatio: window.devicePixelRatio,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 460,
                  "content": "        renderer: 'canvas'",
                  "isContextLine": true
                },
                {
                  "lineNumber": 461,
                  "content": "    });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 462,
                  "isContextLine": true
                },
                {
                  "lineNumber": 463,
                  "content": "    const teams = order;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 464,
                  "content": "    const singleAxis = [];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 465,
                  "content": "    const series = [];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 466,
                  "isContextLine": true
                },
                {
                  "lineNumber": 467,
                  "content": "    // Configure for each team",
                  "isContextLine": true
                },
                {
                  "lineNumber": 468,
                  "content": "    teams.forEach(function (team, idx) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 469,
                  "content": "        const isLastTeam = idx === teams.length - 1;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 470,
                  "isContextLine": true
                },
                {
                  "lineNumber": 471,
                  "content": "        singleAxis.push({",
                  "isContextLine": true
                },
                {
                  "lineNumber": 472,
                  "content": "            left: 40,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 473,
                  "content": "            right: 40,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 474,
                  "content": "            type: 'category',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 475,
                  "content": "            boundaryGap: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 476,
                  "content": "            data: labels,",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 31,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What parameters does createScatterChartMultiAxis expect and what format should the data be in?",
  "includePattern": "app/templates/components",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Verifying the column field order matches the array indices. Checking how `createTableTabulator` builds the column order:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---



---


Checking if the bubble chart calls are correct and adding error handling. Verifying the data structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "renderBubbleChart",
  "path": "app/static/js/content-blocks/team-win-percentage-block.js",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "renderBubbleChart",
    "path": "app/static/js/content-blocks/team-win-percentage-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\team-win-percentage-block.js",
              "matches": [
                {
                  "lineNumber": 93,
                  "content": "            this.renderBubbleChart(data);"
                },
                {
                  "lineNumber": 366,
                  "content": "    renderBubbleChart(data) {"
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Adding console logging to debug and verifying the data structure. Checking if the issue is with how the data is passed:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "f2febf01-bd88-4f78-b782-b504779480b1"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "92ea01a8-db9c-4324-ae75-42d52747e235"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Added debug logging. The data is in array format, which should work. The issue may be that `createTableTabulator` expects the data structure differently. Checking how other working tables format their data:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createTableTabulator.*data.*columns|data:.*\\[|columns:.*\\[",
  "path": "app/static/js",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "createTableTabulator.*data.*columns|data:.*\\[|columns:.*\\[",
    "path": "app/static/js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/static/js/content-blocks/league-comparison-block.js",
              "matches": [
                {
                  "lineNumber": 120,
                  "content": "            columns: ["
                },
                {
                  "lineNumber": 121,
                  "content": "                { title: (typeof t === 'function' ? t('season', 'Season') : 'Season') },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 122,
                  "content": "                { title: (typeof t === 'function' ? t('league', 'League') : 'League') },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 123,
                  "content": "                { title: (typeof t === 'function' ? t('ranking', 'Ranking') : 'Ranking') },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 124,
                  "content": "                { title: (typeof t === 'function' ? t('average', 'Avg') : 'Avg') + ' - ' + (typeof t === 'function' ? t('team', 'Team') : 'Team') },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 125,
                  "content": "                { title: (typeof t === 'function' ? t('average', 'Avg') : 'Avg') + ' - ' + (typeof t === 'function' ? t('league', 'League') : 'League') },",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/content-blocks/team-win-percentage-block.js",
              "matches": [
                {
                  "lineNumber": 239,
                  "content": "                columns: ["
                },
                {
                  "lineNumber": 240,
                  "content": "                    {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 241,
                  "content": "                        title: '',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 242,
                  "content": "                        field: 'player_initials',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 243,
                  "content": "                        width: 50,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 244,
                  "content": "                        formatter: (cell, formatterParams) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 280,
                  "content": "                columns: ["
                },
                {
                  "lineNumber": 281,
                  "content": "                    {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                        title: typeof t === 'function' ? t('ui.win_percentage.total_wins', 'Total Wins') : 'Total Wins',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "                        field: 'total_wins',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 284,
                  "content": "                        width: 100,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "content": "                        align: 'center'",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/legacy/team-chart-utils.js"
            },
            {
              "file": "app/static/js/content-blocks/team-performance-block.js",
              "matches": [
                {
                  "lineNumber": 240,
                  "content": "                columns: ["
                },
                {
                  "lineNumber": 241,
                  "content": "                    {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 242,
                  "content": "                        title: '',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 243,
                  "content": "                        field: 'player_initials',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 244,
                  "content": "                        width: 50,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 245,
                  "content": "                        formatter: (cell, formatterParams) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                columns: ["
                },
                {
                  "lineNumber": 283,
                  "content": "                    {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 284,
                  "content": "                        title: typeof t === 'function' ? t('ui.team_performance.total_score', 'Total Score') : 'Total Score',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "content": "                        field: 'total_score',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "content": "                        width: 100,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 287,
                  "content": "                        align: 'center',",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/league/league-chart-utils.js",
              "matches": [
                {
                  "lineNumber": 121,
                  "content": "                console.log('📊 Sample team data:', firstTeam, ':', data.data[firstTeam]);"
                },
                {
                  "lineNumber": 122,
                  "isContextLine": true
                },
                {
                  "lineNumber": 123,
                  "content": "                // Create new chart",
                  "isContextLine": true
                },
                {
                  "lineNumber": 124,
                  "content": "                const canvas = document.getElementById('positionChart');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 125,
                  "content": "                if (canvas) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 126,
                  "content": "                    positionChart = new Chart(canvas, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 132,
                  "content": "                                data: data.data[team] || [],"
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-performance-block.js"
            },
            {
              "file": "app/static/js/content-blocks/league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 288,
                  "content": "        if (typeof createTableTabulator === 'function' &amp;&amp; data.columns &amp;&amp; data.data) {"
                },
                {
                  "lineNumber": 289,
                  "content": "            console.log('Creating timetable using Tabulator');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "            createTableTabulator('seasonTimetable', data, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "                disablePositionCircle: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "                enableSpecialRowStyling: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "                tooltips: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 305,
                  "content": "        if (typeof createTableTabulator === 'function' &amp;&amp; data?.columns) {"
                },
                {
                  "lineNumber": 306,
                  "content": "            createTableTabulator('leagueStandingsTable', data, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 307,
                  "content": "                disablePositionCircle: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 308,
                  "content": "                enableSpecialRowStyling: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 309,
                  "content": "                tooltips: true",
                  "isContextLine": true
                },
                {
                  "lineNumber": 310,
                  "content": "            });",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-win-percentage-block.js"
            },
            {
              "file": "app/static/js/content-blocks/response-display-block.js",
              "matches": [
                {
                  "lineNumber": 909,
                  "content": "            // This is team points data format: { data: { \"Team1\": [1,2,3], \"Team2\": [4,5,6] }, sorted_by_total: [...] }"
                },
                {
                  "lineNumber": 910,
                  "content": "            const teamData = data.data || data.data_accumulated || {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 911,
                  "content": "            const teamOrder = data.sorted_by_total || Object.keys(teamData);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 912,
                  "isContextLine": true
                },
                {
                  "lineNumber": 913,
                  "content": "            // Generate labels for weeks if not provided",
                  "isContextLine": true
                },
                {
                  "lineNumber": 914,
                  "content": "            const numWeeks = Object.values(teamData)[0]?.length || 0;",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 55,
          "totalMatchedLines": 10,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is createTableTabulator called with data and columns in working examples?",
  "includePattern": "app/static/js",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking if `renderBubbleChart` is called for both blocks and verifying the data structure matches what the charts expect. The tables use array format, which should work. Verifying the bubble chart data format:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---



---


Checking how `flattenColumnMetadata` orders columns to ensure the array indices match:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "function flattenColumnMetadata|flattenColumnMetadata.*=.*function",
  "path": "app/templates/components/tables.html",
  "contextAfter": 40,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "function flattenColumnMetadata|flattenColumnMetadata.*=.*function",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 102,
                  "content": "function flattenColumnMetadata(columnGroups = []) {"
                },
                {
                  "lineNumber": 103,
                  "content": "    const flatColumns = [];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 104,
                  "content": "    columnGroups.forEach((group, groupIndex) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 105,
                  "content": "        if (Array.isArray(group.columns)) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 106,
                  "content": "            group.columns.forEach((column, columnIndex) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 107,
                  "content": "                const field = column.field || &#96;col_${groupIndex}_${columnIndex}&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 108,
                  "content": "                flatColumns.push({",
                  "isContextLine": true
                },
                {
                  "lineNumber": 109,
                  "content": "                    group,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 110,
                  "content": "                    column,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 111,
                  "content": "                    groupIndex,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 112,
                  "content": "                    columnIndex,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 113,
                  "content": "                    field",
                  "isContextLine": true
                },
                {
                  "lineNumber": 114,
                  "content": "                });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 115,
                  "content": "            });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 116,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 117,
                  "content": "    });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 118,
                  "content": "    return flatColumns;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 119,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 120,
                  "isContextLine": true
                },
                {
                  "lineNumber": 121,
                  "content": "function mapCellMetadata(cellMetadata = {}, columnOrder = []) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 122,
                  "content": "    const mapped = {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 123,
                  "content": "    Object.entries(cellMetadata).forEach(([key, styles]) =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 124,
                  "content": "        const [rowIndexStr, colIndexStr] = key.split(':');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 125,
                  "content": "        const rowIndex = parseInt(rowIndexStr, 10);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 126,
                  "content": "        const colIndex = parseInt(colIndexStr, 10);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 127,
                  "content": "        const columnInfo = columnOrder[colIndex];",
                  "isContextLine": true
                },
                {
                  "lineNumber": 128,
                  "content": "        if (!columnInfo || Number.isNaN(rowIndex)) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 129,
                  "content": "            return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 130,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 131,
                  "content": "        const field = columnInfo.field;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 132,
                  "content": "        if (!mapped[rowIndex]) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 133,
                  "content": "            mapped[rowIndex] = {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 134,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 135,
                  "content": "        mapped[rowIndex][field] = styles;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 136,
                  "content": "    });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 137,
                  "content": "    return mapped;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 138,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 139,
                  "isContextLine": true
                },
                {
                  "lineNumber": 140,
                  "content": "function applyElementStyles(element, styles = {}) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 141,
                  "content": "    if (!element || !styles) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 142,
                  "content": "        return;",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 41,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Column order matches the array indices. The tables should work. Verifying the bubble chart uses the same player colors as the line charts. Checking how line charts assign colors:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createLineChart.*function|function createLineChart",
  "path": "app/templates/components/charts.html",
  "contextAfter": 50,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "createLineChart.*function|function createLineChart",
    "path": "app/templates/components/charts.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/charts.html",
              "matches": [
                {
                  "lineNumber": 120,
                  "content": "function createLineChart(data, order, containerId, title, labels, invertYAxis = false, yAxisRange = null) {"
                },
                {
                  "lineNumber": 121,
                  "content": "    const container = document.getElementById(containerId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 122,
                  "content": "    if (!container) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 123,
                  "content": "        console.error('createLineChart: Container not found:', containerId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 124,
                  "content": "        return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 125,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 126,
                  "isContextLine": true
                },
                {
                  "lineNumber": 127,
                  "content": "    // Coerce invertYAxis to boolean and log",
                  "isContextLine": true
                },
                {
                  "lineNumber": 128,
                  "content": "    const originalInvertYAxis = invertYAxis;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 129,
                  "content": "    invertYAxis = (invertYAxis === true || invertYAxis === 'true');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 130,
                  "content": "    console.log('createLineChart invertYAxis argument:', originalInvertYAxis, '-&gt; coerced:', invertYAxis, 'type:', typeof invertYAxis);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 131,
                  "isContextLine": true
                },
                {
                  "lineNumber": 132,
                  "content": "    // Dispose of existing chart instance if it exists",
                  "isContextLine": true
                },
                {
                  "lineNumber": 133,
                  "content": "    const existingChart = echarts.getInstanceByDom(container);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 134,
                  "content": "    if (existingChart) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 135,
                  "content": "        existingChart.dispose();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 136,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 137,
                  "isContextLine": true
                },
                {
                  "lineNumber": 138,
                  "content": "    if (order == null) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 139,
                  "content": "        order = Object.keys(data);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 140,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 141,
                  "content": "    // Update teamColorMap for this set of teams",
                  "isContextLine": true
                },
                {
                  "lineNumber": 142,
                  "content": "    updateTeamColorMap(order);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 143,
                  "isContextLine": true
                },
                {
                  "lineNumber": 144,
                  "content": "    // Calculate y-axis range if requested",
                  "isContextLine": true
                },
                {
                  "lineNumber": 145,
                  "content": "    let yMin, yMax;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 146,
                  "content": "    if (yAxisRange === 'auto') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 147,
                  "content": "        const allValues = order.map(team =&gt; data[team]).flat();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 148,
                  "content": "        yMin = Math.max(Math.min(...allValues) - 10, 0);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 149,
                  "content": "        yMax = Math.max(...allValues) + 10;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 150,
                  "content": "    } else if (yAxisRange === 'exact') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 151,
                  "content": "        const allValues = order.map(team =&gt; data[team]).flat();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 152,
                  "content": "        yMin = Math.min(...allValues);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 153,
                  "content": "        yMax = Math.max(...allValues);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 154,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 155,
                  "isContextLine": true
                },
                {
                  "lineNumber": 156,
                  "content": "    // Create series from the data using the specified order",
                  "isContextLine": true
                },
                {
                  "lineNumber": 157,
                  "content": "    const series = order.map(team =&gt; ({",
                  "isContextLine": true
                },
                {
                  "lineNumber": 158,
                  "content": "        name: team,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 159,
                  "content": "        type: 'line',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 160,
                  "content": "        data: data[team],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 161,
                  "content": "        lineStyle: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 162,
                  "content": "            color: getTeamColor(team),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 163,
                  "content": "            width: 2",
                  "isContextLine": true
                },
                {
                  "lineNumber": 164,
                  "content": "        },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 165,
                  "content": "        itemStyle: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 166,
                  "content": "            color: getTeamColor(team)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 167,
                  "content": "        },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 168,
                  "content": "        smooth: false",
                  "isContextLine": true
                },
                {
                  "lineNumber": 169,
                  "content": "    }));",
                  "isContextLine": true
                },
                {
                  "lineNumber": 170,
                  "isContextLine": true
                },
                {
                  "lineNumber": 231,
                  "content": "function createLineChart_vanilla(data, chartId, title, labels, reverse_y) {"
                },
                {
                  "lineNumber": 232,
                  "content": "    const ctx = document.getElementById(chartId).getContext('2d');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 233,
                  "isContextLine": true
                },
                {
                  "lineNumber": 234,
                  "content": "    // Destroy existing chart if it exists",
                  "isContextLine": true
                },
                {
                  "lineNumber": 235,
                  "content": "    if (window[chartId + 'Instance'] instanceof Chart) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 236,
                  "content": "        window[chartId + 'Instance'].destroy();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 237,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 238,
                  "isContextLine": true
                },
                {
                  "lineNumber": 239,
                  "content": "    // Create datasets for each team",
                  "isContextLine": true
                },
                {
                  "lineNumber": 240,
                  "content": "    const datasets = Object.entries(data).map(([team, values]) =&gt; ({",
                  "isContextLine": true
                },
                {
                  "lineNumber": 241,
                  "content": "        label: team,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 242,
                  "content": "        data: values,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 243,
                  "content": "        borderColor: getTeamColor(team),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 244,
                  "content": "        backgroundColor: getTeamColor(team),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 245,
                  "content": "        tension: 0.1",
                  "isContextLine": true
                },
                {
                  "lineNumber": 246,
                  "content": "    }));",
                  "isContextLine": true
                },
                {
                  "lineNumber": 247,
                  "isContextLine": true
                },
                {
                  "lineNumber": 248,
                  "content": "    window[chartId + 'Instance'] = new Chart(ctx, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 249,
                  "content": "        type: 'line',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 250,
                  "content": "        data: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 251,
                  "content": "            labels: labels,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 252,
                  "content": "            datasets: datasets",
                  "isContextLine": true
                },
                {
                  "lineNumber": 253,
                  "content": "        },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 254,
                  "content": "        options: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 255,
                  "content": "            responsive: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 256,
                  "content": "            plugins: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 257,
                  "content": "                title: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 258,
                  "content": "                    display: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 259,
                  "content": "                    text: title",
                  "isContextLine": true
                },
                {
                  "lineNumber": 260,
                  "content": "                },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 261,
                  "content": "                legend: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 262,
                  "content": "                    display: false",
                  "isContextLine": true
                },
                {
                  "lineNumber": 263,
                  "content": "                }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 264,
                  "content": "            },",
                  "isContextLine": true
                },
                {
                  "lineNumber": 265,
                  "content": "            scales: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 266,
                  "content": "                y: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 267,
                  "content": "                    reverse: reverse_y,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 268,
                  "content": "                    beginAtZero: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 269,
                  "content": "                    ticks: {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 270,
                  "content": "                        stepSize: 1",
                  "isContextLine": true
                },
                {
                  "lineNumber": 271,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 272,
                  "content": "                }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 273,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 274,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 275,
                  "content": "    });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 276,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 277,
                  "isContextLine": true
                },
                {
                  "lineNumber": 278,
                  "content": "function createAreaChart_vanilla(referenceData, actualData, chartId, title, labels) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 279,
                  "content": "    const ctx = document.getElementById(chartId);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 280,
                  "content": "    if (!ctx) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 281,
                  "content": "        console.error('createAreaChart_vanilla: Canvas not found:', chartId);",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 102,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---



---


Updating `getTeamColor` to also check `playerColorMap` so charts can use player colors:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/theme/color-utils.js"
}
```
Additional data:

```json
{
  "codeblockId": "3d6082a0-f5cb-4eb2-bd7f-4305cf09d4c0"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/static/js/theme/color-utils.js",
    "app/static/js/content-blocks/team-performance-block.js",
    "app/static/js/content-blocks/team-win-percentage-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/static/js/theme/color-utils.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-performance-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-win-percentage-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updating both blocks to ensure player colors are set before rendering charts:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "587857eb-41fa-4dad-b998-fac4f1ed86d0"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "3e540168-a524-48c9-9894-9608985e9d48"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "b074e148-e4be-45c7-835e-cbab4ade1f11"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "590ce07d-7977-4e68-b849-a9171cc201fa"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Made these changes:

1. **Converted both tables to Tabulator** — Using array format (array of arrays) as expected by `createTableTabulator`
2. **Added player color functions** — `getPlayerColor()` and `updatePlayerColorMap()` in `color-utils.js`
3. **Updated `getTeamColor()`** — Falls back to `playerColorMap` so charts can use player colors
4. **Added colored circle column** — First column shows colored circle with first letter of player name
5. **Added bubble charts** — Both blocks now have bubble charts alongside line charts

Added console logging to debug the tables. The data is in array format matching the column order:
- Index 0: `player_initials`
- Index 1: `player_name`
- Index 2+: week values
- Last 3: totals (total_score, total_games, avg_per_game for performance; total_wins, total_matches, win_percentage for win %)

Check the browser console for the debug logs to see what data is being passed. The tables should render correctly with this format. If they still don't show data, the console logs will help identify the issue.

---

_**User (2025-12-09 14:40Z)**_

we need some sort of normalization for the scatterplots. id like to provide min / max values which server as upper and lower bounds for circle size. inbetween, everything is sclaed linearly.

for average score i want the bounds to be 150 and 250

for win percentage the bounds are 0 and 100 

the circle sizes min and max are mapped to should be defined at a central positon and should be 20 and 80 as a first try

---

_**Agent (model default, mode Agent)**_



---


Adding normalization for scatter plot circle sizes. Checking the current implementation and updating it to support configurable bounds and circle size ranges.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Updating `createScatterChartMultiAxis` to support normalized circle sizes with configurable bounds:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "7ca4a9b5-affc-4bdf-9d89-a68d410e60fa"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "ee5e55f1-7850-42f0-8496-e8d61d93a827"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "bde14e19-9e2c-446b-9c93-08657cf76e0a"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createScatterChartMultiAxis\\(",
  "path": "app/static/js",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "createScatterChartMultiAxis\\(",
    "path": "app/static/js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/static/js/content-blocks/response-display-block.js",
              "matches": [
                {
                  "lineNumber": 790,
                  "content": "                        createScatterChartMultiAxis(chartData.data, chartData.order, 'responseChart', 'Points per Match Day', chartData.labels);"
                },
                {
                  "lineNumber": 791,
                  "content": "                    } else {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 792,
                  "content": "                        // Use vanilla scatter chart for regular array data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 793,
                  "content": "                        createScatterChart_vanilla(chartData.scatterData, 'responseChart', 'API Response Data', chartData.axisLabels);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 794,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 795,
                  "content": "                    break;",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/content-blocks/season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 277,
                  "content": "                createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 278,
                  "content": "                    data.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 279,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 280,
                  "content": "                    'chartTeamPointsWeekly',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 281,
                  "content": "                    'Points per Match Day',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                    labels",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/static/js/content-blocks/league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 387,
                  "content": "                createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 388,
                  "content": "                    data.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 389,
                  "content": "                    data.sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 390,
                  "content": "                    'chartTeamPointsWeekly',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 391,
                  "content": "                    'Points per Match Day',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "                    labels",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-win-percentage-block.js",
              "matches": [
                {
                  "lineNumber": 420,
                  "content": "        createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 421,
                  "content": "            chartData,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 422,
                  "content": "            Object.keys(chartData),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 423,
                  "content": "            &#96;${this.chartContainerId}-bubble&#96;,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 424,
                  "content": "            (typeof t === 'function' ? t('ui.win_percentage.weekly', 'Weekly Win %') : 'Weekly Win %'),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 425,
                  "content": "            weekLabels",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\static\\js\\content-blocks\\team-performance-block.js",
              "matches": [
                {
                  "lineNumber": 432,
                  "content": "        createScatterChartMultiAxis("
                },
                {
                  "lineNumber": 433,
                  "content": "            chartData,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 434,
                  "content": "            Object.keys(chartData),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 435,
                  "content": "            &#96;${this.chartContainerId}-bubble&#96;,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 436,
                  "content": "            (typeof t === 'function' ? t('points_per_match_day', 'Points per Match Day') : 'Points per Match Day'),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 437,
                  "content": "            weekLabels,",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 30,
          "totalMatchedLines": 5
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updated the scatter chart function to support normalized circle sizes. Changes:

1. **Updated `createScatterChartMultiAxis`** to accept an optional `options` parameter with:
   - `minValue` / `maxValue`: value bounds for normalization
   - `minCircleSize` / `maxCircleSize`: circle size range (defaults: 20–80)

2. **Linear scaling**: Values are mapped linearly from `[minValue, maxValue]` to `[minCircleSize, maxCircleSize]`. Values outside bounds are clamped.

3. **Updated both blocks**:
   - **Team Performance**: bounds 150–250 → circle sizes 20–80
   - **Win Percentage**: bounds 0–100 → circle sizes 20–80

4. **Backward compatibility**: Existing calls without the `options` parameter still work; they auto-calculate bounds from the data.

The normalization formula is:
```javascript
normalizedSize = minCircleSize + (clampedValue - minValue) / (maxValue - minValue) * (maxCircleSize - minCircleSize)
```

This ensures consistent circle sizes across charts and makes comparisons easier.

---

_**User (2025-12-09 14:40Z)**_

there also needs to be an option for "n/a" values leading to no circle at all. it is a difference, if a player didnt participate at all or if he lost all matches

---

_**Agent (model default, mode Agent)**_



---


Updating the scatter chart to hide circles for "n/a" (null/undefined) values while still showing circles for 0 values (e.g., 0% win rate). Adding an option to control this behavior:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Updating the scatter chart to hide circles for null/undefined values while still showing circles for 0 values:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "8bc7fd33-890d-472a-ad54-34524c0342c8"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "e34f073e-a839-41b1-9cee-81a4b600a2cf"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/charts.html",
    "app/static/js/content-blocks/team-performance-block.js",
    "app/static/js/content-blocks/team-win-percentage-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/charts.html"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-performance-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-win-percentage-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Updated the scatter chart to handle "n/a" values:

1. **Added `hideNaValues` option** (default: `true`): Controls whether null/undefined/NaN values hide circles.

2. **Updated `normalizeCircleSize` function**:
   - For null/undefined/NaN: returns `0` when `hideNaValues` is `true` (ECharts hides the point), otherwise uses `minCircleSize`.
   - For `0`: treated as a valid numeric value (e.g., 0% win rate = participated but lost all), so a circle is shown at the minimum size.

This distinguishes:
- No participation (null/undefined) → no circle
- Participated but got 0 (0% win rate, 0 points) → circle shown at minimum size

The default behavior (`hideNaValues: true`) hides circles for null/undefined values. Both blocks use this default, so no changes are needed there.

---

_**User (2025-12-09 14:40Z)**_

i got hte feeling, the sclaing does not work properly:

@charts.html (450-458) 

i would expect all circles to be identically small, but they are pretty irregualr and no matter what values i define here, it does not seem to have much  of an impact

---

_**Agent (model default, mode Agent)**_



---


Checking the normalization implementation. The scaling may not be applied correctly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---



---


Checking if the normalization function is being called correctly and adding debug logging. Verifying the options are passed correctly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "91bb1a18-4f1d-4b74-a3f7-9b44a062e93a"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "ddb7abfb-53a3-4628-881c-d81e803d1c57"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "9f6aff93-4838-4fe4-ab3d-c8aa2d589dab"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Restoring defaults and adding debug logging. Checking if ECharts requires a different approach for `symbolSize`:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How is symbolSize used in ECharts scatter charts? Are there any other examples of symbolSize functions?",
  "includePattern": "app/templates/components",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Pre-calculating sizes and including them in the data array, since ECharts may handle `symbolSize` functions differently in singleAxis scatter charts:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "f8cd2bf7-9167-43f3-8d8b-17aacfd3dbb5"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/charts.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/charts.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Made these changes:

1. **Restored default values** to `minCircleSize: 20` and `maxCircleSize: 80` (instead of 1).

2. **Added debug logging** to show:
   - Options received
   - Scaling parameters (valueMin, valueMax, ranges)
   - Sample symbol sizes for the first team

3. **Pre-calculated sizes** and included them as the third element in the data array `[x, y, size]`, which ECharts can use directly.

4. **Updated `symbolSize` function** to use the pre-calculated size from the data array.

The debug logs will show:
- Whether options are passed correctly
- The calculated scaling parameters
- Sample sizes for verification

Check the browser console to see:
- If the options are received correctly
- What scaling parameters are calculated
- What sizes are being assigned to the circles

If sizes still look wrong, the logs will help identify whether:
- The normalization function isn't being called
- The values are being calculated incorrectly
- ECharts is applying additional scaling

Try setting `minCircleSize: 1` and `maxCircleSize: 1` in the options object passed from the blocks (not the defaults) and check the console logs to see what's happening.

---

_**User (2025-12-09 14:40Z)**_

so now null is correctly detected in normalizeCircleSize, but a circle with minimum size in drwan nontheless. the tooltip says "null" for value"

---

_**Agent (model default, mode Agent)**_



---


Filtering out null/undefined values from the data array so ECharts doesn't render them, instead of setting size to 0:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "411e86e9-79df-4131-a057-53ce3f97879f"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---



---


Filtering out null/undefined values from the data array so ECharts doesn't render them. Updating the tooltip formatter to handle this:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "2ba93b79-0e5c-47ed-8511-521e783979a8"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/charts.html"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/charts.html"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Filtering out null/undefined values from the data array so they aren't rendered. ECharts may still draw a circle even when `symbolSize` is 0. Verifying the filtering logic:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/charts.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/charts.html"
}
```
Additional data:

```json
{
  "codeblockId": "8630607d-3fd3-48c9-b5dc-a92abf75b629"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixed the issue: null/undefined values are now filtered out before being added to the data array, so ECharts won't render them. Changes:

1. **Filter null values first**: Check for null/undefined/NaN before calculating size, and exclude them from the data array.
2. **Updated tooltip**: Handles null values (though they shouldn't appear since they're filtered out).

Now:
- Null/undefined values are excluded from the data array when `hideNaValues` is true
- No circles are drawn for null values
- Tooltips won't show "null" because those points aren't in the chart

The key change is filtering before adding to the series data, so ECharts never sees null values. This should prevent circles from appearing for null values.

---

_**User (2025-12-09 14:40Z)**_

what did you do here? @team-performance-block.js (235-305) 

there should be minimal ovehead when switching to tabular tables. why all the markup and transformation?

---

_**Agent (model default, mode Agent)**_



---


Checking what `createTableTabulator` expects and simplifying the transformation:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How do other tables pass data to createTableTabulator? What format do they use?",
  "includePattern": "app/static/js/content-blocks",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Simplifying by passing objects directly to Tabulator instead of arrays. `createTableTabulator` transforms arrays to objects, but Tabulator accepts objects natively. Updating the code:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createTableTabulator.*data.*columns|data\\.data.*Array|data\\.data.*object",
  "path": "app/static/js/content-blocks",
  "contextAfter": 3,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "createTableTabulator.*data.*columns|data\\.data.*Array|data\\.data.*object",
    "path": "app/static/js/content-blocks",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/static/js/content-blocks/league-season-overview-block.js",
              "matches": [
                {
                  "lineNumber": 288,
                  "content": "        if (typeof createTableTabulator === 'function' &amp;&amp; data.columns &amp;&amp; data.data) {"
                },
                {
                  "lineNumber": 289,
                  "content": "            console.log('Creating timetable using Tabulator');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "            createTableTabulator('seasonTimetable', data, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "                disablePositionCircle: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 305,
                  "content": "        if (typeof createTableTabulator === 'function' &amp;&amp; data?.columns) {"
                },
                {
                  "lineNumber": 306,
                  "content": "            createTableTabulator('leagueStandingsTable', data, {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 307,
                  "content": "                disablePositionCircle: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 308,
                  "content": "                enableSpecialRowStyling: true,",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 8,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "57dc6e98-620f-4d60-8614-f5658151729d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---



---


Updating `createTableTabulator` to accept objects directly, avoiding the array-to-object transformation:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "ba1c9cc7-90c8-4374-a087-21f8ff92d173"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "74c8ab4c-3ed3-42b4-9df2-89e494bc0c9d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/templates/components/tables.html",
    "app/static/js/content-blocks/team-performance-block.js",
    "app/static/js/content-blocks/team-win-percentage-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/templates/components/tables.html"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-performance-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-win-percentage-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Removed unnecessary overhead:

1. **Updated `createTableTabulator`** to detect if data is already objects and skip the array-to-object transformation.

2. **Simplified both blocks** to create objects directly instead of arrays:
   - Removed manual array construction (`[val1, val2, ...]`)
   - Now creates objects directly (`{field1: val1, field2: val2, ...}`)
   - Removed index-based access (`row[1]`) in favor of property access (`row.player_name`)

The data flow is now:
- **Before**: SeriesData → Arrays → `createTableTabulator` transforms to Objects → Tabulator
- **After**: SeriesData → Objects → `createTableTabulator` uses directly → Tabulator

This removes the intermediate array step and reduces overhead. The column definitions remain the same; only the data format changed from arrays to objects.

---

_**User (2025-12-09 14:40Z)**_

i dont agree here. have a look how this is done e.g for the leagueTimetable:

@league-season-overview-block.js (279-302) 

analyze where the data comes from, it is more or less passed from backend to tabular without any addtional manipulation

---

_**Agent (model default, mode Agent)**_



---


Checking where the timetable data comes from and how it's structured:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/league-season-overview-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "createTimetable|seasonTimetable|get.*timetable",
  "path": "app/static/js/content-blocks/league-season-overview-block.js",
  "contextAfter": 5,
  "caseInsensitive": true
}
```
Result:

```json
{
  "success": {
    "pattern": "createTimetable|seasonTimetable|get.*timetable",
    "path": "app/static/js/content-blocks/league-season-overview-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "84:                                    &lt;div id=\"seasonTimetable\"&gt;&lt;/div&gt;",
              "matches": [
                {
                  "lineNumber": 85,
                  "content": "                                &lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 86,
                  "content": "                            &lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 87,
                  "content": "                        &lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 88,
                  "content": "                        &lt;div class=\"col-md-6\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 89,
                  "content": "                            &lt;div class=\"card\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 190,
                  "content": "            if (timetableData) this.createTimetable(timetableData);"
                },
                {
                  "lineNumber": 191,
                  "content": "            if (standingsData) this.createStandingsTable(standingsData);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 192,
                  "content": "            if (pointsData) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 193,
                  "content": "                this.createPointsChart(pointsData);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 194,
                  "content": "                this.createWeeklyPointsChart(pointsData);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 195,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 211,
                  "content": "        const response = await fetchWithDatabase(&#96;/league/get_season_timetable?league=${league}&amp;season=${season}&#96;);"
                },
                {
                  "lineNumber": 212,
                  "content": "        if (!response.ok) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 213,
                  "content": "            throw new Error(&#96;HTTP ${response.status}&#96;);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 214,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 215,
                  "content": "        return await response.json();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 216,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 279,
                  "content": "    createTimetable(data) {"
                },
                {
                  "lineNumber": 280,
                  "content": "        console.log('DEBUG: createTimetable called with data:', data);"
                },
                {
                  "lineNumber": 281,
                  "content": "        const container = document.getElementById('seasonTimetable');"
                },
                {
                  "lineNumber": 282,
                  "content": "        if (!container || !data) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "            console.warn('No container or data for timetable');",
                  "isContextLine": true
                },
                {
                  "lineNumber": 284,
                  "content": "            return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 285,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 286,
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "            createTableTabulator('seasonTimetable', data, { "
                },
                {
                  "lineNumber": 291,
                  "content": "                disablePositionCircle: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "                enableSpecialRowStyling: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "                tooltips: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 294,
                  "content": "                skipTitleGeneration: true",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "            });",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 31,
          "totalMatchedLines": 6
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "Where does the timetable data come from in league-season-overview-block? What API endpoint is called?",
  "includePattern": "app/static/js/content-blocks",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_team_analysis|get_team_win_percentage",
  "path": "app/routes/league_routes.py",
  "contextAfter": 20,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "get_team_analysis|get_team_win_percentage",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/routes/league_routes.py",
              "matches": [
                {
                  "lineNumber": 843,
                  "content": "@bp.route('/league/get_team_analysis')"
                },
                {
                  "lineNumber": 844,
                  "content": "def get_team_analysis():"
                },
                {
                  "lineNumber": 845,
                  "content": "    \"\"\"Get detailed team analysis including individual player performance and win percentages\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 846,
                  "content": "    try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 847,
                  "content": "        league = request.args.get('league')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 848,
                  "content": "        season = request.args.get('season')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 849,
                  "content": "        team = request.args.get('team')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 850,
                  "isContextLine": true
                },
                {
                  "lineNumber": 851,
                  "content": "        if not all([league, season, team]):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 852,
                  "content": "            return jsonify({'error': 'Missing required parameters: league, season, team'}), 400",
                  "isContextLine": true
                },
                {
                  "lineNumber": 853,
                  "isContextLine": true
                },
                {
                  "lineNumber": 854,
                  "content": "        print(f\"Team Analysis - Received request with: league={league}, season={season}, team={team}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 855,
                  "isContextLine": true
                },
                {
                  "lineNumber": 856,
                  "content": "        league_service = get_league_service()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 857,
                  "content": "        analysis_data = league_service.get_team_analysis(league=league, season=season, team=team)"
                },
                {
                  "lineNumber": 858,
                  "content": "        return jsonify(analysis_data)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 859,
                  "isContextLine": true
                },
                {
                  "lineNumber": 860,
                  "content": "    except Exception as e:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 861,
                  "content": "        print(f\"Error in get_team_analysis: {str(e)}\")"
                },
                {
                  "lineNumber": 862,
                  "content": "        return jsonify({'error': str(e)}), 500",
                  "isContextLine": true
                },
                {
                  "lineNumber": 863,
                  "isContextLine": true
                },
                {
                  "lineNumber": 864,
                  "content": "@bp.route('/league/get_individual_averages')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 865,
                  "content": "def get_individual_averages():",
                  "isContextLine": true
                },
                {
                  "lineNumber": 866,
                  "content": "    \"\"\"Get individual player averages for a season, optionally filtered by week and/or team\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 867,
                  "content": "    try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 868,
                  "content": "        league = request.args.get('league')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 869,
                  "content": "        season = request.args.get('season')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 870,
                  "content": "        week_str = request.args.get('week')  # Optional parameter",
                  "isContextLine": true
                },
                {
                  "lineNumber": 871,
                  "content": "        team = request.args.get('team')  # Optional parameter",
                  "isContextLine": true
                },
                {
                  "lineNumber": 872,
                  "isContextLine": true
                },
                {
                  "lineNumber": 873,
                  "content": "        if not all([league, season]):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 874,
                  "content": "            return jsonify({'error': 'Missing required parameters: league, season'}), 400",
                  "isContextLine": true
                },
                {
                  "lineNumber": 875,
                  "isContextLine": true
                },
                {
                  "lineNumber": 876,
                  "content": "        # Parse week if provided",
                  "isContextLine": true
                },
                {
                  "lineNumber": 877,
                  "content": "        week = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 878,
                  "content": "        if week_str:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 879,
                  "content": "            try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 880,
                  "content": "                week = int(week_str)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 881,
                  "content": "            except ValueError:",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 39,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking the backend format for timetable vs team analysis:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_season_timetable|def.*timetable",
  "path": "app/routes/league_routes.py",
  "contextAfter": 15,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "get_season_timetable|def.*timetable",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/routes/league_routes.py",
              "matches": [
                {
                  "lineNumber": 823,
                  "content": "@bp.route('/league/get_season_timetable')"
                },
                {
                  "lineNumber": 824,
                  "content": "def get_season_timetable():"
                },
                {
                  "lineNumber": 825,
                  "content": "    \"\"\"Get season timetable with match day schedule\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 826,
                  "content": "    try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 827,
                  "content": "        league = request.args.get('league')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 828,
                  "content": "        season = request.args.get('season')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 829,
                  "isContextLine": true
                },
                {
                  "lineNumber": 830,
                  "content": "        if not all([league, season]):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 831,
                  "content": "            return jsonify({'error': 'Missing required parameters: league, season'}), 400",
                  "isContextLine": true
                },
                {
                  "lineNumber": 832,
                  "isContextLine": true
                },
                {
                  "lineNumber": 833,
                  "content": "        print(f\"Season Timetable - Received request with: league={league}, season={season}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 834,
                  "isContextLine": true
                },
                {
                  "lineNumber": 835,
                  "content": "        league_service = get_league_service()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 836,
                  "content": "        data = league_service.get_season_timetable(league=league, season=season)"
                },
                {
                  "lineNumber": 837,
                  "content": "        return jsonify(data)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 838,
                  "isContextLine": true
                },
                {
                  "lineNumber": 839,
                  "content": "    except Exception as e:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 840,
                  "content": "        print(f\"Error in get_season_timetable: {str(e)}\")"
                },
                {
                  "lineNumber": 841,
                  "content": "        return jsonify({'error': str(e)}), 500",
                  "isContextLine": true
                },
                {
                  "lineNumber": 842,
                  "isContextLine": true
                },
                {
                  "lineNumber": 843,
                  "content": "@bp.route('/league/get_team_analysis')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 844,
                  "content": "def get_team_analysis():",
                  "isContextLine": true
                },
                {
                  "lineNumber": 845,
                  "content": "    \"\"\"Get detailed team analysis including individual player performance and win percentages\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 846,
                  "content": "    try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 847,
                  "content": "        league = request.args.get('league')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 848,
                  "content": "        season = request.args.get('season')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 849,
                  "content": "        team = request.args.get('team')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 850,
                  "isContextLine": true
                },
                {
                  "lineNumber": 851,
                  "content": "        if not all([league, season, team]):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 852,
                  "content": "            return jsonify({'error': 'Missing required parameters: league, season, team'}), 400",
                  "isContextLine": true
                },
                {
                  "lineNumber": 853,
                  "isContextLine": true
                },
                {
                  "lineNumber": 854,
                  "content": "        print(f\"Team Analysis - Received request with: league={league}, season={season}, team={team}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 855,
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 33,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_team_analysis|def get_team_analysis",
  "path": "app/services/league_service.py",
  "contextAfter": 30,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "get_team_analysis|def get_team_analysis",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 2795,
                  "content": "    def get_team_analysis(self, league: str, season: str, team: str) -&gt; Dict[str, Any]:"
                },
                {
                  "lineNumber": 2796,
                  "content": "        \"\"\"Get detailed team analysis including individual player performance and win percentages\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2797,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2798,
                  "content": "            # Get all player data for the team in the specified season and league",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2799,
                  "content": "            # EXCLUDE team totals - only get individual player records",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2800,
                  "content": "            player_filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2801,
                  "content": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2802,
                  "content": "                Columns.season: {'value': season, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2803,
                  "content": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2804,
                  "content": "                Columns.computed_data: {'value': False, 'operator': 'eq'}  # Individual players only",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2805,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2806,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2807,
                  "content": "            player_data = self.adapter.get_filtered_data(filters=player_filters)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2808,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2809,
                  "content": "            if not player_data.empty:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2810,
                  "content": "                # Filter out team totals - only keep individual player records",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2811,
                  "content": "                # Team totals typically have \"Team Total\" or similar in the Player column",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2812,
                  "content": "                player_data = player_data[player_data[Columns.player_name] != 'Team Total']",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2813,
                  "content": "                player_data = player_data[player_data[Columns.player_name] != 'team_total']",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2814,
                  "content": "                player_data = player_data[player_data[Columns.player_name] != 'TEAM TOTAL']",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2815,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2816,
                  "content": "                # Also filter out any records where Player ID is NaN (these are usually team totals)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2817,
                  "content": "                player_data = player_data.dropna(subset=[Columns.player_id])",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2818,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2819,
                  "content": "            if player_data.empty:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2820,
                  "content": "                return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2821,
                  "content": "                    'error': f'No individual player data found for team {team} in {league} {season}',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2822,
                  "content": "                    'performance_data': [],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2823,
                  "content": "                    'win_percentage_data': [],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2824,
                  "content": "                    'weeks': [],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2825,
                  "content": "                    'players': []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3009,
                  "content": "            print(f\"Error in get_team_analysis: {e}\")"
                },
                {
                  "lineNumber": 3010,
                  "content": "            return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3011,
                  "content": "                'error': f'Error analyzing team data: {str(e)}',",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3012,
                  "content": "                'performance_data': [],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3013,
                  "content": "                'win_percentage_data': [],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3014,
                  "content": "                'weeks': [],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3015,
                  "content": "                'players': []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3016,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3017,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3018,
                  "content": "    def _apply_heat_map_to_columns(self, table_data: List[List], cell_metadata: Dict[str, Dict],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3019,
                  "content": "                                    column_indices: List[int], min_val: float = None, max_val: float = None) -&gt; Dict[str, Dict]:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3020,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3021,
                  "content": "        Apply heat map coloring to specified column indices (delegates to utility function).",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3022,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3023,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3024,
                  "content": "            table_data: List of rows, where each row is a list of values",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3025,
                  "content": "            cell_metadata: Dictionary mapping \"row:col\" to cell metadata",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3026,
                  "content": "            column_indices: List of column indices (0-based) to apply coloring to",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3027,
                  "content": "            min_val: Optional minimum value for color scale. If None, calculated from data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3028,
                  "content": "            max_val: Optional maximum value for color scale. If None, calculated from data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3029,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3030,
                  "content": "        Returns:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3031,
                  "content": "            Updated cell_metadata dictionary",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3032,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3033,
                  "content": "        return apply_heat_map_to_columns(table_data, cell_metadata, column_indices, min_val, max_val)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3034,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3035,
                  "content": "    def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3036,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3037,
                  "content": "        Get team vs team comparison as TableData with heat map.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3038,
                  "content": "        Teams are sorted by average points (across all opponents) before table creation",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3039,
                  "content": "        to ensure proper matrix alignment with diagonal cells.",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 62,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What format does get_season_timetable return? What is the structure of the data with columns and data properties?",
  "includePattern": "app/services",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking what `get_season_timetable` returns:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "def get_season_timetable",
  "path": "app/services/league_service.py",
  "contextAfter": 50,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "def get_season_timetable",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 2357,
                  "content": "    def get_season_timetable(self, league: str, season: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 2358,
                  "content": "        \"\"\"Get season timetable with match day schedule as structured table data\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2359,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2360,
                  "content": "            # Get available weeks for the season",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2361,
                  "content": "            available_weeks = self.get_available_weeks(season, league)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2362,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2363,
                  "content": "            if not available_weeks:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2364,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2365,
                  "content": "                    columns=[],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2366,
                  "content": "                    data=[],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2367,
                  "content": "                    title=f\"No timetable available for {league} - {season}\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2368,
                  "content": "                )",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2369,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2370,
                  "content": "            latest_week = self.get_latest_week(season, league)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2371,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2372,
                  "content": "            # Get actual week data with dates and locations from the database",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2373,
                  "content": "            filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2374,
                  "content": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2375,
                  "content": "                Columns.season: {'value': season, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2376,
                  "content": "                Columns.computed_data: {'value': True, 'operator': 'eq'}  # Get team summary data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2377,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2378,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2379,
                  "content": "            week_data = self.adapter.get_filtered_data(filters=filters)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2380,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2381,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2382,
                  "content": "            # Group data by week to get unique week info",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2383,
                  "content": "            week_info = {}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2384,
                  "content": "            for _, row in week_data.iterrows():",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2385,
                  "content": "                week_num = row[Columns.week]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2386,
                  "content": "                if week_num not in week_info:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2387,
                  "content": "                    week_info[week_num] = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2388,
                  "content": "                        'date': row.get(Columns.date, 'TBD'),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2389,
                  "content": "                        'location': row.get(Columns.location, f\"{league} Venue\"),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2390,
                  "content": "                        'has_data': True",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2391,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2392,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2393,
                  "content": "            # Create table data only for existing weeks",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2394,
                  "content": "            table_data = []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2395,
                  "content": "            for week_num in sorted(available_weeks):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2396,
                  "content": "                is_completed = week_num &lt;= latest_week",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2397,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2398,
                  "content": "                # Get real data if available",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2399,
                  "content": "                if week_num in week_info:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2400,
                  "content": "                    date = week_info[week_num]['date']",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2401,
                  "content": "                    location = week_info[week_num]['location']",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2402,
                  "content": "                else:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2403,
                  "content": "                    date = \"TBD\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2404,
                  "content": "                    location = f\"{league} Venue\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2405,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2406,
                  "content": "                # Determine status",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2407,
                  "content": "                if is_completed:",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 51,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


`get_season_timetable` returns a `TableData` object (with `columns` and `data`), while `get_team_analysis` returns SeriesData. Creating backend methods that return `TableData` directly, similar to the timetable. Checking the structure and adding these methods:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "class TableData|def.*TableData",
  "path": "app/services",
  "contextAfter": 10,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "class TableData|def.*TableData",
    "path": "app/services",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service_legacy.py",
              "matches": [
                {
                  "lineNumber": 87,
                  "content": "    def get_league_week_table(self, season: str, league: str, week: Optional[int] = None, depth: int = 1) -&gt; TableData:"
                },
                {
                  "lineNumber": 88,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 89,
                  "content": "        Get a formatted table for league standings with weekly breakdowns.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 90,
                  "isContextLine": true
                },
                {
                  "lineNumber": 91,
                  "content": "        DEPRECATED: This function has been replaced by get_league_week_table_simple().",
                  "isContextLine": true
                },
                {
                  "lineNumber": 92,
                  "content": "        Routes use the simpler version without the depth parameter.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 93,
                  "isContextLine": true
                },
                {
                  "lineNumber": 94,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 95,
                  "content": "            season: The season identifier",
                  "isContextLine": true
                },
                {
                  "lineNumber": 96,
                  "content": "            league: The league name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 97,
                  "content": "            week: The current week (if None, gets the latest)",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 92,
                  "content": "    def get_game_overview_data(self, season: str, league: str, week: int, round_number: int) -&gt; TableData:"
                },
                {
                  "lineNumber": 93,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 94,
                  "content": "        Get game overview data for a specific round.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 95,
                  "content": "        Shows all matches with team vs opponent: team name, team pins, team points | opponent points, opponent pins, opponent name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 96,
                  "isContextLine": true
                },
                {
                  "lineNumber": 97,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 98,
                  "content": "            season: Season identifier",
                  "isContextLine": true
                },
                {
                  "lineNumber": 99,
                  "content": "            league: League name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 100,
                  "content": "            week: Week number",
                  "isContextLine": true
                },
                {
                  "lineNumber": 101,
                  "content": "            round_number: Round/Game number",
                  "isContextLine": true
                },
                {
                  "lineNumber": 102,
                  "isContextLine": true
                },
                {
                  "lineNumber": 259,
                  "content": "    def get_game_team_details_data(self, season: str, league: str, week: int, team: str, round_number: int) -&gt; TableData:"
                },
                {
                  "lineNumber": 260,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 261,
                  "content": "        Get game team details data for a specific team in a specific round.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 262,
                  "content": "        Shows individual player scores: Points, Player Name, Player Pins, Opponent Pins, Opponent Name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 263,
                  "content": "        Last row contains accumulated totals.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 264,
                  "isContextLine": true
                },
                {
                  "lineNumber": 265,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 266,
                  "content": "            season: Season identifier",
                  "isContextLine": true
                },
                {
                  "lineNumber": 267,
                  "content": "            league: League name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 268,
                  "content": "            week: Week number",
                  "isContextLine": true
                },
                {
                  "lineNumber": 269,
                  "content": "            team: Team name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 781,
                  "content": "    def get_team_week_details_table_data(self, league: str, season: str, team: str, week: int) -&gt; TableData:"
                },
                {
                  "lineNumber": 782,
                  "content": "        \"\"\"Get team week details as a TableData object for rendering\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 783,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 784,
                  "content": "            # Get individual player results for the team",
                  "isContextLine": true
                },
                {
                  "lineNumber": 785,
                  "content": "            player_filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 786,
                  "content": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 787,
                  "content": "                Columns.season: {'value': season, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 788,
                  "content": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 789,
                  "content": "                Columns.week: {'value': week, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 790,
                  "content": "                Columns.computed_data: {'value': False, 'operator': 'eq'}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 791,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1333,
                  "content": "    def get_league_history_table_data(self, league_name: str, season: str, week: Optional[int] = None) -&gt; TableData:"
                },
                {
                  "lineNumber": 1334,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1335,
                  "content": "        Get league history as a TableData object for rendering.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1336,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1337,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1338,
                  "content": "            league_name: The league name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1339,
                  "content": "            season: The season identifier",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1340,
                  "content": "            week: The week number (if None, gets the latest)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1341,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1342,
                  "content": "        Returns:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1343,
                  "content": "            TableData object with the league history",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1406,
                  "content": "    def get_league_week_table_simple(self, season: str, league: str, week: Optional[int] = None) -&gt; TableData:"
                },
                {
                  "lineNumber": 1407,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1408,
                  "content": "        Get a simplified league week table with direct data query.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1409,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1410,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1411,
                  "content": "            season: The season identifier",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1412,
                  "content": "            league: The league name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1413,
                  "content": "            week: The current week (if None, gets the latest)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1414,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1415,
                  "content": "        Returns:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1416,
                  "content": "            TableData object with the league standings",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1420,
                  "content": "    def get_league_table_simple(self, season: str, league: str, week: Optional[int] = None, include_history: bool = False) -&gt; TableData:"
                },
                {
                  "lineNumber": 1421,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1422,
                  "content": "        Get a simplified league table with direct data query.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1423,
                  "content": "        Can handle both single week and multiple weeks (history).",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1424,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1425,
                  "content": "        Args:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1426,
                  "content": "            season: The season identifier",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1427,
                  "content": "            league: The league name",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1428,
                  "content": "            week: The current week (if None, gets the latest)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1429,
                  "content": "            include_history: If True, shows all weeks up to the selected week",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1430,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1792,
                  "content": "    def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:"
                },
                {
                  "lineNumber": 1793,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1794,
                  "content": "        Get head-to-head comparison table data for a team vs their opponents in a specific week.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1795,
                  "content": "        view_mode: 'own_team' (default), 'opponents', 'full'",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1796,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1797,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1798,
                  "content": "            # Get all matches for the team in this week",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1799,
                  "content": "            team_filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1800,
                  "content": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1801,
                  "content": "                Columns.season: {'value': season, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1802,
                  "content": "                Columns.team_name: {'value': team, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2030,
                  "content": "    def get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:"
                },
                {
                  "lineNumber": 2031,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2032,
                  "content": "        Returns a table with all individual scores of each player of the selected team at the given event (league, season, week).",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2033,
                  "content": "        - Col group 'Opponents': Name (opponent name)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2034,
                  "content": "        - Col group with team name: Score, Points, Total Points (sum of all individual points + team points for the match)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2035,
                  "content": "        - One col group per player who played: Pos, Score, Points",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2036,
                  "content": "        - Each row is a match (round) for the team in that week",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2037,
                  "content": "        - Summary row at the end: sum of all individual scores and points per player, sum of team totals",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2038,
                  "content": "        - hbar above the final row, final row bold",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2039,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2040,
                  "content": "        import pandas as pd",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2300,
                  "content": "    def get_top_team_performances(self, league: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 2301,
                  "content": "        \"\"\"Get top team performances across all seasons based on team averages\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2302,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2303,
                  "content": "            seasons = self.get_seasons()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2304,
                  "content": "            all_performances = []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2305,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2306,
                  "content": "            for season in seasons:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2307,
                  "content": "                try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2308,
                  "content": "                    # Get team averages for the season",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2309,
                  "content": "                    team_averages_data = self.get_team_averages_simple(league, season)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2310,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2357,
                  "content": "    def get_season_timetable(self, league: str, season: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 2358,
                  "content": "        \"\"\"Get season timetable with match day schedule as structured table data\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2359,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2360,
                  "content": "            # Get available weeks for the season",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2361,
                  "content": "            available_weeks = self.get_available_weeks(season, league)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2362,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2363,
                  "content": "            if not available_weeks:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2364,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2365,
                  "content": "                    columns=[],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2366,
                  "content": "                    data=[],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2367,
                  "content": "                    title=f\"No timetable available for {league} - {season}\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2440,
                  "content": "    def get_individual_averages(self, league: str, season: str, week: int = None, team: str = None) -&gt; TableData:"
                },
                {
                  "lineNumber": 2441,
                  "content": "        \"\"\"Get individual player averages for a season, optionally filtered by week and/or team, sorted by performance\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2442,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2443,
                  "content": "            filter_text = \"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2444,
                  "content": "            if week is not None:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2445,
                  "content": "                filter_text += f\" for week {week}\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2446,
                  "content": "            if team is not None:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2447,
                  "content": "                filter_text += f\" for team {team}\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2448,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2449,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2450,
                  "content": "            # Get all player data for the league/season (and optionally week/team)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2575,
                  "content": "    def get_top_individual_performances(self, league: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 2576,
                  "content": "        \"\"\"Get top individual performances across all seasons\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2577,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2578,
                  "content": "            seasons = self.get_seasons()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2579,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2580,
                  "content": "            # Also check what leagues exist in the data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2581,
                  "content": "            league_filters = {}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2582,
                  "content": "            all_league_data = self.adapter.get_filtered_data(filters=league_filters)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2583,
                  "content": "            unique_leagues = all_league_data[Columns.league_name].unique() if not all_league_data.empty else []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2584,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2585,
                  "content": "            all_performances = []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2661,
                  "content": "    def get_record_individual_games(self, league: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 2662,
                  "content": "        \"\"\"Get record individual games (highest scoring individual performances)\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2663,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2664,
                  "content": "            seasons = self.get_seasons()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2665,
                  "content": "            record_games = []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2666,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2667,
                  "content": "            for season in seasons:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2668,
                  "content": "                try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2669,
                  "content": "                    # Get all individual data for the season to find high scores",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2670,
                  "content": "                    filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2671,
                  "content": "                        Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2726,
                  "content": "    def get_record_team_games(self, league: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 2727,
                  "content": "        \"\"\"Get record team games (highest scoring team performances)\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2728,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2729,
                  "content": "            seasons = self.get_seasons()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2730,
                  "content": "            record_games = []",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2731,
                  "isContextLine": true
                },
                {
                  "lineNumber": 2732,
                  "content": "            for season in seasons:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2733,
                  "content": "                try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2734,
                  "content": "                    # Get team totals for the season",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2735,
                  "content": "                    team_filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2736,
                  "content": "                        Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3035,
                  "content": "    def get_team_vs_team_comparison_table(self, league: str, season: str, week: int = None) -&gt; 'TableData':"
                },
                {
                  "lineNumber": 3036,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3037,
                  "content": "        Get team vs team comparison as TableData with heat map.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3038,
                  "content": "        Teams are sorted by average points (across all opponents) before table creation",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3039,
                  "content": "        to ensure proper matrix alignment with diagonal cells.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3040,
                  "content": "        \"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3041,
                  "content": "        from app.models.table_data import TableData, ColumnGroup, Column",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3042,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3043,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3044,
                  "content": "            # ========== DATA COLLECTION ==========",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3045,
                  "content": "            # Get all teams in the league/season",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3442,
                  "content": "    def get_record_games(self, league: str) -&gt; TableData:"
                },
                {
                  "lineNumber": 3443,
                  "content": "        \"\"\"Legacy method - returns individual records for backward compatibility\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3444,
                  "content": "        return self.get_record_individual_games(league)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3445,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3446,
                  "content": "    def get_individual_matches(self, team: str, season: str, league: str) -&gt; pd.DataFrame:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3447,
                  "content": "        \"\"\"Get individual player matches with opponent scores for PvP win calculation\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3448,
                  "content": "        try:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3449,
                  "content": "            # Get ALL individual player data for the league/season (not just our team)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3450,
                  "content": "            # We need this to find opponent matches",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3451,
                  "content": "            all_player_filters = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3452,
                  "content": "                Columns.league_name: {'value': league, 'operator': 'eq'},",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 187,
          "totalMatchedLines": 17
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "What is the TableData class structure? What properties does it have?",
  "includePattern": "app/services",
  "topK": 10,
  "explanation": ""
}
```
Status: **completed**


</details>
</tool-use>

---



---


Creating backend methods that return `TableData` directly, similar to the timetable. Adding them to the service and routes:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "from app.models.table_data import|import.*TableData|ColumnGroup|Column",
  "path": "app/services/league_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "from app.models.table_data import|import.*TableData|ColumnGroup|Column",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 8,
                  "content": "from app.models.table_data import TableData, ColumnGroup, Column, PlotData, TileData"
                },
                {
                  "lineNumber": 12,
                  "content": "from data_access.schema import Columns"
                },
                {
                  "lineNumber": 68,
                  "content": "            Columns.season: {'value': season, 'operator': 'eq'},"
                },
                {
                  "lineNumber": 69,
                  "content": "            Columns.league_name: {'value': league, 'operator': 'eq'},"
                },
                {
                  "lineNumber": 70,
                  "content": "            Columns.week: {'value': week, 'operator': 'eq'}"
                }
              ]
            }
          ],
          "totalLines": 5,
          "totalMatchedLines": 5,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


Adding backend methods that return `TableData` directly. Adding them after `get_team_analysis`:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "9c909670-5bbc-440e-9a3e-62d575e21ec3"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Adding routes for these methods and updating the frontend to use them directly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/routes/league_routes.py"
}
```
Additional data:

```json
{
  "codeblockId": "4564bacd-9fa3-4eee-ad57-a2f7f8c3f766"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---



---


Updating the frontend to fetch table data directly and pass it to Tabulator, similar to the timetable:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "46b35419-4f68-4b8f-990d-c839d726d284"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "a74041d7-71ab-483c-9ac7-1fe1461b2f38"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "c3acc7a6-db5e-4ffb-b987-ec19a50a70ce"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Replacing `createWinPercentageTable` with a simpler method:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "843f4ebe-d65d-4cac-b275-c94743746942"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py",
    "app/routes/league_routes.py",
    "app/static/js/content-blocks/team-performance-block.js",
    "app/static/js/content-blocks/team-win-percentage-block.js"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    },
    {
      "relativeWorkspacePath": "app/routes/league_routes.py"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-performance-block.js"
    },
    {
      "relativeWorkspacePath": "app/static/js/content-blocks/team-win-percentage-block.js"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Refactored to match the timetable pattern:

1. **Backend methods** (`get_team_performance_table_data` and `get_team_win_percentage_table_data`) return `TableData` directly, like `get_season_timetable`.

2. **New routes** (`/league/get_team_performance_table` and `/league/get_team_win_percentage_table`) return the table data.

3. **Frontend simplified**: Removed transformation logic. Now:
   - Fetches table data from the new endpoints
   - Passes it directly to `createTableTabulator` (like the timetable)
   - Only extracts player names for color mapping

The data flow is now:
- **Backend** → `TableData` → **Route** → **Frontend** → `createTableTabulator`

No intermediate transformations. The frontend code is much simpler and matches the timetable pattern.

Note: Ensure `TableData.to_dict()` exists and returns the correct format. If not, we may need to adjust the serialization.

---

_**User (2025-12-09 14:40Z)**_

stats?team=BC+Comet+…tabase=db_real:1100 

 No column definitions available for Tabulator table

createTableTabulator	@	stats?team=BC+Comet+…tabase=db_real:1100

loadPerformanceTable	@	team-performance-block.js?v=82f1b2fb:178

await in loadPerformanceTable		

render	@	team-performance-block.js?v=82f1b2fb:89

await in render		

(anonymous)	@	league-stats-app.js?v=96659650:306

renderContent	@	league-stats-app.js?v=96659650:297

(anonymous)	@	league-stats-app.js?v=96659650:119

processAllButtonGroups	@	centralized-button-m…r.js?v=fe0f2832:188

await in processAllButtonGroups		

handleInitialState	@	centralized-button-m…r.js?v=fe0f2832:106

initialize	@	centralized-button-m…er.js?v=fe0f2832:83

initializeContentBlocks	@	league-stats-app.js?v=96659650:121

initialize	@	league-stats-app.js?v=96659650:43

await in initialize		

(anonymous)	@	league-stats-app.js?v=96659650:370

stats?team=BC+Comet+…tabase=db_real:3376 createLineChart invertYAxis argument: false -> coerced: false type: boolean

stats?team=BC+Comet+…tabase=db_real:3456 ECharts yAxis.inverse: false type: boolean

stats?team=BC+Comet+…tabase=db_real:3695 Order: 

(8) ['BC Comet Nürnberg 1 (Team Average)', 'Fischbach, Max', 'Glatzer, Daniel', 'Mittelmaier, Andreas', 'Schick, Andreas', 'Schlick, Christian', 'Schlundt, Michael', 'Schwarz, Jan']

stats?team=BC+Comet+…tabase=db_real:3707 createScatterChartMultiAxis options: 

{minValue: 160, maxValue: 230, minCircleSize: 7, maxCircleSize: 45, hideNaValues: true, …}

stats?team=BC+Comet+…tabase=db_real:3761 Scaling parameters: 

{valueMin: 160, valueMax: 230, valueRange: 70, minCircleSize: 7, maxCircleSize: 45, …}

stats?team=BC+Comet+…tabase=db_real:3860 Sample data points with sizes for first team: 

(5) [{…}, {…}, {…}, {…}, {…}]

stats?team=BC+Comet+…tabase=db_real:3797 normalizeCircleSize: 

{value: 214, clampedValue: 214, normalized: 0.7714285714285715, result: 36.31428571428572}

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-performance

stats?team=BC+Comet+…tabase=db_real:1100 

 No column definitions available for Tabulator table

createTableTabulator	@	stats?team=BC+Comet+…tabase=db_real:1100

loadWinPercentageTable	@	team-win-percentage-…k.js?v=18d9386d:178

await in loadWinPercentageTable		

render	@	team-win-percentage-…ck.js?v=18d9386d:89

await in render		

(anonymous)	@	league-stats-app.js?v=96659650:306

renderContent	@	league-stats-app.js?v=96659650:297

(anonymous)	@	league-stats-app.js?v=96659650:119

processAllButtonGroups	@	centralized-button-m…r.js?v=fe0f2832:188

await in processAllButtonGroups		

handleInitialState	@	centralized-button-m…r.js?v=fe0f2832:106

initialize	@	centralized-button-m…er.js?v=fe0f2832:83

initializeContentBlocks	@	league-stats-app.js?v=96659650:121

initialize	@	league-stats-app.js?v=96659650:43

await in initialize		

(anonymous)	@	league-stats-app.js?v=96659650:370

stats?team=BC+Comet+…tabase=db_real:3376 createLineChart invertYAxis argument: false -> coerced: false type: boolean

stats?team=BC+Comet+…tabase=db_real:3456 ECharts yAxis.inverse: false type: boolean

stats?team=BC+Comet+…tabase=db_real:3695 Order: 

(8) ['BC Comet Nürnberg 1 (Team)', 'Fischbach, Max', 'Glatzer, Daniel', 'Mittelmaier, Andreas', 'Schick, Andreas', 'Schlick, Christian', 'Schlundt, Michael', 'Schwarz, Jan']

stats?team=BC+Comet+…tabase=db_real:3707 createScatterChartMultiAxis options: 

{minValue: 0, maxValue: 100, minCircleSize: 7, maxCircleSize: 45, hideNaValues: true, …}

stats?team=BC+Comet+…tabase=db_real:3761 Scaling parameters: 

{valueMin: 0, valueMax: 100, valueRange: 100, minCircleSize: 7, maxCircleSize: 45, …}

stats?team=BC+Comet+…tabase=db_real:3860 Sample data points with sizes for first team: 

(5) [{…}, {…}, {…}, {…}, {…}]

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-win-percentage

league-stats-app.js?v=96659650:314 ✅ Content rendering complete

﻿





---

_**Agent (model default, mode Agent)**_



---


The error "No column definitions available" suggests the columns aren't being serialized correctly. Checking how `TableData.to_dict()` serializes columns and comparing with the timetable format:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "def to_dict|to_dict.*TableData",
  "path": "app/models",
  "contextAfter": 30,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "def to_dict|to_dict.*TableData",
    "path": "app/models",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/models/table_data.py",
              "matches": [
                {
                  "lineNumber": 48,
                  "content": "    def to_dict(self) -&gt; Dict[str, Any]:"
                },
                {
                  "lineNumber": 49,
                  "content": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 50,
                  "content": "        return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 51,
                  "content": "            \"columns\": [",
                  "isContextLine": true
                },
                {
                  "lineNumber": 52,
                  "content": "                {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 53,
                  "content": "                    \"title\": group.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 54,
                  "content": "                    \"columns\": [",
                  "isContextLine": true
                },
                {
                  "lineNumber": 55,
                  "content": "                        {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 56,
                  "content": "                            \"title\": col.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 57,
                  "content": "                            \"field\": col.field,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 58,
                  "content": "                            **({\"sortable\": col.sortable} if col.sortable is not None else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 59,
                  "content": "                            **({\"filterable\": col.filterable} if col.filterable is not None else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 60,
                  "content": "                            **({\"width\": col.width} if col.width else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 61,
                  "content": "                            **({\"align\": col.align} if col.align else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 62,
                  "content": "                            **({\"format\": col.format} if col.format else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 63,
                  "content": "                            **({\"style\": col.style} if col.style else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 64,
                  "content": "                            **({\"tooltip\": col.tooltip} if col.tooltip else {})",
                  "isContextLine": true
                },
                {
                  "lineNumber": 65,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 66,
                  "content": "                        for col in group.columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 67,
                  "content": "                    ],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 68,
                  "content": "                    **({\"frozen\": group.frozen} if group.frozen else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 69,
                  "content": "                    **({\"style\": group.style} if group.style else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 70,
                  "content": "                    **({\"headerStyle\": group.header_style} if group.header_style else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 71,
                  "content": "                    **({\"width\": group.width} if group.width else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 72,
                  "content": "                    **({\"highlighted\": group.highlighted} if group.highlighted else {})",
                  "isContextLine": true
                },
                {
                  "lineNumber": 73,
                  "content": "                }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 74,
                  "content": "                for group in self.columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 75,
                  "content": "            ],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 76,
                  "content": "            \"data\": self.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 77,
                  "content": "            **({\"title\": self.title} if self.title else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 78,
                  "content": "            **({\"description\": self.description} if self.description else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 102,
                  "content": "    def to_dict(self) -&gt; Dict[str, Any]:"
                },
                {
                  "lineNumber": 103,
                  "content": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 104,
                  "content": "        return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 105,
                  "content": "            \"title\": self.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 106,
                  "content": "            \"series\": self.series,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 107,
                  "content": "            \"xAxis\": {\"categories\": self.x_axis} if self.x_axis else {},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 108,
                  "content": "            \"yAxis\": {\"title\": {\"text\": self.y_axis_label}} if self.y_axis_label else {},",
                  "isContextLine": true
                },
                {
                  "lineNumber": 109,
                  "content": "            \"plotType\": self.plot_type,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 110,
                  "content": "            \"options\": self.options",
                  "isContextLine": true
                },
                {
                  "lineNumber": 111,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 112,
                  "isContextLine": true
                },
                {
                  "lineNumber": 113,
                  "content": "@dataclass",
                  "isContextLine": true
                },
                {
                  "lineNumber": 114,
                  "content": "class TileData:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 115,
                  "content": "    \"\"\"Data structure for dashboard tiles/cards.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 116,
                  "content": "    title: str",
                  "isContextLine": true
                },
                {
                  "lineNumber": 117,
                  "content": "    value: Any  # The primary value to display",
                  "isContextLine": true
                },
                {
                  "lineNumber": 118,
                  "content": "    subtitle: Optional[str] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 119,
                  "content": "    trend: Optional[Dict[str, Any]] = None  # Trend information (value, direction, etc.)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 120,
                  "content": "    icon: Optional[str] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 121,
                  "content": "    color: Optional[str] = None  # Primary color",
                  "isContextLine": true
                },
                {
                  "lineNumber": 122,
                  "content": "    size: str = \"small\"  # small, medium, large, wide",
                  "isContextLine": true
                },
                {
                  "lineNumber": 123,
                  "content": "    type: str = \"stat\"  # stat, trend, progress, chart, info",
                  "isContextLine": true
                },
                {
                  "lineNumber": 124,
                  "content": "    chart_data: Optional[List[Union[int, float]]] = None  # For mini charts",
                  "isContextLine": true
                },
                {
                  "lineNumber": 125,
                  "content": "    link: Optional[str] = None  # URL to navigate to on click",
                  "isContextLine": true
                },
                {
                  "lineNumber": 126,
                  "isContextLine": true
                },
                {
                  "lineNumber": 127,
                  "content": "    def to_dict(self) -&gt; Dict[str, Any]:"
                },
                {
                  "lineNumber": 128,
                  "content": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 129,
                  "content": "        result = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 130,
                  "content": "            \"title\": self.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 131,
                  "content": "            \"value\": self.value,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 132,
                  "content": "            \"size\": self.size,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 133,
                  "content": "            \"type\": self.type",
                  "isContextLine": true
                },
                {
                  "lineNumber": 134,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 135,
                  "isContextLine": true
                },
                {
                  "lineNumber": 136,
                  "content": "        if self.subtitle:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 137,
                  "content": "            result[\"subtitle\"] = self.subtitle",
                  "isContextLine": true
                },
                {
                  "lineNumber": 138,
                  "isContextLine": true
                },
                {
                  "lineNumber": 139,
                  "content": "        if self.trend:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 140,
                  "content": "            result[\"trend\"] = self.trend",
                  "isContextLine": true
                },
                {
                  "lineNumber": 141,
                  "isContextLine": true
                },
                {
                  "lineNumber": 142,
                  "content": "        if self.icon:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 143,
                  "content": "            result[\"icon\"] = self.icon",
                  "isContextLine": true
                },
                {
                  "lineNumber": 144,
                  "isContextLine": true
                },
                {
                  "lineNumber": 145,
                  "content": "        if self.color:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 146,
                  "content": "            result[\"color\"] = self.color",
                  "isContextLine": true
                },
                {
                  "lineNumber": 147,
                  "isContextLine": true
                },
                {
                  "lineNumber": 148,
                  "content": "        if self.chart_data:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 149,
                  "content": "            result[\"chartData\"] = self.chart_data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 150,
                  "isContextLine": true
                },
                {
                  "lineNumber": 151,
                  "content": "        if self.link:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 152,
                  "content": "            result[\"link\"] = self.link",
                  "isContextLine": true
                },
                {
                  "lineNumber": 153,
                  "isContextLine": true
                },
                {
                  "lineNumber": 154,
                  "content": "        return result",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/models/series_data.py",
              "matches": [
                {
                  "lineNumber": 19,
                  "content": "    def to_dict(self) -&gt; Dict[str, Any]:"
                },
                {
                  "lineNumber": 20,
                  "content": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 21,
                  "isContextLine": true
                },
                {
                  "lineNumber": 22,
                  "content": "        sorted_by_alphabet = sorted(self.data.keys())",
                  "isContextLine": true
                },
                {
                  "lineNumber": 23,
                  "content": "        sorted_by_total = sorted(self.data.keys(), key=lambda x: self.total[x], reverse=True)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 24,
                  "content": "        sorted_by_average = sorted(self.data.keys(), key=lambda x: self.average[x], reverse=True)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 25,
                  "isContextLine": true
                },
                {
                  "lineNumber": 26,
                  "content": "        return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 27,
                  "content": "            \"name\": self.name,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 28,
                  "content": "            \"label_x_axis\": self.label_x_axis,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 29,
                  "content": "            \"label_y_axis\": self.label_y_axis,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 30,
                  "content": "            \"query_params\": self.query_params,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 31,
                  "content": "            \"data\": self.data,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 32,
                  "content": "            \"data_accumulated\": self.data_accumulated,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 33,
                  "content": "            \"total\": self.total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 34,
                  "content": "            \"average\": self.average,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 35,
                  "content": "            \"counts\": self.counts,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 36,
                  "content": "            \"length\": self.length,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 37,
                  "content": "            \"sorted_by_alphabet\": sorted_by_alphabet,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 38,
                  "content": "            \"sorted_by_total\": sorted_by_total,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 39,
                  "content": "            \"sorted_by_average\": sorted_by_average",
                  "isContextLine": true
                },
                {
                  "lineNumber": 40,
                  "isContextLine": true
                },
                {
                  "lineNumber": 41,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 42,
                  "isContextLine": true
                },
                {
                  "lineNumber": 43,
                  "content": "    def add_data(self, key: str, data: List[Union[float, None]]):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 44,
                  "content": "        \"\"\"Add data to the series.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 45,
                  "content": "        # add / replace data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 46,
                  "content": "        self.data[key] = data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 47,
                  "isContextLine": true
                },
                {
                  "lineNumber": 48,
                  "content": "        # Filter out None values for calculations",
                  "isContextLine": true
                },
                {
                  "lineNumber": 49,
                  "content": "        valid_data = [x for x in data if x is not None]",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 115,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


The timetable uses bare `Column` objects, but `TableData.to_dict()` expects `ColumnGroup` objects. Checking how `TableData` handles this:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/models/table_data.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "class TableData|def __init__|columns.*=",
  "path": "app/models/table_data.py",
  "contextAfter": 20,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "class TableData|def __init__|columns.*=",
    "path": "app/models/table_data.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/models/table_data.py",
              "matches": [
                {
                  "lineNumber": 30,
                  "content": "class TableData:"
                },
                {
                  "lineNumber": 31,
                  "content": "    \"\"\"Complete table data structure.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 32,
                  "content": "    columns: Union[List[ColumnGroup], List[Column]]  # Accept either ColumnGroups or bare Columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 33,
                  "content": "    data: List[List[Any]]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 34,
                  "content": "    title: Optional[str] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 35,
                  "content": "    description: Optional[str] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 36,
                  "content": "    config: Optional[Dict[str, Any]] = field(default_factory=dict)  # Table-wide configuration",
                  "isContextLine": true
                },
                {
                  "lineNumber": 37,
                  "content": "    metadata: Optional[Dict[str, Any]] = field(default_factory=dict)  # Additional metadata for i18n and UI",
                  "isContextLine": true
                },
                {
                  "lineNumber": 38,
                  "content": "    row_metadata: Optional[List[Dict[str, Any]]] = field(default_factory=list)  # Row-level metadata for styling",
                  "isContextLine": true
                },
                {
                  "lineNumber": 39,
                  "content": "    cell_metadata: Optional[Dict[str, Dict[str, Any]]] = field(default_factory=dict)  # Cell-level metadata for styling (format: \"row:col\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 40,
                  "content": "    default_sort: Optional[Dict[str, str]] = None  # Default sort: {\"field\": \"average\", \"dir\": \"desc\"}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 41,
                  "isContextLine": true
                },
                {
                  "lineNumber": 42,
                  "content": "    def __post_init__(self):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 43,
                  "content": "        \"\"\"Normalize columns: if bare Columns are provided, wrap them in a ColumnGroup with empty title.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 44,
                  "content": "        if self.columns and len(self.columns) &gt; 0 and isinstance(self.columns[0], Column):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 45,
                  "content": "            # Convert List[Column] to List[ColumnGroup] by wrapping in a single group",
                  "isContextLine": true
                },
                {
                  "lineNumber": 46,
                  "content": "            self.columns = [ColumnGroup(title=\"\", columns=list(self.columns))]"
                },
                {
                  "lineNumber": 47,
                  "isContextLine": true
                },
                {
                  "lineNumber": 48,
                  "content": "    def to_dict(self) -&gt; Dict[str, Any]:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 49,
                  "content": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 50,
                  "content": "        return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 51,
                  "content": "            \"columns\": [",
                  "isContextLine": true
                },
                {
                  "lineNumber": 52,
                  "content": "                {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 53,
                  "content": "                    \"title\": group.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 54,
                  "content": "                    \"columns\": [",
                  "isContextLine": true
                },
                {
                  "lineNumber": 55,
                  "content": "                        {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 56,
                  "content": "                            \"title\": col.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 57,
                  "content": "                            \"field\": col.field,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 58,
                  "content": "                            **({\"sortable\": col.sortable} if col.sortable is not None else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 59,
                  "content": "                            **({\"filterable\": col.filterable} if col.filterable is not None else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 60,
                  "content": "                            **({\"width\": col.width} if col.width else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 61,
                  "content": "                            **({\"align\": col.align} if col.align else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 62,
                  "content": "                            **({\"format\": col.format} if col.format else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 63,
                  "content": "                            **({\"style\": col.style} if col.style else {}),",
                  "isContextLine": true
                },
                {
                  "lineNumber": 64,
                  "content": "                            **({\"tooltip\": col.tooltip} if col.tooltip else {})",
                  "isContextLine": true
                },
                {
                  "lineNumber": 65,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 66,
                  "content": "                        for col in group.columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 87,
                  "content": "#class TableDataLeague(TableData):"
                },
                {
                  "lineNumber": 88,
                  "content": "#    \"\"\"Table data for a league.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 89,
                  "content": "#    league: str",
                  "isContextLine": true
                },
                {
                  "lineNumber": 90,
                  "isContextLine": true
                },
                {
                  "lineNumber": 91,
                  "content": "@dataclass",
                  "isContextLine": true
                },
                {
                  "lineNumber": 92,
                  "content": "class PlotData:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 93,
                  "content": "    \"\"\"Data structure for chart/plot visualization.\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 94,
                  "content": "    title: str",
                  "isContextLine": true
                },
                {
                  "lineNumber": 95,
                  "content": "    series: List[Dict[str, Any]]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 96,
                  "content": "    x_axis: Optional[List[Any]] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 97,
                  "content": "    y_axis_label: Optional[str] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 98,
                  "content": "    x_axis_label: Optional[str] = None",
                  "isContextLine": true
                },
                {
                  "lineNumber": 99,
                  "content": "    plot_type: str = \"line\"  # line, bar, scatter, pie, etc.",
                  "isContextLine": true
                },
                {
                  "lineNumber": 100,
                  "content": "    options: Dict[str, Any] = field(default_factory=dict)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 101,
                  "isContextLine": true
                },
                {
                  "lineNumber": 102,
                  "content": "    def to_dict(self) -&gt; Dict[str, Any]:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 103,
                  "content": "        \"\"\"Convert to a dictionary suitable for JSON serialization\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 104,
                  "content": "        return {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 105,
                  "content": "            \"title\": self.title,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 106,
                  "content": "            \"series\": self.series,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 107,
                  "content": "            \"xAxis\": {\"categories\": self.x_axis} if self.x_axis else {},",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 58,
          "totalMatchedLines": 3
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


`TableData.data` is typed as `List[List[Any]]` (arrays), but we're passing objects. Also, if `weeks` is empty, no week columns are created. Checking and fixing:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "ba9ebf27-1731-44a0-9653-a03e482ffc30"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "ecb120ea-3d15-4535-b3a4-9458d7402a50"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "0bffae0c-1481-4818-ae32-ab9602fe54d0"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


Checking if `weeks` is empty or if there's a serialization issue. Adding debug logging and verifying the data structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "a25beb72-1238-4959-8982-96651ac054d7"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "b86f9fd3-089a-4420-bd97-c00632eee231"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


Checking if the issue is with column serialization. Verifying the data format and adding a check:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "def flattenColumnMetadata",
  "path": "app/templates/components/tables.html",
  "contextAfter": 20,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "def flattenColumnMetadata",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "from app.models.table_data import TableData, ColumnGroup, Column; td = TableData(columns=[ColumnGroup(title='Test', columns=[Column(title='Col1', field='col1')])], data=[]); import json; print(json.dumps(td.to_dict(), indent=2))"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "from app.models.table_data import TableData, ColumnGroup, Column; td = TableData(columns=[ColumnGroup(title='Test', columns=[Column(title='Col1', field='col1')])], data=[]); import json; print(json.dumps(td.to_dict(), indent=2))"
```
</details>
</tool-use>

---



---


Checking what `flattenColumnMetadata` expects and verifying the column structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "330fdc29-de26-4c9e-8380-cf09f6444576"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "e91110ea-7c00-42bb-b936-18c2c362afd1"
}
```
Status: **completed**


</details>
</tool-use>

---

The model provided an ambiguous search string to replace

---

The model provided an ambiguous search string to replace

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "82517a4c-1e15-4647-a92c-5cd8ac5e1030"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "82cdee66-7473-4438-ad79-03a60acc7e26"
}
```
Status: **completed**


</details>
</tool-use>

---

The model provided an ambiguous search string to replace

---

The model provided an ambiguous search string to replace

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 1 file</summary>
      
Lint paths:

- `app/services/league_service.py`

Lint results

Lint errors for `app/services/league_service.py`


| Message | Range | Severity |
|-------|-------|----------|
| "weeks" is not defined | 3101:38-3101:43 | DIAGNOSTIC_SEVERITY_WARNING |
| "weeks" is not defined | 3120:38-3120:43 | DIAGNOSTIC_SEVERITY_WARNING |
| "weeks" is not defined | 3248:38-3248:43 | DIAGNOSTIC_SEVERITY_WARNING |
| "weeks" is not defined | 3267:38-3267:43 | DIAGNOSTIC_SEVERITY_WARNING |


</details>
</tool-use>

---



---


Fixing remaining references to `weeks`:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

The model provided an ambiguous search string to replace

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "8789578f-96d8-4d1a-b392-51e0ce4c86bc"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "fee8a0de-6d25-434a-a9e1-01ae73f8fb68"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "1384383e-19b6-414c-bec2-8ad62d173483"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 1 file</summary>
      
Lint paths:

- `app/services/league_service.py`

Lint results

Lint errors for `app/services/league_service.py`


| Message | Range | Severity |
|-------|-------|----------|
| "weeks" is not defined | 3101:38-3101:43 | DIAGNOSTIC_SEVERITY_WARNING |
| "weeks" is not defined | 3267:38-3267:43 | DIAGNOSTIC_SEVERITY_WARNING |


</details>
</tool-use>

---



---


Fixing the remaining two references:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "8a011e3b-a755-4b48-b182-a576f865c570"
}
```
Status: **completed**


</details>
</tool-use>

---

The string to replace was not found in the file.

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 1 file</summary>
      
Lint paths:

- `app/services/league_service.py`

Lint results

Lint errors for `app/services/league_service.py`


| Message | Range | Severity |
|-------|-------|----------|
| "weeks" is not defined | 3101:38-3101:43 | DIAGNOSTIC_SEVERITY_WARNING |


</details>
</tool-use>

---



---


Fixing the last reference:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

The string to replace was not found in the file.

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Linter errors are fixed. The issue is that `flattenColumnMetadata` expects `data.columns` to be an array of groups, each with a `columns` array. Verifying the serialized structure and adding debug logging to inspect what's received:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "72032518-ccdc-4d38-a5f8-f3d449d6e023"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "e1b092e4-c755-4317-9eb8-01ded1f10b11"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Added debug logging to inspect the received data. The error "No column definitions available" suggests `flattenColumnMetadata` is returning an empty array, which could mean:

1. `data.columns` is empty or missing
2. The columns aren't in the expected format
3. The columns aren't being serialized correctly

The debug logs will show what's received. Check the browser console to see:
- Whether `columns` exists and its length
- The structure of the first column
- Whether `data` exists

This will help identify if the issue is:
- Empty `weeks` (no week columns, but player and totals columns should still exist)
- Serialization issue (columns not being converted to dict correctly)
- Data format issue (columns in wrong format)

After checking the console output, we can fix the root cause. The backend methods should work correctly; the issue is likely in how the data is being received or parsed.

---

_**User (2025-12-09 14:40Z)**_

still broke:

Team Performance Table Data received: {hasColumns: true, columnsLength: 0, columnsType: 'array', firstColumn: undefined, hasData: true, …}



stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:1100  No column definitions available for Tabulator table

createTableTabulator @ stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:1100

loadPerformanceTable @ team-performance-block.js?v=8e030d39:188

await in loadPerformanceTable

render @ team-performance-block.js?v=8e030d39:89

await in render

(anonymous) @ league-stats-app.js?v=96659650:306

renderContent @ league-stats-app.js?v=96659650:297

(anonymous) @ league-stats-app.js?v=96659650:119

processAllButtonGroups @ centralized-button-manager.js?v=fe0f2832:188

await in processAllButtonGroups

handleInitialState @ centralized-button-manager.js?v=fe0f2832:106

initialize @ centralized-button-manager.js?v=fe0f2832:83

initializeContentBlocks @ league-stats-app.js?v=96659650:121

initialize @ league-stats-app.js?v=96659650:43

await in initialize

(anonymous) @ league-stats-app.js?v=96659650:370

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3376 createLineChart invertYAxis argument: false -> coerced: false type: boolean

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3456 ECharts yAxis.inverse: false type: boolean

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3695 Order: (8) ['BC Comet Nürnberg 1 (Team Average)', 'Fischbach, Max', 'Glatzer, Daniel', 'Mittelmaier, Andreas', 'Schick, Andreas', 'Schlick, Christian', 'Schlundt, Michael', 'Schwarz, Jan']

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3707 createScatterChartMultiAxis options: {minValue: 160, maxValue: 230, minCircleSize: 7, maxCircleSize: 45, hideNaValues: true, …}

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3761 Scaling parameters: {valueMin: 160, valueMax: 230, valueRange: 70, minCircleSize: 7, maxCircleSize: 45, …}

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3860 Sample data points with sizes for first team: (5) [{…}, {…}, {…}, {…}, {…}]

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-performance

team-win-percentage-block.js?v=0f67e5af:166 Team Win Percentage Table Data received: {hasColumns: true, columnsLength: 0, columnsType: 'array', firstColumn: undefined, hasData: true, …}

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:1100  No column definitions available for Tabulator table

createTableTabulator @ stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:1100

loadWinPercentageTable @ team-win-percentage-block.js?v=0f67e5af:188

await in loadWinPercentageTable

render @ team-win-percentage-block.js?v=0f67e5af:89

await in render

(anonymous) @ league-stats-app.js?v=96659650:306

renderContent @ league-stats-app.js?v=96659650:297

(anonymous) @ league-stats-app.js?v=96659650:119

processAllButtonGroups @ centralized-button-manager.js?v=fe0f2832:188

await in processAllButtonGroups

handleInitialState @ centralized-button-manager.js?v=fe0f2832:106

initialize @ centralized-button-manager.js?v=fe0f2832:83

initializeContentBlocks @ league-stats-app.js?v=96659650:121

initialize @ league-stats-app.js?v=96659650:43

await in initialize

(anonymous) @ league-stats-app.js?v=96659650:370

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3376 createLineChart invertYAxis argument: false -> coerced: false type: boolean

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3456 ECharts yAxis.inverse: false type: boolean

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3695 Order: (8) ['BC Comet Nürnberg 1 (Team)', 'Fischbach, Max', 'Glatzer, Daniel', 'Mittelmaier, Andreas', 'Schick, Andreas', 'Schlick, Christian', 'Schlundt, Michael', 'Schwarz, Jan']

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3707 createScatterChartMultiAxis options: {minValue: 0, maxValue: 100, minCircleSize: 7, maxCircleSize: 45, hideNaValues: true, …}

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3761 Scaling parameters: {valueMin: 0, valueMax: 100, valueRange: 100, minCircleSize: 7, maxCircleSize: 45, …}

stats?team=BC+Comet+N%C3%BCrnberg+1&season=24%2F25&league=BayL&league_long=Bayernliga&database=db_real:3860 Sample data points with sizes for first team: (5) [{…}, {…}, {…}, {…}, {…}]

league-stats-app.js?v=96659650:307 ✅ Rendered block: team-win-percentage

league-stats-app.js?v=96659650:314 ✅ Content rendering complete

---

_**Agent (model default, mode Agent)**_



---


The `columns` array is empty (`columnsLength: 0`). Checking the backend to see why columns aren't being created:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_command_v2">
<details><summary>Tool use: **run_terminal_command_v2** • Run command: cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "from app.models.table_data import TableData, ColumnGroup, Column; from app.services.i18n_service import i18n_service; cols = [ColumnGroup(title='Test', columns=[Column(title='Col1', field='col1')])]; td = TableData(columns=cols, data=[]); import json; d = td.to_dict(); print('Columns:', json.dumps(d['columns'], indent=2))"</summary>

```bash
cd "c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer" && python -c "from app.models.table_data import TableData, ColumnGroup, Column; from app.services.i18n_service import i18n_service; cols = [ColumnGroup(title='Test', columns=[Column(title='Col1', field='col1')])]; td = TableData(columns=cols, data=[]); import json; d = td.to_dict(); print('Columns:', json.dumps(d['columns'], indent=2))"
```
</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


The `columns` array is empty (`columnsLength: 0`). Checking backend serialization and adding debug logging:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/routes/league_routes.py"
}
```
Additional data:

```json
{
  "codeblockId": "6a436006-1a15-4eaf-84c8-7d9ac513e8ae"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/routes/league_routes.py"
}
```
Additional data:

```json
{
  "codeblockId": "33a80e89-0e8d-4e7b-a287-c9d225bf7d9c"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "9568eb55-c3b4-4032-abbe-38eb7e2d4c4b"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "9baebf90-0e7c-4005-a42e-13d2f6b09415"
}
```
Status: **completed**


</details>
</tool-use>

---



---


The columns array is empty. Adding debug logging to trace where columns are lost. Checking if `TableData.__post_init__` is causing an issue:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/models/table_data.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "from app.models.table_data import|import.*ColumnGroup|import.*Column",
  "path": "app/services/league_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "from app.models.table_data import|import.*ColumnGroup|import.*Column",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 8,
                  "content": "from app.models.table_data import TableData, ColumnGroup, Column, PlotData, TileData"
                },
                {
                  "lineNumber": 12,
                  "content": "from data_access.schema import Columns"
                }
              ]
            },
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 8,
                  "content": "from app.models.table_data import TableData, ColumnGroup, Column, PlotData, TileData"
                }
              ]
            }
          ],
          "totalLines": 3,
          "totalMatchedLines": 3,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


The debug logs should show where columns are lost. The console shows `columnsLength: 0`, so the columns array is empty when it reaches the frontend. Checking the backend console output will help identify where they're being dropped.

Checking if the issue is with `TableData` initialization or serialization. Verifying the columns are created correctly:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/models/table_data.py</summary>

</details>
</tool-use>

---



---


The columns array is empty. The debug logs should show where they're lost. Checking if an exception is being caught silently. Adding a safeguard to ensure columns are always created:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "except.*Exception|except.*e:",
  "path": "app/services/league_service.py",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "except.*Exception|except.*e:",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 249,
                  "content": "        except Exception as e:"
                },
                {
                  "lineNumber": 250,
                  "content": "            print(f\"Error in get_game_overview_data: {e}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 251,
                  "content": "            import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 252,
                  "content": "            traceback.print_exc()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 253,
                  "content": "            return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 254,
                  "content": "                columns=[],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 430,
                  "content": "                            except (IndexError, KeyError, ValueError) as e:"
                }
              ]
            },
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 249,
                  "content": "        except Exception as e:"
                },
                {
                  "lineNumber": 250,
                  "content": "            print(f\"Error in get_game_overview_data: {e}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 251,
                  "content": "            import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 252,
                  "content": "            traceback.print_exc()",
                  "isContextLine": true
                },
                {
                  "lineNumber": 253,
                  "content": "            return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 254,
                  "content": "                columns=[],",
                  "isContextLine": true
                },
                {
                  "lineNumber": 430,
                  "content": "                            except (IndexError, KeyError, ValueError) as e:"
                }
              ]
            }
          ],
          "totalLines": 14,
          "totalMatchedLines": 4,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---



---


Checking backend console output. The frontend shows `columnsLength: 0`, so columns are empty. Verifying the columns structure and ensuring they're created correctly. Checking if `TableData.__post_init__` is causing an issue:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "78b05ee0-955c-493f-83d6-07390e1a5b41"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "46343b2b-4bb1-45bb-ba26-67553ca2e39e"
}
```
Status: **completed**


</details>
</tool-use>

---



---


Added debug logging. The backend console should show where columns are lost. The frontend shows `columnsLength: 0`, so the columns array is empty when it reaches the frontend.

Check the backend console output for the DEBUG messages. They should show:
1. Whether columns are created in the backend
2. Whether they survive `TableData` initialization
3. Whether they're serialized correctly in `to_dict()`

If the backend shows columns but the frontend receives an empty array, the issue is likely in JSON serialization or the route. The debug logs will help pinpoint it.

Please share the backend console output so we can see where the columns are being lost.

---

_**User (2025-12-09 14:40Z)**_

@Python (992-1020) 

---

_**Agent (model default, mode Agent)**_



---


The error is: `I18nService.get_text() takes 2 positional arguments but 3 were given`. Checking the correct `get_text` signature and fixing the calls:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "def get_text|get_text\\(",
  "path": "app/services/i18n_service.py",
  "contextAfter": 10,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "def get_text|get_text\\(",
    "path": "app/services/i18n_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/i18n_service.py",
              "matches": [
                {
                  "lineNumber": 289,
                  "content": "    def get_text(self, key: str) -&gt; str:"
                },
                {
                  "lineNumber": 290,
                  "content": "        \"\"\"Get translated text for the given key\"\"\"",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "        with self._lock:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 292,
                  "content": "            return self._translations[self._current_language].get(key, key)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "isContextLine": true
                },
                {
                  "lineNumber": 294,
                  "content": "    def get_translations_version(self) -&gt; str:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "        with self._lock:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 296,
                  "content": "            return self._translations_version",
                  "isContextLine": true
                },
                {
                  "lineNumber": 297,
                  "isContextLine": true
                },
                {
                  "lineNumber": 298,
                  "content": "    # ---- Internal helpers ----",
                  "isContextLine": true
                },
                {
                  "lineNumber": 299,
                  "content": "    def _build_translations_from_catalog(self, catalog: Dict[str, Dict[str, str]]) -&gt; Dict[Language, Dict[str, str]]:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 335,
                  "content": "            Language.ENGLISH.value: self.get_text(\"english\"),"
                },
                {
                  "lineNumber": 336,
                  "content": "            Language.GERMAN.value: self.get_text(\"german\")"
                },
                {
                  "lineNumber": 337,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 338,
                  "isContextLine": true
                },
                {
                  "lineNumber": 339,
                  "content": "# Global instance - default to German",
                  "isContextLine": true
                },
                {
                  "lineNumber": 340,
                  "content": "i18n_service = I18nService(default_language=Language.GERMAN)",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 17,
          "totalMatchedLines": 3
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "i18n_service\\.get_text\\(",
  "path": "app/services/league_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "i18n_service\\.get_text\\(",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 122,
                  "content": "                    title=f\"{i18n_service.get_text('no_data_available')} - {i18n_service.get_text('game')} {round_number}\""
                },
                {
                  "lineNumber": 135,
                  "content": "                    title=i18n_service.get_text(\"team\"),"
                },
                {
                  "lineNumber": 139,
                  "content": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),"
                },
                {
                  "lineNumber": 140,
                  "content": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),"
                }
              ]
            },
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 122,
                  "content": "                    title=f\"{i18n_service.get_text('no_data_available')} - {i18n_service.get_text('game')} {round_number}\""
                },
                {
                  "lineNumber": 135,
                  "content": "                    title=i18n_service.get_text(\"team\"),"
                },
                {
                  "lineNumber": 139,
                  "content": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),"
                },
                {
                  "lineNumber": 140,
                  "content": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),"
                },
                {
                  "lineNumber": 141,
                  "content": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 142,
                  "content": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")"
                },
                {
                  "lineNumber": 146,
                  "content": "                    title=i18n_service.get_text(\"opponent\"),"
                }
              ]
            }
          ],
          "totalLines": 11,
          "totalMatchedLines": 11,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/i18n_service.py</summary>

</details>
</tool-use>

---



---


Fixing `i18n_service.get_text()` calls: it only takes one argument (the key), not two. Updating all calls:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "i18n_service\\.get_text\\([^)]+,[^)]+\\)",
  "path": "app/services/league_service.py",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "i18n_service\\.get_text\\([^)]+,[^)]+\\)",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 3047,
                  "content": "                    title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3050,
                  "content": "                        Column(title=i18n_service.get_text('player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3060,
                  "content": "                        title=f\"{i18n_service.get_text('match_day_label', 'Week')} {idx + 1}\","
                },
                {
                  "lineNumber": 3068,
                  "content": "                    title=i18n_service.get_text('ui.team_performance.weekly_avg_game', 'Weekly Avg/Game'),"
                },
                {
                  "lineNumber": 3074,
                  "content": "                title=i18n_service.get_text('ui.win_percentage.totals', 'Totals'),"
                },
                {
                  "lineNumber": 3076,
                  "content": "                    Column(title=i18n_service.get_text('ui.team_performance.total_score', 'Total Score'), field='total_score', width='100px', align='center'),"
                },
                {
                  "lineNumber": 3077,
                  "content": "                    Column(title=i18n_service.get_text('games', 'Games'), field='total_games', width='80px', align='center'),"
                },
                {
                  "lineNumber": 3078,
                  "content": "                    Column(title=i18n_service.get_text('ui.team_performance.avg_per_game', 'Avg/Game'), field='avg_per_game', width='100px', align='center')"
                },
                {
                  "lineNumber": 3158,
                  "content": "                        title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3161,
                  "content": "                            Column(title=i18n_service.get_text('player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3169,
                  "content": "                title=f\"{team_name} - {i18n_service.get_text('ui.team_performance.player_performance', 'Player Performance')}\","
                },
                {
                  "lineNumber": 3170,
                  "content": "                description=i18n_service.get_text('ui.team_performance.player_perf_desc', 'Individual player average scores per game with totals and averages'),"
                },
                {
                  "lineNumber": 3226,
                  "content": "                    title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3229,
                  "content": "                        Column(title=i18n_service.get_text('ui.win_percentage.player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3239,
                  "content": "                        title=f\"{i18n_service.get_text('week', 'Week')} {idx + 1}\","
                },
                {
                  "lineNumber": 3247,
                  "content": "                    title=i18n_service.get_text('ui.win_percentage.weekly', 'Weekly Win %'),"
                },
                {
                  "lineNumber": 3253,
                  "content": "                title=i18n_service.get_text('ui.win_percentage.totals', 'Totals'),"
                },
                {
                  "lineNumber": 3255,
                  "content": "                    Column(title=i18n_service.get_text('ui.win_percentage.total_wins', 'Total Wins'), field='total_wins', width='100px', align='center'),"
                },
                {
                  "lineNumber": 3256,
                  "content": "                    Column(title=i18n_service.get_text('ui.win_percentage.total_matches', 'Total Matches'), field='total_matches', width='100px', align='center'),"
                },
                {
                  "lineNumber": 3257,
                  "content": "                    Column(title=i18n_service.get_text('ui.win_percentage.win_percentage', 'Win %'), field='win_percentage', width='80px', align='center')"
                },
                {
                  "lineNumber": 3337,
                  "content": "                        title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3340,
                  "content": "                            Column(title=i18n_service.get_text('ui.win_percentage.player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3348,
                  "content": "                title=f\"{team_name} - {i18n_service.get_text('ui.win_percentage.title', 'Win Percentages')}\","
                },
                {
                  "lineNumber": 3349,
                  "content": "                description=i18n_service.get_text('ui.win_percentage.individual_desc', 'Individual player win percentages per week with totals'),"
                }
              ]
            },
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 3047,
                  "content": "                    title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3050,
                  "content": "                        Column(title=i18n_service.get_text('player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3060,
                  "content": "                        title=f\"{i18n_service.get_text('match_day_label', 'Week')} {idx + 1}\","
                },
                {
                  "lineNumber": 3068,
                  "content": "                    title=i18n_service.get_text('ui.team_performance.weekly_avg_game', 'Weekly Avg/Game'),"
                },
                {
                  "lineNumber": 3074,
                  "content": "                title=i18n_service.get_text('ui.win_percentage.totals', 'Totals'),"
                },
                {
                  "lineNumber": 3076,
                  "content": "                    Column(title=i18n_service.get_text('ui.team_performance.total_score', 'Total Score'), field='total_score', width='100px', align='center'),"
                },
                {
                  "lineNumber": 3077,
                  "content": "                    Column(title=i18n_service.get_text('games', 'Games'), field='total_games', width='80px', align='center'),"
                },
                {
                  "lineNumber": 3078,
                  "content": "                    Column(title=i18n_service.get_text('ui.team_performance.avg_per_game', 'Avg/Game'), field='avg_per_game', width='100px', align='center')"
                },
                {
                  "lineNumber": 3158,
                  "content": "                        title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3161,
                  "content": "                            Column(title=i18n_service.get_text('player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3169,
                  "content": "                title=f\"{team_name} - {i18n_service.get_text('ui.team_performance.player_performance', 'Player Performance')}\","
                },
                {
                  "lineNumber": 3170,
                  "content": "                description=i18n_service.get_text('ui.team_performance.player_perf_desc', 'Individual player average scores per game with totals and averages'),"
                },
                {
                  "lineNumber": 3226,
                  "content": "                    title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3229,
                  "content": "                        Column(title=i18n_service.get_text('ui.win_percentage.player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3239,
                  "content": "                        title=f\"{i18n_service.get_text('week', 'Week')} {idx + 1}\","
                },
                {
                  "lineNumber": 3247,
                  "content": "                    title=i18n_service.get_text('ui.win_percentage.weekly', 'Weekly Win %'),"
                },
                {
                  "lineNumber": 3253,
                  "content": "                title=i18n_service.get_text('ui.win_percentage.totals', 'Totals'),"
                },
                {
                  "lineNumber": 3255,
                  "content": "                    Column(title=i18n_service.get_text('ui.win_percentage.total_wins', 'Total Wins'), field='total_wins', width='100px', align='center'),"
                },
                {
                  "lineNumber": 3256,
                  "content": "                    Column(title=i18n_service.get_text('ui.win_percentage.total_matches', 'Total Matches'), field='total_matches', width='100px', align='center'),"
                },
                {
                  "lineNumber": 3257,
                  "content": "                    Column(title=i18n_service.get_text('ui.win_percentage.win_percentage', 'Win %'), field='win_percentage', width='80px', align='center')"
                },
                {
                  "lineNumber": 3337,
                  "content": "                        title=i18n_service.get_text('player', 'Player'),"
                },
                {
                  "lineNumber": 3340,
                  "content": "                            Column(title=i18n_service.get_text('ui.win_percentage.player', 'Player'), field='player_name', width='150px')"
                },
                {
                  "lineNumber": 3348,
                  "content": "                title=f\"{team_name} - {i18n_service.get_text('ui.win_percentage.title', 'Win Percentages')}\","
                },
                {
                  "lineNumber": 3349,
                  "content": "                description=i18n_service.get_text('ui.win_percentage.individual_desc', 'Individual player win percentages per week with totals'),"
                }
              ]
            }
          ],
          "totalLines": 48,
          "totalMatchedLines": 48
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "get_text\\(.*,.*\\)",
  "path": "app/services/league_service.py",
  "contextAfter": 1,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "get_text\\(.*,.*\\)",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 139,
                  "content": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),"
                },
                {
                  "lineNumber": 140,
                  "content": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),"
                },
                {
                  "lineNumber": 141,
                  "content": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 142,
                  "content": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")"
                },
                {
                  "lineNumber": 143,
                  "content": "                    ]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 149,
                  "content": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 150,
                  "content": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 151,
                  "content": "                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),"
                },
                {
                  "lineNumber": 152,
                  "content": "                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")"
                },
                {
                  "lineNumber": 153,
                  "content": "                    ]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 236,
                  "content": "                title=f\"{league} - {i18n_service.get_text('week')} {week}, {i18n_service.get_text('game')} {round_number}\","
                },
                {
                  "lineNumber": 237,
                  "content": "                description=f\"{i18n_service.get_text('match_results')} {season}\",",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number}\""
                },
                {
                  "lineNumber": 296,
                  "content": "                )",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 139,
                  "content": "                        Column(title=i18n_service.get_text(\"position\"), field=\"team_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),"
                },
                {
                  "lineNumber": 140,
                  "content": "                        Column(title=i18n_service.get_text(\"team\"), field=\"team_name\", width=\"200px\", align=\"left\"),"
                },
                {
                  "lineNumber": 141,
                  "content": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"team_pins\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 142,
                  "content": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")"
                },
                {
                  "lineNumber": 143,
                  "content": "                    ]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 149,
                  "content": "                        Column(title=i18n_service.get_text(\"points\"), field=\"opponent_points\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 150,
                  "content": "                        Column(title=i18n_service.get_text(\"pins\"), field=\"opponent_pins\", width=\"80px\", align=\"center\"),"
                },
                {
                  "lineNumber": 151,
                  "content": "                        Column(title=i18n_service.get_text(\"position\"), field=\"opponent_position\", width=\"60px\", align=\"center\", tooltip=i18n_service.get_text(\"position\")),"
                },
                {
                  "lineNumber": 152,
                  "content": "                        Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent_name\", width=\"200px\", align=\"left\")"
                },
                {
                  "lineNumber": 153,
                  "content": "                    ]",
                  "isContextLine": true
                },
                {
                  "lineNumber": 236,
                  "content": "                title=f\"{league} - {i18n_service.get_text('week')} {week}, {i18n_service.get_text('game')} {round_number}\","
                },
                {
                  "lineNumber": 237,
                  "content": "                description=f\"{i18n_service.get_text('match_results')} {season}\",",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "content": "                    title=f\"{i18n_service.get_text('no_data_available')} - {team}, {i18n_service.get_text('game')} {round_number}\""
                }
              ]
            }
          ],
          "totalLines": 27,
          "totalMatchedLines": 20,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixing all `get_text()` calls: it only takes one argument (the key), not two. Removing the second argument:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "4b4761d9-d11c-4b60-848a-fe97c2a3250e"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "116af15b-bf01-4144-8cd6-d297bce51cee"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "2c806142-4b42-444f-8924-52d448d866b9"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "cbf0b35f-5296-43ad-b0a6-6a9d05b9976d"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "70e0cc6a-807a-4d95-9062-504e4e26f32f"
}
```
Status: **completed**


</details>
</tool-use>

---

The string to replace was not found in the file.

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixing the remaining one in the error handler:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "a997e76b-92a6-4cac-991a-71b59ca1b0ba"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixing the remaining instances in the error handler fallback:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "819730ff-35a9-4ab0-9975-d7bc7f5c58df"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>


Parameters:

```json
{
  "paths": [
    "app/services/league_service.py"
  ]
}
```
Result:

```json
{
  "linterErrorsByFile": [
    {
      "relativeWorkspacePath": "app/services/league_service.py"
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Fixed the issue: `i18n_service.get_text()` only takes one argument (the key), not two. I was calling it with a default value as a second argument, which caused the error.

All `get_text()` calls are now fixed. The backend methods should:
1. Create columns correctly
2. Serialize them properly via `TableData.to_dict()`
3. Return them to the frontend

The tables should now render correctly. The error was preventing column creation, which is why the columns array was empty.

---

_**User (2025-12-09 14:40Z)**_

alright, its fixed. remove debug output in frontend and beackend, then figure out, why ther is no colored circle in the first cols of the tables. the letter is written, the colors are consistend amongst charts, but the tables lack color

---

_**Agent (model default, mode Agent)**_



---


Removing debug output, then investigating why the colored circles aren't showing in the tables.


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "DEBUG|print\\(|console\\.log",
  "path": "app/services/league_service.py",
  "contextAfter": 1,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "DEBUG|print\\(|console\\.log",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 58,
                  "content": "        # print(f\"####################### Getting seasons for league_name: {league_name} and team_name: {team_name}\")"
                },
                {
                  "lineNumber": 59,
                  "content": "        return self.adapter.get_seasons(league_name=league_name, team_name=team_name)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 250,
                  "content": "            print(f\"Error in get_game_overview_data: {e}\")"
                },
                {
                  "lineNumber": 251,
                  "content": "            import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 276,
                  "content": "            print(f\"get_game_team_details_data: season={season}, league={league}, week={week}, team={team}, round={round_number}\")"
                },
                {
                  "lineNumber": 277,
                  "content": "            # Get individual player data for this team and round",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "            print(f\"get_game_team_details_data: Found {len(player_data)} player rows\")"
                },
                {
                  "lineNumber": 289,
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "                print(f\"get_game_team_details_data: No player data found\")"
                },
                {
                  "lineNumber": 292,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 300,
                  "content": "                print(f\"get_game_team_details_data: Column {Columns.team_name_opponent} not found in player_data\")"
                },
                {
                  "lineNumber": 301,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 315,
                  "content": "            print(f\"get_game_team_details_data: Opponent name = '{opponent_name}' (raw: {opponent_name_raw}, type: {type(opponent_name_raw)})\")"
                },
                {
                  "lineNumber": 316,
                  "isContextLine": true
                },
                {
                  "lineNumber": 318,
                  "content": "                print(f\"get_game_team_details_data: No opponent name found\")"
                },
                {
                  "lineNumber": 319,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 335,
                  "content": "            print(f\"get_game_team_details_data: Fetching opponent data for '{opponent_name}'\")"
                },
                {
                  "lineNumber": 336,
                  "content": "            opponent_data = self.adapter.get_filtered_data(filters=opponent_filters)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 337,
                  "content": "            print(f\"get_game_team_details_data: Found {len(opponent_data)} opponent rows\")"
                },
                {
                  "lineNumber": 338,
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")"
                },
                {
                  "lineNumber": 395,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 431,
                  "content": "                                print(f\"get_game_team_details_data: Error getting opponent data for position {position}: {e}\")"
                },
                {
                  "lineNumber": 432,
                  "isContextLine": true
                },
                {
                  "lineNumber": 447,
                  "content": "                    print(f\"get_game_team_details_data: Error processing player row: {e}\")"
                },
                {
                  "lineNumber": 448,
                  "content": "                    import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 490,
                  "content": "            print(f\"Error in get_game_team_details_data: {e}\")"
                },
                {
                  "lineNumber": 491,
                  "content": "            import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 515,
                  "content": "        print(\"week: \", week)"
                }
              ]
            },
            {
              "file": "app/services/league_service.py",
              "matches": [
                {
                  "lineNumber": 58,
                  "content": "        # print(f\"####################### Getting seasons for league_name: {league_name} and team_name: {team_name}\")"
                },
                {
                  "lineNumber": 59,
                  "content": "        return self.adapter.get_seasons(league_name=league_name, team_name=team_name)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 250,
                  "content": "            print(f\"Error in get_game_overview_data: {e}\")"
                },
                {
                  "lineNumber": 251,
                  "content": "            import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 276,
                  "content": "            print(f\"get_game_team_details_data: season={season}, league={league}, week={week}, team={team}, round={round_number}\")"
                },
                {
                  "lineNumber": 277,
                  "content": "            # Get individual player data for this team and round",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "            print(f\"get_game_team_details_data: Found {len(player_data)} player rows\")"
                },
                {
                  "lineNumber": 289,
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "                print(f\"get_game_team_details_data: No player data found\")"
                },
                {
                  "lineNumber": 292,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 300,
                  "content": "                print(f\"get_game_team_details_data: Column {Columns.team_name_opponent} not found in player_data\")"
                },
                {
                  "lineNumber": 301,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 315,
                  "content": "            print(f\"get_game_team_details_data: Opponent name = '{opponent_name}' (raw: {opponent_name_raw}, type: {type(opponent_name_raw)})\")"
                },
                {
                  "lineNumber": 316,
                  "isContextLine": true
                },
                {
                  "lineNumber": 318,
                  "content": "                print(f\"get_game_team_details_data: No opponent name found\")"
                },
                {
                  "lineNumber": 319,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 335,
                  "content": "            print(f\"get_game_team_details_data: Fetching opponent data for '{opponent_name}'\")"
                },
                {
                  "lineNumber": 336,
                  "content": "            opponent_data = self.adapter.get_filtered_data(filters=opponent_filters)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 337,
                  "content": "            print(f\"get_game_team_details_data: Found {len(opponent_data)} opponent rows\")"
                },
                {
                  "lineNumber": 338,
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "                print(f\"get_game_team_details_data: Column {Columns.position} not found in player_data\")"
                },
                {
                  "lineNumber": 395,
                  "content": "                return TableData(",
                  "isContextLine": true
                },
                {
                  "lineNumber": 431,
                  "content": "                                print(f\"get_game_team_details_data: Error getting opponent data for position {position}: {e}\")"
                },
                {
                  "lineNumber": 432,
                  "isContextLine": true
                },
                {
                  "lineNumber": 447,
                  "content": "                    print(f\"get_game_team_details_data: Error processing player row: {e}\")"
                },
                {
                  "lineNumber": 448,
                  "content": "                    import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 490,
                  "content": "            print(f\"Error in get_game_team_details_data: {e}\")"
                },
                {
                  "lineNumber": 491,
                  "content": "            import traceback",
                  "isContextLine": true
                },
                {
                  "lineNumber": 515,
                  "content": "        print(\"week: \", week)"
                }
              ]
            }
          ],
          "totalLines": 58,
          "totalMatchedLines": 30,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "DEBUG|console\\.log",
  "path": "app/routes/league_routes.py",
  "contextAfter": 1,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "DEBUG|console\\.log",
    "path": "app/routes/league_routes.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\routes\\league_routes.py",
              "matches": [
                {
                  "lineNumber": 880,
                  "content": "        print(f\"DEBUG get_team_performance_table: columns count={len(result_dict.get('columns', []))}, data count={len(result_dict.get('data', []))}\")"
                },
                {
                  "lineNumber": 881,
                  "content": "        if result_dict.get('columns'):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 882,
                  "content": "            print(f\"DEBUG: First column group: {result_dict['columns'][0]}\")"
                },
                {
                  "lineNumber": 883,
                  "isContextLine": true
                },
                {
                  "lineNumber": 906,
                  "content": "        print(f\"DEBUG get_team_win_percentage_table: columns count={len(result_dict.get('columns', []))}, data count={len(result_dict.get('data', []))}\")"
                },
                {
                  "lineNumber": 907,
                  "content": "        if result_dict.get('columns'):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 908,
                  "content": "            print(f\"DEBUG: First column group: {result_dict['columns'][0]}\")"
                },
                {
                  "lineNumber": 909,
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 8,
          "totalMatchedLines": 4
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "console\\.log.*Table Data|DEBUG",
  "path": "app/static/js/content-blocks/team-performance-block.js",
  "contextAfter": 1,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "console\\.log.*Table Data|DEBUG",
    "path": "app/static/js/content-blocks/team-performance-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\team-performance-block.js",
              "matches": [
                {
                  "lineNumber": 166,
                  "content": "            console.log('Team Performance Table Data received:', {"
                },
                {
                  "lineNumber": 167,
                  "content": "                hasColumns: !!tableData.columns,",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "console\\.log.*Table Data|DEBUG",
  "path": "app/static/js/content-blocks/team-win-percentage-block.js",
  "contextAfter": 1,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "console\\.log.*Table Data|DEBUG",
    "path": "app/static/js/content-blocks/team-win-percentage-block.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\content-blocks\\team-win-percentage-block.js",
              "matches": [
                {
                  "lineNumber": 166,
                  "content": "            console.log('Team Win Percentage Table Data received:', {"
                },
                {
                  "lineNumber": 167,
                  "content": "                hasColumns: !!tableData.columns,",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 2,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are colored circles with player initials rendered in Tabulator tables?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1794
          },
          "endPosition": {
            "line": 1820,
            "column": 28
          }
        },
        "contents": "                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {\n                            // Special handling for team vs team comparison table - first column shows team name with color\n                            const teamName = value;\n                            let color = \"#888\"; // fallback color\n                            \n                            if (typeof window.getTeamColor === 'function') {\n                                color = window.getTeamColor(teamName);\n                            } else if (window.teamColorMap &amp;&amp; window.teamColorMap[teamName]) {\n                                color = window.teamColorMap[teamName];\n                            }\n                            \n                            td.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;\n                                &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color}; margin-right: 8px;\"&gt;&lt;/div&gt;\n                                &lt;span&gt;${teamName}&lt;/span&gt;\n                            &lt;/div&gt;&#96;;\n                        } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {\n                            // Special handling for position column (first column of first group) - regular tables\n                            // Use the position value (not team name) for the circle\n                            const color = getTeamColor(rowData[1]); // Still use team name for color\n                            td.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value}&lt;/div&gt;&#96;;\n                        } else {\n                            td.textContent = value;\n                        }\n                        \n                        // Apply cell-level styling based on metadata if available and special styling is enabled\n                        if (enableSpecialRowStyling &amp;&amp; data.row_metadata &amp;&amp; data.row_metadata[rowIndex]) {\n                            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {",
            "lineNumber": 1795
          },
          {
            "text": "                            // Special handling for team vs team comparison table - first column shows team name with color",
            "lineNumber": 1796
          },
          {
            "text": "                            const teamName = value;",
            "lineNumber": 1797
          },
          {
            "text": "                            let color = \"#888\"; // fallback color",
            "lineNumber": 1798
          },
          {
            "text": "                            ",
            "lineNumber": 1799
          },
          {
            "text": "                            if (typeof window.getTeamColor === 'function') {",
            "lineNumber": 1800
          },
          {
            "text": "                                color = window.getTeamColor(teamName);",
            "lineNumber": 1801
          },
          {
            "text": "                            } else if (window.teamColorMap &amp;&amp; window.teamColorMap[teamName]) {",
            "lineNumber": 1802
          },
          {
            "text": "                                color = window.teamColorMap[teamName];",
            "lineNumber": 1803
          },
          {
            "text": "                            }",
            "lineNumber": 1804
          },
          {
            "text": "                            ",
            "lineNumber": 1805
          },
          {
            "text": "                            td.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
            "lineNumber": 1806
          },
          {
            "text": "                                &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color}; margin-right: 8px;\"&gt;&lt;/div&gt;",
            "lineNumber": 1807
          },
          {
            "text": "                                &lt;span&gt;${teamName}&lt;/span&gt;",
            "lineNumber": 1808
          },
          {
            "text": "                            &lt;/div&gt;&#96;;",
            "lineNumber": 1809
          },
          {
            "text": "                        } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {",
            "lineNumber": 1810
          },
          {
            "text": "                            // Special handling for position column (first column of first group) - regular tables",
            "lineNumber": 1811
          },
          {
            "text": "                            // Use the position value (not team name) for the circle",
            "lineNumber": 1812
          },
          {
            "text": "                            const color = getTeamColor(rowData[1]); // Still use team name for color",
            "lineNumber": 1813
          },
          {
            "text": "                            td.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value}&lt;/div&gt;&#96;;",
            "lineNumber": 1814
          },
          {
            "text": "                        } else {",
            "lineNumber": 1815
          },
          {
            "text": "                            td.textContent = value;",
            "lineNumber": 1816
          },
          {
            "text": "                        }",
            "lineNumber": 1817
          },
          {
            "text": "                        ",
            "lineNumber": 1818
          },
          {
            "text": "                        // Apply cell-level styling based on metadata if available and special styling is enabled",
            "lineNumber": 1819
          },
          {
            "text": "                        if (enableSpecialRowStyling &amp;&amp; data.row_metadata &amp;&amp; data.row_metadata[rowIndex]) {",
            "lineNumber": 1820
          },
          {
            "text": "                            ",
            "lineNumber": 1821
          }
        ]
      },
      "score": 0.422311395406723
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 336
          },
          "endPosition": {
            "line": 370
          }
        },
        "contents": "                                }\n                            } else {\n                                // Fallback: try rowData\n                                teamName = rowData['opponent_name'] || null;\n                                \n                                // Last resort: try to get it from the row's opponent_name cell\n                                if (!teamName) {\n                                    try {\n                                        const opponentNameCell = row.getCell('opponent_name');\n                                        if (opponentNameCell) {\n                                            teamName = opponentNameCell.getValue();\n                                        }\n                                    } catch (e) {\n                                        // Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            // Normalize team name (trim whitespace) to ensure it matches the color map\n                            const normalizedTeamName = String(teamName).trim();\n                            const color = getTeamColor(normalizedTeamName);\n                            // Debug logging for opponent_position\n                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {\n                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${normalizedTeamName}\", color=\"${color}\", inMap=${window.ColorUtils?.teamColorMap?.[normalizedTeamName] ? 'yes' : 'no'}&#96;);\n                            }\n                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;\n                        }\n                    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                }",
            "lineNumber": 337
          },
          {
            "text": "                            } else {",
            "lineNumber": 338
          },
          {
            "text": "                                // Fallback: try rowData",
            "lineNumber": 339
          },
          {
            "text": "                                teamName = rowData['opponent_name'] || null;",
            "lineNumber": 340
          },
          {
            "text": "                                ",
            "lineNumber": 341
          },
          {
            "text": "                                // Last resort: try to get it from the row's opponent_name cell",
            "lineNumber": 342
          },
          {
            "text": "                                if (!teamName) {",
            "lineNumber": 343
          },
          {
            "text": "                                    try {",
            "lineNumber": 344
          },
          {
            "text": "                                        const opponentNameCell = row.getCell('opponent_name');",
            "lineNumber": 345
          },
          {
            "text": "                                        if (opponentNameCell) {",
            "lineNumber": 346
          },
          {
            "text": "                                            teamName = opponentNameCell.getValue();",
            "lineNumber": 347
          },
          {
            "text": "                                        }",
            "lineNumber": 348
          },
          {
            "text": "                                    } catch (e) {",
            "lineNumber": 349
          },
          {
            "text": "                                        // Cell might not be rendered yet",
            "lineNumber": 350
          },
          {
            "text": "                                    }",
            "lineNumber": 351
          },
          {
            "text": "                                }",
            "lineNumber": 352
          },
          {
            "text": "                            }",
            "lineNumber": 353
          },
          {
            "text": "                        } else {",
            "lineNumber": 354
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 355
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 356
          },
          {
            "text": "                        }",
            "lineNumber": 357
          },
          {
            "text": "                        ",
            "lineNumber": 358
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 359
          },
          {
            "text": "                            // Normalize team name (trim whitespace) to ensure it matches the color map",
            "lineNumber": 360
          },
          {
            "text": "                            const normalizedTeamName = String(teamName).trim();",
            "lineNumber": 361
          },
          {
            "text": "                            const color = getTeamColor(normalizedTeamName);",
            "lineNumber": 362
          },
          {
            "text": "                            // Debug logging for opponent_position",
            "lineNumber": 363
          },
          {
            "text": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
            "lineNumber": 364
          },
          {
            "text": "                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${normalizedTeamName}\", color=\"${color}\", inMap=${window.ColorUtils?.teamColorMap?.[normalizedTeamName] ? 'yes' : 'no'}&#96;);",
            "lineNumber": 365
          },
          {
            "text": "                            }",
            "lineNumber": 366
          },
          {
            "text": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
            "lineNumber": 367
          },
          {
            "text": "                        }",
            "lineNumber": 368
          },
          {
            "text": "                    }",
            "lineNumber": 369
          }
        ]
      },
      "score": 0.41203826665878296
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 538
          },
          "endPosition": {
            "line": 572
          }
        },
        "contents": "                                }\n                            } else {\n                                // Fallback: try rowData\n                                teamName = rowData['opponent_name'] || null;\n                                \n                                // Last resort: try to get it from the row's opponent_name cell\n                                if (!teamName) {\n                                    try {\n                                        const opponentNameCell = row.getCell('opponent_name');\n                                        if (opponentNameCell) {\n                                            teamName = opponentNameCell.getValue();\n                                        }\n                                    } catch (e) {\n                                        // Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            // Normalize team name (trim whitespace) to ensure it matches the color map\n                            const normalizedTeamName = String(teamName).trim();\n                            const color = getTeamColor(normalizedTeamName);\n                            // Debug logging for opponent_position\n                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {\n                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${normalizedTeamName}\", color=\"${color}\", inMap=${window.ColorUtils?.teamColorMap?.[normalizedTeamName] ? 'yes' : 'no'}&#96;);\n                            }\n                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;\n                        }\n                    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                }",
            "lineNumber": 539
          },
          {
            "text": "                            } else {",
            "lineNumber": 540
          },
          {
            "text": "                                // Fallback: try rowData",
            "lineNumber": 541
          },
          {
            "text": "                                teamName = rowData['opponent_name'] || null;",
            "lineNumber": 542
          },
          {
            "text": "                                ",
            "lineNumber": 543
          },
          {
            "text": "                                // Last resort: try to get it from the row's opponent_name cell",
            "lineNumber": 544
          },
          {
            "text": "                                if (!teamName) {",
            "lineNumber": 545
          },
          {
            "text": "                                    try {",
            "lineNumber": 546
          },
          {
            "text": "                                        const opponentNameCell = row.getCell('opponent_name');",
            "lineNumber": 547
          },
          {
            "text": "                                        if (opponentNameCell) {",
            "lineNumber": 548
          },
          {
            "text": "                                            teamName = opponentNameCell.getValue();",
            "lineNumber": 549
          },
          {
            "text": "                                        }",
            "lineNumber": 550
          },
          {
            "text": "                                    } catch (e) {",
            "lineNumber": 551
          },
          {
            "text": "                                        // Cell might not be rendered yet",
            "lineNumber": 552
          },
          {
            "text": "                                    }",
            "lineNumber": 553
          },
          {
            "text": "                                }",
            "lineNumber": 554
          },
          {
            "text": "                            }",
            "lineNumber": 555
          },
          {
            "text": "                        } else {",
            "lineNumber": 556
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 557
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 558
          },
          {
            "text": "                        }",
            "lineNumber": 559
          },
          {
            "text": "                        ",
            "lineNumber": 560
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 561
          },
          {
            "text": "                            // Normalize team name (trim whitespace) to ensure it matches the color map",
            "lineNumber": 562
          },
          {
            "text": "                            const normalizedTeamName = String(teamName).trim();",
            "lineNumber": 563
          },
          {
            "text": "                            const color = getTeamColor(normalizedTeamName);",
            "lineNumber": 564
          },
          {
            "text": "                            // Debug logging for opponent_position",
            "lineNumber": 565
          },
          {
            "text": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
            "lineNumber": 566
          },
          {
            "text": "                                console.log(&#96;[opponent_position] Row ${rowIdx}: teamName=\"${normalizedTeamName}\", color=\"${color}\", inMap=${window.ColorUtils?.teamColorMap?.[normalizedTeamName] ? 'yes' : 'no'}&#96;);",
            "lineNumber": 567
          },
          {
            "text": "                            }",
            "lineNumber": 568
          },
          {
            "text": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
            "lineNumber": 569
          },
          {
            "text": "                        }",
            "lineNumber": 570
          },
          {
            "text": "                    }",
            "lineNumber": 571
          }
        ]
      },
      "score": 0.41203826665878296
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1660
          },
          "endPosition": {
            "line": 1672
          }
        },
        "contents": "                                    &lt;/div&gt;&#96;;\n                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {\n                                    // Handle position circle for first column of first group - regular tables\n                                    const color1 = getTeamColor(row1.rowData[1]);\n                                    const color2 = getTeamColor(row2.rowData[1]);\n                                    td1.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color1}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value1}&lt;/div&gt;&#96;;\n                                    td2.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color2}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value2}&lt;/div&gt;&#96;;\n                                } else {\n                                    td1.textContent = value1;\n                                    td2.textContent = value2;\n                                }\n                                ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                    &lt;/div&gt;&#96;;",
            "lineNumber": 1661
          },
          {
            "text": "                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {",
            "lineNumber": 1662
          },
          {
            "text": "                                    // Handle position circle for first column of first group - regular tables",
            "lineNumber": 1663
          },
          {
            "text": "                                    const color1 = getTeamColor(row1.rowData[1]);",
            "lineNumber": 1664
          },
          {
            "text": "                                    const color2 = getTeamColor(row2.rowData[1]);",
            "lineNumber": 1665
          },
          {
            "text": "                                    td1.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color1}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value1}&lt;/div&gt;&#96;;",
            "lineNumber": 1666
          },
          {
            "text": "                                    td2.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color2}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value2}&lt;/div&gt;&#96;;",
            "lineNumber": 1667
          },
          {
            "text": "                                } else {",
            "lineNumber": 1668
          },
          {
            "text": "                                    td1.textContent = value1;",
            "lineNumber": 1669
          },
          {
            "text": "                                    td2.textContent = value2;",
            "lineNumber": 1670
          },
          {
            "text": "                                }",
            "lineNumber": 1671
          },
          {
            "text": "                                ",
            "lineNumber": 1672
          }
        ]
      },
      "score": 0.41021931171417236
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 954
          },
          "endPosition": {
            "line": 986
          }
        },
        "contents": "            }\n\n            const rowData = row.getData();\n            const styling = rowData?.__rowMeta?.styling;\n            if (styling) {\n                applyElementStyles(row.getElement(), styling);\n            }\n\n            if (teamField &amp;&amp; rowData[teamField]) {\n                const accentColor = getTeamColor(rowData[teamField]);\n                if (accentColor) {\n                    const element = row.getElement();\n                    element.classList.add('tab-row-accent');\n                    element.style.setProperty('--row-accent-color', accentColor);\n                    const overlay = ColorUtils.toRgba(accentColor, 0.12);\n                    if (overlay) {\n                        element.style.setProperty('--row-accent-overlay', overlay);\n                    }\n                }\n            } else {\n                const element = row.getElement();\n                element.classList.remove('tab-row-accent');\n                element.style.removeProperty('--row-accent-color');\n                element.style.removeProperty('--row-accent-overlay');\n            }\n        }\n    };\n\n    const tabulatorInstance = new Tabulator(&#96;#${tableId}&#96;, tabulatorOptions);\n    window[tableId + 'Instance'] = tabulatorInstance;\n\n    console.log(&#96;Table \"${tableId}\" successfully created/updated (Tabulator)&#96;);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            }",
            "lineNumber": 955
          },
          {
            "lineNumber": 956
          },
          {
            "text": "            const rowData = row.getData();",
            "lineNumber": 957
          },
          {
            "text": "            const styling = rowData?.__rowMeta?.styling;",
            "lineNumber": 958
          },
          {
            "text": "            if (styling) {",
            "lineNumber": 959
          },
          {
            "text": "                applyElementStyles(row.getElement(), styling);",
            "lineNumber": 960
          },
          {
            "text": "            }",
            "lineNumber": 961
          },
          {
            "lineNumber": 962
          },
          {
            "text": "            if (teamField &amp;&amp; rowData[teamField]) {",
            "lineNumber": 963
          },
          {
            "text": "                const accentColor = getTeamColor(rowData[teamField]);",
            "lineNumber": 964
          },
          {
            "text": "                if (accentColor) {",
            "lineNumber": 965
          },
          {
            "text": "                    const element = row.getElement();",
            "lineNumber": 966
          },
          {
            "text": "                    element.classList.add('tab-row-accent');",
            "lineNumber": 967
          },
          {
            "text": "                    element.style.setProperty('--row-accent-color', accentColor);",
            "lineNumber": 968
          },
          {
            "text": "                    const overlay = ColorUtils.toRgba(accentColor, 0.12);",
            "lineNumber": 969
          },
          {
            "text": "                    if (overlay) {",
            "lineNumber": 970
          },
          {
            "text": "                        element.style.setProperty('--row-accent-overlay', overlay);",
            "lineNumber": 971
          },
          {
            "text": "                    }",
            "lineNumber": 972
          },
          {
            "text": "                }",
            "lineNumber": 973
          },
          {
            "text": "            } else {",
            "lineNumber": 974
          },
          {
            "text": "                const element = row.getElement();",
            "lineNumber": 975
          },
          {
            "text": "                element.classList.remove('tab-row-accent');",
            "lineNumber": 976
          },
          {
            "text": "                element.style.removeProperty('--row-accent-color');",
            "lineNumber": 977
          },
          {
            "text": "                element.style.removeProperty('--row-accent-overlay');",
            "lineNumber": 978
          },
          {
            "text": "            }",
            "lineNumber": 979
          },
          {
            "text": "        }",
            "lineNumber": 980
          },
          {
            "text": "    };",
            "lineNumber": 981
          },
          {
            "lineNumber": 982
          },
          {
            "text": "    const tabulatorInstance = new Tabulator(&#96;#${tableId}&#96;, tabulatorOptions);",
            "lineNumber": 983
          },
          {
            "text": "    window[tableId + 'Instance'] = tabulatorInstance;",
            "lineNumber": 984
          },
          {
            "lineNumber": 985
          },
          {
            "text": "    console.log(&#96;Table \"${tableId}\" successfully created/updated (Tabulator)&#96;);",
            "lineNumber": 986
          }
        ]
      },
      "score": 0.38176390528678894
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 159
          },
          "endPosition": {
            "line": 216
          }
        },
        "contents": "}\n\nfunction createTableTabulator(tableId, data, options = {}) {\n    \n    const settings = {\n        disablePositionCircle: false,\n        enableSpecialRowStyling: false,\n        tooltips: true,\n        teamField: null,\n        ...options\n    };\n    const tableConfig = data.config || {};\n    const isCompactLayout = tableConfig.compact === true;\n    const useStripedGroups = tableConfig.stripedColGroups === true;\n    // Highlighting style constants\n    const HIGHLIGHT_STYLES = {\n        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',\n        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',\n        headerFontWeight: '900',\n        cellFontWeight: '700'\n    };\n\n    if (!data || !data.columns || !data.data) {\n        console.error('Invalid data format for Tabulator table');\n        return;\n    }\n\n    const container = document.getElementById(tableId);\n    if (!container) {\n        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);\n        return;\n    }\n    \n    // Ensure container takes full width\n    if (container.style.width === '') {\n        container.style.width = '100%';\n    }\n\n    const columnOrder = flattenColumnMetadata(data.columns);\n    if (!columnOrder.length) {\n        console.warn('No column definitions available for Tabulator table');\n        const container = document.getElementById(tableId);\n        if (container) {\n            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';\n            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;\n        }\n        return;\n    }\n    const columnLookup = columnOrder.reduce((acc, info) =&gt; {\n        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;\n        return acc;\n    }, {});\n\n    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;\n    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "function createTableTabulator(tableId, data, options = {}) {",
            "lineNumber": 162
          },
          {
            "text": "    ",
            "lineNumber": 163
          },
          {
            "text": "    const settings = {",
            "lineNumber": 164
          },
          {
            "text": "        disablePositionCircle: false,",
            "lineNumber": 165
          },
          {
            "text": "        enableSpecialRowStyling: false,",
            "lineNumber": 166
          },
          {
            "text": "        tooltips: true,",
            "lineNumber": 167
          },
          {
            "text": "        teamField: null,",
            "lineNumber": 168
          },
          {
            "text": "        ...options",
            "lineNumber": 169
          },
          {
            "text": "    };",
            "lineNumber": 170
          },
          {
            "text": "    const tableConfig = data.config || {};",
            "lineNumber": 171
          },
          {
            "text": "    const isCompactLayout = tableConfig.compact === true;",
            "lineNumber": 172
          },
          {
            "text": "    const useStripedGroups = tableConfig.stripedColGroups === true;",
            "lineNumber": 173
          },
          {
            "text": "    // Highlighting style constants",
            "lineNumber": 174
          },
          {
            "text": "    const HIGHLIGHT_STYLES = {",
            "lineNumber": 175
          },
          {
            "text": "        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',",
            "lineNumber": 176
          },
          {
            "text": "        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',",
            "lineNumber": 177
          },
          {
            "text": "        headerFontWeight: '900',",
            "lineNumber": 178
          },
          {
            "text": "        cellFontWeight: '700'",
            "lineNumber": 179
          },
          {
            "text": "    };",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 182
          },
          {
            "text": "        console.error('Invalid data format for Tabulator table');",
            "lineNumber": 183
          },
          {
            "text": "        return;",
            "lineNumber": 184
          },
          {
            "text": "    }",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    const container = document.getElementById(tableId);",
            "lineNumber": 187
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 188
          },
          {
            "text": "        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);",
            "lineNumber": 189
          },
          {
            "text": "        return;",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "text": "    ",
            "lineNumber": 192
          },
          {
            "text": "    // Ensure container takes full width",
            "lineNumber": 193
          },
          {
            "text": "    if (container.style.width === '') {",
            "lineNumber": 194
          },
          {
            "text": "        container.style.width = '100%';",
            "lineNumber": 195
          },
          {
            "text": "    }",
            "lineNumber": 196
          },
          {
            "lineNumber": 197
          },
          {
            "text": "    const columnOrder = flattenColumnMetadata(data.columns);",
            "lineNumber": 198
          },
          {
            "text": "    if (!columnOrder.length) {",
            "lineNumber": 199
          },
          {
            "text": "        console.warn('No column definitions available for Tabulator table');",
            "lineNumber": 200
          },
          {
            "text": "        const container = document.getElementById(tableId);",
            "lineNumber": 201
          },
          {
            "text": "        if (container) {",
            "lineNumber": 202
          },
          {
            "text": "            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';",
            "lineNumber": 203
          },
          {
            "text": "            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;",
            "lineNumber": 204
          },
          {
            "text": "        }",
            "lineNumber": 205
          },
          {
            "text": "        return;",
            "lineNumber": 206
          },
          {
            "text": "    }",
            "lineNumber": 207
          },
          {
            "text": "    const columnLookup = columnOrder.reduce((acc, info) =&gt; {",
            "lineNumber": 208
          },
          {
            "text": "        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;",
            "lineNumber": 209
          },
          {
            "text": "        return acc;",
            "lineNumber": 210
          },
          {
            "text": "    }, {});",
            "lineNumber": 211
          },
          {
            "lineNumber": 212
          },
          {
            "text": "    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;",
            "lineNumber": 213
          },
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          }
        ]
      },
      "score": 0.3789288103580475
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 740,
            "column": 16
          },
          "endPosition": {
            "line": 781,
            "column": 28
          }
        },
        "contents": "window.updateTeamColorMap(teams);\n            }\n        }\n    }\n\n    const tabulatorOptions = {\n        data: transformedData,\n        columns: tabulatorColumns,\n        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",\n        responsiveLayout: false,\n        pagination: false,\n        movableColumns: false,\n        tooltips: tooltipOption,\n        height: \"auto\",\n        rowHeight: 40,\n        theme: \"semanticui\",\n        cssClass: \"custom-tabulator\",\n        columnHeaderVertAlign: \"middle\",\n        width: \"100%\", // Ensure table takes full width of container\n        ...(initialSort ? { initialSort: initialSort } : {}),\n        tableBuilt: function() {\n            try {\n                // Apply highlighting and fix header separator\n                // Use requestAnimationFrame for better timing\n                requestAnimationFrame(() =&gt; {\n                    requestAnimationFrame(() =&gt; {\n                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);\n                    if (!tableElement) {\n                        return;\n                    }\n                    \n                    // Set CSS custom properties for highlighting styles\n                    tableElement.style.setProperty('--highlight-header-bg', HIGHLIGHT_STYLES.headerBackgroundColor);\n                    tableElement.style.setProperty('--highlight-cell-bg', HIGHLIGHT_STYLES.cellBackgroundColor);\n                    tableElement.style.setProperty('--highlight-header-weight', HIGHLIGHT_STYLES.headerFontWeight);\n                    tableElement.style.setProperty('--highlight-cell-weight', HIGHLIGHT_STYLES.cellFontWeight);\n                    \n                    // Stripe coloring: assign group classes to column group headers\n                    // (cells and column headers get classes via cssClass/headerClass in column definitions)\n                    if (useStripedGroups) {\n                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {\n                            ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "window.updateTeamColorMap(teams);",
            "lineNumber": 741
          },
          {
            "text": "            }",
            "lineNumber": 742
          },
          {
            "text": "        }",
            "lineNumber": 743
          },
          {
            "text": "    }",
            "lineNumber": 744
          },
          {
            "lineNumber": 745
          },
          {
            "text": "    const tabulatorOptions = {",
            "lineNumber": 746
          },
          {
            "text": "        data: transformedData,",
            "lineNumber": 747
          },
          {
            "text": "        columns: tabulatorColumns,",
            "lineNumber": 748
          },
          {
            "text": "        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",",
            "lineNumber": 749
          },
          {
            "text": "        responsiveLayout: false,",
            "lineNumber": 750
          },
          {
            "text": "        pagination: false,",
            "lineNumber": 751
          },
          {
            "text": "        movableColumns: false,",
            "lineNumber": 752
          },
          {
            "text": "        tooltips: tooltipOption,",
            "lineNumber": 753
          },
          {
            "text": "        height: \"auto\",",
            "lineNumber": 754
          },
          {
            "text": "        rowHeight: 40,",
            "lineNumber": 755
          },
          {
            "text": "        theme: \"semanticui\",",
            "lineNumber": 756
          },
          {
            "text": "        cssClass: \"custom-tabulator\",",
            "lineNumber": 757
          },
          {
            "text": "        columnHeaderVertAlign: \"middle\",",
            "lineNumber": 758
          },
          {
            "text": "        width: \"100%\", // Ensure table takes full width of container",
            "lineNumber": 759
          },
          {
            "text": "        ...(initialSort ? { initialSort: initialSort } : {}),",
            "lineNumber": 760
          },
          {
            "text": "        tableBuilt: function() {",
            "lineNumber": 761
          },
          {
            "text": "            try {",
            "lineNumber": 762
          },
          {
            "text": "                // Apply highlighting and fix header separator",
            "lineNumber": 763
          },
          {
            "text": "                // Use requestAnimationFrame for better timing",
            "lineNumber": 764
          },
          {
            "text": "                requestAnimationFrame(() =&gt; {",
            "lineNumber": 765
          },
          {
            "text": "                    requestAnimationFrame(() =&gt; {",
            "lineNumber": 766
          },
          {
            "text": "                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
            "lineNumber": 767
          },
          {
            "text": "                    if (!tableElement) {",
            "lineNumber": 768
          },
          {
            "text": "                        return;",
            "lineNumber": 769
          },
          {
            "text": "                    }",
            "lineNumber": 770
          },
          {
            "text": "                    ",
            "lineNumber": 771
          },
          {
            "text": "                    // Set CSS custom properties for highlighting styles",
            "lineNumber": 772
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-header-bg', HIGHLIGHT_STYLES.headerBackgroundColor);",
            "lineNumber": 773
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-cell-bg', HIGHLIGHT_STYLES.cellBackgroundColor);",
            "lineNumber": 774
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-header-weight', HIGHLIGHT_STYLES.headerFontWeight);",
            "lineNumber": 775
          },
          {
            "text": "                    tableElement.style.setProperty('--highlight-cell-weight', HIGHLIGHT_STYLES.cellFontWeight);",
            "lineNumber": 776
          },
          {
            "text": "                    ",
            "lineNumber": 777
          },
          {
            "text": "                    // Stripe coloring: assign group classes to column group headers",
            "lineNumber": 778
          },
          {
            "text": "                    // (cells and column headers get classes via cssClass/headerClass in column definitions)",
            "lineNumber": 779
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 780
          },
          {
            "text": "                        tableElement.querySelectorAll('.tabulator-col-group').forEach((el, idx) =&gt; {",
            "lineNumber": 781
          },
          {
            "text": "                            ",
            "lineNumber": 782
          }
        ]
      },
      "score": 0.33683645725250244
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 54,
            "column": 8
          }
        },
        "contents": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;\n&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\nfunction createTable(config) {\n    const {\n        data,\n        columns,\n        headerGroups = [],  // This contains the actual colspan values\n        rowNumbering = true,\n        positionChange = false\n    } = config;\n\n    let currentData = [...data];\n\n    const colors = ColorUtils.getGradientColors(\n        headerGroups.length, \n        ColorUtils.getThemeColor('surface') || '#ffffff', \n        ColorUtils.getThemeColor('accent') || '#7ec2f8'\n    );\n\n    // Create mappings for column colors and last group columns\n    const columnColors = {};\n    const lastGroupColumns = {};\n    let currentColumn = 0;\n    headerGroups.forEach((group, groupIndex) =&gt; {\n        const isLastGroup = groupIndex === headerGroups.length - 1;\n        const colspan = group.colspan || 1;  // Get actual colspan from the group\n        for (let i = 0; i &lt; colspan; i++) {\n            columnColors[currentColumn] = colors[groupIndex];\n            lastGroupColumns[currentColumn] = isLastGroup;\n            currentColumn++;\n        }\n    });\n\n    const createHeaderGroups = () =&gt; {\n        if (!headerGroups || headerGroups.length === 0) return '';\n        \n        return &#96;\n            &lt;tr&gt;\n                ${headerGroups.map((group, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        colspan=\"${group.colspan || 1}\" \n                        style=\"background-color: ${colors[index]}; \n                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;\n                        ${group.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;",
            "lineNumber": 1
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 2
          },
          {
            "text": "&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 5
          },
          {
            "text": "function createTable(config) {",
            "lineNumber": 6
          },
          {
            "text": "    const {",
            "lineNumber": 7
          },
          {
            "text": "        data,",
            "lineNumber": 8
          },
          {
            "text": "        columns,",
            "lineNumber": 9
          },
          {
            "text": "        headerGroups = [],  // This contains the actual colspan values",
            "lineNumber": 10
          },
          {
            "text": "        rowNumbering = true,",
            "lineNumber": 11
          },
          {
            "text": "        positionChange = false",
            "lineNumber": 12
          },
          {
            "text": "    } = config;",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "    let currentData = [...data];",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "    const colors = ColorUtils.getGradientColors(",
            "lineNumber": 17
          },
          {
            "text": "        headerGroups.length, ",
            "lineNumber": 18
          },
          {
            "text": "        ColorUtils.getThemeColor('surface') || '#ffffff', ",
            "lineNumber": 19
          },
          {
            "text": "        ColorUtils.getThemeColor('accent') || '#7ec2f8'",
            "lineNumber": 20
          },
          {
            "text": "    );",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "    // Create mappings for column colors and last group columns",
            "lineNumber": 23
          },
          {
            "text": "    const columnColors = {};",
            "lineNumber": 24
          },
          {
            "text": "    const lastGroupColumns = {};",
            "lineNumber": 25
          },
          {
            "text": "    let currentColumn = 0;",
            "lineNumber": 26
          },
          {
            "text": "    headerGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 27
          },
          {
            "text": "        const isLastGroup = groupIndex === headerGroups.length - 1;",
            "lineNumber": 28
          },
          {
            "text": "        const colspan = group.colspan || 1;  // Get actual colspan from the group",
            "lineNumber": 29
          },
          {
            "text": "        for (let i = 0; i &lt; colspan; i++) {",
            "lineNumber": 30
          },
          {
            "text": "            columnColors[currentColumn] = colors[groupIndex];",
            "lineNumber": 31
          },
          {
            "text": "            lastGroupColumns[currentColumn] = isLastGroup;",
            "lineNumber": 32
          },
          {
            "text": "            currentColumn++;",
            "lineNumber": 33
          },
          {
            "text": "        }",
            "lineNumber": 34
          },
          {
            "text": "    });",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "    const createHeaderGroups = () =&gt; {",
            "lineNumber": 37
          },
          {
            "text": "        if (!headerGroups || headerGroups.length === 0) return '';",
            "lineNumber": 38
          },
          {
            "text": "        ",
            "lineNumber": 39
          },
          {
            "text": "        return &#96;",
            "lineNumber": 40
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 41
          },
          {
            "text": "                ${headerGroups.map((group, index) =&gt; &#96;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 43
          },
          {
            "text": "                        colspan=\"${group.colspan || 1}\" ",
            "lineNumber": 44
          },
          {
            "text": "                        style=\"background-color: ${colors[index]}; ",
            "lineNumber": 45
          },
          {
            "text": "                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                        ${group.title || ''}",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        ",
            "lineNumber": 55
          }
        ]
      },
      "score": 0.33539295196533203
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1760
          },
          "endPosition": {
            "line": 1782
          }
        },
        "contents": "                            } else {\n                                const cellValue = parseFloat(value);\n                                if (!isNaN(cellValue)) {\n                                    // Determine if this is a score or points column based on column position\n                                    // Skip the first column (team name) - colIndex starts at 1 after team name\n                                    const adjustedColIndex = colIndex - 1; // Adjust for team name column\n                                    // Based on debug output: Col 4 (adjustedColIndex 3) has score 751, Col 5 (adjustedColIndex 4) has points 5\n                                    // So the pattern is: Score (odd adjustedColIndex), Points (even adjustedColIndex)\n                                    const isScoreColumn = adjustedColIndex % 2 === 1; // Score columns are odd positions (1, 3, 5, 7...)\n                                    const isPointsColumn = adjustedColIndex % 2 === 0; // Points columns are even positions (0, 2, 4, 6...)\n                                    \n                                    if (isScoreColumn &amp;&amp; data.metadata.score_range) {\n                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.score_range.min, data.metadata.score_range.max);\n                                        td.style.backgroundColor = color;\n                                    } else if (isPointsColumn &amp;&amp; data.metadata.points_range) {\n                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.points_range.min, data.metadata.points_range.max);\n                                        td.style.backgroundColor = color;\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback to original cell_metadata approach if no metadata available",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                            } else {",
            "lineNumber": 1761
          },
          {
            "text": "                                const cellValue = parseFloat(value);",
            "lineNumber": 1762
          },
          {
            "text": "                                if (!isNaN(cellValue)) {",
            "lineNumber": 1763
          },
          {
            "text": "                                    // Determine if this is a score or points column based on column position",
            "lineNumber": 1764
          },
          {
            "text": "                                    // Skip the first column (team name) - colIndex starts at 1 after team name",
            "lineNumber": 1765
          },
          {
            "text": "                                    const adjustedColIndex = colIndex - 1; // Adjust for team name column",
            "lineNumber": 1766
          },
          {
            "text": "                                    // Based on debug output: Col 4 (adjustedColIndex 3) has score 751, Col 5 (adjustedColIndex 4) has points 5",
            "lineNumber": 1767
          },
          {
            "text": "                                    // So the pattern is: Score (odd adjustedColIndex), Points (even adjustedColIndex)",
            "lineNumber": 1768
          },
          {
            "text": "                                    const isScoreColumn = adjustedColIndex % 2 === 1; // Score columns are odd positions (1, 3, 5, 7...)",
            "lineNumber": 1769
          },
          {
            "text": "                                    const isPointsColumn = adjustedColIndex % 2 === 0; // Points columns are even positions (0, 2, 4, 6...)",
            "lineNumber": 1770
          },
          {
            "text": "                                    ",
            "lineNumber": 1771
          },
          {
            "text": "                                    if (isScoreColumn &amp;&amp; data.metadata.score_range) {",
            "lineNumber": 1772
          },
          {
            "text": "                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.score_range.min, data.metadata.score_range.max);",
            "lineNumber": 1773
          },
          {
            "text": "                                        td.style.backgroundColor = color;",
            "lineNumber": 1774
          },
          {
            "text": "                                    } else if (isPointsColumn &amp;&amp; data.metadata.points_range) {",
            "lineNumber": 1775
          },
          {
            "text": "                                        const color = ColorUtils.getHeatMapColor(cellValue, data.metadata.points_range.min, data.metadata.points_range.max);",
            "lineNumber": 1776
          },
          {
            "text": "                                        td.style.backgroundColor = color;",
            "lineNumber": 1777
          },
          {
            "text": "                                    }",
            "lineNumber": 1778
          },
          {
            "text": "                                }",
            "lineNumber": 1779
          },
          {
            "text": "                            }",
            "lineNumber": 1780
          },
          {
            "text": "                        } else {",
            "lineNumber": 1781
          },
          {
            "text": "                            // Fallback to original cell_metadata approach if no metadata available",
            "lineNumber": 1782
          }
        ]
      },
      "score": 0.32914483547210693
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1637
          },
          "endPosition": {
            "line": 1662,
            "column": 36
          }
        },
        "contents": "                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {\n                                    // Special handling for team vs team comparison table - first column shows team name with color\n                                    const teamName1 = value1;\n                                    const teamName2 = value2;\n                                    \n                                    let color1 = \"#888\"; // fallback color\n                                    let color2 = \"#888\"; // fallback color\n                                    \n                                    if (typeof window.getTeamColor === 'function') {\n                                        color1 = window.getTeamColor(teamName1);\n                                        color2 = window.getTeamColor(teamName2);\n                                    } else if (window.teamColorMap) {\n                                        color1 = window.teamColorMap[teamName1] || \"#888\";\n                                        color2 = window.teamColorMap[teamName2] || \"#888\";\n                                    }\n                                    \n                                    td1.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;\n                                        &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color1}; margin-right: 8px;\"&gt;&lt;/div&gt;\n                                        &lt;span&gt;${teamName1}&lt;/span&gt;\n                                    &lt;/div&gt;&#96;;\n                                    td2.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;\n                                        &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color2}; margin-right: 8px;\"&gt;&lt;/div&gt;\n                                        &lt;span&gt;${teamName2}&lt;/span&gt;\n                                    &lt;/div&gt;&#96;;\n                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {\n                                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix')) &amp;&amp; groupIndex === 0 &amp;&amp; index === 0) {",
            "lineNumber": 1638
          },
          {
            "text": "                                    // Special handling for team vs team comparison table - first column shows team name with color",
            "lineNumber": 1639
          },
          {
            "text": "                                    const teamName1 = value1;",
            "lineNumber": 1640
          },
          {
            "text": "                                    const teamName2 = value2;",
            "lineNumber": 1641
          },
          {
            "text": "                                    ",
            "lineNumber": 1642
          },
          {
            "text": "                                    let color1 = \"#888\"; // fallback color",
            "lineNumber": 1643
          },
          {
            "text": "                                    let color2 = \"#888\"; // fallback color",
            "lineNumber": 1644
          },
          {
            "text": "                                    ",
            "lineNumber": 1645
          },
          {
            "text": "                                    if (typeof window.getTeamColor === 'function') {",
            "lineNumber": 1646
          },
          {
            "text": "                                        color1 = window.getTeamColor(teamName1);",
            "lineNumber": 1647
          },
          {
            "text": "                                        color2 = window.getTeamColor(teamName2);",
            "lineNumber": 1648
          },
          {
            "text": "                                    } else if (window.teamColorMap) {",
            "lineNumber": 1649
          },
          {
            "text": "                                        color1 = window.teamColorMap[teamName1] || \"#888\";",
            "lineNumber": 1650
          },
          {
            "text": "                                        color2 = window.teamColorMap[teamName2] || \"#888\";",
            "lineNumber": 1651
          },
          {
            "text": "                                    }",
            "lineNumber": 1652
          },
          {
            "text": "                                    ",
            "lineNumber": 1653
          },
          {
            "text": "                                    td1.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
            "lineNumber": 1654
          },
          {
            "text": "                                        &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color1}; margin-right: 8px;\"&gt;&lt;/div&gt;",
            "lineNumber": 1655
          },
          {
            "text": "                                        &lt;span&gt;${teamName1}&lt;/span&gt;",
            "lineNumber": 1656
          },
          {
            "text": "                                    &lt;/div&gt;&#96;;",
            "lineNumber": 1657
          },
          {
            "text": "                                    td2.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
            "lineNumber": 1658
          },
          {
            "text": "                                        &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color2}; margin-right: 8px;\"&gt;&lt;/div&gt;",
            "lineNumber": 1659
          },
          {
            "text": "                                        &lt;span&gt;${teamName2}&lt;/span&gt;",
            "lineNumber": 1660
          },
          {
            "text": "                                    &lt;/div&gt;&#96;;",
            "lineNumber": 1661
          },
          {
            "text": "                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {",
            "lineNumber": 1662
          },
          {
            "text": "                                    ",
            "lineNumber": 1663
          }
        ]
      },
      "score": 0.3255414068698883
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1745
          },
          "endPosition": {
            "line": 1763,
            "column": 36
          }
        },
        "contents": "            data.columns.forEach((colGroup, groupIndex) =&gt; {\n                if (colGroup.columns) {\n                    colGroup.columns.forEach((col, index) =&gt; {\n                        const td = document.createElement('td');\n                        td.style.padding = '8px';\n                        td.style.textAlign = col.align || 'center';\n                        \n                        // Get the value for this cell\n                        const value = rowData[colIndex];\n                        colIndex++;\n                        // Apply dynamic heat map colors based on cell value (for sorting compatibility)\n                        if (data.metadata &amp;&amp; data.metadata.score_range &amp;&amp; data.metadata.points_range) {\n                            if (value === \"\") {\n                                // Empty cells (diagonal) get light gray background\n                                td.style.backgroundColor = ColorUtils.getThemeColor('background') || \"#f8f9fa\";\n                            } else {\n                                const cellValue = parseFloat(value);\n                                if (!isNaN(cellValue)) {\n                                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            data.columns.forEach((colGroup, groupIndex) =&gt; {",
            "lineNumber": 1746
          },
          {
            "text": "                if (colGroup.columns) {",
            "lineNumber": 1747
          },
          {
            "text": "                    colGroup.columns.forEach((col, index) =&gt; {",
            "lineNumber": 1748
          },
          {
            "text": "                        const td = document.createElement('td');",
            "lineNumber": 1749
          },
          {
            "text": "                        td.style.padding = '8px';",
            "lineNumber": 1750
          },
          {
            "text": "                        td.style.textAlign = col.align || 'center';",
            "lineNumber": 1751
          },
          {
            "text": "                        ",
            "lineNumber": 1752
          },
          {
            "text": "                        // Get the value for this cell",
            "lineNumber": 1753
          },
          {
            "text": "                        const value = rowData[colIndex];",
            "lineNumber": 1754
          },
          {
            "text": "                        colIndex++;",
            "lineNumber": 1755
          },
          {
            "text": "                        // Apply dynamic heat map colors based on cell value (for sorting compatibility)",
            "lineNumber": 1756
          },
          {
            "text": "                        if (data.metadata &amp;&amp; data.metadata.score_range &amp;&amp; data.metadata.points_range) {",
            "lineNumber": 1757
          },
          {
            "text": "                            if (value === \"\") {",
            "lineNumber": 1758
          },
          {
            "text": "                                // Empty cells (diagonal) get light gray background",
            "lineNumber": 1759
          },
          {
            "text": "                                td.style.backgroundColor = ColorUtils.getThemeColor('background') || \"#f8f9fa\";",
            "lineNumber": 1760
          },
          {
            "text": "                            } else {",
            "lineNumber": 1761
          },
          {
            "text": "                                const cellValue = parseFloat(value);",
            "lineNumber": 1762
          },
          {
            "text": "                                if (!isNaN(cellValue)) {",
            "lineNumber": 1763
          },
          {
            "text": "                                    ",
            "lineNumber": 1764
          }
        ]
      },
      "score": 0.3236292600631714
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 255
          },
          "endPosition": {
            "line": 296
          }
        },
        "contents": "    }\n\n    // If no group titles, flatten to direct columns (no groups)\n    let tabulatorColumns;\n    if (!hasGroupTitles) {\n        // Flatten: extract all columns from all groups and pass directly to Tabulator\n        tabulatorColumns = [];\n        data.columns.forEach((group, groupIndex) =&gt; {\n            if (!Array.isArray(group.columns)) {\n                return;\n            }\n            \n            const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;\n            const isHighlighted = group.highlighted === true;\n            \n            group.columns.forEach((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
        "signatures": {},
        "detailedLines": [
          {
            "text": "    }",
            "lineNumber": 256
          },
          {
            "lineNumber": 257
          },
          {
            "text": "    // If no group titles, flatten to direct columns (no groups)",
            "lineNumber": 258
          },
          {
            "text": "    let tabulatorColumns;",
            "lineNumber": 259
          },
          {
            "text": "    if (!hasGroupTitles) {",
            "lineNumber": 260
          },
          {
            "text": "        // Flatten: extract all columns from all groups and pass directly to Tabulator",
            "lineNumber": 261
          },
          {
            "text": "        tabulatorColumns = [];",
            "lineNumber": 262
          },
          {
            "text": "        data.columns.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 263
          },
          {
            "text": "            if (!Array.isArray(group.columns)) {",
            "lineNumber": 264
          },
          {
            "text": "                return;",
            "lineNumber": 265
          },
          {
            "text": "            }",
            "lineNumber": 266
          },
          {
            "text": "            ",
            "lineNumber": 267
          },
          {
            "text": "            const groupFrozenDirection = group.frozen === 'left' || group.frozen === 'right' ? group.frozen : null;",
            "lineNumber": 268
          },
          {
            "text": "            const isHighlighted = group.highlighted === true;",
            "lineNumber": 269
          },
          {
            "text": "            ",
            "lineNumber": 270
          },
          {
            "text": "            group.columns.forEach((column, columnIndex) =&gt; {",
            "lineNumber": 271
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 272
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 273
          },
          {
            "text": "                    return;",
            "lineNumber": 274
          },
          {
            "text": "                }",
            "lineNumber": 275
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 276
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 277
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 278
          },
          {
            "text": "                ",
            "lineNumber": 279
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 280
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 281
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 282
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 283
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 284
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 285
          },
          {
            "lineNumber": 286
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 287
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 288
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 289
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 290
          },
          {
            "text": "                    }",
            "lineNumber": 291
          },
          {
            "lineNumber": 292
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 293
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
            "lineNumber": 296
          }
        ]
      },
      "score": 0.3177591562271118
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 48
          },
          "endPosition": {
            "line": 104,
            "column": 8
          }
        },
        "contents": "                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        return &#96;\n            &lt;tr&gt;\n                ${columns.map((col, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        style=\"background-color: ${columnColors[index]};\n                               color: ${lastGroupColumns[index] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;\n                        ${col.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createTableRows = () =&gt; {\n        return currentData.map((row, rowIndex) =&gt; &#96;\n            &lt;tr&gt;\n                ${columns.map((col, colIndex) =&gt; &#96;\n                    &lt;td class=\"text-center\" \n                        style=\"background-color: ${columnColors[colIndex]};\n                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};\n                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};\n                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; \n                                              columnColors[colIndex] !== columnColors[colIndex + 1]) \n                                             ? '2px solid #dee2e6' \n                                             : '1px solid #dee2e6'};\"&gt;\n                        ${row[colIndex] !== undefined ? row[colIndex] : ''}\n                    &lt;/td&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;).join('');\n    };\n\n    return &#96;\n        &lt;table class=\"table\"&gt;\n            &lt;thead&gt;\n                ${createHeaderGroups()}\n                ${createColumnHeaders()}\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                ${createTableRows()}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &#96;;\n}\n\n\nfunction flattenColumnMetadata(columnGroups = []) {\n    const flatColumns = [];\n    columnGroups.forEach((group, groupIndex) =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        return &#96;",
            "lineNumber": 55
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 56
          },
          {
            "text": "                ${columns.map((col, index) =&gt; &#96;",
            "lineNumber": 57
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 58
          },
          {
            "text": "                        style=\"background-color: ${columnColors[index]};",
            "lineNumber": 59
          },
          {
            "text": "                               color: ${lastGroupColumns[index] ? 'white' : 'black'};",
            "lineNumber": 60
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[index] ? 'bold' : 'normal'};\"&gt;",
            "lineNumber": 61
          },
          {
            "text": "                        ${col.title || ''}",
            "lineNumber": 62
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 63
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 64
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 65
          },
          {
            "text": "        &#96;;",
            "lineNumber": 66
          },
          {
            "text": "    };",
            "lineNumber": 67
          },
          {
            "lineNumber": 68
          },
          {
            "text": "    const createTableRows = () =&gt; {",
            "lineNumber": 69
          },
          {
            "text": "        return currentData.map((row, rowIndex) =&gt; &#96;",
            "lineNumber": 70
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 71
          },
          {
            "text": "                ${columns.map((col, colIndex) =&gt; &#96;",
            "lineNumber": 72
          },
          {
            "text": "                    &lt;td class=\"text-center\" ",
            "lineNumber": 73
          },
          {
            "text": "                        style=\"background-color: ${columnColors[colIndex]};",
            "lineNumber": 74
          },
          {
            "text": "                               color: ${lastGroupColumns[colIndex] ? 'white' : 'black'};",
            "lineNumber": 75
          },
          {
            "text": "                               font-weight: ${lastGroupColumns[colIndex] ? 'bold' : 'normal'};",
            "lineNumber": 76
          },
          {
            "text": "                               border-right: ${(colIndex &lt; columns.length - 1 &amp;&amp; ",
            "lineNumber": 77
          },
          {
            "text": "                                              columnColors[colIndex] !== columnColors[colIndex + 1]) ",
            "lineNumber": 78
          },
          {
            "text": "                                             ? '2px solid #dee2e6' ",
            "lineNumber": 79
          },
          {
            "text": "                                             : '1px solid #dee2e6'};\"&gt;",
            "lineNumber": 80
          },
          {
            "text": "                        ${row[colIndex] !== undefined ? row[colIndex] : ''}",
            "lineNumber": 81
          },
          {
            "text": "                    &lt;/td&gt;",
            "lineNumber": 82
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 83
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 84
          },
          {
            "text": "        &#96;).join('');",
            "lineNumber": 85
          },
          {
            "text": "    };",
            "lineNumber": 86
          },
          {
            "lineNumber": 87
          },
          {
            "text": "    return &#96;",
            "lineNumber": 88
          },
          {
            "text": "        &lt;table class=\"table\"&gt;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;thead&gt;",
            "lineNumber": 90
          },
          {
            "text": "                ${createHeaderGroups()}",
            "lineNumber": 91
          },
          {
            "text": "                ${createColumnHeaders()}",
            "lineNumber": 92
          },
          {
            "text": "            &lt;/thead&gt;",
            "lineNumber": 93
          },
          {
            "text": "            &lt;tbody&gt;",
            "lineNumber": 94
          },
          {
            "text": "                ${createTableRows()}",
            "lineNumber": 95
          },
          {
            "text": "            &lt;/tbody&gt;",
            "lineNumber": 96
          },
          {
            "text": "        &lt;/table&gt;",
            "lineNumber": 97
          },
          {
            "text": "    &#96;;",
            "lineNumber": 98
          },
          {
            "text": "}",
            "lineNumber": 99
          },
          {
            "lineNumber": 100
          },
          {
            "lineNumber": 101
          },
          {
            "text": "function flattenColumnMetadata(columnGroups = []) {",
            "lineNumber": 102
          },
          {
            "text": "    const flatColumns = [];",
            "lineNumber": 103
          },
          {
            "text": "    columnGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 104
          },
          {
            "text": "        ",
            "lineNumber": 105
          }
        ]
      },
      "score": 0.310652494430542
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1142
          },
          "endPosition": {
            "line": 1186
          }
        },
        "contents": "            columns: data.columns\n        }];\n    }\n\n    // Get table configuration\n    const config = data.config || {};\n    \n    // Get options with defaults\n    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;\n    \n    // Initialize team colors if this is a table with team data\n    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {\n        // Extract team names from the data\n        // For most tables, team name is in the second column (row[1])\n        // For team vs team comparison, team name is in the first column (row[0])\n        let teams = [];\n        \n        \n        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)\n        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {\n            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        } else {\n            // Standard tables with team names in second column\n            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        }\n        \n        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {\n            window.updateTeamColorMap(teams);\n        }\n    }\n    \n    // Create table wrapper for horizontal scroll\n    const tableWrapper = document.createElement('div');\n    tableWrapper.className = 'table-responsive';\n\n    // Create table\n    const table = document.createElement('table');\n    table.className = 'table';\n    if (config.striped) table.classList.add('table-striped');\n    if (config.hover) table.classList.add('table-hover');\n    if (config.compact) table.classList.add('table-sm');\n    table.style.borderCollapse = 'collapse';\n\n    // Add title and description if provided",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            columns: data.columns",
            "lineNumber": 1143
          },
          {
            "text": "        }];",
            "lineNumber": 1144
          },
          {
            "text": "    }",
            "lineNumber": 1145
          },
          {
            "lineNumber": 1146
          },
          {
            "text": "    // Get table configuration",
            "lineNumber": 1147
          },
          {
            "text": "    const config = data.config || {};",
            "lineNumber": 1148
          },
          {
            "text": "    ",
            "lineNumber": 1149
          },
          {
            "text": "    // Get options with defaults",
            "lineNumber": 1150
          },
          {
            "text": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;",
            "lineNumber": 1151
          },
          {
            "text": "    ",
            "lineNumber": 1152
          },
          {
            "text": "    // Initialize team colors if this is a table with team data",
            "lineNumber": 1153
          },
          {
            "text": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
            "lineNumber": 1154
          },
          {
            "text": "        // Extract team names from the data",
            "lineNumber": 1155
          },
          {
            "text": "        // For most tables, team name is in the second column (row[1])",
            "lineNumber": 1156
          },
          {
            "text": "        // For team vs team comparison, team name is in the first column (row[0])",
            "lineNumber": 1157
          },
          {
            "text": "        let teams = [];",
            "lineNumber": 1158
          },
          {
            "text": "        ",
            "lineNumber": 1159
          },
          {
            "text": "        ",
            "lineNumber": 1160
          },
          {
            "text": "        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)",
            "lineNumber": 1161
          },
          {
            "text": "        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {",
            "lineNumber": 1162
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1163
          },
          {
            "text": "        } else {",
            "lineNumber": 1164
          },
          {
            "text": "            // Standard tables with team names in second column",
            "lineNumber": 1165
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1166
          },
          {
            "text": "        }",
            "lineNumber": 1167
          },
          {
            "text": "        ",
            "lineNumber": 1168
          },
          {
            "text": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
            "lineNumber": 1169
          },
          {
            "text": "            window.updateTeamColorMap(teams);",
            "lineNumber": 1170
          },
          {
            "text": "        }",
            "lineNumber": 1171
          },
          {
            "text": "    }",
            "lineNumber": 1172
          },
          {
            "text": "    ",
            "lineNumber": 1173
          },
          {
            "text": "    // Create table wrapper for horizontal scroll",
            "lineNumber": 1174
          },
          {
            "text": "    const tableWrapper = document.createElement('div');",
            "lineNumber": 1175
          },
          {
            "text": "    tableWrapper.className = 'table-responsive';",
            "lineNumber": 1176
          },
          {
            "lineNumber": 1177
          },
          {
            "text": "    // Create table",
            "lineNumber": 1178
          },
          {
            "text": "    const table = document.createElement('table');",
            "lineNumber": 1179
          },
          {
            "text": "    table.className = 'table';",
            "lineNumber": 1180
          },
          {
            "text": "    if (config.striped) table.classList.add('table-striped');",
            "lineNumber": 1181
          },
          {
            "text": "    if (config.hover) table.classList.add('table-hover');",
            "lineNumber": 1182
          },
          {
            "text": "    if (config.compact) table.classList.add('table-sm');",
            "lineNumber": 1183
          },
          {
            "text": "    table.style.borderCollapse = 'collapse';",
            "lineNumber": 1184
          },
          {
            "lineNumber": 1185
          },
          {
            "text": "    // Add title and description if provided",
            "lineNumber": 1186
          }
        ]
      },
      "score": 0.30975818634033203
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 460,
            "column": 12
          },
          "endPosition": {
            "line": 498
          }
        },
        "contents": "groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();\n        }\n\n        const groupDefinition = {\n            title: group.title || '',\n            headerHozAlign: 'center',\n            cssClass: groupCssClass,\n            columns: group.columns.map((column, columnIndex) =&gt; {\n                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];\n                if (!columnInfo) {\n                    return null;\n                }\n                const field = columnInfo.field;\n                const headerAlign = column.align || 'center';\n                const columnStyles = column.style || {};\n                \n                const formatter = function(cell) {\n                    const value = cell.getValue();\n                    const element = cell.getElement();\n                    const rowData = cell.getRow().getData();\n                    const rowIdx = rowData.__rowIndex;\n                    const row = cell.getRow();\n\n                    // Add stripe class for column group coloring; actual colors come from CSS\n                    if (useStripedGroups) {\n                        element.classList.add('col-group-' + groupIndex);\n                    }\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
        "signatures": {},
        "detailedLines": [
          {
            "text": "groupCssClass = (groupCssClass + ' tab-group-highlighted').trim();",
            "lineNumber": 461
          },
          {
            "text": "        }",
            "lineNumber": 462
          },
          {
            "lineNumber": 463
          },
          {
            "text": "        const groupDefinition = {",
            "lineNumber": 464
          },
          {
            "text": "            title: group.title || '',",
            "lineNumber": 465
          },
          {
            "text": "            headerHozAlign: 'center',",
            "lineNumber": 466
          },
          {
            "text": "            cssClass: groupCssClass,",
            "lineNumber": 467
          },
          {
            "text": "            columns: group.columns.map((column, columnIndex) =&gt; {",
            "lineNumber": 468
          },
          {
            "text": "                const columnInfo = columnLookup[&#96;${groupIndex}-${columnIndex}&#96;];",
            "lineNumber": 469
          },
          {
            "text": "                if (!columnInfo) {",
            "lineNumber": 470
          },
          {
            "text": "                    return null;",
            "lineNumber": 471
          },
          {
            "text": "                }",
            "lineNumber": 472
          },
          {
            "text": "                const field = columnInfo.field;",
            "lineNumber": 473
          },
          {
            "text": "                const headerAlign = column.align || 'center';",
            "lineNumber": 474
          },
          {
            "text": "                const columnStyles = column.style || {};",
            "lineNumber": 475
          },
          {
            "text": "                ",
            "lineNumber": 476
          },
          {
            "text": "                const formatter = function(cell) {",
            "lineNumber": 477
          },
          {
            "text": "                    const value = cell.getValue();",
            "lineNumber": 478
          },
          {
            "text": "                    const element = cell.getElement();",
            "lineNumber": 479
          },
          {
            "text": "                    const rowData = cell.getRow().getData();",
            "lineNumber": 480
          },
          {
            "text": "                    const rowIdx = rowData.__rowIndex;",
            "lineNumber": 481
          },
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 482
          },
          {
            "lineNumber": 483
          },
          {
            "text": "                    // Add stripe class for column group coloring; actual colors come from CSS",
            "lineNumber": 484
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 485
          },
          {
            "text": "                        element.classList.add('col-group-' + groupIndex);",
            "lineNumber": 486
          },
          {
            "text": "                    }",
            "lineNumber": 487
          },
          {
            "lineNumber": 488
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 489
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 490
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 491
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 492
          },
          {
            "text": "                    }",
            "lineNumber": 493
          },
          {
            "lineNumber": 494
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 495
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 496
          },
          {
            "lineNumber": 497
          },
          {
            "text": "                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
            "lineNumber": 498
          }
        ]
      },
      "score": 0.30146530270576477
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 647,
            "column": 20
          },
          "endPosition": {
            "line": 715
          }
        },
        "contents": "columnDefinition.widthGrow = 0;\n                }\n\n                // Build CSS classes\n                let cssClasses = [];\n                if (column.align === 'right') {\n                    cssClasses.push('text-end');\n                } else if (column.align === 'left') {\n                    cssClasses.push('text-start');\n                } else {\n                    cssClasses.push('text-center');\n                }\n                \n                // Add highlighting class if group is highlighted\n                if (isHighlighted) {\n                    cssClasses.push('tab-col-highlighted');\n                }\n                \n                columnDefinition.cssClass = cssClasses.join(' ');\n\n                return columnDefinition;\n            }).filter(Boolean)\n        };\n\n        // Set frozen on the parent group, not individual columns\n        if (groupFrozenDirection) {\n            groupDefinition.frozen = groupFrozenDirection;\n        }\n\n        return groupDefinition;\n        }).filter(Boolean);\n    }\n\n    if (!tabulatorColumns.length) {\n        console.warn('No Tabulator column definitions could be created');\n        return;\n    }\n\n    if (window[tableId + 'Instance']) {\n        window[tableId + 'Instance'].destroy();\n    }\n\n    const tooltipOption = settings.tooltips\n        ? function(cell) {\n            const value = cell.getValue();\n            if (value === null || value === undefined) {\n                return '';\n            }\n            if (typeof value === 'object') {\n                try {\n                    return JSON.stringify(value);\n                } catch (e) {\n                    return '';\n                }\n            }\n            return String(value);\n        }\n        : false;\n\n    // Set up initial sort if specified\n    const initialSort = data.default_sort ? [\n        {\n            column: data.default_sort.field,\n            dir: data.default_sort.dir || \"desc\"  // Default to descending\n        }\n    ] : undefined;\n\n    // Extract teams from data and update team color map",
        "signatures": {},
        "detailedLines": [
          {
            "text": "columnDefinition.widthGrow = 0;",
            "lineNumber": 648
          },
          {
            "text": "                }",
            "lineNumber": 649
          },
          {
            "lineNumber": 650
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 651
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 652
          },
          {
            "text": "                if (column.align === 'right') {",
            "lineNumber": 653
          },
          {
            "text": "                    cssClasses.push('text-end');",
            "lineNumber": 654
          },
          {
            "text": "                } else if (column.align === 'left') {",
            "lineNumber": 655
          },
          {
            "text": "                    cssClasses.push('text-start');",
            "lineNumber": 656
          },
          {
            "text": "                } else {",
            "lineNumber": 657
          },
          {
            "text": "                    cssClasses.push('text-center');",
            "lineNumber": 658
          },
          {
            "text": "                }",
            "lineNumber": 659
          },
          {
            "text": "                ",
            "lineNumber": 660
          },
          {
            "text": "                // Add highlighting class if group is highlighted",
            "lineNumber": 661
          },
          {
            "text": "                if (isHighlighted) {",
            "lineNumber": 662
          },
          {
            "text": "                    cssClasses.push('tab-col-highlighted');",
            "lineNumber": 663
          },
          {
            "text": "                }",
            "lineNumber": 664
          },
          {
            "text": "                ",
            "lineNumber": 665
          },
          {
            "text": "                columnDefinition.cssClass = cssClasses.join(' ');",
            "lineNumber": 666
          },
          {
            "lineNumber": 667
          },
          {
            "text": "                return columnDefinition;",
            "lineNumber": 668
          },
          {
            "text": "            }).filter(Boolean)",
            "lineNumber": 669
          },
          {
            "text": "        };",
            "lineNumber": 670
          },
          {
            "lineNumber": 671
          },
          {
            "text": "        // Set frozen on the parent group, not individual columns",
            "lineNumber": 672
          },
          {
            "text": "        if (groupFrozenDirection) {",
            "lineNumber": 673
          },
          {
            "text": "            groupDefinition.frozen = groupFrozenDirection;",
            "lineNumber": 674
          },
          {
            "text": "        }",
            "lineNumber": 675
          },
          {
            "lineNumber": 676
          },
          {
            "text": "        return groupDefinition;",
            "lineNumber": 677
          },
          {
            "text": "        }).filter(Boolean);",
            "lineNumber": 678
          },
          {
            "text": "    }",
            "lineNumber": 679
          },
          {
            "lineNumber": 680
          },
          {
            "text": "    if (!tabulatorColumns.length) {",
            "lineNumber": 681
          },
          {
            "text": "        console.warn('No Tabulator column definitions could be created');",
            "lineNumber": 682
          },
          {
            "text": "        return;",
            "lineNumber": 683
          },
          {
            "text": "    }",
            "lineNumber": 684
          },
          {
            "lineNumber": 685
          },
          {
            "text": "    if (window[tableId + 'Instance']) {",
            "lineNumber": 686
          },
          {
            "text": "        window[tableId + 'Instance'].destroy();",
            "lineNumber": 687
          },
          {
            "text": "    }",
            "lineNumber": 688
          },
          {
            "lineNumber": 689
          },
          {
            "text": "    const tooltipOption = settings.tooltips",
            "lineNumber": 690
          },
          {
            "text": "        ? function(cell) {",
            "lineNumber": 691
          },
          {
            "text": "            const value = cell.getValue();",
            "lineNumber": 692
          },
          {
            "text": "            if (value === null || value === undefined) {",
            "lineNumber": 693
          },
          {
            "text": "                return '';",
            "lineNumber": 694
          },
          {
            "text": "            }",
            "lineNumber": 695
          },
          {
            "text": "            if (typeof value === 'object') {",
            "lineNumber": 696
          },
          {
            "text": "                try {",
            "lineNumber": 697
          },
          {
            "text": "                    return JSON.stringify(value);",
            "lineNumber": 698
          },
          {
            "text": "                } catch (e) {",
            "lineNumber": 699
          },
          {
            "text": "                    return '';",
            "lineNumber": 700
          },
          {
            "text": "                }",
            "lineNumber": 701
          },
          {
            "text": "            }",
            "lineNumber": 702
          },
          {
            "text": "            return String(value);",
            "lineNumber": 703
          },
          {
            "text": "        }",
            "lineNumber": 704
          },
          {
            "text": "        : false;",
            "lineNumber": 705
          },
          {
            "lineNumber": 706
          },
          {
            "text": "    // Set up initial sort if specified",
            "lineNumber": 707
          },
          {
            "text": "    const initialSort = data.default_sort ? [",
            "lineNumber": 708
          },
          {
            "text": "        {",
            "lineNumber": 709
          },
          {
            "text": "            column: data.default_sort.field,",
            "lineNumber": 710
          },
          {
            "text": "            dir: data.default_sort.dir || \"desc\"  // Default to descending",
            "lineNumber": 711
          },
          {
            "text": "        }",
            "lineNumber": 712
          },
          {
            "text": "    ] : undefined;",
            "lineNumber": 713
          },
          {
            "lineNumber": 714
          },
          {
            "text": "    // Extract teams from data and update team color map",
            "lineNumber": 715
          }
        ]
      },
      "score": 0.29914090037345886
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2002
          },
          "endPosition": {
            "line": 2072
          }
        },
        "contents": "/* Dark mode styles are now applied via ColorUtils.applyDarkMode() */\n/* This selector is kept for compatibility but colors come from CSS variables */\nbody.dark-mode,\nbody[data-theme=\"dark\"],\n:root[data-theme=\"dark\"] {\n    /* Colors are set via CSS variables by ColorUtils */\n}\n\n.custom-tabulator {\n    border: none;\n    background: transparent;\n    font-family: \"Inter\", \"Segoe UI\", system-ui, -apple-system, sans-serif;\n    color: var(--table-body-text);\n}\n\n.custom-tabulator .tabulator-tableHolder {\n    border-radius: 16px;\n    background: var(--table-surface);\n    box-shadow: var(--table-shadow);\n    border: 1px solid var(--table-border-soft);\n    overflow: hidden;\n}\n\n.custom-tabulator .tabulator-header {\n    background: linear-gradient(120deg, var(--table-header-bg), transparent);\n    color: var(--table-header-text);\n    border: none;\n    border-bottom: none !important; /* Remove full-width separator */\n    padding: 4px 0;\n}\n\n/* Semantic UI theme customizations - black borders for column groups and columns */\n.custom-tabulator .tabulator-header .tabulator-col-group,\n.custom-tabulator .tabulator-header .tabulator-col {\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n.custom-tabulator .tabulator-col {\n    border: none;\n    background: transparent;\n}\n\n.custom-tabulator .tabulator-col .tabulator-col-content {\n    padding: 0.85rem 0.75rem;\n    font-weight: 600;\n    letter-spacing: 0.02em;\n}\n\n.custom-tabulator .tabulator-row {\n    background: var(--table-surface);\n    border: none;\n    color: var(--table-body-text);\n    transition: background 160ms ease;\n    position: relative;\n    overflow: hidden;\n}\n\n.custom-tabulator .tabulator-row:nth-child(even) {\n    background: var(--table-surface-alt);\n}\n\n.custom-tabulator .tabulator-row .tabulator-cell {\n    border: none;\n    padding: 0.85rem 0.75rem;\n    font-size: 0.95rem;\n}\n\n.custom-tabulator .tabulator-row:hover {\n    background: var(--table-hover-bg);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/* Dark mode styles are now applied via ColorUtils.applyDarkMode() */",
            "lineNumber": 2003
          },
          {
            "text": "/* This selector is kept for compatibility but colors come from CSS variables */",
            "lineNumber": 2004
          },
          {
            "text": "body.dark-mode,",
            "lineNumber": 2005
          },
          {
            "text": "body[data-theme=\"dark\"],",
            "lineNumber": 2006
          },
          {
            "text": ":root[data-theme=\"dark\"] {",
            "lineNumber": 2007
          },
          {
            "text": "    /* Colors are set via CSS variables by ColorUtils */",
            "lineNumber": 2008
          },
          {
            "text": "}",
            "lineNumber": 2009
          },
          {
            "lineNumber": 2010
          },
          {
            "text": ".custom-tabulator {",
            "lineNumber": 2011
          },
          {
            "text": "    border: none;",
            "lineNumber": 2012
          },
          {
            "text": "    background: transparent;",
            "lineNumber": 2013
          },
          {
            "text": "    font-family: \"Inter\", \"Segoe UI\", system-ui, -apple-system, sans-serif;",
            "lineNumber": 2014
          },
          {
            "text": "    color: var(--table-body-text);",
            "lineNumber": 2015
          },
          {
            "text": "}",
            "lineNumber": 2016
          },
          {
            "lineNumber": 2017
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder {",
            "lineNumber": 2018
          },
          {
            "text": "    border-radius: 16px;",
            "lineNumber": 2019
          },
          {
            "text": "    background: var(--table-surface);",
            "lineNumber": 2020
          },
          {
            "text": "    box-shadow: var(--table-shadow);",
            "lineNumber": 2021
          },
          {
            "text": "    border: 1px solid var(--table-border-soft);",
            "lineNumber": 2022
          },
          {
            "text": "    overflow: hidden;",
            "lineNumber": 2023
          },
          {
            "text": "}",
            "lineNumber": 2024
          },
          {
            "lineNumber": 2025
          },
          {
            "text": ".custom-tabulator .tabulator-header {",
            "lineNumber": 2026
          },
          {
            "text": "    background: linear-gradient(120deg, var(--table-header-bg), transparent);",
            "lineNumber": 2027
          },
          {
            "text": "    color: var(--table-header-text);",
            "lineNumber": 2028
          },
          {
            "text": "    border: none;",
            "lineNumber": 2029
          },
          {
            "text": "    border-bottom: none !important; /* Remove full-width separator */",
            "lineNumber": 2030
          },
          {
            "text": "    padding: 4px 0;",
            "lineNumber": 2031
          },
          {
            "text": "}",
            "lineNumber": 2032
          },
          {
            "lineNumber": 2033
          },
          {
            "text": "/* Semantic UI theme customizations - black borders for column groups and columns */",
            "lineNumber": 2034
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col-group,",
            "lineNumber": 2035
          },
          {
            "text": ".custom-tabulator .tabulator-header .tabulator-col {",
            "lineNumber": 2036
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2037
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2038
          },
          {
            "text": "}",
            "lineNumber": 2039
          },
          {
            "lineNumber": 2040
          },
          {
            "text": ".custom-tabulator .tabulator-col {",
            "lineNumber": 2041
          },
          {
            "text": "    border: none;",
            "lineNumber": 2042
          },
          {
            "text": "    background: transparent;",
            "lineNumber": 2043
          },
          {
            "text": "}",
            "lineNumber": 2044
          },
          {
            "lineNumber": 2045
          },
          {
            "text": ".custom-tabulator .tabulator-col .tabulator-col-content {",
            "lineNumber": 2046
          },
          {
            "text": "    padding: 0.85rem 0.75rem;",
            "lineNumber": 2047
          },
          {
            "text": "    font-weight: 600;",
            "lineNumber": 2048
          },
          {
            "text": "    letter-spacing: 0.02em;",
            "lineNumber": 2049
          },
          {
            "text": "}",
            "lineNumber": 2050
          },
          {
            "lineNumber": 2051
          },
          {
            "text": ".custom-tabulator .tabulator-row {",
            "lineNumber": 2052
          },
          {
            "text": "    background: var(--table-surface);",
            "lineNumber": 2053
          },
          {
            "text": "    border: none;",
            "lineNumber": 2054
          },
          {
            "text": "    color: var(--table-body-text);",
            "lineNumber": 2055
          },
          {
            "text": "    transition: background 160ms ease;",
            "lineNumber": 2056
          },
          {
            "text": "    position: relative;",
            "lineNumber": 2057
          },
          {
            "text": "    overflow: hidden;",
            "lineNumber": 2058
          },
          {
            "text": "}",
            "lineNumber": 2059
          },
          {
            "lineNumber": 2060
          },
          {
            "text": ".custom-tabulator .tabulator-row:nth-child(even) {",
            "lineNumber": 2061
          },
          {
            "text": "    background: var(--table-surface-alt);",
            "lineNumber": 2062
          },
          {
            "text": "}",
            "lineNumber": 2063
          },
          {
            "lineNumber": 2064
          },
          {
            "text": ".custom-tabulator .tabulator-row .tabulator-cell {",
            "lineNumber": 2065
          },
          {
            "text": "    border: none;",
            "lineNumber": 2066
          },
          {
            "text": "    padding: 0.85rem 0.75rem;",
            "lineNumber": 2067
          },
          {
            "text": "    font-size: 0.95rem;",
            "lineNumber": 2068
          },
          {
            "text": "}",
            "lineNumber": 2069
          },
          {
            "lineNumber": 2070
          },
          {
            "text": ".custom-tabulator .tabulator-row:hover {",
            "lineNumber": 2071
          },
          {
            "text": "    background: var(--table-hover-bg);",
            "lineNumber": 2072
          }
        ]
      },
      "score": 0.2969469130039215
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 307
          },
          "endPosition": {
            "line": 322
          }
        },
        "contents": "                        });\n                    }\n\n                    // Special handling for position columns\n                    // Check if this is a position column by field name or by position (first column of first group)\n                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' || \n                                            (!settings.disablePositionCircle &amp;&amp; groupIndex === 0 &amp;&amp; columnIndex === 0);\n                    \n                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {\n                        let teamName = null;\n                        if (field === 'team_position') {\n                            // For team position, use team name from the same row\n                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);\n                        } else if (field === 'opponent_position') {\n                            // For opponent position, use opponent name from the same row",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        });",
            "lineNumber": 308
          },
          {
            "text": "                    }",
            "lineNumber": 309
          },
          {
            "lineNumber": 310
          },
          {
            "text": "                    // Special handling for position columns",
            "lineNumber": 311
          },
          {
            "text": "                    // Check if this is a position column by field name or by position (first column of first group)",
            "lineNumber": 312
          },
          {
            "text": "                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' || ",
            "lineNumber": 313
          },
          {
            "text": "                                            (!settings.disablePositionCircle &amp;&amp; groupIndex === 0 &amp;&amp; columnIndex === 0);",
            "lineNumber": 314
          },
          {
            "text": "                    ",
            "lineNumber": 315
          },
          {
            "text": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {",
            "lineNumber": 316
          },
          {
            "text": "                        let teamName = null;",
            "lineNumber": 317
          },
          {
            "text": "                        if (field === 'team_position') {",
            "lineNumber": 318
          },
          {
            "text": "                            // For team position, use team name from the same row",
            "lineNumber": 319
          },
          {
            "text": "                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);",
            "lineNumber": 320
          },
          {
            "text": "                        } else if (field === 'opponent_position') {",
            "lineNumber": 321
          },
          {
            "text": "                            // For opponent position, use opponent name from the same row",
            "lineNumber": 322
          }
        ]
      },
      "score": 0.2927190065383911
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 509
          },
          "endPosition": {
            "line": 524
          }
        },
        "contents": "                        });\n                    }\n\n                    // Special handling for position columns\n                    // Check if this is a position column by field name or by position (first column of first group)\n                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' || \n                                            (!settings.disablePositionCircle &amp;&amp; columnInfo.groupIndex === 0 &amp;&amp; columnInfo.columnIndex === 0);\n                    \n                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {\n                        let teamName = null;\n                        if (field === 'team_position') {\n                            // For team position, use team name from the same row\n                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);\n                        } else if (field === 'opponent_position') {\n                            // For opponent position, use opponent name from the same row",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                        });",
            "lineNumber": 510
          },
          {
            "text": "                    }",
            "lineNumber": 511
          },
          {
            "lineNumber": 512
          },
          {
            "text": "                    // Special handling for position columns",
            "lineNumber": 513
          },
          {
            "text": "                    // Check if this is a position column by field name or by position (first column of first group)",
            "lineNumber": 514
          },
          {
            "text": "                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' || ",
            "lineNumber": 515
          },
          {
            "text": "                                            (!settings.disablePositionCircle &amp;&amp; columnInfo.groupIndex === 0 &amp;&amp; columnInfo.columnIndex === 0);",
            "lineNumber": 516
          },
          {
            "text": "                    ",
            "lineNumber": 517
          },
          {
            "text": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {",
            "lineNumber": 518
          },
          {
            "text": "                        let teamName = null;",
            "lineNumber": 519
          },
          {
            "text": "                        if (field === 'team_position') {",
            "lineNumber": 520
          },
          {
            "text": "                            // For team position, use team name from the same row",
            "lineNumber": 521
          },
          {
            "text": "                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);",
            "lineNumber": 522
          },
          {
            "text": "                        } else if (field === 'opponent_position') {",
            "lineNumber": 523
          },
          {
            "text": "                            // For opponent position, use opponent name from the same row",
            "lineNumber": 524
          }
        ]
      },
      "score": 0.29180073738098145
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 495
          },
          "endPosition": {
            "line": 513
          }
        },
        "contents": "                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles (heatmap colors) - apply with !important to override striping\n                    const cellMeta = cellMetadataMap[rowIdx]?.[field];\n                    if (cellMeta) {\n                        // Apply heatmap background color with !important to override striping CSS\n                        if (cellMeta.backgroundColor) {\n                            element.style.setProperty('background-color', cellMeta.backgroundColor, 'important');\n                        }\n                        // Apply other styles normally\n                        Object.entries(cellMeta).forEach(([property, value]) =&gt; {\n                            if (property !== 'backgroundColor' &amp;&amp; value !== undefined &amp;&amp; value !== null) {\n                                element.style[property] = value;\n                            }\n                        });\n                    }\n\n                    // Special handling for position columns",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 496
          },
          {
            "lineNumber": 497
          },
          {
            "text": "                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
            "lineNumber": 498
          },
          {
            "text": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];",
            "lineNumber": 499
          },
          {
            "text": "                    if (cellMeta) {",
            "lineNumber": 500
          },
          {
            "text": "                        // Apply heatmap background color with !important to override striping CSS",
            "lineNumber": 501
          },
          {
            "text": "                        if (cellMeta.backgroundColor) {",
            "lineNumber": 502
          },
          {
            "text": "                            element.style.setProperty('background-color', cellMeta.backgroundColor, 'important');",
            "lineNumber": 503
          },
          {
            "text": "                        }",
            "lineNumber": 504
          },
          {
            "text": "                        // Apply other styles normally",
            "lineNumber": 505
          },
          {
            "text": "                        Object.entries(cellMeta).forEach(([property, value]) =&gt; {",
            "lineNumber": 506
          },
          {
            "text": "                            if (property !== 'backgroundColor' &amp;&amp; value !== undefined &amp;&amp; value !== null) {",
            "lineNumber": 507
          },
          {
            "text": "                                element.style[property] = value;",
            "lineNumber": 508
          },
          {
            "text": "                            }",
            "lineNumber": 509
          },
          {
            "text": "                        });",
            "lineNumber": 510
          },
          {
            "text": "                    }",
            "lineNumber": 511
          },
          {
            "lineNumber": 512
          },
          {
            "text": "                    // Special handling for position columns",
            "lineNumber": 513
          }
        ]
      },
      "score": 0.29069021344184875
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 293
          },
          "endPosition": {
            "line": 311
          }
        },
        "contents": "                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles (heatmap colors) - apply with !important to override striping\n                    const cellMeta = cellMetadataMap[rowIdx]?.[field];\n                    if (cellMeta) {\n                        // Apply heatmap background color with !important to override striping CSS\n                        if (cellMeta.backgroundColor) {\n                            element.style.setProperty('background-color', cellMeta.backgroundColor, 'important');\n                        }\n                        // Apply other styles normally\n                        Object.entries(cellMeta).forEach(([property, value]) =&gt; {\n                            if (property !== 'backgroundColor' &amp;&amp; value !== undefined &amp;&amp; value !== null) {\n                                element.style[property] = value;\n                            }\n                        });\n                    }\n\n                    // Special handling for position columns",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
            "lineNumber": 296
          },
          {
            "text": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];",
            "lineNumber": 297
          },
          {
            "text": "                    if (cellMeta) {",
            "lineNumber": 298
          },
          {
            "text": "                        // Apply heatmap background color with !important to override striping CSS",
            "lineNumber": 299
          },
          {
            "text": "                        if (cellMeta.backgroundColor) {",
            "lineNumber": 300
          },
          {
            "text": "                            element.style.setProperty('background-color', cellMeta.backgroundColor, 'important');",
            "lineNumber": 301
          },
          {
            "text": "                        }",
            "lineNumber": 302
          },
          {
            "text": "                        // Apply other styles normally",
            "lineNumber": 303
          },
          {
            "text": "                        Object.entries(cellMeta).forEach(([property, value]) =&gt; {",
            "lineNumber": 304
          },
          {
            "text": "                            if (property !== 'backgroundColor' &amp;&amp; value !== undefined &amp;&amp; value !== null) {",
            "lineNumber": 305
          },
          {
            "text": "                                element.style[property] = value;",
            "lineNumber": 306
          },
          {
            "text": "                            }",
            "lineNumber": 307
          },
          {
            "text": "                        });",
            "lineNumber": 308
          },
          {
            "text": "                    }",
            "lineNumber": 309
          },
          {
            "lineNumber": 310
          },
          {
            "text": "                    // Special handling for position columns",
            "lineNumber": 311
          }
        ]
      },
      "score": 0.29069021344184875
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 2131
          },
          "endPosition": {
            "line": 2196
          }
        },
        "contents": ".tab-position-circle {\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n    font-weight: 600;\n    margin: 0 auto;\n    font-size: 0.85rem;\n}\n\n/* Hover Effects */\n.custom-tabulator .tabulator-row:hover {\n    background-color: rgba(38, 70, 83, 0.1); /* Light hover effect */\n}\n\n/* Frozen Column Styles */\n.custom-tabulator .tabulator-frozen {\n    background-color: var(--theme-surface, #ffffff); /* Background for frozen columns */\n    z-index: 10; /* Ensure frozen columns are above others */\n}\n\n/* Scrollbar Styles */\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar {\n    width: 8px; /* Width of the scrollbar */\n}\n\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-track {\n    background: #f1f1f1; /* Track color */\n}\n\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb {\n    background: var(--theme-border, #264653); /* Thumb color */\n    border-radius: 4px; /* Rounded corners */\n}\n\n.custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb:hover {\n    background: rgba(38, 70, 83, 0.8); /* Darker thumb on hover */\n}\n\n/* Column group styling */\n.custom-tabulator .tabulator-col-group {\n    background-color: var(--table-header-bg) !important;\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n.custom-tabulator .tabulator-col-group[data-group-index=\"0\"],\n.custom-tabulator .tabulator-col-group[data-group-index=\"1\"],\n.custom-tabulator .tabulator-col-group[data-group-index=\"2\"] {\n    background-color: var(--table-header-bg) !important;\n    border-bottom: 2px solid #000000 !important;\n    border-bottom-color: #000000 !important;\n}\n\n/* Column group titles */\n.custom-tabulator .tabulator-col-group .tabulator-col-group-title {\n    color: var(--table-header-text) !important;\n}\n\n\n.border-right {\n    border-right: 1px solid var(--theme-border, #264653); /* Bootstrap's default border color */",
        "signatures": {},
        "detailedLines": [
          {
            "text": ".tab-position-circle {",
            "lineNumber": 2132
          },
          {
            "text": "    width: 24px;",
            "lineNumber": 2133
          },
          {
            "text": "    height: 24px;",
            "lineNumber": 2134
          },
          {
            "text": "    border-radius: 50%;",
            "lineNumber": 2135
          },
          {
            "text": "    display: flex;",
            "lineNumber": 2136
          },
          {
            "text": "    align-items: center;",
            "lineNumber": 2137
          },
          {
            "text": "    justify-content: center;",
            "lineNumber": 2138
          },
          {
            "text": "    color: #fff;",
            "lineNumber": 2139
          },
          {
            "text": "    font-weight: 600;",
            "lineNumber": 2140
          },
          {
            "text": "    margin: 0 auto;",
            "lineNumber": 2141
          },
          {
            "text": "    font-size: 0.85rem;",
            "lineNumber": 2142
          },
          {
            "text": "}",
            "lineNumber": 2143
          },
          {
            "lineNumber": 2144
          },
          {
            "text": "/* Hover Effects */",
            "lineNumber": 2145
          },
          {
            "text": ".custom-tabulator .tabulator-row:hover {",
            "lineNumber": 2146
          },
          {
            "text": "    background-color: rgba(38, 70, 83, 0.1); /* Light hover effect */",
            "lineNumber": 2147
          },
          {
            "text": "}",
            "lineNumber": 2148
          },
          {
            "lineNumber": 2149
          },
          {
            "text": "/* Frozen Column Styles */",
            "lineNumber": 2150
          },
          {
            "text": ".custom-tabulator .tabulator-frozen {",
            "lineNumber": 2151
          },
          {
            "text": "    background-color: var(--theme-surface, #ffffff); /* Background for frozen columns */",
            "lineNumber": 2152
          },
          {
            "text": "    z-index: 10; /* Ensure frozen columns are above others */",
            "lineNumber": 2153
          },
          {
            "text": "}",
            "lineNumber": 2154
          },
          {
            "lineNumber": 2155
          },
          {
            "text": "/* Scrollbar Styles */",
            "lineNumber": 2156
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar {",
            "lineNumber": 2157
          },
          {
            "text": "    width: 8px; /* Width of the scrollbar */",
            "lineNumber": 2158
          },
          {
            "text": "}",
            "lineNumber": 2159
          },
          {
            "lineNumber": 2160
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-track {",
            "lineNumber": 2161
          },
          {
            "text": "    background: #f1f1f1; /* Track color */",
            "lineNumber": 2162
          },
          {
            "text": "}",
            "lineNumber": 2163
          },
          {
            "lineNumber": 2164
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb {",
            "lineNumber": 2165
          },
          {
            "text": "    background: var(--theme-border, #264653); /* Thumb color */",
            "lineNumber": 2166
          },
          {
            "text": "    border-radius: 4px; /* Rounded corners */",
            "lineNumber": 2167
          },
          {
            "text": "}",
            "lineNumber": 2168
          },
          {
            "lineNumber": 2169
          },
          {
            "text": ".custom-tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb:hover {",
            "lineNumber": 2170
          },
          {
            "text": "    background: rgba(38, 70, 83, 0.8); /* Darker thumb on hover */",
            "lineNumber": 2171
          },
          {
            "text": "}",
            "lineNumber": 2172
          },
          {
            "lineNumber": 2173
          },
          {
            "text": "/* Column group styling */",
            "lineNumber": 2174
          },
          {
            "text": ".custom-tabulator .tabulator-col-group {",
            "lineNumber": 2175
          },
          {
            "text": "    background-color: var(--table-header-bg) !important;",
            "lineNumber": 2176
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2177
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2178
          },
          {
            "text": "}",
            "lineNumber": 2179
          },
          {
            "lineNumber": 2180
          },
          {
            "text": ".custom-tabulator .tabulator-col-group[data-group-index=\"0\"],",
            "lineNumber": 2181
          },
          {
            "text": ".custom-tabulator .tabulator-col-group[data-group-index=\"1\"],",
            "lineNumber": 2182
          },
          {
            "text": ".custom-tabulator .tabulator-col-group[data-group-index=\"2\"] {",
            "lineNumber": 2183
          },
          {
            "text": "    background-color: var(--table-header-bg) !important;",
            "lineNumber": 2184
          },
          {
            "text": "    border-bottom: 2px solid #000000 !important;",
            "lineNumber": 2185
          },
          {
            "text": "    border-bottom-color: #000000 !important;",
            "lineNumber": 2186
          },
          {
            "text": "}",
            "lineNumber": 2187
          },
          {
            "lineNumber": 2188
          },
          {
            "text": "/* Column group titles */",
            "lineNumber": 2189
          },
          {
            "text": ".custom-tabulator .tabulator-col-group .tabulator-col-group-title {",
            "lineNumber": 2190
          },
          {
            "text": "    color: var(--table-header-text) !important;",
            "lineNumber": 2191
          },
          {
            "text": "}",
            "lineNumber": 2192
          },
          {
            "lineNumber": 2193
          },
          {
            "lineNumber": 2194
          },
          {
            "text": ".border-right {",
            "lineNumber": 2195
          },
          {
            "text": "    border-right: 1px solid var(--theme-border, #264653); /* Bootstrap's default border color */",
            "lineNumber": 2196
          }
        ]
      },
      "score": 0.28602519631385803
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3862
          }
        },
        "contents": "class LeagueService:\ndef get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:\n\n\n        # Build columns\n        columns = [\n            ColumnGroup(\n                title=i18n_service.get_text(\"match\"),\n                columns=[\n                    Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent\", width=\"120px\", align=\"left\", sortable=False),\n                    Column(title=i18n_service.get_text(\"total_points\"), field=\"team_total_points\", width=\"100px\", align=\"center\", sortable=False,\n                           style={\"fontWeight\": \"bold\"}),\n                ]\n                #style={\"borderRight\": \"2px solid #264653\"}  # Vertical bar after Opponents group (same color as other borders)\n            ),\n            ColumnGroup(\n                title=team,\n                columns=[\n                    Column(title=i18n_service.get_text(\"pins\"), field=\"team_score\", width=\"80px\", align=\"center\", sortable=False),\n                    Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\", sortable=False),\n                      # Make Total Points column bold\n                ]\n            )\n        ]\n        for player_info in player_identifiers:\n            player_name = player_info['player_name']\n            columns.append(\n                ColumnGroup(\n                    title=player_name,\n                    columns=[\n                        Column(title=i18n_service.get_text(\"pins\"), field=f\"{player_info['identifier']}_score\", width=\"80px\", align=\"center\", sortable=False),\n                        Column(title=i18n_service.get_text(\"points\"), field=f\"{player_info['identifier']}_points\", width=\"50px\", align=\"center\", sortable=False),\n                        Column(title=i18n_service.get_text(\"position\"), field=f\"{player_info['identifier']}_pos\", width=\"50px\", align=\"center\", sortable=False),\n                        \n                    ]\n                )\n            )\n\n        # Build data rows (one per round)\n        data = []\n        row_metadata = []\n        for rnd in rounds:\n            row = []\n            # Opponent name for this round\n            round_data",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 2030,
                "column": 5
              },
              "endPosition": {
                "line": 2031,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_individual_scores_table(self, league: str, season: str, team: str, week: int) -&gt; TableData:",
            "lineNumber": 2030
          },
          {
            "lineNumber": 2084
          },
          {
            "lineNumber": 2085
          },
          {
            "text": "        # Build columns",
            "lineNumber": 2086
          },
          {
            "text": "        columns = [",
            "lineNumber": 2087
          },
          {
            "text": "            ColumnGroup(",
            "lineNumber": 2088
          },
          {
            "text": "                title=i18n_service.get_text(\"match\"),",
            "lineNumber": 2089
          },
          {
            "text": "                columns=[",
            "lineNumber": 2090
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"opponent\"), field=\"opponent\", width=\"120px\", align=\"left\", sortable=False),",
            "lineNumber": 2091
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"total_points\"), field=\"team_total_points\", width=\"100px\", align=\"center\", sortable=False,",
            "lineNumber": 2092
          },
          {
            "text": "                           style={\"fontWeight\": \"bold\"}),",
            "lineNumber": 2093
          },
          {
            "text": "                ]",
            "lineNumber": 2094
          },
          {
            "text": "                #style={\"borderRight\": \"2px solid #264653\"}  # Vertical bar after Opponents group (same color as other borders)",
            "lineNumber": 2095
          },
          {
            "text": "            ),",
            "lineNumber": 2096
          },
          {
            "text": "            ColumnGroup(",
            "lineNumber": 2097
          },
          {
            "text": "                title=team,",
            "lineNumber": 2098
          },
          {
            "text": "                columns=[",
            "lineNumber": 2099
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"pins\"), field=\"team_score\", width=\"80px\", align=\"center\", sortable=False),",
            "lineNumber": 2100
          },
          {
            "text": "                    Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\", sortable=False),",
            "lineNumber": 2101
          },
          {
            "text": "                      # Make Total Points column bold",
            "lineNumber": 2102
          },
          {
            "text": "                ]",
            "lineNumber": 2103
          },
          {
            "text": "            )",
            "lineNumber": 2104
          },
          {
            "text": "        ]",
            "lineNumber": 2105
          },
          {
            "text": "        for player_info in player_identifiers:",
            "lineNumber": 2106
          },
          {
            "text": "            player_name = player_info['player_name']",
            "lineNumber": 2107
          },
          {
            "text": "            columns.append(",
            "lineNumber": 2108
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 2109
          },
          {
            "text": "                    title=player_name,",
            "lineNumber": 2110
          },
          {
            "text": "                    columns=[",
            "lineNumber": 2111
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"pins\"), field=f\"{player_info['identifier']}_score\", width=\"80px\", align=\"center\", sortable=False),",
            "lineNumber": 2112
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=f\"{player_info['identifier']}_points\", width=\"50px\", align=\"center\", sortable=False),",
            "lineNumber": 2113
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=f\"{player_info['identifier']}_pos\", width=\"50px\", align=\"center\", sortable=False),",
            "lineNumber": 2114
          },
          {
            "text": "                        ",
            "lineNumber": 2115
          },
          {
            "text": "                    ]",
            "lineNumber": 2116
          },
          {
            "text": "                )",
            "lineNumber": 2117
          },
          {
            "text": "            )",
            "lineNumber": 2118
          },
          {
            "lineNumber": 2119
          },
          {
            "text": "        # Build data rows (one per round)",
            "lineNumber": 2120
          },
          {
            "text": "        data = []",
            "lineNumber": 2121
          },
          {
            "text": "        row_metadata = []",
            "lineNumber": 2122
          },
          {
            "text": "        for rnd in rounds:",
            "lineNumber": 2123
          },
          {
            "text": "            row = []",
            "lineNumber": 2124
          },
          {
            "text": "            # Opponent name for this round",
            "lineNumber": 2125
          },
          {
            "text": "            round_data",
            "lineNumber": 2126
          }
        ]
      },
      "score": 0.2851642370223999
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\league-standings-card-utils.js",
        "range": {
          "startPosition": {
            "line": 72,
            "column": 1
          },
          "endPosition": {
            "line": 128,
            "column": 3
          }
        },
        "contents": "/**\n * Render league standings table\n * @param {string} tableId - ID of the container element\n * @param {Object} standingsData - TableData object from backend\n * @param {Object} options - Additional options\n */\nfunction renderLeagueStandingsTable(tableId, standingsData, options = {}) {\n    const container = document.getElementById(tableId);\n    if (!container) {\n        console.error(&#96;Container ${tableId} not found&#96;);\n        return;\n    }\n    \n    if (!standingsData) {\n        container.innerHTML = &#96;\n            &lt;div class=\"alert alert-warning\"&gt;\n                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'No data available') : 'No data available'}&lt;/p&gt;\n            &lt;/div&gt;\n        &#96;;\n        return;\n    }\n    \n    // Use Tabulator for structured TableData\n    if (typeof createTableTabulator === 'function') {\n        console.log(&#96;Creating Tabulator table ${tableId} with ${standingsData.data ? standingsData.data.length : 0} rows&#96;);\n        createTableTabulator(tableId, standingsData, { \n            disablePositionCircle: false, // Show position circles for league standings\n            enableSpecialRowStyling: true,\n            tooltips: true,\n            disableTeamColorUpdate: true, // Disable automatic team color update (handled manually for multiple tables)\n            ...options\n        });\n    } else if (typeof createTableBootstrap3 === 'function') {\n        console.log(&#96;Fallback: Using createTableBootstrap3 for ${tableId}&#96;);\n        createTableBootstrap3(tableId, standingsData, {\n            disablePositionCircle: false,\n            enableSpecialRowStyling: true,\n            compact: true,\n            ...options\n        });\n    } else {\n        console.error('No table creation function available');\n        container.innerHTML = &#96;\n            &lt;div class=\"alert alert-warning\"&gt;\n                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'Table creation function not available') : 'Table creation function not available'}&lt;/p&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n}\n\n/**\n * Populate honor scores sections\n * @param {Object} honorScoresData - Honor scores data from backend\n * @param {string} prefix - Prefix for element IDs (optional, for multiple leagues)\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 75
          },
          {
            "text": " * Render league standings table",
            "lineNumber": 76
          },
          {
            "text": " * @param {string} tableId - ID of the container element",
            "lineNumber": 77
          },
          {
            "text": " * @param {Object} standingsData - TableData object from backend",
            "lineNumber": 78
          },
          {
            "text": " * @param {Object} options - Additional options",
            "lineNumber": 79
          },
          {
            "text": " */",
            "lineNumber": 80
          },
          {
            "text": "function renderLeagueStandingsTable(tableId, standingsData, options = {}) {",
            "lineNumber": 81,
            "isSignature": true
          },
          {
            "text": "    const container = document.getElementById(tableId);",
            "lineNumber": 82
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 83
          },
          {
            "text": "        console.error(&#96;Container ${tableId} not found&#96;);",
            "lineNumber": 84
          },
          {
            "text": "        return;",
            "lineNumber": 85
          },
          {
            "text": "    }",
            "lineNumber": 86
          },
          {
            "text": "    ",
            "lineNumber": 87
          },
          {
            "text": "    if (!standingsData) {",
            "lineNumber": 88
          },
          {
            "text": "        container.innerHTML = &#96;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;div class=\"alert alert-warning\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'No data available') : 'No data available'}&lt;/p&gt;",
            "lineNumber": 91
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "        &#96;;",
            "lineNumber": 93
          },
          {
            "text": "        return;",
            "lineNumber": 94
          },
          {
            "text": "    }",
            "lineNumber": 95
          },
          {
            "text": "    ",
            "lineNumber": 96
          },
          {
            "text": "    // Use Tabulator for structured TableData",
            "lineNumber": 97
          },
          {
            "text": "    if (typeof createTableTabulator === 'function') {",
            "lineNumber": 98
          },
          {
            "text": "        console.log(&#96;Creating Tabulator table ${tableId} with ${standingsData.data ? standingsData.data.length : 0} rows&#96;);",
            "lineNumber": 99
          },
          {
            "text": "        createTableTabulator(tableId, standingsData, { ",
            "lineNumber": 100
          },
          {
            "text": "            disablePositionCircle: false, // Show position circles for league standings",
            "lineNumber": 101
          },
          {
            "text": "            enableSpecialRowStyling: true,",
            "lineNumber": 102
          },
          {
            "text": "            tooltips: true,",
            "lineNumber": 103
          },
          {
            "text": "            disableTeamColorUpdate: true, // Disable automatic team color update (handled manually for multiple tables)",
            "lineNumber": 104
          },
          {
            "text": "            ...options",
            "lineNumber": 105
          },
          {
            "text": "        });",
            "lineNumber": 106
          },
          {
            "text": "    } else if (typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 107
          },
          {
            "text": "        console.log(&#96;Fallback: Using createTableBootstrap3 for ${tableId}&#96;);",
            "lineNumber": 108
          },
          {
            "text": "        createTableBootstrap3(tableId, standingsData, {",
            "lineNumber": 109
          },
          {
            "text": "            disablePositionCircle: false,",
            "lineNumber": 110
          },
          {
            "text": "            enableSpecialRowStyling: true,",
            "lineNumber": 111
          },
          {
            "text": "            compact: true,",
            "lineNumber": 112
          },
          {
            "text": "            ...options",
            "lineNumber": 113
          },
          {
            "text": "        });",
            "lineNumber": 114
          },
          {
            "text": "    } else {",
            "lineNumber": 115
          },
          {
            "text": "        console.error('No table creation function available');",
            "lineNumber": 116
          },
          {
            "text": "        container.innerHTML = &#96;",
            "lineNumber": 117
          },
          {
            "text": "            &lt;div class=\"alert alert-warning\"&gt;",
            "lineNumber": 118
          },
          {
            "text": "                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'Table creation function not available') : 'Table creation function not available'}&lt;/p&gt;",
            "lineNumber": 119
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "        &#96;;",
            "lineNumber": 121
          },
          {
            "text": "    }",
            "lineNumber": 122
          },
          {
            "text": "}",
            "lineNumber": 123,
            "isSignature": true
          },
          {
            "lineNumber": 124
          },
          {
            "text": "/**",
            "lineNumber": 125
          },
          {
            "text": " * Populate honor scores sections",
            "lineNumber": 126
          },
          {
            "text": " * @param {Object} honorScoresData - Honor scores data from backend",
            "lineNumber": 127
          },
          {
            "text": " * @param {string} prefix - Prefix for element IDs (optional, for multiple leagues)",
            "lineNumber": 128
          },
          {
            "text": " */",
            "lineNumber": 129
          }
        ]
      },
      "score": 0.284813791513443
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\services\\league_service.py",
        "range": {
          "startPosition": {
            "line": 24
          },
          "endPosition": {
            "line": 3862
          }
        },
        "contents": "class LeagueService:\ndef get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:\n\n\n            # Helper to build player col group\n            def player_col_group(player, prefix):\n                return ColumnGroup(\n                    title=player,\n                        columns=[\n                        Column(title=i18n_service.get_text(\"position\"), field=f\"{prefix}{player}_pos\", width=\"50px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"score\"), field=f\"{prefix}{player}_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=f\"{prefix}{player}_points\", width=\"60px\", align=\"center\"),\n                    ]\n                )\n\n            # Add own team player columns\n            for player in own_players:\n                columns.append(player_col_group(player, \"own_\"))\n            # Add opponent player columns\n            for player in opp_players:\n                columns.append(player_col_group(player, \"opp_\"))\n\n            # Add team column group\n            columns.append(\n                ColumnGroup(\n                    title=i18n_service.get_text(\"team\"),\n                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},\n                    header_style={\"fontWeight\": \"bold\"},\n                    columns=[\n                        Column(title=i18n_service.get_text(\"score\"), field=\"team_score\", width=\"80px\", align=\"center\"),\n                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")\n                    ]\n                )\n            )\n            \n            # --- Build data rows ---\n            if",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 25,
                "column": 1
              },
              "endPosition": {
                "line": 26,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 1792,
                "column": 5
              },
              "endPosition": {
                "line": 1793,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class LeagueService:",
            "lineNumber": 25,
            "isSignature": true
          },
          {
            "text": "def get_team_week_head_to_head_table_data(self, league: str, season: str, team: str, week: int, view_mode: str = 'own_team') -&gt; TableData:",
            "lineNumber": 1792
          },
          {
            "lineNumber": 1857
          },
          {
            "lineNumber": 1858
          },
          {
            "text": "            # Helper to build player col group",
            "lineNumber": 1859
          },
          {
            "text": "            def player_col_group(player, prefix):",
            "lineNumber": 1860
          },
          {
            "text": "                return ColumnGroup(",
            "lineNumber": 1861
          },
          {
            "text": "                    title=player,",
            "lineNumber": 1862
          },
          {
            "text": "                        columns=[",
            "lineNumber": 1863
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"position\"), field=f\"{prefix}{player}_pos\", width=\"50px\", align=\"center\"),",
            "lineNumber": 1864
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=f\"{prefix}{player}_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 1865
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=f\"{prefix}{player}_points\", width=\"60px\", align=\"center\"),",
            "lineNumber": 1866
          },
          {
            "text": "                    ]",
            "lineNumber": 1867
          },
          {
            "text": "                )",
            "lineNumber": 1868
          },
          {
            "lineNumber": 1869
          },
          {
            "text": "            # Add own team player columns",
            "lineNumber": 1870
          },
          {
            "text": "            for player in own_players:",
            "lineNumber": 1871
          },
          {
            "text": "                columns.append(player_col_group(player, \"own_\"))",
            "lineNumber": 1872
          },
          {
            "text": "            # Add opponent player columns",
            "lineNumber": 1873
          },
          {
            "text": "            for player in opp_players:",
            "lineNumber": 1874
          },
          {
            "text": "                columns.append(player_col_group(player, \"opp_\"))",
            "lineNumber": 1875
          },
          {
            "lineNumber": 1876
          },
          {
            "text": "            # Add team column group",
            "lineNumber": 1877
          },
          {
            "text": "            columns.append(",
            "lineNumber": 1878
          },
          {
            "text": "                ColumnGroup(",
            "lineNumber": 1879
          },
          {
            "text": "                    title=i18n_service.get_text(\"team\"),",
            "lineNumber": 1880
          },
          {
            "text": "                    style={\"backgroundColor\": get_theme_color(\"surface_alt\")},",
            "lineNumber": 1881
          },
          {
            "text": "                    header_style={\"fontWeight\": \"bold\"},",
            "lineNumber": 1882
          },
          {
            "text": "                    columns=[",
            "lineNumber": 1883
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"score\"), field=\"team_score\", width=\"80px\", align=\"center\"),",
            "lineNumber": 1884
          },
          {
            "text": "                        Column(title=i18n_service.get_text(\"points\"), field=\"team_points\", width=\"80px\", align=\"center\")",
            "lineNumber": 1885
          },
          {
            "text": "                    ]",
            "lineNumber": 1886
          },
          {
            "text": "                )",
            "lineNumber": 1887
          },
          {
            "text": "            )",
            "lineNumber": 1888
          },
          {
            "text": "            ",
            "lineNumber": 1889
          },
          {
            "text": "            # --- Build data rows ---",
            "lineNumber": 1890
          },
          {
            "text": "            if",
            "lineNumber": 1891
          }
        ]
      },
      "score": 0.2832356095314026
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---


Checking how the player initials column is handled and why the colored circles aren't showing:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "player_initials|player_name",
  "path": "app/templates/components/tables.html",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "player_initials|player_name",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


The issue: `disablePositionCircle: true` is set, but no manual formatter is provided. Removing debug statements and adding a custom formatter for the `player_initials` column that uses player colors.


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/routes/league_routes.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getPlayerColor|playerColorMap",
  "path": "app/static/js/theme/color-utils.js",
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getPlayerColor|playerColorMap",
    "path": "app/static/js/theme/color-utils.js",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\static\\js\\theme\\color-utils.js",
              "matches": [
                {
                  "lineNumber": 283,
                  "content": "        // Also check playerColorMap as fallback (for player names in charts)"
                },
                {
                  "lineNumber": 284,
                  "content": "        if (teamName &amp;&amp; playerColorMap[teamName]) {"
                },
                {
                  "lineNumber": 285,
                  "content": "            return playerColorMap[teamName];"
                },
                {
                  "lineNumber": 286,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 287,
                  "content": "        return getPaletteColor(fallbackIndex);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 288,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 289,
                  "isContextLine": true
                },
                {
                  "lineNumber": 290,
                  "content": "    // Player name color map (similar to team color map but for player names)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 291,
                  "content": "    const playerColorMap = globalObj.playerColorMap || {};"
                },
                {
                  "lineNumber": 292,
                  "isContextLine": true
                },
                {
                  "lineNumber": 293,
                  "content": "    function updatePlayerColorMap(currentPlayers = []) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 294,
                  "content": "        if (!Array.isArray(currentPlayers)) return;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 295,
                  "isContextLine": true
                },
                {
                  "lineNumber": 296,
                  "content": "        Object.keys(playerColorMap).forEach(player =&gt; {"
                },
                {
                  "lineNumber": 297,
                  "content": "            if (!currentPlayers.includes(player)) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 298,
                  "content": "                delete playerColorMap[player];"
                },
                {
                  "lineNumber": 299,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 300,
                  "content": "        });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 301,
                  "isContextLine": true
                },
                {
                  "lineNumber": 302,
                  "content": "        let paletteIdx = 0;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 303,
                  "content": "        currentPlayers.forEach(player =&gt; {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 304,
                  "content": "            if (!playerColorMap[player]) {"
                },
                {
                  "lineNumber": 305,
                  "content": "                playerColorMap[player] = getPaletteColor(paletteIdx++);"
                },
                {
                  "lineNumber": 306,
                  "content": "            }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 307,
                  "content": "        });",
                  "isContextLine": true
                },
                {
                  "lineNumber": 308,
                  "content": "    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 309,
                  "isContextLine": true
                },
                {
                  "lineNumber": 310,
                  "content": "    function getPlayerColor(playerName, fallbackIndex = 0) {"
                },
                {
                  "lineNumber": 311,
                  "content": "        if (playerName &amp;&amp; playerColorMap[playerName]) {"
                },
                {
                  "lineNumber": 312,
                  "content": "            return playerColorMap[playerName];"
                },
                {
                  "lineNumber": 313,
                  "content": "        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 314,
                  "content": "        // If not in map, assign a color based on hash of name for consistency",
                  "isContextLine": true
                },
                {
                  "lineNumber": 315,
                  "content": "        if (playerName) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 316,
                  "content": "            let hash = 0;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 317,
                  "content": "            for (let i = 0; i &lt; playerName.length; i++) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 456,
                  "content": "        getPlayerColor,"
                },
                {
                  "lineNumber": 457,
                  "content": "        getGradientColors,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 458,
                  "content": "        getStripeColors,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 459,
                  "content": "        getHeatMapColor,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 460,
                  "content": "        hexToRgb,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 461,
                  "content": "        toRgba,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 463,
                  "content": "        playerColorMap,"
                },
                {
                  "lineNumber": 464,
                  "content": "        assignGroupStripeCss,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 465,
                  "content": "        generateStripeCss,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 466,
                  "content": "        injectStripeCss,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 467,
                  "content": "        isDarkMode,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 468,
                  "content": "        setDarkMode,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 475,
                  "content": "    globalObj.playerColorMap = playerColorMap;"
                },
                {
                  "lineNumber": 476,
                  "content": "    globalObj.getTeamColor = getTeamColor;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 477,
                  "content": "    globalObj.getPlayerColor = getPlayerColor;"
                },
                {
                  "lineNumber": 478,
                  "content": "    globalObj.updateTeamColorMap = updateTeamColorMap;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 479,
                  "content": "    globalObj.updatePlayerColorMap = updatePlayerColorMap;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 480,
                  "content": "})();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 481,
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 54,
          "totalMatchedLines": 15
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---


Removing debug statements and adding a formatter for the `player_initials` column that uses player colors:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "6de9b5c3-9a14-4018-ada7-5e5fc32bbbf6"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/services/league_service.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "DEBUG.*get_team_win_percentage",
  "path": "app/services/league_service.py",
  "contextAfter": 10,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "DEBUG.*get_team_win_percentage",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 3293,
                  "content": "            print(f\"DEBUG get_team_win_percentage_table_data: columns count={len(columns)}, data count={len(table_data)}\")"
                },
                {
                  "lineNumber": 3294,
                  "content": "            if columns:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3295,
                  "content": "                print(f\"DEBUG: First column group type={type(columns[0])}, title={getattr(columns[0], 'title', 'N/A')}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3296,
                  "content": "                print(f\"DEBUG: First column group has columns attr: {hasattr(columns[0], 'columns')}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3297,
                  "content": "                if hasattr(columns[0], 'columns'):",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3298,
                  "content": "                    print(f\"DEBUG: First column group.columns count: {len(columns[0].columns)}\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3299,
                  "content": "            else:",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3300,
                  "content": "                print(\"ERROR: columns list is empty!\")",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3301,
                  "isContextLine": true
                },
                {
                  "lineNumber": 3302,
                  "content": "            # Ensure we have at least some columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3303,
                  "content": "            if not columns:",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 11,
          "totalMatchedLines": 1
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---





---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/services/league_service.py"
}
```
Additional data:

```json
{
  "codeblockId": "abbdd53a-377b-4d74-9309-93f1dcbabcc4"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/routes/league_routes.py"
}
```
Additional data:

```json
{
  "codeblockId": "51d5417c-9a6c-444c-83f2-e0a062c8b1e4"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/routes/league_routes.py"
}
```
Additional data:

```json
{
  "codeblockId": "efee4101-be0f-4f0d-8758-04f0f8c69bc4"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-performance-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "709256bf-b856-44b7-9694-e2f5e8193e06"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/static/js/content-blocks/team-win-percentage-block.js"
}
```
Additional data:

```json
{
  "codeblockId": "d9cadc1c-a4a6-43bb-b10e-a020247931c1"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---



---


Adding special handling for the `player_initials` field in the formatter:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "e656e9ec-2e2c-4113-8223-283aada4070c"
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-win-percentage-block.js</summary>

</details>
</tool-use>

---



---


Removed debug statements and added handling for the `player_initials` column. The formatter now:

1. Checks if the field is `player_initials`
2. Gets the `player_name` from the same row
3. Uses `getTeamColor()` (which falls back to `playerColorMap` for player names) to get the color
4. Returns the colored circle HTML with the initial

This should display colored circles with player initials in both tables. The colors will match those used in the charts since they use the same `playerColorMap`.

Removed all debug `print` statements from:
- `app/services/league_service.py` (both `get_team_performance_table_data` and `get_team_win_percentage_table_data`)
- `app/routes/league_routes.py` (both routes)

Removed all debug `console.log` statements from:
- `app/static/js/content-blocks/team-performance-block.js`
- `app/static/js/content-blocks/team-win-percentage-block.js`

The colored circles should now appear in the first column of both tables, using the same colors as the charts.

---

_**User (2025-12-09 14:40Z)**_

EXCEPT THEY DONT

---

_**Agent (model default, mode Agent)**_



---

Investigating why the colored circles aren't appearing. Checking the formatter logic:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "disablePositionCircle",
  "path": "app/templates/components/tables.html",
  "contextBefore": 5,
  "contextAfter": 5,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "disablePositionCircle",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 160,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 161,
                  "isContextLine": true
                },
                {
                  "lineNumber": 162,
                  "content": "function createTableTabulator(tableId, data, options = {}) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 163,
                  "isContextLine": true
                },
                {
                  "lineNumber": 164,
                  "content": "    const settings = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 165,
                  "content": "        disablePositionCircle: false,"
                },
                {
                  "lineNumber": 166,
                  "content": "        enableSpecialRowStyling: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 167,
                  "content": "        tooltips: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 168,
                  "content": "        teamField: null,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 169,
                  "content": "        ...options",
                  "isContextLine": true
                },
                {
                  "lineNumber": 170,
                  "content": "    };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 319,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 320,
                  "isContextLine": true
                },
                {
                  "lineNumber": 321,
                  "content": "                    // Special handling for position columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 322,
                  "content": "                    // Check if this is a position column by field name or by position (first column of first group)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 323,
                  "content": "                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' ||",
                  "isContextLine": true
                },
                {
                  "lineNumber": 324,
                  "content": "                                            (!settings.disablePositionCircle &amp;&amp; groupIndex === 0 &amp;&amp; columnIndex === 0);"
                },
                {
                  "lineNumber": 325,
                  "isContextLine": true
                },
                {
                  "lineNumber": 326,
                  "content": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {"
                },
                {
                  "lineNumber": 327,
                  "content": "                        let teamName = null;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 328,
                  "content": "                        if (field === 'team_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 329,
                  "content": "                            // For team position, use team name from the same row",
                  "isContextLine": true
                },
                {
                  "lineNumber": 330,
                  "content": "                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 331,
                  "content": "                        } else if (field === 'opponent_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 512,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 513,
                  "isContextLine": true
                },
                {
                  "lineNumber": 514,
                  "content": "                    // Special handling for position columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 515,
                  "content": "                    // Check if this is a position column by field name or by position (first column of first group)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 516,
                  "content": "                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' ||",
                  "isContextLine": true
                },
                {
                  "lineNumber": 517,
                  "content": "                                            (!settings.disablePositionCircle &amp;&amp; columnInfo.groupIndex === 0 &amp;&amp; columnInfo.columnIndex === 0);"
                },
                {
                  "lineNumber": 518,
                  "isContextLine": true
                },
                {
                  "lineNumber": 519,
                  "content": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {"
                },
                {
                  "lineNumber": 520,
                  "content": "                        let teamName = null;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 521,
                  "content": "                        if (field === 'team_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 522,
                  "content": "                            // For team position, use team name from the same row",
                  "isContextLine": true
                },
                {
                  "lineNumber": 523,
                  "content": "                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 524,
                  "content": "                        } else if (field === 'opponent_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1147,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1148,
                  "content": "    // Get table configuration",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1149,
                  "content": "    const config = data.config || {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1150,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1151,
                  "content": "    // Get options with defaults",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1152,
                  "content": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;"
                },
                {
                  "lineNumber": 1153,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1154,
                  "content": "    // Initialize team colors if this is a table with team data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1155,
                  "content": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1156,
                  "content": "        // Extract team names from the data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1157,
                  "content": "        // For most tables, team name is in the second column (row[1])",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1658,
                  "content": "                                    &lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1659,
                  "content": "                                    td2.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1660,
                  "content": "                                        &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color2}; margin-right: 8px;\"&gt;&lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1661,
                  "content": "                                        &lt;span&gt;${teamName2}&lt;/span&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1662,
                  "content": "                                    &lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1663,
                  "content": "                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {"
                },
                {
                  "lineNumber": 1664,
                  "content": "                                    // Handle position circle for first column of first group - regular tables",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1665,
                  "content": "                                    const color1 = getTeamColor(row1.rowData[1]);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1666,
                  "content": "                                    const color2 = getTeamColor(row2.rowData[1]);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1667,
                  "content": "                                    td1.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color1}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value1}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1668,
                  "content": "                                    td2.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color2}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value2}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1806,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1807,
                  "content": "                            td.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1808,
                  "content": "                                &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color}; margin-right: 8px;\"&gt;&lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1809,
                  "content": "                                &lt;span&gt;${teamName}&lt;/span&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1810,
                  "content": "                            &lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1811,
                  "content": "                        } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {"
                },
                {
                  "lineNumber": 1812,
                  "content": "                            // Special handling for position column (first column of first group) - regular tables",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1813,
                  "content": "                            // Use the position value (not team name) for the circle",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1814,
                  "content": "                            const color = getTeamColor(rowData[1]); // Still use team name for color",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1815,
                  "content": "                            td.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1816,
                  "content": "                        } else {",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 160,
                  "content": "}",
                  "isContextLine": true
                },
                {
                  "lineNumber": 161,
                  "isContextLine": true
                },
                {
                  "lineNumber": 162,
                  "content": "function createTableTabulator(tableId, data, options = {}) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 163,
                  "isContextLine": true
                },
                {
                  "lineNumber": 164,
                  "content": "    const settings = {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 165,
                  "content": "        disablePositionCircle: false,"
                },
                {
                  "lineNumber": 166,
                  "content": "        enableSpecialRowStyling: false,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 167,
                  "content": "        tooltips: true,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 168,
                  "content": "        teamField: null,",
                  "isContextLine": true
                },
                {
                  "lineNumber": 169,
                  "content": "        ...options",
                  "isContextLine": true
                },
                {
                  "lineNumber": 170,
                  "content": "    };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 319,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 320,
                  "isContextLine": true
                },
                {
                  "lineNumber": 321,
                  "content": "                    // Special handling for position columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 322,
                  "content": "                    // Check if this is a position column by field name or by position (first column of first group)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 323,
                  "content": "                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' ||",
                  "isContextLine": true
                },
                {
                  "lineNumber": 324,
                  "content": "                                            (!settings.disablePositionCircle &amp;&amp; groupIndex === 0 &amp;&amp; columnIndex === 0);"
                },
                {
                  "lineNumber": 325,
                  "isContextLine": true
                },
                {
                  "lineNumber": 326,
                  "content": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {"
                },
                {
                  "lineNumber": 327,
                  "content": "                        let teamName = null;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 328,
                  "content": "                        if (field === 'team_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 329,
                  "content": "                            // For team position, use team name from the same row",
                  "isContextLine": true
                },
                {
                  "lineNumber": 330,
                  "content": "                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 331,
                  "content": "                        } else if (field === 'opponent_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 512,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 513,
                  "isContextLine": true
                },
                {
                  "lineNumber": 514,
                  "content": "                    // Special handling for position columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 515,
                  "content": "                    // Check if this is a position column by field name or by position (first column of first group)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 516,
                  "content": "                    const isPositionColumn = field === 'team_position' || field === 'opponent_position' ||",
                  "isContextLine": true
                },
                {
                  "lineNumber": 517,
                  "content": "                                            (!settings.disablePositionCircle &amp;&amp; columnInfo.groupIndex === 0 &amp;&amp; columnInfo.columnIndex === 0);"
                },
                {
                  "lineNumber": 518,
                  "isContextLine": true
                },
                {
                  "lineNumber": 519,
                  "content": "                    if (isPositionColumn &amp;&amp; !settings.disablePositionCircle) {"
                },
                {
                  "lineNumber": 520,
                  "content": "                        let teamName = null;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 521,
                  "content": "                        if (field === 'team_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 522,
                  "content": "                            // For team position, use team name from the same row",
                  "isContextLine": true
                },
                {
                  "lineNumber": 523,
                  "content": "                            teamName = rowData['team_name'] || (teamField ? rowData[teamField] : null);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 524,
                  "content": "                        } else if (field === 'opponent_position') {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1147,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1148,
                  "content": "    // Get table configuration",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1149,
                  "content": "    const config = data.config || {};",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1150,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1151,
                  "content": "    // Get options with defaults",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1152,
                  "content": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;"
                },
                {
                  "lineNumber": 1153,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1154,
                  "content": "    // Initialize team colors if this is a table with team data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1155,
                  "content": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1156,
                  "content": "        // Extract team names from the data",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1157,
                  "content": "        // For most tables, team name is in the second column (row[1])",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1658,
                  "content": "                                    &lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1659,
                  "content": "                                    td2.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1660,
                  "content": "                                        &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color2}; margin-right: 8px;\"&gt;&lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1661,
                  "content": "                                        &lt;span&gt;${teamName2}&lt;/span&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1662,
                  "content": "                                    &lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1663,
                  "content": "                                } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {"
                },
                {
                  "lineNumber": 1664,
                  "content": "                                    // Handle position circle for first column of first group - regular tables",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1665,
                  "content": "                                    const color1 = getTeamColor(row1.rowData[1]);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1666,
                  "content": "                                    const color2 = getTeamColor(row2.rowData[1]);",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1667,
                  "content": "                                    td1.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color1}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value1}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1668,
                  "content": "                                    td2.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color2}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value2}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1806,
                  "isContextLine": true
                },
                {
                  "lineNumber": 1807,
                  "content": "                            td.innerHTML = &#96;&lt;div style=\"display: flex; align-items: center;\"&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1808,
                  "content": "                                &lt;div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${color}; margin-right: 8px;\"&gt;&lt;/div&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1809,
                  "content": "                                &lt;span&gt;${teamName}&lt;/span&gt;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1810,
                  "content": "                            &lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1811,
                  "content": "                        } else if (groupIndex === 0 &amp;&amp; index === 0 &amp;&amp; !disablePositionCircle) {"
                },
                {
                  "lineNumber": 1812,
                  "content": "                            // Special handling for position column (first column of first group) - regular tables",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1813,
                  "content": "                            // Use the position value (not team name) for the circle",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1814,
                  "content": "                            const color = getTeamColor(rowData[1]); // Still use team name for color",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1815,
                  "content": "                            td.innerHTML = &#96;&lt;div style=\"width: 24px; height: 24px; border-radius: 50%; background-color: ${color}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin: 0 auto;\"&gt;${value}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1816,
                  "content": "                        } else {",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 140,
          "totalMatchedLines": 16
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking if the formatter runs and why the color isn't applied. Adding debug logs and verifying the color lookup:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getTeamColor|getPlayerColor",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getTeamColor|getPlayerColor",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 315,
                  "content": "                            // Use getTeamColor which falls back to playerColorMap"
                },
                {
                  "lineNumber": 316,
                  "content": "                            const color = getTeamColor(playerName);"
                },
                {
                  "lineNumber": 367,
                  "content": "                            const color = getTeamColor(normalizedTeamName);"
                }
              ]
            },
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 315,
                  "content": "                            // Use getTeamColor which falls back to playerColorMap"
                },
                {
                  "lineNumber": 316,
                  "content": "                            const color = getTeamColor(playerName);"
                }
              ]
            }
          ],
          "totalLines": 5,
          "totalMatchedLines": 5,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---



---

Checking how `getTeamColor` is accessed in this file and whether it's in scope:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "getTeamColor\\(|window\\.getTeamColor|ColorUtils\\.getTeamColor",
  "path": "app/templates/components/tables.html",
  "contextAfter": 2,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "getTeamColor\\(|window\\.getTeamColor|ColorUtils\\.getTeamColor",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 316,
                  "content": "                            const color = getTeamColor(playerName);"
                },
                {
                  "lineNumber": 317,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 318,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 367,
                  "content": "                            const color = getTeamColor(normalizedTeamName);"
                },
                {
                  "lineNumber": 368,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 369,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 565,
                  "content": "                            const color = getTeamColor(normalizedTeamName);"
                },
                {
                  "lineNumber": 566,
                  "content": "                            // Debug logging for opponent_position",
                  "isContextLine": true
                },
                {
                  "lineNumber": 567,
                  "content": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 965,
                  "content": "                const accentColor = getTeamColor(rowData[teamField]);"
                },
                {
                  "lineNumber": 966,
                  "content": "                if (accentColor) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 967,
                  "content": "                    const element = row.getElement();",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 316,
                  "content": "                            const color = getTeamColor(playerName);"
                },
                {
                  "lineNumber": 317,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 318,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 367,
                  "content": "                            const color = getTeamColor(normalizedTeamName);"
                },
                {
                  "lineNumber": 368,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 369,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 565,
                  "content": "                            const color = getTeamColor(normalizedTeamName);"
                },
                {
                  "lineNumber": 566,
                  "content": "                            // Debug logging for opponent_position",
                  "isContextLine": true
                },
                {
                  "lineNumber": 567,
                  "content": "                            if (field === 'opponent_position' &amp;&amp; rowIdx &lt; 3) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 965,
                  "content": "                const accentColor = getTeamColor(rowData[teamField]);"
                },
                {
                  "lineNumber": 966,
                  "content": "                if (accentColor) {",
                  "isContextLine": true
                },
                {
                  "lineNumber": 967,
                  "content": "                    const element = row.getElement();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 1647,
                  "content": "                                    if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1648,
                  "content": "                                        color1 = window.getTeamColor(teamName1);"
                }
              ]
            }
          ],
          "totalLines": 26,
          "totalMatchedLines": 10,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "^function getTeamColor|^const getTeamColor|^var getTeamColor|getTeamColor\\s*=",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "^function getTeamColor|^const getTeamColor|^var getTeamColor|getTeamColor\\s*=",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 1647,
                  "content": "                                    if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1801,
                  "content": "                            if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1980,
                  "content": "function getTeamColor(teamName) {"
                },
                {
                  "lineNumber": 1981,
                  "content": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {"
                }
              ]
            },
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 1647,
                  "content": "                                    if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1801,
                  "content": "                            if (typeof window.getTeamColor === 'function') {"
                },
                {
                  "lineNumber": 1980,
                  "content": "function getTeamColor(teamName) {"
                },
                {
                  "lineNumber": 1981,
                  "content": "    if (window.ColorUtils &amp;&amp; typeof window.ColorUtils.getTeamColor === 'function') {"
                }
              ]
            }
          ],
          "totalLines": 8,
          "totalMatchedLines": 8
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking the local `getTeamColor` function definition:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---



---

The function exists. Adding debugging and ensuring the player name is normalized. Updating the formatter to handle edge cases:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "582ab548-3fda-432a-adc6-5837f0f41ccf",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/theme/color-utils.js</summary>

</details>
</tool-use>

---



---

Updating the formatter to directly check `playerColorMap` and add a fallback:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "6366a9ce-a312-400c-9bff-98d78f8db4d9",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking if we need to trigger a table update after colors are set. Verifying the order of operations and whether the formatter needs to be re-evaluated:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/static/js/content-blocks/team-performance-block.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "\\.redraw|\\.updateData|\\.refreshData",
  "path": "app/templates/components/tables.html",
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "\\.redraw|\\.updateData|\\.refreshData",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {}
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="semantic_search_full">
<details>
<summary>Tool use: **semantic_search_full**</summary>


Parameters:

```json
{
  "query": "How are Tabulator tables updated or redrawn after player colors are set?",
  "topK": 10,
  "explanation": ""
}
```
Result:

```json
{
  "codeResults": [
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 956
          },
          "endPosition": {
            "line": 987
          }
        },
        "contents": "                                    cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                                    cell.style.setProperty('color', 'inherit', 'important');\n                                }\n                        });\n                    });\n                }\n            }\n        },\n        rowFormatter: function(row) {\n            if (!settings.enableSpecialRowStyling) {\n                const element = row.getElement();\n                element.classList.remove('tab-row-accent');\n                element.style.removeProperty('--row-accent-color');\n                element.style.removeProperty('--row-accent-overlay');\n            }\n\n            const rowData = row.getData();\n            const styling = rowData?.__rowMeta?.styling;\n            if (styling) {\n                applyElementStyles(row.getElement(), styling);\n            }\n\n            if (teamField &amp;&amp; rowData[teamField]) {\n                const accentColor = getTeamColor(rowData[teamField]);\n                if (accentColor) {\n                    const element = row.getElement();\n                    element.classList.add('tab-row-accent');\n                    element.style.setProperty('--row-accent-color', accentColor);\n                    const overlay = ColorUtils.toRgba(accentColor, 0.12);\n                    if (overlay) {\n                        element.style.setProperty('--row-accent-overlay', overlay);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                    cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 957
          },
          {
            "text": "                                    cell.style.setProperty('color', 'inherit', 'important');",
            "lineNumber": 958
          },
          {
            "text": "                                }",
            "lineNumber": 959
          },
          {
            "text": "                        });",
            "lineNumber": 960
          },
          {
            "text": "                    });",
            "lineNumber": 961
          },
          {
            "text": "                }",
            "lineNumber": 962
          },
          {
            "text": "            }",
            "lineNumber": 963
          },
          {
            "text": "        },",
            "lineNumber": 964
          },
          {
            "text": "        rowFormatter: function(row) {",
            "lineNumber": 965
          },
          {
            "text": "            if (!settings.enableSpecialRowStyling) {",
            "lineNumber": 966
          },
          {
            "text": "                const element = row.getElement();",
            "lineNumber": 967
          },
          {
            "text": "                element.classList.remove('tab-row-accent');",
            "lineNumber": 968
          },
          {
            "text": "                element.style.removeProperty('--row-accent-color');",
            "lineNumber": 969
          },
          {
            "text": "                element.style.removeProperty('--row-accent-overlay');",
            "lineNumber": 970
          },
          {
            "text": "            }",
            "lineNumber": 971
          },
          {
            "lineNumber": 972
          },
          {
            "text": "            const rowData = row.getData();",
            "lineNumber": 973
          },
          {
            "text": "            const styling = rowData?.__rowMeta?.styling;",
            "lineNumber": 974
          },
          {
            "text": "            if (styling) {",
            "lineNumber": 975
          },
          {
            "text": "                applyElementStyles(row.getElement(), styling);",
            "lineNumber": 976
          },
          {
            "text": "            }",
            "lineNumber": 977
          },
          {
            "lineNumber": 978
          },
          {
            "text": "            if (teamField &amp;&amp; rowData[teamField]) {",
            "lineNumber": 979
          },
          {
            "text": "                const accentColor = getTeamColor(rowData[teamField]);",
            "lineNumber": 980
          },
          {
            "text": "                if (accentColor) {",
            "lineNumber": 981
          },
          {
            "text": "                    const element = row.getElement();",
            "lineNumber": 982
          },
          {
            "text": "                    element.classList.add('tab-row-accent');",
            "lineNumber": 983
          },
          {
            "text": "                    element.style.setProperty('--row-accent-color', accentColor);",
            "lineNumber": 984
          },
          {
            "text": "                    const overlay = ColorUtils.toRgba(accentColor, 0.12);",
            "lineNumber": 985
          },
          {
            "text": "                    if (overlay) {",
            "lineNumber": 986
          },
          {
            "text": "                        element.style.setProperty('--row-accent-overlay', overlay);",
            "lineNumber": 987
          }
        ]
      },
      "score": 0.39483198523521423
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 745
          },
          "endPosition": {
            "line": 783
          }
        },
        "contents": "                const opponentNameIndex = columnOrder.findIndex(ci =&gt; ci.field === 'opponent_name');\n                if (opponentNameIndex &gt;= 0) {\n                    const opponentTeams = data.data.map(row =&gt; row[opponentNameIndex]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n                    teams = [...teams, ...opponentTeams];\n                }\n            }\n            \n            // Remove duplicates\n            teams = [...new Set(teams)];\n            \n            if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {\n                window.updateTeamColorMap(teams);\n            }\n        }\n    }\n\n    const tabulatorOptions = {\n        data: transformedData,\n        columns: tabulatorColumns,\n        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",\n        responsiveLayout: false,\n        pagination: false,\n        movableColumns: false,\n        tooltips: tooltipOption,\n        height: \"auto\",\n        rowHeight: 40,\n        theme: \"semanticui\",\n        cssClass: \"custom-tabulator\",\n        columnHeaderVertAlign: \"middle\",\n        width: \"100%\", // Ensure table takes full width of container\n        ...(initialSort ? { initialSort: initialSort } : {}),\n        tableBuilt: function() {\n            try {\n                // Apply highlighting and fix header separator\n                // Use requestAnimationFrame for better timing\n                requestAnimationFrame(() =&gt; {\n                    requestAnimationFrame(() =&gt; {\n                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                const opponentNameIndex = columnOrder.findIndex(ci =&gt; ci.field === 'opponent_name');",
            "lineNumber": 746
          },
          {
            "text": "                if (opponentNameIndex &gt;= 0) {",
            "lineNumber": 747
          },
          {
            "text": "                    const opponentTeams = data.data.map(row =&gt; row[opponentNameIndex]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 748
          },
          {
            "text": "                    teams = [...teams, ...opponentTeams];",
            "lineNumber": 749
          },
          {
            "text": "                }",
            "lineNumber": 750
          },
          {
            "text": "            }",
            "lineNumber": 751
          },
          {
            "text": "            ",
            "lineNumber": 752
          },
          {
            "text": "            // Remove duplicates",
            "lineNumber": 753
          },
          {
            "text": "            teams = [...new Set(teams)];",
            "lineNumber": 754
          },
          {
            "text": "            ",
            "lineNumber": 755
          },
          {
            "text": "            if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
            "lineNumber": 756
          },
          {
            "text": "                window.updateTeamColorMap(teams);",
            "lineNumber": 757
          },
          {
            "text": "            }",
            "lineNumber": 758
          },
          {
            "text": "        }",
            "lineNumber": 759
          },
          {
            "text": "    }",
            "lineNumber": 760
          },
          {
            "lineNumber": 761
          },
          {
            "text": "    const tabulatorOptions = {",
            "lineNumber": 762
          },
          {
            "text": "        data: transformedData,",
            "lineNumber": 763
          },
          {
            "text": "        columns: tabulatorColumns,",
            "lineNumber": 764
          },
          {
            "text": "        layout: isCompactLayout ? \"fitData\" : \"fitColumns\",",
            "lineNumber": 765
          },
          {
            "text": "        responsiveLayout: false,",
            "lineNumber": 766
          },
          {
            "text": "        pagination: false,",
            "lineNumber": 767
          },
          {
            "text": "        movableColumns: false,",
            "lineNumber": 768
          },
          {
            "text": "        tooltips: tooltipOption,",
            "lineNumber": 769
          },
          {
            "text": "        height: \"auto\",",
            "lineNumber": 770
          },
          {
            "text": "        rowHeight: 40,",
            "lineNumber": 771
          },
          {
            "text": "        theme: \"semanticui\",",
            "lineNumber": 772
          },
          {
            "text": "        cssClass: \"custom-tabulator\",",
            "lineNumber": 773
          },
          {
            "text": "        columnHeaderVertAlign: \"middle\",",
            "lineNumber": 774
          },
          {
            "text": "        width: \"100%\", // Ensure table takes full width of container",
            "lineNumber": 775
          },
          {
            "text": "        ...(initialSort ? { initialSort: initialSort } : {}),",
            "lineNumber": 776
          },
          {
            "text": "        tableBuilt: function() {",
            "lineNumber": 777
          },
          {
            "text": "            try {",
            "lineNumber": 778
          },
          {
            "text": "                // Apply highlighting and fix header separator",
            "lineNumber": 779
          },
          {
            "text": "                // Use requestAnimationFrame for better timing",
            "lineNumber": 780
          },
          {
            "text": "                requestAnimationFrame(() =&gt; {",
            "lineNumber": 781
          },
          {
            "text": "                    requestAnimationFrame(() =&gt; {",
            "lineNumber": 782
          },
          {
            "text": "                    const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
            "lineNumber": 783
          }
        ]
      },
      "score": 0.3679111897945404
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 293
          },
          "endPosition": {
            "line": 321
          }
        },
        "contents": "                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles (heatmap colors) - apply with !important to override striping\n                    const cellMeta = cellMetadataMap[rowIdx]?.[field];\n                    if (cellMeta) {\n                        // Apply heatmap background color with !important to override striping CSS\n                        if (cellMeta.backgroundColor) {\n                            element.style.setProperty('background-color', cellMeta.backgroundColor, 'important');\n                        }\n                        // Apply other styles normally\n                        Object.entries(cellMeta).forEach(([property, value]) =&gt; {\n                            if (property !== 'backgroundColor' &amp;&amp; value !== undefined &amp;&amp; value !== null) {\n                                element.style[property] = value;\n                            }\n                        });\n                    }\n\n                    // Special handling for player_initials column (colored circle with player initial)\n                    if (field === 'player_initials') {\n                        const playerName = rowData['player_name'] || null;\n                        if (playerName &amp;&amp; value) {\n                            // Normalize player name (trim whitespace) to ensure it matches the color map\n                            const normalizedPlayerName = String(playerName).trim();\n                            // Try multiple sources for player color\n                            let color = null;\n                            // First try direct playerColorMap access\n                            if (window.ColorUtils &amp;&amp; window.ColorUtils.playerColorMap &amp;&amp; window.ColorUtils.playerColorMap[normalizedPlayerName]) {\n                                color = window.ColorUtils.playerColorMap[normalizedPlayerName];",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
            "lineNumber": 296
          },
          {
            "text": "                    const cellMeta = cellMetadataMap[rowIdx]?.[field];",
            "lineNumber": 297
          },
          {
            "text": "                    if (cellMeta) {",
            "lineNumber": 298
          },
          {
            "text": "                        // Apply heatmap background color with !important to override striping CSS",
            "lineNumber": 299
          },
          {
            "text": "                        if (cellMeta.backgroundColor) {",
            "lineNumber": 300
          },
          {
            "text": "                            element.style.setProperty('background-color', cellMeta.backgroundColor, 'important');",
            "lineNumber": 301
          },
          {
            "text": "                        }",
            "lineNumber": 302
          },
          {
            "text": "                        // Apply other styles normally",
            "lineNumber": 303
          },
          {
            "text": "                        Object.entries(cellMeta).forEach(([property, value]) =&gt; {",
            "lineNumber": 304
          },
          {
            "text": "                            if (property !== 'backgroundColor' &amp;&amp; value !== undefined &amp;&amp; value !== null) {",
            "lineNumber": 305
          },
          {
            "text": "                                element.style[property] = value;",
            "lineNumber": 306
          },
          {
            "text": "                            }",
            "lineNumber": 307
          },
          {
            "text": "                        });",
            "lineNumber": 308
          },
          {
            "text": "                    }",
            "lineNumber": 309
          },
          {
            "lineNumber": 310
          },
          {
            "text": "                    // Special handling for player_initials column (colored circle with player initial)",
            "lineNumber": 311
          },
          {
            "text": "                    if (field === 'player_initials') {",
            "lineNumber": 312
          },
          {
            "text": "                        const playerName = rowData['player_name'] || null;",
            "lineNumber": 313
          },
          {
            "text": "                        if (playerName &amp;&amp; value) {",
            "lineNumber": 314
          },
          {
            "text": "                            // Normalize player name (trim whitespace) to ensure it matches the color map",
            "lineNumber": 315
          },
          {
            "text": "                            const normalizedPlayerName = String(playerName).trim();",
            "lineNumber": 316
          },
          {
            "text": "                            // Try multiple sources for player color",
            "lineNumber": 317
          },
          {
            "text": "                            let color = null;",
            "lineNumber": 318
          },
          {
            "text": "                            // First try direct playerColorMap access",
            "lineNumber": 319
          },
          {
            "text": "                            if (window.ColorUtils &amp;&amp; window.ColorUtils.playerColorMap &amp;&amp; window.ColorUtils.playerColorMap[normalizedPlayerName]) {",
            "lineNumber": 320
          },
          {
            "text": "                                color = window.ColorUtils.playerColorMap[normalizedPlayerName];",
            "lineNumber": 321
          }
        ]
      },
      "score": 0.3575352132320404
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 54,
            "column": 8
          }
        },
        "contents": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;\n&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;\n\n&lt;script&gt;\nfunction createTable(config) {\n    const {\n        data,\n        columns,\n        headerGroups = [],  // This contains the actual colspan values\n        rowNumbering = true,\n        positionChange = false\n    } = config;\n\n    let currentData = [...data];\n\n    const colors = ColorUtils.getGradientColors(\n        headerGroups.length, \n        ColorUtils.getThemeColor('surface') || '#ffffff', \n        ColorUtils.getThemeColor('accent') || '#7ec2f8'\n    );\n\n    // Create mappings for column colors and last group columns\n    const columnColors = {};\n    const lastGroupColumns = {};\n    let currentColumn = 0;\n    headerGroups.forEach((group, groupIndex) =&gt; {\n        const isLastGroup = groupIndex === headerGroups.length - 1;\n        const colspan = group.colspan || 1;  // Get actual colspan from the group\n        for (let i = 0; i &lt; colspan; i++) {\n            columnColors[currentColumn] = colors[groupIndex];\n            lastGroupColumns[currentColumn] = isLastGroup;\n            currentColumn++;\n        }\n    });\n\n    const createHeaderGroups = () =&gt; {\n        if (!headerGroups || headerGroups.length === 0) return '';\n        \n        return &#96;\n            &lt;tr&gt;\n                ${headerGroups.map((group, index) =&gt; &#96;\n                    &lt;th class=\"text-center\" \n                        colspan=\"${group.colspan || 1}\" \n                        style=\"background-color: ${colors[index]}; \n                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;\n                        ${group.title || ''}\n                    &lt;/th&gt;\n                &#96;).join('')}\n            &lt;/tr&gt;\n        &#96;;\n    };\n\n    const createColumnHeaders = () =&gt; {\n        ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "&lt;link href=\"{{ static_url('vendor/tabulator/css/tabulator_semanticui.min.css') }}\" rel=\"stylesheet\"&gt;",
            "lineNumber": 1
          },
          {
            "text": "&lt;script src=\"{{ static_url('js/theme/color-utils.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 2
          },
          {
            "text": "&lt;script type=\"text/javascript\" src=\"{{ static_url('vendor/tabulator/js/tabulator.min.js') }}\"&gt;&lt;/script&gt;",
            "lineNumber": 3
          },
          {
            "lineNumber": 4
          },
          {
            "text": "&lt;script&gt;",
            "lineNumber": 5
          },
          {
            "text": "function createTable(config) {",
            "lineNumber": 6
          },
          {
            "text": "    const {",
            "lineNumber": 7
          },
          {
            "text": "        data,",
            "lineNumber": 8
          },
          {
            "text": "        columns,",
            "lineNumber": 9
          },
          {
            "text": "        headerGroups = [],  // This contains the actual colspan values",
            "lineNumber": 10
          },
          {
            "text": "        rowNumbering = true,",
            "lineNumber": 11
          },
          {
            "text": "        positionChange = false",
            "lineNumber": 12
          },
          {
            "text": "    } = config;",
            "lineNumber": 13
          },
          {
            "lineNumber": 14
          },
          {
            "text": "    let currentData = [...data];",
            "lineNumber": 15
          },
          {
            "lineNumber": 16
          },
          {
            "text": "    const colors = ColorUtils.getGradientColors(",
            "lineNumber": 17
          },
          {
            "text": "        headerGroups.length, ",
            "lineNumber": 18
          },
          {
            "text": "        ColorUtils.getThemeColor('surface') || '#ffffff', ",
            "lineNumber": 19
          },
          {
            "text": "        ColorUtils.getThemeColor('accent') || '#7ec2f8'",
            "lineNumber": 20
          },
          {
            "text": "    );",
            "lineNumber": 21
          },
          {
            "lineNumber": 22
          },
          {
            "text": "    // Create mappings for column colors and last group columns",
            "lineNumber": 23
          },
          {
            "text": "    const columnColors = {};",
            "lineNumber": 24
          },
          {
            "text": "    const lastGroupColumns = {};",
            "lineNumber": 25
          },
          {
            "text": "    let currentColumn = 0;",
            "lineNumber": 26
          },
          {
            "text": "    headerGroups.forEach((group, groupIndex) =&gt; {",
            "lineNumber": 27
          },
          {
            "text": "        const isLastGroup = groupIndex === headerGroups.length - 1;",
            "lineNumber": 28
          },
          {
            "text": "        const colspan = group.colspan || 1;  // Get actual colspan from the group",
            "lineNumber": 29
          },
          {
            "text": "        for (let i = 0; i &lt; colspan; i++) {",
            "lineNumber": 30
          },
          {
            "text": "            columnColors[currentColumn] = colors[groupIndex];",
            "lineNumber": 31
          },
          {
            "text": "            lastGroupColumns[currentColumn] = isLastGroup;",
            "lineNumber": 32
          },
          {
            "text": "            currentColumn++;",
            "lineNumber": 33
          },
          {
            "text": "        }",
            "lineNumber": 34
          },
          {
            "text": "    });",
            "lineNumber": 35
          },
          {
            "lineNumber": 36
          },
          {
            "text": "    const createHeaderGroups = () =&gt; {",
            "lineNumber": 37
          },
          {
            "text": "        if (!headerGroups || headerGroups.length === 0) return '';",
            "lineNumber": 38
          },
          {
            "text": "        ",
            "lineNumber": 39
          },
          {
            "text": "        return &#96;",
            "lineNumber": 40
          },
          {
            "text": "            &lt;tr&gt;",
            "lineNumber": 41
          },
          {
            "text": "                ${headerGroups.map((group, index) =&gt; &#96;",
            "lineNumber": 42
          },
          {
            "text": "                    &lt;th class=\"text-center\" ",
            "lineNumber": 43
          },
          {
            "text": "                        colspan=\"${group.colspan || 1}\" ",
            "lineNumber": 44
          },
          {
            "text": "                        style=\"background-color: ${colors[index]}; ",
            "lineNumber": 45
          },
          {
            "text": "                               color: ${index === headerGroups.length - 1 ? 'white' : 'black'};\"&gt;",
            "lineNumber": 46
          },
          {
            "text": "                        ${group.title || ''}",
            "lineNumber": 47
          },
          {
            "text": "                    &lt;/th&gt;",
            "lineNumber": 48
          },
          {
            "text": "                &#96;).join('')}",
            "lineNumber": 49
          },
          {
            "text": "            &lt;/tr&gt;",
            "lineNumber": 50
          },
          {
            "text": "        &#96;;",
            "lineNumber": 51
          },
          {
            "text": "    };",
            "lineNumber": 52
          },
          {
            "lineNumber": 53
          },
          {
            "text": "    const createColumnHeaders = () =&gt; {",
            "lineNumber": 54
          },
          {
            "text": "        ",
            "lineNumber": 55
          }
        ]
      },
      "score": 0.35697829723358154
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-performance-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 309,
            "column": 1
          }
        },
        "contents": "class TeamPerformanceBlock {\n\n\n    async loadPerformanceTable(state) {\n        const url = new URL('/league/get_team_performance_table', window.location.origin);\n        url.searchParams.append('league', state.league);\n        url.searchParams.append('season', state.season);\n        url.searchParams.append('team', state.team);\n        \n        const database = getCurrentDatabase();\n        if (database) {\n            url.searchParams.append('database', database);\n        }\n\n        try {\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(&#96;HTTP ${response.status}: ${response.statusText}&#96;);\n            }\n            \n            const tableData = await response.json();\n            \n            if (tableData.error) {\n                throw new Error(&#96;API Error: ${tableData.error}&#96;);\n            }\n\n            // Extract player names for color mapping (from data, excluding team average)\n            const teamAverageKey = &#96;${state.team} (Team Average)&#96;;\n            if (tableData.data &amp;&amp; Array.isArray(tableData.data)) {\n                const playerNames = tableData.data\n                    .map(row =&gt; row.player_name)\n                    .filter(name =&gt; name &amp;&amp; name !== teamAverageKey);\n                if (window.updatePlayerColorMap) {\n                    window.updatePlayerColorMap(playerNames);\n                }\n            }\n\n            // Pass directly to createTableTabulator (like timetable)\n            if (typeof createTableTabulator === 'function') {\n                createTableTabulator('team-performance-table', tableData, {\n                    disablePositionCircle: true, // We handle the circle manually\n                    enableSpecialRowStyling: true,\n                    disableTeamColorUpdate: true // We handle player colors manually\n                });\n            }\n        } catch (error) {\n            console.error('Error loading performance table:', error);\n        }\n    }\n\n    renderChart(data) {\n        const chartContainer = document.getElementById(this.chartContainerId);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class TeamPerformanceBlock {",
            "lineNumber": 1,
            "isSignature": true
          },
          {
            "lineNumber": 140
          },
          {
            "lineNumber": 141
          },
          {
            "text": "    async loadPerformanceTable(state) {",
            "lineNumber": 142,
            "isSignature": true
          },
          {
            "text": "        const url = new URL('/league/get_team_performance_table', window.location.origin);",
            "lineNumber": 143
          },
          {
            "text": "        url.searchParams.append('league', state.league);",
            "lineNumber": 144
          },
          {
            "text": "        url.searchParams.append('season', state.season);",
            "lineNumber": 145
          },
          {
            "text": "        url.searchParams.append('team', state.team);",
            "lineNumber": 146
          },
          {
            "text": "        ",
            "lineNumber": 147
          },
          {
            "text": "        const database = getCurrentDatabase();",
            "lineNumber": 148
          },
          {
            "text": "        if (database) {",
            "lineNumber": 149
          },
          {
            "text": "            url.searchParams.append('database', database);",
            "lineNumber": 150
          },
          {
            "text": "        }",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "        try {",
            "lineNumber": 153
          },
          {
            "text": "            const response = await fetch(url);",
            "lineNumber": 154
          },
          {
            "text": "            if (!response.ok) {",
            "lineNumber": 155
          },
          {
            "text": "                throw new Error(&#96;HTTP ${response.status}: ${response.statusText}&#96;);",
            "lineNumber": 156
          },
          {
            "text": "            }",
            "lineNumber": 157
          },
          {
            "text": "            ",
            "lineNumber": 158
          },
          {
            "text": "            const tableData = await response.json();",
            "lineNumber": 159
          },
          {
            "text": "            ",
            "lineNumber": 160
          },
          {
            "text": "            if (tableData.error) {",
            "lineNumber": 161
          },
          {
            "text": "                throw new Error(&#96;API Error: ${tableData.error}&#96;);",
            "lineNumber": 162
          },
          {
            "text": "            }",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "            // Extract player names for color mapping (from data, excluding team average)",
            "lineNumber": 165
          },
          {
            "text": "            const teamAverageKey = &#96;${state.team} (Team Average)&#96;;",
            "lineNumber": 166
          },
          {
            "text": "            if (tableData.data &amp;&amp; Array.isArray(tableData.data)) {",
            "lineNumber": 167
          },
          {
            "text": "                const playerNames = tableData.data",
            "lineNumber": 168
          },
          {
            "text": "                    .map(row =&gt; row.player_name)",
            "lineNumber": 169
          },
          {
            "text": "                    .filter(name =&gt; name &amp;&amp; name !== teamAverageKey);",
            "lineNumber": 170
          },
          {
            "text": "                if (window.updatePlayerColorMap) {",
            "lineNumber": 171
          },
          {
            "text": "                    window.updatePlayerColorMap(playerNames);",
            "lineNumber": 172
          },
          {
            "text": "                }",
            "lineNumber": 173
          },
          {
            "text": "            }",
            "lineNumber": 174
          },
          {
            "lineNumber": 175
          },
          {
            "text": "            // Pass directly to createTableTabulator (like timetable)",
            "lineNumber": 176
          },
          {
            "text": "            if (typeof createTableTabulator === 'function') {",
            "lineNumber": 177
          },
          {
            "text": "                createTableTabulator('team-performance-table', tableData, {",
            "lineNumber": 178
          },
          {
            "text": "                    disablePositionCircle: true, // We handle the circle manually",
            "lineNumber": 179
          },
          {
            "text": "                    enableSpecialRowStyling: true,",
            "lineNumber": 180
          },
          {
            "text": "                    disableTeamColorUpdate: true // We handle player colors manually",
            "lineNumber": 181
          },
          {
            "text": "                });",
            "lineNumber": 182
          },
          {
            "text": "            }",
            "lineNumber": 183
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 184
          },
          {
            "text": "            console.error('Error loading performance table:', error);",
            "lineNumber": 185
          },
          {
            "text": "        }",
            "lineNumber": 186
          },
          {
            "text": "    }",
            "lineNumber": 187,
            "isSignature": true
          },
          {
            "lineNumber": 188
          },
          {
            "text": "    renderChart(data) {",
            "lineNumber": 189,
            "isSignature": true
          },
          {
            "text": "        const chartContainer = document.getElementById(this.chartContainerId);",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 234,
            "isSignature": true
          }
        ]
      },
      "score": 0.35575830936431885
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 714,
            "column": 16
          },
          "endPosition": {
            "line": 747,
            "column": 20
          }
        },
        "contents": "} catch (e) {\n                    return '';\n                }\n            }\n            return String(value);\n        }\n        : false;\n\n    // Set up initial sort if specified\n    const initialSort = data.default_sort ? [\n        {\n            column: data.default_sort.field,\n            dir: data.default_sort.dir || \"desc\"  // Default to descending\n        }\n    ] : undefined;\n\n    // Extract teams from data and update team color map\n    // This ensures team colors are available when rendering tables on direct navigation\n    // Skip if disableTeamColorUpdate is set (e.g., when handling multiple tables manually)\n    if (!settings.disableTeamColorUpdate) {\n        let teams = [];\n        if (data.data &amp;&amp; data.data.length &gt; 0) {\n            // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)\n            if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix'))) {\n                teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n            } else {\n                // Standard tables with team names in second column (index 1)\n                teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n                \n                // For game overview tables, also extract opponent names (typically in last column)\n                // Check if we have an opponent_name field in columnOrder\n                const opponentNameIndex = columnOrder.findIndex(ci =&gt; ci.field === 'opponent_name');\n                if (opponentNameIndex &gt;= 0) {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "} catch (e) {",
            "lineNumber": 715
          },
          {
            "text": "                    return '';",
            "lineNumber": 716
          },
          {
            "text": "                }",
            "lineNumber": 717
          },
          {
            "text": "            }",
            "lineNumber": 718
          },
          {
            "text": "            return String(value);",
            "lineNumber": 719
          },
          {
            "text": "        }",
            "lineNumber": 720
          },
          {
            "text": "        : false;",
            "lineNumber": 721
          },
          {
            "lineNumber": 722
          },
          {
            "text": "    // Set up initial sort if specified",
            "lineNumber": 723
          },
          {
            "text": "    const initialSort = data.default_sort ? [",
            "lineNumber": 724
          },
          {
            "text": "        {",
            "lineNumber": 725
          },
          {
            "text": "            column: data.default_sort.field,",
            "lineNumber": 726
          },
          {
            "text": "            dir: data.default_sort.dir || \"desc\"  // Default to descending",
            "lineNumber": 727
          },
          {
            "text": "        }",
            "lineNumber": 728
          },
          {
            "text": "    ] : undefined;",
            "lineNumber": 729
          },
          {
            "lineNumber": 730
          },
          {
            "text": "    // Extract teams from data and update team color map",
            "lineNumber": 731
          },
          {
            "text": "    // This ensures team colors are available when rendering tables on direct navigation",
            "lineNumber": 732
          },
          {
            "text": "    // Skip if disableTeamColorUpdate is set (e.g., when handling multiple tables manually)",
            "lineNumber": 733
          },
          {
            "text": "    if (!settings.disableTeamColorUpdate) {",
            "lineNumber": 734
          },
          {
            "text": "        let teams = [];",
            "lineNumber": 735
          },
          {
            "text": "        if (data.data &amp;&amp; data.data.length &gt; 0) {",
            "lineNumber": 736
          },
          {
            "text": "            // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)",
            "lineNumber": 737
          },
          {
            "text": "            if (data.title &amp;&amp; (data.title.includes('Team vs Team Comparison') || data.title.includes('Team vs Team Vergleichsmatrix'))) {",
            "lineNumber": 738
          },
          {
            "text": "                teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 739
          },
          {
            "text": "            } else {",
            "lineNumber": 740
          },
          {
            "text": "                // Standard tables with team names in second column (index 1)",
            "lineNumber": 741
          },
          {
            "text": "                teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 742
          },
          {
            "text": "                ",
            "lineNumber": 743
          },
          {
            "text": "                // For game overview tables, also extract opponent names (typically in last column)",
            "lineNumber": 744
          },
          {
            "text": "                // Check if we have an opponent_name field in columnOrder",
            "lineNumber": 745
          },
          {
            "text": "                const opponentNameIndex = columnOrder.findIndex(ci =&gt; ci.field === 'opponent_name');",
            "lineNumber": 746
          },
          {
            "text": "                if (opponentNameIndex &gt;= 0) {",
            "lineNumber": 747
          },
          {
            "text": "                    ",
            "lineNumber": 748
          }
        ]
      },
      "score": 0.34694355726242065
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 159
          },
          "endPosition": {
            "line": 216
          }
        },
        "contents": "}\n\nfunction createTableTabulator(tableId, data, options = {}) {\n    \n    const settings = {\n        disablePositionCircle: false,\n        enableSpecialRowStyling: false,\n        tooltips: true,\n        teamField: null,\n        ...options\n    };\n    const tableConfig = data.config || {};\n    const isCompactLayout = tableConfig.compact === true;\n    const useStripedGroups = tableConfig.stripedColGroups === true;\n    // Highlighting style constants\n    const HIGHLIGHT_STYLES = {\n        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',\n        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',\n        headerFontWeight: '900',\n        cellFontWeight: '700'\n    };\n\n    if (!data || !data.columns || !data.data) {\n        console.error('Invalid data format for Tabulator table');\n        return;\n    }\n\n    const container = document.getElementById(tableId);\n    if (!container) {\n        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);\n        return;\n    }\n    \n    // Ensure container takes full width\n    if (container.style.width === '') {\n        container.style.width = '100%';\n    }\n\n    const columnOrder = flattenColumnMetadata(data.columns);\n    if (!columnOrder.length) {\n        console.warn('No column definitions available for Tabulator table');\n        const container = document.getElementById(tableId);\n        if (container) {\n            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';\n            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;\n        }\n        return;\n    }\n    const columnLookup = columnOrder.reduce((acc, info) =&gt; {\n        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;\n        return acc;\n    }, {});\n\n    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;\n    const teamField = settings.teamField || teamFieldGuess;\n\n    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "}",
            "lineNumber": 160
          },
          {
            "lineNumber": 161
          },
          {
            "text": "function createTableTabulator(tableId, data, options = {}) {",
            "lineNumber": 162
          },
          {
            "text": "    ",
            "lineNumber": 163
          },
          {
            "text": "    const settings = {",
            "lineNumber": 164
          },
          {
            "text": "        disablePositionCircle: false,",
            "lineNumber": 165
          },
          {
            "text": "        enableSpecialRowStyling: false,",
            "lineNumber": 166
          },
          {
            "text": "        tooltips: true,",
            "lineNumber": 167
          },
          {
            "text": "        teamField: null,",
            "lineNumber": 168
          },
          {
            "text": "        ...options",
            "lineNumber": 169
          },
          {
            "text": "    };",
            "lineNumber": 170
          },
          {
            "text": "    const tableConfig = data.config || {};",
            "lineNumber": 171
          },
          {
            "text": "    const isCompactLayout = tableConfig.compact === true;",
            "lineNumber": 172
          },
          {
            "text": "    const useStripedGroups = tableConfig.stripedColGroups === true;",
            "lineNumber": 173
          },
          {
            "text": "    // Highlighting style constants",
            "lineNumber": 174
          },
          {
            "text": "    const HIGHLIGHT_STYLES = {",
            "lineNumber": 175
          },
          {
            "text": "        headerBackgroundColor: 'rgba(0, 0, 0, 0.05)',",
            "lineNumber": 176
          },
          {
            "text": "        cellBackgroundColor: 'rgba(0, 0, 0, 0.03)',",
            "lineNumber": 177
          },
          {
            "text": "        headerFontWeight: '900',",
            "lineNumber": 178
          },
          {
            "text": "        cellFontWeight: '700'",
            "lineNumber": 179
          },
          {
            "text": "    };",
            "lineNumber": 180
          },
          {
            "lineNumber": 181
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 182
          },
          {
            "text": "        console.error('Invalid data format for Tabulator table');",
            "lineNumber": 183
          },
          {
            "text": "        return;",
            "lineNumber": 184
          },
          {
            "text": "    }",
            "lineNumber": 185
          },
          {
            "lineNumber": 186
          },
          {
            "text": "    const container = document.getElementById(tableId);",
            "lineNumber": 187
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 188
          },
          {
            "text": "        console.error(&#96;Container \"${tableId}\" not found for Tabulator table&#96;);",
            "lineNumber": 189
          },
          {
            "text": "        return;",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 191
          },
          {
            "text": "    ",
            "lineNumber": 192
          },
          {
            "text": "    // Ensure container takes full width",
            "lineNumber": 193
          },
          {
            "text": "    if (container.style.width === '') {",
            "lineNumber": 194
          },
          {
            "text": "        container.style.width = '100%';",
            "lineNumber": 195
          },
          {
            "text": "    }",
            "lineNumber": 196
          },
          {
            "lineNumber": 197
          },
          {
            "text": "    const columnOrder = flattenColumnMetadata(data.columns);",
            "lineNumber": 198
          },
          {
            "text": "    if (!columnOrder.length) {",
            "lineNumber": 199
          },
          {
            "text": "        console.warn('No column definitions available for Tabulator table');",
            "lineNumber": 200
          },
          {
            "text": "        const container = document.getElementById(tableId);",
            "lineNumber": 201
          },
          {
            "text": "        if (container) {",
            "lineNumber": 202
          },
          {
            "text": "            const errorMsg = data.title &amp;&amp; data.title.includes('Fehler') ? data.title : 'No column definitions available';",
            "lineNumber": 203
          },
          {
            "text": "            container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${errorMsg}&lt;/div&gt;&#96;;",
            "lineNumber": 204
          },
          {
            "text": "        }",
            "lineNumber": 205
          },
          {
            "text": "        return;",
            "lineNumber": 206
          },
          {
            "text": "    }",
            "lineNumber": 207
          },
          {
            "text": "    const columnLookup = columnOrder.reduce((acc, info) =&gt; {",
            "lineNumber": 208
          },
          {
            "text": "        acc[&#96;${info.groupIndex}-${info.columnIndex}&#96;] = info;",
            "lineNumber": 209
          },
          {
            "text": "        return acc;",
            "lineNumber": 210
          },
          {
            "text": "    }, {});",
            "lineNumber": 211
          },
          {
            "lineNumber": 212
          },
          {
            "text": "    const teamFieldGuess = data.columns?.[0]?.columns?.[1]?.field || null;",
            "lineNumber": 213
          },
          {
            "text": "    const teamField = settings.teamField || teamFieldGuess;",
            "lineNumber": 214
          },
          {
            "lineNumber": 215
          },
          {
            "text": "    const cellMetadataMap = mapCellMetadata(data.cell_metadata || {}, columnOrder);",
            "lineNumber": 216
          }
        ]
      },
      "score": 0.34534895420074463
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-win-percentage-block.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 308,
            "column": 1
          }
        },
        "contents": "class TeamWinPercentageBlock {\n\n\n    async loadWinPercentageTable(state) {\n        const url = new URL('/league/get_team_win_percentage_table', window.location.origin);\n        url.searchParams.append('league', state.league);\n        url.searchParams.append('season', state.season);\n        url.searchParams.append('team', state.team);\n        \n        const database = getCurrentDatabase();\n        if (database) {\n            url.searchParams.append('database', database);\n        }\n\n        try {\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(&#96;HTTP ${response.status}: ${response.statusText}&#96;);\n            }\n            \n            const tableData = await response.json();\n            \n            if (tableData.error) {\n                throw new Error(&#96;API Error: ${tableData.error}&#96;);\n            }\n\n            // Extract player names for color mapping (from data, excluding team)\n            const teamKey = &#96;${state.team} (Team)&#96;;\n            if (tableData.data &amp;&amp; Array.isArray(tableData.data)) {\n                const playerNames = tableData.data\n                    .map(row =&gt; row.player_name)\n                    .filter(name =&gt; name &amp;&amp; name !== teamKey);\n                if (window.updatePlayerColorMap) {\n                    window.updatePlayerColorMap(playerNames);\n                }\n            }\n\n            // Pass directly to createTableTabulator (like timetable)\n            if (typeof createTableTabulator === 'function') {\n                createTableTabulator('team-win-percentage-table', tableData, {\n                    disablePositionCircle: true, // We handle the circle manually\n                    enableSpecialRowStyling: true,\n                    disableTeamColorUpdate: true // We handle player colors manually\n                });\n            }\n        } catch (error) {\n            console.error('Error loading win percentage table:', error);\n        }\n    }\n\n    renderChart(data) {\n        const chartContainer = document.getElementById(this.chartContainerId);\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "class TeamWinPercentageBlock {",
            "lineNumber": 1,
            "isSignature": true
          },
          {
            "lineNumber": 140
          },
          {
            "lineNumber": 141
          },
          {
            "text": "    async loadWinPercentageTable(state) {",
            "lineNumber": 142,
            "isSignature": true
          },
          {
            "text": "        const url = new URL('/league/get_team_win_percentage_table', window.location.origin);",
            "lineNumber": 143
          },
          {
            "text": "        url.searchParams.append('league', state.league);",
            "lineNumber": 144
          },
          {
            "text": "        url.searchParams.append('season', state.season);",
            "lineNumber": 145
          },
          {
            "text": "        url.searchParams.append('team', state.team);",
            "lineNumber": 146
          },
          {
            "text": "        ",
            "lineNumber": 147
          },
          {
            "text": "        const database = getCurrentDatabase();",
            "lineNumber": 148
          },
          {
            "text": "        if (database) {",
            "lineNumber": 149
          },
          {
            "text": "            url.searchParams.append('database', database);",
            "lineNumber": 150
          },
          {
            "text": "        }",
            "lineNumber": 151
          },
          {
            "lineNumber": 152
          },
          {
            "text": "        try {",
            "lineNumber": 153
          },
          {
            "text": "            const response = await fetch(url);",
            "lineNumber": 154
          },
          {
            "text": "            if (!response.ok) {",
            "lineNumber": 155
          },
          {
            "text": "                throw new Error(&#96;HTTP ${response.status}: ${response.statusText}&#96;);",
            "lineNumber": 156
          },
          {
            "text": "            }",
            "lineNumber": 157
          },
          {
            "text": "            ",
            "lineNumber": 158
          },
          {
            "text": "            const tableData = await response.json();",
            "lineNumber": 159
          },
          {
            "text": "            ",
            "lineNumber": 160
          },
          {
            "text": "            if (tableData.error) {",
            "lineNumber": 161
          },
          {
            "text": "                throw new Error(&#96;API Error: ${tableData.error}&#96;);",
            "lineNumber": 162
          },
          {
            "text": "            }",
            "lineNumber": 163
          },
          {
            "lineNumber": 164
          },
          {
            "text": "            // Extract player names for color mapping (from data, excluding team)",
            "lineNumber": 165
          },
          {
            "text": "            const teamKey = &#96;${state.team} (Team)&#96;;",
            "lineNumber": 166
          },
          {
            "text": "            if (tableData.data &amp;&amp; Array.isArray(tableData.data)) {",
            "lineNumber": 167
          },
          {
            "text": "                const playerNames = tableData.data",
            "lineNumber": 168
          },
          {
            "text": "                    .map(row =&gt; row.player_name)",
            "lineNumber": 169
          },
          {
            "text": "                    .filter(name =&gt; name &amp;&amp; name !== teamKey);",
            "lineNumber": 170
          },
          {
            "text": "                if (window.updatePlayerColorMap) {",
            "lineNumber": 171
          },
          {
            "text": "                    window.updatePlayerColorMap(playerNames);",
            "lineNumber": 172
          },
          {
            "text": "                }",
            "lineNumber": 173
          },
          {
            "text": "            }",
            "lineNumber": 174
          },
          {
            "lineNumber": 175
          },
          {
            "text": "            // Pass directly to createTableTabulator (like timetable)",
            "lineNumber": 176
          },
          {
            "text": "            if (typeof createTableTabulator === 'function') {",
            "lineNumber": 177
          },
          {
            "text": "                createTableTabulator('team-win-percentage-table', tableData, {",
            "lineNumber": 178
          },
          {
            "text": "                    disablePositionCircle: true, // We handle the circle manually",
            "lineNumber": 179
          },
          {
            "text": "                    enableSpecialRowStyling: true,",
            "lineNumber": 180
          },
          {
            "text": "                    disableTeamColorUpdate: true // We handle player colors manually",
            "lineNumber": 181
          },
          {
            "text": "                });",
            "lineNumber": 182
          },
          {
            "text": "            }",
            "lineNumber": 183
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 184
          },
          {
            "text": "            console.error('Error loading win percentage table:', error);",
            "lineNumber": 185
          },
          {
            "text": "        }",
            "lineNumber": 186
          },
          {
            "text": "    }",
            "lineNumber": 187,
            "isSignature": true
          },
          {
            "lineNumber": 188
          },
          {
            "text": "    renderChart(data) {",
            "lineNumber": 189,
            "isSignature": true
          },
          {
            "text": "        const chartContainer = document.getElementById(this.chartContainerId);",
            "lineNumber": 190
          },
          {
            "text": "    }",
            "lineNumber": 234,
            "isSignature": true
          }
        ]
      },
      "score": 0.3451288938522339
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 884,
            "column": 40
          },
          "endPosition": {
            "line": 922
          }
        },
        "contents": "cell.classList.add('tab-col-highlighted');\n                                        cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                                        highlightedCellCount++;\n                                    }\n                                });\n                            });\n                        }\n\n                        // Column stripes handled via CSS classes\n                    }\n                });\n            });\n            } catch (error) {\n                console.error(&#96;[Tabulator ${tableId}] Error in tableBuilt callback:&#96;, error);\n            }\n        },\n        dataRendered: function() {\n            // Re-apply highlighting after data is rendered (for dynamic updates)\n            const tableElement = document.querySelector(&#96;#${tableId}&#96;);\n            if (!tableElement) return;\n            \n            // Re-check and hide empty group headers (in case table was re-rendered)\n            const header = tableElement.querySelector('.tabulator-header');\n            if (header) {\n                const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');\n                if (!hasGroupTitles) {\n                    const headerRows = header.querySelector('.tabulator-header-rows');\n                    if (headerRows) {\n                        const rows = headerRows.querySelectorAll('.tabulator-header-row');\n                        rows.forEach(row =&gt; {\n                            const colGroups = row.querySelectorAll('.tabulator-col-group');\n                            if (colGroups.length &gt; 0) {\n                                let allEmpty = true;\n                                colGroups.forEach(colGroup =&gt; {\n                                    const titleEl = colGroup.querySelector('.tabulator-col-group-title, .tabulator-col-title');\n                                    if (titleEl &amp;&amp; titleEl.textContent &amp;&amp; titleEl.textContent.trim() !== '') {\n                                        allEmpty = false;\n                                    }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "cell.classList.add('tab-col-highlighted');",
            "lineNumber": 885
          },
          {
            "text": "                                        cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 886
          },
          {
            "text": "                                        highlightedCellCount++;",
            "lineNumber": 887
          },
          {
            "text": "                                    }",
            "lineNumber": 888
          },
          {
            "text": "                                });",
            "lineNumber": 889
          },
          {
            "text": "                            });",
            "lineNumber": 890
          },
          {
            "text": "                        }",
            "lineNumber": 891
          },
          {
            "lineNumber": 892
          },
          {
            "text": "                        // Column stripes handled via CSS classes",
            "lineNumber": 893
          },
          {
            "text": "                    }",
            "lineNumber": 894
          },
          {
            "text": "                });",
            "lineNumber": 895
          },
          {
            "text": "            });",
            "lineNumber": 896
          },
          {
            "text": "            } catch (error) {",
            "lineNumber": 897
          },
          {
            "text": "                console.error(&#96;[Tabulator ${tableId}] Error in tableBuilt callback:&#96;, error);",
            "lineNumber": 898
          },
          {
            "text": "            }",
            "lineNumber": 899
          },
          {
            "text": "        },",
            "lineNumber": 900
          },
          {
            "text": "        dataRendered: function() {",
            "lineNumber": 901
          },
          {
            "text": "            // Re-apply highlighting after data is rendered (for dynamic updates)",
            "lineNumber": 902
          },
          {
            "text": "            const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
            "lineNumber": 903
          },
          {
            "text": "            if (!tableElement) return;",
            "lineNumber": 904
          },
          {
            "text": "            ",
            "lineNumber": 905
          },
          {
            "text": "            // Re-check and hide empty group headers (in case table was re-rendered)",
            "lineNumber": 906
          },
          {
            "text": "            const header = tableElement.querySelector('.tabulator-header');",
            "lineNumber": 907
          },
          {
            "text": "            if (header) {",
            "lineNumber": 908
          },
          {
            "text": "                const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');",
            "lineNumber": 909
          },
          {
            "text": "                if (!hasGroupTitles) {",
            "lineNumber": 910
          },
          {
            "text": "                    const headerRows = header.querySelector('.tabulator-header-rows');",
            "lineNumber": 911
          },
          {
            "text": "                    if (headerRows) {",
            "lineNumber": 912
          },
          {
            "text": "                        const rows = headerRows.querySelectorAll('.tabulator-header-row');",
            "lineNumber": 913
          },
          {
            "text": "                        rows.forEach(row =&gt; {",
            "lineNumber": 914
          },
          {
            "text": "                            const colGroups = row.querySelectorAll('.tabulator-col-group');",
            "lineNumber": 915
          },
          {
            "text": "                            if (colGroups.length &gt; 0) {",
            "lineNumber": 916
          },
          {
            "text": "                                let allEmpty = true;",
            "lineNumber": 917
          },
          {
            "text": "                                colGroups.forEach(colGroup =&gt; {",
            "lineNumber": 918
          },
          {
            "text": "                                    const titleEl = colGroup.querySelector('.tabulator-col-group-title, .tabulator-col-title');",
            "lineNumber": 919
          },
          {
            "text": "                                    if (titleEl &amp;&amp; titleEl.textContent &amp;&amp; titleEl.textContent.trim() !== '') {",
            "lineNumber": 920
          },
          {
            "text": "                                        allEmpty = false;",
            "lineNumber": 921
          },
          {
            "text": "                                    }",
            "lineNumber": 922
          }
        ]
      },
      "score": 0.3190039396286011
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 985
          },
          "endPosition": {
            "line": 1014
          }
        },
        "contents": "                    if (overlay) {\n                        element.style.setProperty('--row-accent-overlay', overlay);\n                    }\n                }\n            } else {\n                const element = row.getElement();\n                element.classList.remove('tab-row-accent');\n                element.style.removeProperty('--row-accent-color');\n                element.style.removeProperty('--row-accent-overlay');\n            }\n        }\n    };\n\n    const tabulatorInstance = new Tabulator(&#96;#${tableId}&#96;, tabulatorOptions);\n    window[tableId + 'Instance'] = tabulatorInstance;\n\n    console.log(&#96;Table \"${tableId}\" successfully created/updated (Tabulator)&#96;);\n    \n    // Register tableBuilt callback AFTER instantiation (as shown in funsies.html)\n    // This is more reliable than passing it as an option\n    tabulatorInstance.on(\"tableBuilt\", function() {\n        try {\n            // Check if all group titles are empty - if so, hide the group header row\n            const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');\n            \n            if (!hasGroupTitles) {\n                requestAnimationFrame(() =&gt; {\n                    requestAnimationFrame(() =&gt; {\n                        const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    if (overlay) {",
            "lineNumber": 986
          },
          {
            "text": "                        element.style.setProperty('--row-accent-overlay', overlay);",
            "lineNumber": 987
          },
          {
            "text": "                    }",
            "lineNumber": 988
          },
          {
            "text": "                }",
            "lineNumber": 989
          },
          {
            "text": "            } else {",
            "lineNumber": 990
          },
          {
            "text": "                const element = row.getElement();",
            "lineNumber": 991
          },
          {
            "text": "                element.classList.remove('tab-row-accent');",
            "lineNumber": 992
          },
          {
            "text": "                element.style.removeProperty('--row-accent-color');",
            "lineNumber": 993
          },
          {
            "text": "                element.style.removeProperty('--row-accent-overlay');",
            "lineNumber": 994
          },
          {
            "text": "            }",
            "lineNumber": 995
          },
          {
            "text": "        }",
            "lineNumber": 996
          },
          {
            "text": "    };",
            "lineNumber": 997
          },
          {
            "lineNumber": 998
          },
          {
            "text": "    const tabulatorInstance = new Tabulator(&#96;#${tableId}&#96;, tabulatorOptions);",
            "lineNumber": 999
          },
          {
            "text": "    window[tableId + 'Instance'] = tabulatorInstance;",
            "lineNumber": 1000
          },
          {
            "lineNumber": 1001
          },
          {
            "text": "    console.log(&#96;Table \"${tableId}\" successfully created/updated (Tabulator)&#96;);",
            "lineNumber": 1002
          },
          {
            "text": "    ",
            "lineNumber": 1003
          },
          {
            "text": "    // Register tableBuilt callback AFTER instantiation (as shown in funsies.html)",
            "lineNumber": 1004
          },
          {
            "text": "    // This is more reliable than passing it as an option",
            "lineNumber": 1005
          },
          {
            "text": "    tabulatorInstance.on(\"tableBuilt\", function() {",
            "lineNumber": 1006
          },
          {
            "text": "        try {",
            "lineNumber": 1007
          },
          {
            "text": "            // Check if all group titles are empty - if so, hide the group header row",
            "lineNumber": 1008
          },
          {
            "text": "            const hasGroupTitles = data.columns.some(group =&gt; group.title &amp;&amp; group.title.trim() !== '');",
            "lineNumber": 1009
          },
          {
            "text": "            ",
            "lineNumber": 1010
          },
          {
            "text": "            if (!hasGroupTitles) {",
            "lineNumber": 1011
          },
          {
            "text": "                requestAnimationFrame(() =&gt; {",
            "lineNumber": 1012
          },
          {
            "text": "                    requestAnimationFrame(() =&gt; {",
            "lineNumber": 1013
          },
          {
            "text": "                        const tableElement = document.querySelector(&#96;#${tableId}&#96;);",
            "lineNumber": 1014
          }
        ]
      },
      "score": 0.2996082305908203
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\database_selector.html",
        "range": {
          "startPosition": {
            "line": 336
          },
          "endPosition": {
            "line": 394
          }
        },
        "contents": "            this.hideLoadingState();\n        }\n    }\n\n    async refreshDynamicComponents() {\n        console.log('🔄 Refreshing dynamic components after database switch...');\n        \n        // Wait a moment for the server to fully process the database switch\n        await new Promise(resolve =&gt; setTimeout(resolve, 500));\n        \n        // Trigger various component refresh methods\n        const refreshMethods = [\n            // League components\n            'updateSeasonButtons',\n            'updateLeagueButtons', \n            'updateWeekButtons',\n            'updateTeamButtons',\n            'updateTableLeagueHistory',\n            'updateTableLeagueWeek',\n            'updateTableTeamDetails',\n            'updateChartsLeague',\n            \n            // Team components\n            'updateTeamSelect',\n            'updateSeasonButtons',\n            'updateWeeksData',\n            'updateTeamHistory',\n            'updateLeagueComparison',\n            'updateClutchAnalysis',\n            'updateConsistencyMetrics',\n            'updateSpecialMatches',\n            \n            // Player components\n            'loadPlayerStats',\n            'displayLifetimeStats',\n            'displaySeasonStats',\n            'updateTrendChart',\n            \n            // General refresh methods\n            'refreshCurrentData',\n            'handleDataSourceChange',\n            'updateContent',\n            'renderContent'\n        ];\n\n        // Try to call available refresh methods\n        for (const methodName of refreshMethods) {\n            try {\n                if (typeof window[methodName] === 'function') {\n                    console.log(&#96;Calling ${methodName}...&#96;);\n                    await window[methodName]();\n                }\n            } catch (error) {\n                console.warn(&#96;Error calling ${methodName}:&#96;, error);\n            }\n        }\n\n        // Trigger specific events for different page types",
        "signatures": {},
        "detailedLines": [
          {
            "text": "            this.hideLoadingState();",
            "lineNumber": 337
          },
          {
            "text": "        }",
            "lineNumber": 338
          },
          {
            "text": "    }",
            "lineNumber": 339
          },
          {
            "lineNumber": 340
          },
          {
            "text": "    async refreshDynamicComponents() {",
            "lineNumber": 341
          },
          {
            "text": "        console.log('🔄 Refreshing dynamic components after database switch...');",
            "lineNumber": 342
          },
          {
            "text": "        ",
            "lineNumber": 343
          },
          {
            "text": "        // Wait a moment for the server to fully process the database switch",
            "lineNumber": 344
          },
          {
            "text": "        await new Promise(resolve =&gt; setTimeout(resolve, 500));",
            "lineNumber": 345
          },
          {
            "text": "        ",
            "lineNumber": 346
          },
          {
            "text": "        // Trigger various component refresh methods",
            "lineNumber": 347
          },
          {
            "text": "        const refreshMethods = [",
            "lineNumber": 348
          },
          {
            "text": "            // League components",
            "lineNumber": 349
          },
          {
            "text": "            'updateSeasonButtons',",
            "lineNumber": 350
          },
          {
            "text": "            'updateLeagueButtons', ",
            "lineNumber": 351
          },
          {
            "text": "            'updateWeekButtons',",
            "lineNumber": 352
          },
          {
            "text": "            'updateTeamButtons',",
            "lineNumber": 353
          },
          {
            "text": "            'updateTableLeagueHistory',",
            "lineNumber": 354
          },
          {
            "text": "            'updateTableLeagueWeek',",
            "lineNumber": 355
          },
          {
            "text": "            'updateTableTeamDetails',",
            "lineNumber": 356
          },
          {
            "text": "            'updateChartsLeague',",
            "lineNumber": 357
          },
          {
            "text": "            ",
            "lineNumber": 358
          },
          {
            "text": "            // Team components",
            "lineNumber": 359
          },
          {
            "text": "            'updateTeamSelect',",
            "lineNumber": 360
          },
          {
            "text": "            'updateSeasonButtons',",
            "lineNumber": 361
          },
          {
            "text": "            'updateWeeksData',",
            "lineNumber": 362
          },
          {
            "text": "            'updateTeamHistory',",
            "lineNumber": 363
          },
          {
            "text": "            'updateLeagueComparison',",
            "lineNumber": 364
          },
          {
            "text": "            'updateClutchAnalysis',",
            "lineNumber": 365
          },
          {
            "text": "            'updateConsistencyMetrics',",
            "lineNumber": 366
          },
          {
            "text": "            'updateSpecialMatches',",
            "lineNumber": 367
          },
          {
            "text": "            ",
            "lineNumber": 368
          },
          {
            "text": "            // Player components",
            "lineNumber": 369
          },
          {
            "text": "            'loadPlayerStats',",
            "lineNumber": 370
          },
          {
            "text": "            'displayLifetimeStats',",
            "lineNumber": 371
          },
          {
            "text": "            'displaySeasonStats',",
            "lineNumber": 372
          },
          {
            "text": "            'updateTrendChart',",
            "lineNumber": 373
          },
          {
            "text": "            ",
            "lineNumber": 374
          },
          {
            "text": "            // General refresh methods",
            "lineNumber": 375
          },
          {
            "text": "            'refreshCurrentData',",
            "lineNumber": 376
          },
          {
            "text": "            'handleDataSourceChange',",
            "lineNumber": 377
          },
          {
            "text": "            'updateContent',",
            "lineNumber": 378
          },
          {
            "text": "            'renderContent'",
            "lineNumber": 379
          },
          {
            "text": "        ];",
            "lineNumber": 380
          },
          {
            "lineNumber": 381
          },
          {
            "text": "        // Try to call available refresh methods",
            "lineNumber": 382
          },
          {
            "text": "        for (const methodName of refreshMethods) {",
            "lineNumber": 383
          },
          {
            "text": "            try {",
            "lineNumber": 384
          },
          {
            "text": "                if (typeof window[methodName] === 'function') {",
            "lineNumber": 385
          },
          {
            "text": "                    console.log(&#96;Calling ${methodName}...&#96;);",
            "lineNumber": 386
          },
          {
            "text": "                    await window[methodName]();",
            "lineNumber": 387
          },
          {
            "text": "                }",
            "lineNumber": 388
          },
          {
            "text": "            } catch (error) {",
            "lineNumber": 389
          },
          {
            "text": "                console.warn(&#96;Error calling ${methodName}:&#96;, error);",
            "lineNumber": 390
          },
          {
            "text": "            }",
            "lineNumber": 391
          },
          {
            "text": "        }",
            "lineNumber": 392
          },
          {
            "lineNumber": 393
          },
          {
            "text": "        // Trigger specific events for different page types",
            "lineNumber": 394
          }
        ]
      },
      "score": 0.29877060651779175
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 479,
            "column": 1
          }
        },
        "contents": "() =&gt; {\n\n\n    function updateTeamColorMap(currentTeams = []) {\n        if (!Array.isArray(currentTeams)) return;\n\n        Object.keys(teamColorMap).forEach(team =&gt; {\n            if (!currentTeams.includes(team)) {\n                delete teamColorMap[team];\n            }\n        });\n\n        let paletteIdx = 0;\n        currentTeams.forEach(team =&gt; {\n            if (!teamColorMap[team]) {\n                teamColorMap[team] = getPaletteColor(paletteIdx++);\n            }\n        });\n    }\n\n    function getTeamColor(teamName, fallbackIndex = 0) {\n        if (teamName &amp;&amp; teamColorMap[teamName]) {\n            return teamColorMap[teamName];\n        }\n        // Also check playerColorMap as fallback (for player names in charts)\n        if (teamName &amp;&amp; playerColorMap[teamName]) {\n            return playerColorMap[teamName];\n        }\n        return getPaletteColor(fallbackIndex);\n    }\n\n    // Player name color map (similar to team color map but for player names)\n    const playerColorMap = globalObj.playerColorMap || {};\n\n    function updatePlayerColorMap(currentPlayers = []) {\n        if (!Array.isArray(currentPlayers)) return;\n\n        Object.keys(playerColorMap).forEach(player =&gt; {\n            if (!currentPlayers.includes(player)) {\n                delete playerColorMap[player];\n            }\n        });\n\n        let paletteIdx = 0;\n        currentPlayers.forEach(player =&gt; {\n            if (!playerColorMap[player]) {\n                playerColorMap[player] = getPaletteColor(paletteIdx++);\n            }\n        });\n    }\n\n    function getPlayerColor(playerName, fallbackIndex = 0) {\n        \n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "lineNumber": 260
          },
          {
            "lineNumber": 261
          },
          {
            "text": "    function updateTeamColorMap(currentTeams = []) {",
            "lineNumber": 262
          },
          {
            "text": "        if (!Array.isArray(currentTeams)) return;",
            "lineNumber": 263
          },
          {
            "lineNumber": 264
          },
          {
            "text": "        Object.keys(teamColorMap).forEach(team =&gt; {",
            "lineNumber": 265
          },
          {
            "text": "            if (!currentTeams.includes(team)) {",
            "lineNumber": 266
          },
          {
            "text": "                delete teamColorMap[team];",
            "lineNumber": 267
          },
          {
            "text": "            }",
            "lineNumber": 268
          },
          {
            "text": "        });",
            "lineNumber": 269
          },
          {
            "lineNumber": 270
          },
          {
            "text": "        let paletteIdx = 0;",
            "lineNumber": 271
          },
          {
            "text": "        currentTeams.forEach(team =&gt; {",
            "lineNumber": 272
          },
          {
            "text": "            if (!teamColorMap[team]) {",
            "lineNumber": 273
          },
          {
            "text": "                teamColorMap[team] = getPaletteColor(paletteIdx++);",
            "lineNumber": 274
          },
          {
            "text": "            }",
            "lineNumber": 275
          },
          {
            "text": "        });",
            "lineNumber": 276
          },
          {
            "text": "    }",
            "lineNumber": 277
          },
          {
            "lineNumber": 278
          },
          {
            "text": "    function getTeamColor(teamName, fallbackIndex = 0) {",
            "lineNumber": 279
          },
          {
            "text": "        if (teamName &amp;&amp; teamColorMap[teamName]) {",
            "lineNumber": 280
          },
          {
            "text": "            return teamColorMap[teamName];",
            "lineNumber": 281
          },
          {
            "text": "        }",
            "lineNumber": 282
          },
          {
            "text": "        // Also check playerColorMap as fallback (for player names in charts)",
            "lineNumber": 283
          },
          {
            "text": "        if (teamName &amp;&amp; playerColorMap[teamName]) {",
            "lineNumber": 284
          },
          {
            "text": "            return playerColorMap[teamName];",
            "lineNumber": 285
          },
          {
            "text": "        }",
            "lineNumber": 286
          },
          {
            "text": "        return getPaletteColor(fallbackIndex);",
            "lineNumber": 287
          },
          {
            "text": "    }",
            "lineNumber": 288
          },
          {
            "lineNumber": 289
          },
          {
            "text": "    // Player name color map (similar to team color map but for player names)",
            "lineNumber": 290
          },
          {
            "text": "    const playerColorMap = globalObj.playerColorMap || {};",
            "lineNumber": 291
          },
          {
            "lineNumber": 292
          },
          {
            "text": "    function updatePlayerColorMap(currentPlayers = []) {",
            "lineNumber": 293
          },
          {
            "text": "        if (!Array.isArray(currentPlayers)) return;",
            "lineNumber": 294
          },
          {
            "lineNumber": 295
          },
          {
            "text": "        Object.keys(playerColorMap).forEach(player =&gt; {",
            "lineNumber": 296
          },
          {
            "text": "            if (!currentPlayers.includes(player)) {",
            "lineNumber": 297
          },
          {
            "text": "                delete playerColorMap[player];",
            "lineNumber": 298
          },
          {
            "text": "            }",
            "lineNumber": 299
          },
          {
            "text": "        });",
            "lineNumber": 300
          },
          {
            "lineNumber": 301
          },
          {
            "text": "        let paletteIdx = 0;",
            "lineNumber": 302
          },
          {
            "text": "        currentPlayers.forEach(player =&gt; {",
            "lineNumber": 303
          },
          {
            "text": "            if (!playerColorMap[player]) {",
            "lineNumber": 304
          },
          {
            "text": "                playerColorMap[player] = getPaletteColor(paletteIdx++);",
            "lineNumber": 305
          },
          {
            "text": "            }",
            "lineNumber": 306
          },
          {
            "text": "        });",
            "lineNumber": 307
          },
          {
            "text": "    }",
            "lineNumber": 308
          },
          {
            "lineNumber": 309
          },
          {
            "text": "    function getPlayerColor(playerName, fallbackIndex = 0) {",
            "lineNumber": 310
          },
          {
            "text": "        ",
            "lineNumber": 311
          },
          {
            "text": "    }",
            "lineNumber": 324
          },
          {
            "text": "}",
            "lineNumber": 480
          }
        ]
      },
      "score": 0.2982361316680908
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 919
          },
          "endPosition": {
            "line": 958
          }
        },
        "contents": "                                    if (titleEl &amp;&amp; titleEl.textContent &amp;&amp; titleEl.textContent.trim() !== '') {\n                                        allEmpty = false;\n                                    }\n                                });\n                                if (allEmpty) {\n                                    row.style.setProperty('display', 'none', 'important');\n                                    row.style.setProperty('height', '0', 'important');\n                                    row.style.setProperty('min-height', '0', 'important');\n                                }\n                            }\n                        });\n                    }\n                }\n            }\n            \n            const highlightedFields = new Set();\n            data.columns.forEach((group) =&gt; {\n                if (group.highlighted === true &amp;&amp; group.columns) {\n                    group.columns.forEach(col =&gt; {\n                        if (col.field) {\n                            highlightedFields.add(col.field);\n                        }\n                    });\n                }\n            });\n            \n            if (highlightedFields.size &gt; 0) {\n                const table = tableElement.querySelector('.tabulator-table');\n                if (table) {\n                    const rows = table.querySelectorAll('.tabulator-row');\n                    rows.forEach(row =&gt; {\n                        const cells = row.querySelectorAll('.tabulator-cell');\n                        cells.forEach(cell =&gt; {\n                            const field = cell.getAttribute('tabulator-field');\n                                if (field &amp;&amp; highlightedFields.has(field)) {\n                                    cell.classList.add('tab-col-highlighted');\n                                    cell.style.setProperty('background-color', HIGHLIGHT_STYLES.cellBackgroundColor, 'important');\n                                    cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                                    cell.style.setProperty('color', 'inherit', 'important');",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                                    if (titleEl &amp;&amp; titleEl.textContent &amp;&amp; titleEl.textContent.trim() !== '') {",
            "lineNumber": 920
          },
          {
            "text": "                                        allEmpty = false;",
            "lineNumber": 921
          },
          {
            "text": "                                    }",
            "lineNumber": 922
          },
          {
            "text": "                                });",
            "lineNumber": 923
          },
          {
            "text": "                                if (allEmpty) {",
            "lineNumber": 924
          },
          {
            "text": "                                    row.style.setProperty('display', 'none', 'important');",
            "lineNumber": 925
          },
          {
            "text": "                                    row.style.setProperty('height', '0', 'important');",
            "lineNumber": 926
          },
          {
            "text": "                                    row.style.setProperty('min-height', '0', 'important');",
            "lineNumber": 927
          },
          {
            "text": "                                }",
            "lineNumber": 928
          },
          {
            "text": "                            }",
            "lineNumber": 929
          },
          {
            "text": "                        });",
            "lineNumber": 930
          },
          {
            "text": "                    }",
            "lineNumber": 931
          },
          {
            "text": "                }",
            "lineNumber": 932
          },
          {
            "text": "            }",
            "lineNumber": 933
          },
          {
            "text": "            ",
            "lineNumber": 934
          },
          {
            "text": "            const highlightedFields = new Set();",
            "lineNumber": 935
          },
          {
            "text": "            data.columns.forEach((group) =&gt; {",
            "lineNumber": 936
          },
          {
            "text": "                if (group.highlighted === true &amp;&amp; group.columns) {",
            "lineNumber": 937
          },
          {
            "text": "                    group.columns.forEach(col =&gt; {",
            "lineNumber": 938
          },
          {
            "text": "                        if (col.field) {",
            "lineNumber": 939
          },
          {
            "text": "                            highlightedFields.add(col.field);",
            "lineNumber": 940
          },
          {
            "text": "                        }",
            "lineNumber": 941
          },
          {
            "text": "                    });",
            "lineNumber": 942
          },
          {
            "text": "                }",
            "lineNumber": 943
          },
          {
            "text": "            });",
            "lineNumber": 944
          },
          {
            "text": "            ",
            "lineNumber": 945
          },
          {
            "text": "            if (highlightedFields.size &gt; 0) {",
            "lineNumber": 946
          },
          {
            "text": "                const table = tableElement.querySelector('.tabulator-table');",
            "lineNumber": 947
          },
          {
            "text": "                if (table) {",
            "lineNumber": 948
          },
          {
            "text": "                    const rows = table.querySelectorAll('.tabulator-row');",
            "lineNumber": 949
          },
          {
            "text": "                    rows.forEach(row =&gt; {",
            "lineNumber": 950
          },
          {
            "text": "                        const cells = row.querySelectorAll('.tabulator-cell');",
            "lineNumber": 951
          },
          {
            "text": "                        cells.forEach(cell =&gt; {",
            "lineNumber": 952
          },
          {
            "text": "                            const field = cell.getAttribute('tabulator-field');",
            "lineNumber": 953
          },
          {
            "text": "                                if (field &amp;&amp; highlightedFields.has(field)) {",
            "lineNumber": 954
          },
          {
            "text": "                                    cell.classList.add('tab-col-highlighted');",
            "lineNumber": 955
          },
          {
            "text": "                                    cell.style.setProperty('background-color', HIGHLIGHT_STYLES.cellBackgroundColor, 'important');",
            "lineNumber": 956
          },
          {
            "text": "                                    cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 957
          },
          {
            "text": "                                    cell.style.setProperty('color', 'inherit', 'important');",
            "lineNumber": 958
          }
        ]
      },
      "score": 0.29660844802856445
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\team-details-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 285,
            "column": 1
          }
        },
        "contents": "async loadTeamWeekDetails(season, league, week, team, view = 'classic') {\n\n            if (container) {\n                // Determine table options based on view\n                const tableOptions = {\n                    disablePositionCircle: true, // Team details should never show color circles for player numbers\n                    mergeCells: view === 'newFull',\n                    enableSpecialRowStyling: true\n                };\n                \n                // Use Tabulator for structured TableData\n                if (typeof createTableTabulator === 'function') {\n                    console.log(&#96;Using createTableTabulator function for team details (${view} view)&#96;);\n                    createTableTabulator('teamTableWeekDetails', tableData, {\n                        ...tableOptions,\n                        tooltips: true\n                    });\n                } else if (typeof createTableBootstrap3 === 'function') {\n                    // Fallback to Bootstrap\n                    console.log(&#96;Fallback: Using createTableBootstrap3 function for team details (${view} view)&#96;);\n                    createTableBootstrap3('teamTableWeekDetails', tableData, tableOptions);\n                } else {\n                    console.error('No table creation function available');\n                    container.innerHTML = '&lt;div class=\"alert alert-warning\"&gt;Table creation function not available&lt;/div&gt;';\n                }\n            }\n        } catch (error) {\n            console.error('Error loading team week details:', error);\n            const container = document.getElementById('teamTableWeekDetails');\n            if (container) {\n                container.innerHTML = '&lt;div class=\"alert alert-danger\"&gt;Error loading team details&lt;/div&gt;';\n            }\n        }\n    }\n\n    async handleViewChange() {\n        // Get current state from the parent app\n        const currentState = this.getCurrentState();\n    }",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 184,
                "column": 5
              },
              "endPosition": {
                "line": 185,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async loadTeamWeekDetails(season, league, week, team, view = 'classic') {",
            "lineNumber": 184,
            "isSignature": true
          },
          {
            "lineNumber": 201
          },
          {
            "text": "            if (container) {",
            "lineNumber": 202
          },
          {
            "text": "                // Determine table options based on view",
            "lineNumber": 203
          },
          {
            "text": "                const tableOptions = {",
            "lineNumber": 204
          },
          {
            "text": "                    disablePositionCircle: true, // Team details should never show color circles for player numbers",
            "lineNumber": 205
          },
          {
            "text": "                    mergeCells: view === 'newFull',",
            "lineNumber": 206
          },
          {
            "text": "                    enableSpecialRowStyling: true",
            "lineNumber": 207
          },
          {
            "text": "                };",
            "lineNumber": 208
          },
          {
            "text": "                ",
            "lineNumber": 209
          },
          {
            "text": "                // Use Tabulator for structured TableData",
            "lineNumber": 210
          },
          {
            "text": "                if (typeof createTableTabulator === 'function') {",
            "lineNumber": 211
          },
          {
            "text": "                    console.log(&#96;Using createTableTabulator function for team details (${view} view)&#96;);",
            "lineNumber": 212
          },
          {
            "text": "                    createTableTabulator('teamTableWeekDetails', tableData, {",
            "lineNumber": 213
          },
          {
            "text": "                        ...tableOptions,",
            "lineNumber": 214
          },
          {
            "text": "                        tooltips: true",
            "lineNumber": 215
          },
          {
            "text": "                    });",
            "lineNumber": 216
          },
          {
            "text": "                } else if (typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 217
          },
          {
            "text": "                    // Fallback to Bootstrap",
            "lineNumber": 218
          },
          {
            "text": "                    console.log(&#96;Fallback: Using createTableBootstrap3 function for team details (${view} view)&#96;);",
            "lineNumber": 219
          },
          {
            "text": "                    createTableBootstrap3('teamTableWeekDetails', tableData, tableOptions);",
            "lineNumber": 220
          },
          {
            "text": "                } else {",
            "lineNumber": 221
          },
          {
            "text": "                    console.error('No table creation function available');",
            "lineNumber": 222
          },
          {
            "text": "                    container.innerHTML = '&lt;div class=\"alert alert-warning\"&gt;Table creation function not available&lt;/div&gt;';",
            "lineNumber": 223
          },
          {
            "text": "                }",
            "lineNumber": 224
          },
          {
            "text": "            }",
            "lineNumber": 225
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 226
          },
          {
            "text": "            console.error('Error loading team week details:', error);",
            "lineNumber": 227
          },
          {
            "text": "            const container = document.getElementById('teamTableWeekDetails');",
            "lineNumber": 228
          },
          {
            "text": "            if (container) {",
            "lineNumber": 229
          },
          {
            "text": "                container.innerHTML = '&lt;div class=\"alert alert-danger\"&gt;Error loading team details&lt;/div&gt;';",
            "lineNumber": 230
          },
          {
            "text": "            }",
            "lineNumber": 231
          },
          {
            "text": "        }",
            "lineNumber": 232
          },
          {
            "text": "    }",
            "lineNumber": 233,
            "isSignature": true
          },
          {
            "lineNumber": 234
          },
          {
            "text": "    async handleViewChange() {",
            "lineNumber": 235,
            "isSignature": true
          },
          {
            "text": "        // Get current state from the parent app",
            "lineNumber": 236
          },
          {
            "text": "        const currentState = this.getCurrentState();",
            "lineNumber": 237
          },
          {
            "text": "    }",
            "lineNumber": 249,
            "isSignature": true
          }
        ]
      },
      "score": 0.2933696508407593
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 479,
            "column": 5
          }
        },
        "contents": "() =&gt; {\nfunction applyDarkMode(enabled) {\n\n        }\n        \n        // Dispatch event for other components\n        if (typeof window !== 'undefined') {\n            window.dispatchEvent(new CustomEvent('themeChanged', { \n                detail: { darkMode: enabled } \n            }));\n        }\n    }\n\n    // Initialize dark mode on load\n    if (typeof document !== 'undefined') {\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', () =&gt; {\n                applyDarkMode(isDarkMode());\n            });\n        } else {\n            applyDarkMode(isDarkMode());\n        }\n    }\n\n    const ColorUtils = {\n        TEAM_COLOR_PALETTES,\n        SEMANTIC_COLOR_MAPPINGS,\n        THEME_COLORS,\n        THEME_COLORS_DARK,\n        getCurrentPaletteName: () =&gt; currentPaletteName,\n        getCurrentPalette: () =&gt; [...currentPalette],\n        setPalette,\n        getPaletteColor,\n        getSemanticColor,\n        getThemeColor,\n        updateTeamColorMap,\n        getTeamColor,\n        updatePlayerColorMap,\n        getPlayerColor,\n        getGradientColors,\n        getStripeColors,\n        getHeatMapColor,\n        hexToRgb,\n        toRgba,\n        teamColorMap,\n        playerColorMap,\n        assignGroupStripeCss,\n        generateStripeCss,\n        injectStripeCss,\n        isDarkMode,\n        setDarkMode,\n        toggleDarkMode,\n        applyDarkMode\n    };\n\n    globalObj.ColorUtils = ColorUtils;\n    globalObj.teamColorMap = teamColorMap;\n    globalObj.playerColorMap = playerColorMap;\n    globalObj.getTeamColor = getTeamColor;\n    globalObj.getPlayerColor = getPlayerColor;\n    globalObj.updateTeamColorMap = updateTeamColorMap;\n    globalObj.updatePlayerColorMap = updatePlayerColorMap;\n})();",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 376,
                "column": 5
              },
              "endPosition": {
                "line": 377,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "function applyDarkMode(enabled) {",
            "lineNumber": 376
          },
          {
            "lineNumber": 420
          },
          {
            "text": "        }",
            "lineNumber": 421
          },
          {
            "text": "        ",
            "lineNumber": 422
          },
          {
            "text": "        // Dispatch event for other components",
            "lineNumber": 423
          },
          {
            "text": "        if (typeof window !== 'undefined') {",
            "lineNumber": 424
          },
          {
            "text": "            window.dispatchEvent(new CustomEvent('themeChanged', { ",
            "lineNumber": 425
          },
          {
            "text": "                detail: { darkMode: enabled } ",
            "lineNumber": 426
          },
          {
            "text": "            }));",
            "lineNumber": 427
          },
          {
            "text": "        }",
            "lineNumber": 428
          },
          {
            "text": "    }",
            "lineNumber": 429
          },
          {
            "lineNumber": 430
          },
          {
            "text": "    // Initialize dark mode on load",
            "lineNumber": 431
          },
          {
            "text": "    if (typeof document !== 'undefined') {",
            "lineNumber": 432
          },
          {
            "text": "        if (document.readyState === 'loading') {",
            "lineNumber": 433
          },
          {
            "text": "            document.addEventListener('DOMContentLoaded', () =&gt; {",
            "lineNumber": 434
          },
          {
            "text": "                applyDarkMode(isDarkMode());",
            "lineNumber": 435
          },
          {
            "text": "            });",
            "lineNumber": 436
          },
          {
            "text": "        } else {",
            "lineNumber": 437
          },
          {
            "text": "            applyDarkMode(isDarkMode());",
            "lineNumber": 438
          },
          {
            "text": "        }",
            "lineNumber": 439
          },
          {
            "text": "    }",
            "lineNumber": 440
          },
          {
            "lineNumber": 441
          },
          {
            "text": "    const ColorUtils = {",
            "lineNumber": 442
          },
          {
            "text": "        TEAM_COLOR_PALETTES,",
            "lineNumber": 443
          },
          {
            "text": "        SEMANTIC_COLOR_MAPPINGS,",
            "lineNumber": 444
          },
          {
            "text": "        THEME_COLORS,",
            "lineNumber": 445
          },
          {
            "text": "        THEME_COLORS_DARK,",
            "lineNumber": 446
          },
          {
            "text": "        getCurrentPaletteName: () =&gt; currentPaletteName,",
            "lineNumber": 447
          },
          {
            "text": "        getCurrentPalette: () =&gt; [...currentPalette],",
            "lineNumber": 448
          },
          {
            "text": "        setPalette,",
            "lineNumber": 449
          },
          {
            "text": "        getPaletteColor,",
            "lineNumber": 450
          },
          {
            "text": "        getSemanticColor,",
            "lineNumber": 451
          },
          {
            "text": "        getThemeColor,",
            "lineNumber": 452
          },
          {
            "text": "        updateTeamColorMap,",
            "lineNumber": 453
          },
          {
            "text": "        getTeamColor,",
            "lineNumber": 454
          },
          {
            "text": "        updatePlayerColorMap,",
            "lineNumber": 455
          },
          {
            "text": "        getPlayerColor,",
            "lineNumber": 456
          },
          {
            "text": "        getGradientColors,",
            "lineNumber": 457
          },
          {
            "text": "        getStripeColors,",
            "lineNumber": 458
          },
          {
            "text": "        getHeatMapColor,",
            "lineNumber": 459
          },
          {
            "text": "        hexToRgb,",
            "lineNumber": 460
          },
          {
            "text": "        toRgba,",
            "lineNumber": 461
          },
          {
            "text": "        teamColorMap,",
            "lineNumber": 462
          },
          {
            "text": "        playerColorMap,",
            "lineNumber": 463
          },
          {
            "text": "        assignGroupStripeCss,",
            "lineNumber": 464
          },
          {
            "text": "        generateStripeCss,",
            "lineNumber": 465
          },
          {
            "text": "        injectStripeCss,",
            "lineNumber": 466
          },
          {
            "text": "        isDarkMode,",
            "lineNumber": 467
          },
          {
            "text": "        setDarkMode,",
            "lineNumber": 468
          },
          {
            "text": "        toggleDarkMode,",
            "lineNumber": 469
          },
          {
            "text": "        applyDarkMode",
            "lineNumber": 470
          },
          {
            "text": "    };",
            "lineNumber": 471
          },
          {
            "lineNumber": 472
          },
          {
            "text": "    globalObj.ColorUtils = ColorUtils;",
            "lineNumber": 473
          },
          {
            "text": "    globalObj.teamColorMap = teamColorMap;",
            "lineNumber": 474
          },
          {
            "text": "    globalObj.playerColorMap = playerColorMap;",
            "lineNumber": 475
          },
          {
            "text": "    globalObj.getTeamColor = getTeamColor;",
            "lineNumber": 476
          },
          {
            "text": "    globalObj.getPlayerColor = getPlayerColor;",
            "lineNumber": 477
          },
          {
            "text": "    globalObj.updateTeamColorMap = updateTeamColorMap;",
            "lineNumber": 478
          },
          {
            "text": "    globalObj.updatePlayerColorMap = updatePlayerColorMap;",
            "lineNumber": 479
          },
          {
            "text": "})();",
            "lineNumber": 480
          }
        ]
      },
      "score": 0.2901422381401062
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\utils\\league-standings-card-utils.js",
        "range": {
          "startPosition": {
            "line": 72,
            "column": 1
          },
          "endPosition": {
            "line": 128,
            "column": 3
          }
        },
        "contents": "/**\n * Render league standings table\n * @param {string} tableId - ID of the container element\n * @param {Object} standingsData - TableData object from backend\n * @param {Object} options - Additional options\n */\nfunction renderLeagueStandingsTable(tableId, standingsData, options = {}) {\n    const container = document.getElementById(tableId);\n    if (!container) {\n        console.error(&#96;Container ${tableId} not found&#96;);\n        return;\n    }\n    \n    if (!standingsData) {\n        container.innerHTML = &#96;\n            &lt;div class=\"alert alert-warning\"&gt;\n                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'No data available') : 'No data available'}&lt;/p&gt;\n            &lt;/div&gt;\n        &#96;;\n        return;\n    }\n    \n    // Use Tabulator for structured TableData\n    if (typeof createTableTabulator === 'function') {\n        console.log(&#96;Creating Tabulator table ${tableId} with ${standingsData.data ? standingsData.data.length : 0} rows&#96;);\n        createTableTabulator(tableId, standingsData, { \n            disablePositionCircle: false, // Show position circles for league standings\n            enableSpecialRowStyling: true,\n            tooltips: true,\n            disableTeamColorUpdate: true, // Disable automatic team color update (handled manually for multiple tables)\n            ...options\n        });\n    } else if (typeof createTableBootstrap3 === 'function') {\n        console.log(&#96;Fallback: Using createTableBootstrap3 for ${tableId}&#96;);\n        createTableBootstrap3(tableId, standingsData, {\n            disablePositionCircle: false,\n            enableSpecialRowStyling: true,\n            compact: true,\n            ...options\n        });\n    } else {\n        console.error('No table creation function available');\n        container.innerHTML = &#96;\n            &lt;div class=\"alert alert-warning\"&gt;\n                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'Table creation function not available') : 'Table creation function not available'}&lt;/p&gt;\n            &lt;/div&gt;\n        &#96;;\n    }\n}\n\n/**\n * Populate honor scores sections\n * @param {Object} honorScoresData - Honor scores data from backend\n * @param {string} prefix - Prefix for element IDs (optional, for multiple leagues)\n */",
        "signatures": {},
        "detailedLines": [
          {
            "text": "/**",
            "lineNumber": 75
          },
          {
            "text": " * Render league standings table",
            "lineNumber": 76
          },
          {
            "text": " * @param {string} tableId - ID of the container element",
            "lineNumber": 77
          },
          {
            "text": " * @param {Object} standingsData - TableData object from backend",
            "lineNumber": 78
          },
          {
            "text": " * @param {Object} options - Additional options",
            "lineNumber": 79
          },
          {
            "text": " */",
            "lineNumber": 80
          },
          {
            "text": "function renderLeagueStandingsTable(tableId, standingsData, options = {}) {",
            "lineNumber": 81,
            "isSignature": true
          },
          {
            "text": "    const container = document.getElementById(tableId);",
            "lineNumber": 82
          },
          {
            "text": "    if (!container) {",
            "lineNumber": 83
          },
          {
            "text": "        console.error(&#96;Container ${tableId} not found&#96;);",
            "lineNumber": 84
          },
          {
            "text": "        return;",
            "lineNumber": 85
          },
          {
            "text": "    }",
            "lineNumber": 86
          },
          {
            "text": "    ",
            "lineNumber": 87
          },
          {
            "text": "    if (!standingsData) {",
            "lineNumber": 88
          },
          {
            "text": "        container.innerHTML = &#96;",
            "lineNumber": 89
          },
          {
            "text": "            &lt;div class=\"alert alert-warning\"&gt;",
            "lineNumber": 90
          },
          {
            "text": "                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'No data available') : 'No data available'}&lt;/p&gt;",
            "lineNumber": 91
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 92
          },
          {
            "text": "        &#96;;",
            "lineNumber": 93
          },
          {
            "text": "        return;",
            "lineNumber": 94
          },
          {
            "text": "    }",
            "lineNumber": 95
          },
          {
            "text": "    ",
            "lineNumber": 96
          },
          {
            "text": "    // Use Tabulator for structured TableData",
            "lineNumber": 97
          },
          {
            "text": "    if (typeof createTableTabulator === 'function') {",
            "lineNumber": 98
          },
          {
            "text": "        console.log(&#96;Creating Tabulator table ${tableId} with ${standingsData.data ? standingsData.data.length : 0} rows&#96;);",
            "lineNumber": 99
          },
          {
            "text": "        createTableTabulator(tableId, standingsData, { ",
            "lineNumber": 100
          },
          {
            "text": "            disablePositionCircle: false, // Show position circles for league standings",
            "lineNumber": 101
          },
          {
            "text": "            enableSpecialRowStyling: true,",
            "lineNumber": 102
          },
          {
            "text": "            tooltips: true,",
            "lineNumber": 103
          },
          {
            "text": "            disableTeamColorUpdate: true, // Disable automatic team color update (handled manually for multiple tables)",
            "lineNumber": 104
          },
          {
            "text": "            ...options",
            "lineNumber": 105
          },
          {
            "text": "        });",
            "lineNumber": 106
          },
          {
            "text": "    } else if (typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 107
          },
          {
            "text": "        console.log(&#96;Fallback: Using createTableBootstrap3 for ${tableId}&#96;);",
            "lineNumber": 108
          },
          {
            "text": "        createTableBootstrap3(tableId, standingsData, {",
            "lineNumber": 109
          },
          {
            "text": "            disablePositionCircle: false,",
            "lineNumber": 110
          },
          {
            "text": "            enableSpecialRowStyling: true,",
            "lineNumber": 111
          },
          {
            "text": "            compact: true,",
            "lineNumber": 112
          },
          {
            "text": "            ...options",
            "lineNumber": 113
          },
          {
            "text": "        });",
            "lineNumber": 114
          },
          {
            "text": "    } else {",
            "lineNumber": 115
          },
          {
            "text": "        console.error('No table creation function available');",
            "lineNumber": 116
          },
          {
            "text": "        container.innerHTML = &#96;",
            "lineNumber": 117
          },
          {
            "text": "            &lt;div class=\"alert alert-warning\"&gt;",
            "lineNumber": 118
          },
          {
            "text": "                &lt;p class=\"mb-0\"&gt;${typeof t === 'function' ? t('no_data_available', 'Table creation function not available') : 'Table creation function not available'}&lt;/p&gt;",
            "lineNumber": 119
          },
          {
            "text": "            &lt;/div&gt;",
            "lineNumber": 120
          },
          {
            "text": "        &#96;;",
            "lineNumber": 121
          },
          {
            "text": "    }",
            "lineNumber": 122
          },
          {
            "text": "}",
            "lineNumber": 123,
            "isSignature": true
          },
          {
            "lineNumber": 124
          },
          {
            "text": "/**",
            "lineNumber": 125
          },
          {
            "text": " * Populate honor scores sections",
            "lineNumber": 126
          },
          {
            "text": " * @param {Object} honorScoresData - Honor scores data from backend",
            "lineNumber": 127
          },
          {
            "text": " * @param {string} prefix - Prefix for element IDs (optional, for multiple leagues)",
            "lineNumber": 128
          },
          {
            "text": " */",
            "lineNumber": 129
          }
        ]
      },
      "score": 0.2881680130958557
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 856
          },
          "endPosition": {
            "line": 886
          }
        },
        "contents": "                            header.querySelectorAll('.tabulator-col[tabulator-field]').forEach(col =&gt; {\n                                const field = col.getAttribute('tabulator-field');\n                                if (field &amp;&amp; highlightedFields.has(field)) {\n                                    col.classList.add('tab-col-highlighted');\n                                    const colTitle = col.querySelector('.tabulator-col-title');\n                                    if (colTitle) {\n                                        colTitle.style.setProperty('font-weight', HIGHLIGHT_STYLES.headerFontWeight, 'important');\n                                    }\n                                }\n                            });\n                        }\n\n                    }\n                    \n                    // Apply highlighting to body cells using field names\n                    if (highlightedFields.size &gt; 0) {\n                        const table = tableElement.querySelector('.tabulator-table');\n                        if (table) {\n                            const rows = table.querySelectorAll('.tabulator-row');\n                            let highlightedCellCount = 0;\n                            rows.forEach(row =&gt; {\n                                const cells = row.querySelectorAll('.tabulator-cell');\n                                cells.forEach(cell =&gt; {\n                                    const field = cell.getAttribute('tabulator-field');\n                                    if (!field) {\n                                        return;\n                                    }\n                                    if (highlightedFields.has(field)) {\n                                        cell.classList.add('tab-col-highlighted');\n                                        cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                            header.querySelectorAll('.tabulator-col[tabulator-field]').forEach(col =&gt; {",
            "lineNumber": 857
          },
          {
            "text": "                                const field = col.getAttribute('tabulator-field');",
            "lineNumber": 858
          },
          {
            "text": "                                if (field &amp;&amp; highlightedFields.has(field)) {",
            "lineNumber": 859
          },
          {
            "text": "                                    col.classList.add('tab-col-highlighted');",
            "lineNumber": 860
          },
          {
            "text": "                                    const colTitle = col.querySelector('.tabulator-col-title');",
            "lineNumber": 861
          },
          {
            "text": "                                    if (colTitle) {",
            "lineNumber": 862
          },
          {
            "text": "                                        colTitle.style.setProperty('font-weight', HIGHLIGHT_STYLES.headerFontWeight, 'important');",
            "lineNumber": 863
          },
          {
            "text": "                                    }",
            "lineNumber": 864
          },
          {
            "text": "                                }",
            "lineNumber": 865
          },
          {
            "text": "                            });",
            "lineNumber": 866
          },
          {
            "text": "                        }",
            "lineNumber": 867
          },
          {
            "lineNumber": 868
          },
          {
            "text": "                    }",
            "lineNumber": 869
          },
          {
            "text": "                    ",
            "lineNumber": 870
          },
          {
            "text": "                    // Apply highlighting to body cells using field names",
            "lineNumber": 871
          },
          {
            "text": "                    if (highlightedFields.size &gt; 0) {",
            "lineNumber": 872
          },
          {
            "text": "                        const table = tableElement.querySelector('.tabulator-table');",
            "lineNumber": 873
          },
          {
            "text": "                        if (table) {",
            "lineNumber": 874
          },
          {
            "text": "                            const rows = table.querySelectorAll('.tabulator-row');",
            "lineNumber": 875
          },
          {
            "text": "                            let highlightedCellCount = 0;",
            "lineNumber": 876
          },
          {
            "text": "                            rows.forEach(row =&gt; {",
            "lineNumber": 877
          },
          {
            "text": "                                const cells = row.querySelectorAll('.tabulator-cell');",
            "lineNumber": 878
          },
          {
            "text": "                                cells.forEach(cell =&gt; {",
            "lineNumber": 879
          },
          {
            "text": "                                    const field = cell.getAttribute('tabulator-field');",
            "lineNumber": 880
          },
          {
            "text": "                                    if (!field) {",
            "lineNumber": 881
          },
          {
            "text": "                                        return;",
            "lineNumber": 882
          },
          {
            "text": "                                    }",
            "lineNumber": 883
          },
          {
            "text": "                                    if (highlightedFields.has(field)) {",
            "lineNumber": 884
          },
          {
            "text": "                                        cell.classList.add('tab-col-highlighted');",
            "lineNumber": 885
          },
          {
            "text": "                                        cell.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 886
          }
        ]
      },
      "score": 0.2851041555404663
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 1146,
            "column": 4
          },
          "endPosition": {
            "line": 1189
          }
        },
        "contents": "// Check if the data has columns and data\n    if (!data || !data.columns || !data.data) {\n        console.error('Invalid data format');\n        return;\n    }\n\n    // Normalize columns: if bare Column objects are provided (have 'field' but no 'columns'),\n    // wrap them in a ColumnGroup with empty title to match expected structure\n    if (data.columns.length &gt; 0 &amp;&amp; data.columns[0].field &amp;&amp; !data.columns[0].columns) {\n        // These are bare Column objects, wrap them in a single group\n        data.columns = [{\n            title: \"\",\n            columns: data.columns\n        }];\n    }\n\n    // Get table configuration\n    const config = data.config || {};\n    \n    // Get options with defaults\n    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;\n    \n    // Initialize team colors if this is a table with team data\n    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {\n        // Extract team names from the data\n        // For most tables, team name is in the second column (row[1])\n        // For team vs team comparison, team name is in the first column (row[0])\n        let teams = [];\n        \n        \n        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)\n        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {\n            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        } else {\n            // Standard tables with team names in second column\n            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');\n        }\n        \n        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {\n            window.updateTeamColorMap(teams);\n        }\n    }\n    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// Check if the data has columns and data",
            "lineNumber": 1147
          },
          {
            "text": "    if (!data || !data.columns || !data.data) {",
            "lineNumber": 1148
          },
          {
            "text": "        console.error('Invalid data format');",
            "lineNumber": 1149
          },
          {
            "text": "        return;",
            "lineNumber": 1150
          },
          {
            "text": "    }",
            "lineNumber": 1151
          },
          {
            "lineNumber": 1152
          },
          {
            "text": "    // Normalize columns: if bare Column objects are provided (have 'field' but no 'columns'),",
            "lineNumber": 1153
          },
          {
            "text": "    // wrap them in a ColumnGroup with empty title to match expected structure",
            "lineNumber": 1154
          },
          {
            "text": "    if (data.columns.length &gt; 0 &amp;&amp; data.columns[0].field &amp;&amp; !data.columns[0].columns) {",
            "lineNumber": 1155
          },
          {
            "text": "        // These are bare Column objects, wrap them in a single group",
            "lineNumber": 1156
          },
          {
            "text": "        data.columns = [{",
            "lineNumber": 1157
          },
          {
            "text": "            title: \"\",",
            "lineNumber": 1158
          },
          {
            "text": "            columns: data.columns",
            "lineNumber": 1159
          },
          {
            "text": "        }];",
            "lineNumber": 1160
          },
          {
            "text": "    }",
            "lineNumber": 1161
          },
          {
            "lineNumber": 1162
          },
          {
            "text": "    // Get table configuration",
            "lineNumber": 1163
          },
          {
            "text": "    const config = data.config || {};",
            "lineNumber": 1164
          },
          {
            "text": "    ",
            "lineNumber": 1165
          },
          {
            "text": "    // Get options with defaults",
            "lineNumber": 1166
          },
          {
            "text": "    const { disablePositionCircle = false, mergeCells = false, enableSpecialRowStyling = false } = options;",
            "lineNumber": 1167
          },
          {
            "text": "    ",
            "lineNumber": 1168
          },
          {
            "text": "    // Initialize team colors if this is a table with team data",
            "lineNumber": 1169
          },
          {
            "text": "    if (data.data &amp;&amp; data.data.length &gt; 0 &amp;&amp; data.data[0].length &gt; 1) {",
            "lineNumber": 1170
          },
          {
            "text": "        // Extract team names from the data",
            "lineNumber": 1171
          },
          {
            "text": "        // For most tables, team name is in the second column (row[1])",
            "lineNumber": 1172
          },
          {
            "text": "        // For team vs team comparison, team name is in the first column (row[0])",
            "lineNumber": 1173
          },
          {
            "text": "        let teams = [];",
            "lineNumber": 1174
          },
          {
            "text": "        ",
            "lineNumber": 1175
          },
          {
            "text": "        ",
            "lineNumber": 1176
          },
          {
            "text": "        // Check if this is a team vs team comparison table (has \"Team vs Team Comparison\" in title)",
            "lineNumber": 1177
          },
          {
            "text": "        if (data.title &amp;&amp; data.title.includes('Team vs Team Comparison')) {",
            "lineNumber": 1178
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[0]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1179
          },
          {
            "text": "        } else {",
            "lineNumber": 1180
          },
          {
            "text": "            // Standard tables with team names in second column",
            "lineNumber": 1181
          },
          {
            "text": "            teams = data.data.map(row =&gt; row[1]).filter(team =&gt; team &amp;&amp; typeof team === 'string');",
            "lineNumber": 1182
          },
          {
            "text": "        }",
            "lineNumber": 1183
          },
          {
            "text": "        ",
            "lineNumber": 1184
          },
          {
            "text": "        if (teams.length &gt; 0 &amp;&amp; typeof window.updateTeamColorMap === 'function') {",
            "lineNumber": 1185
          },
          {
            "text": "            window.updateTeamColorMap(teams);",
            "lineNumber": 1186
          },
          {
            "text": "        }",
            "lineNumber": 1187
          },
          {
            "text": "    }",
            "lineNumber": 1188
          },
          {
            "text": "    ",
            "lineNumber": 1189
          }
        ]
      },
      "score": 0.28488779067993164
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 358,
            "column": 32
          },
          "endPosition": {
            "line": 401,
            "column": 20
          }
        },
        "contents": "// Fallback: try rowData\n                                teamName = rowData['opponent_name'] || null;\n                                \n                                // Last resort: try to get it from the row's opponent_name cell\n                                if (!teamName) {\n                                    try {\n                                        const opponentNameCell = row.getCell('opponent_name');\n                                        if (opponentNameCell) {\n                                            teamName = opponentNameCell.getValue();\n                                        }\n                                    } catch (e) {\n                                        // Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)\n                            teamName = teamField ? rowData[teamField] : null;\n                        }\n                        \n                        if (teamName) {\n                            // Normalize team name (trim whitespace) to ensure it matches the color map\n                            const normalizedTeamName = String(teamName).trim();\n                            const color = getTeamColor(normalizedTeamName);\n                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;\n                        }\n                    }\n\n                    return value ?? '';\n                };\n\n                const sampleValue = transformedData.length ? transformedData[0][field] : null;\n                const isNumberColumn = typeof sampleValue === 'number';\n                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);\n\n                let colCssClass = column.cssClass || '';\n                let colHeaderClass = column.headerClass || '';\n                \n                // Build CSS classes\n                let cssClasses = [];\n                if (column.align === 'right') {\n                    cssClasses.push('text-end');\n                } else if (column.align === 'left') {\n                    ",
        "signatures": {},
        "detailedLines": [
          {
            "text": "// Fallback: try rowData",
            "lineNumber": 359
          },
          {
            "text": "                                teamName = rowData['opponent_name'] || null;",
            "lineNumber": 360
          },
          {
            "text": "                                ",
            "lineNumber": 361
          },
          {
            "text": "                                // Last resort: try to get it from the row's opponent_name cell",
            "lineNumber": 362
          },
          {
            "text": "                                if (!teamName) {",
            "lineNumber": 363
          },
          {
            "text": "                                    try {",
            "lineNumber": 364
          },
          {
            "text": "                                        const opponentNameCell = row.getCell('opponent_name');",
            "lineNumber": 365
          },
          {
            "text": "                                        if (opponentNameCell) {",
            "lineNumber": 366
          },
          {
            "text": "                                            teamName = opponentNameCell.getValue();",
            "lineNumber": 367
          },
          {
            "text": "                                        }",
            "lineNumber": 368
          },
          {
            "text": "                                    } catch (e) {",
            "lineNumber": 369
          },
          {
            "text": "                                        // Cell might not be rendered yet",
            "lineNumber": 370
          },
          {
            "text": "                                    }",
            "lineNumber": 371
          },
          {
            "text": "                                }",
            "lineNumber": 372
          },
          {
            "text": "                            }",
            "lineNumber": 373
          },
          {
            "text": "                        } else {",
            "lineNumber": 374
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 375
          },
          {
            "text": "                            teamName = teamField ? rowData[teamField] : null;",
            "lineNumber": 376
          },
          {
            "text": "                        }",
            "lineNumber": 377
          },
          {
            "text": "                        ",
            "lineNumber": 378
          },
          {
            "text": "                        if (teamName) {",
            "lineNumber": 379
          },
          {
            "text": "                            // Normalize team name (trim whitespace) to ensure it matches the color map",
            "lineNumber": 380
          },
          {
            "text": "                            const normalizedTeamName = String(teamName).trim();",
            "lineNumber": 381
          },
          {
            "text": "                            const color = getTeamColor(normalizedTeamName);",
            "lineNumber": 382
          },
          {
            "text": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;",
            "lineNumber": 383
          },
          {
            "text": "                        }",
            "lineNumber": 384
          },
          {
            "text": "                    }",
            "lineNumber": 385
          },
          {
            "lineNumber": 386
          },
          {
            "text": "                    return value ?? '';",
            "lineNumber": 387
          },
          {
            "text": "                };",
            "lineNumber": 388
          },
          {
            "lineNumber": 389
          },
          {
            "text": "                const sampleValue = transformedData.length ? transformedData[0][field] : null;",
            "lineNumber": 390
          },
          {
            "text": "                const isNumberColumn = typeof sampleValue === 'number';",
            "lineNumber": 391
          },
          {
            "text": "                const isStringNumber = typeof sampleValue === 'string' &amp;&amp; !isNaN(parseFloat(sampleValue)) &amp;&amp; isFinite(sampleValue);",
            "lineNumber": 392
          },
          {
            "lineNumber": 393
          },
          {
            "text": "                let colCssClass = column.cssClass || '';",
            "lineNumber": 394
          },
          {
            "text": "                let colHeaderClass = column.headerClass || '';",
            "lineNumber": 395
          },
          {
            "text": "                ",
            "lineNumber": 396
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 397
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 398
          },
          {
            "text": "                if (column.align === 'right') {",
            "lineNumber": 399
          },
          {
            "text": "                    cssClasses.push('text-end');",
            "lineNumber": 400
          },
          {
            "text": "                } else if (column.align === 'left') {",
            "lineNumber": 401
          },
          {
            "text": "                    ",
            "lineNumber": 402
          }
        ]
      },
      "score": 0.27704331278800964
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\theme\\color-utils.js",
        "range": {
          "startPosition": {},
          "endPosition": {
            "line": 479,
            "column": 1
          }
        },
        "contents": "() =&gt; {\nfunction updatePlayerColorMap(currentPlayers = []) {\nplayer =&gt; {\n\n            }\n        });\n    }\n\n    function getPlayerColor(playerName, fallbackIndex = 0) {\n        if (playerName &amp;&amp; playerColorMap[playerName]) {\n            return playerColorMap[playerName];\n        }\n        // If not in map, assign a color based on hash of name for consistency\n        if (playerName) {\n            let hash = 0;\n            for (let i = 0; i &lt; playerName.length; i++) {\n                hash = playerName.charCodeAt(i) + ((hash &lt;&lt; 5) - hash);\n            }\n            const index = Math.abs(hash) % currentPalette.length;\n            return getPaletteColor(index);\n        }\n        return getPaletteColor(fallbackIndex);\n    }\n\n    function setPalette(name) {\n        if (TEAM_COLOR_PALETTES[name]) {\n            currentPaletteName = name;\n            currentPalette = TEAM_COLOR_PALETTES[name];\n            return true;\n        }\n        return false;\n    }\n\n    function getSemanticColor(semanticName) {\n        const mapping = SEMANTIC_COLOR_MAPPINGS[currentPaletteName];\n        if (mapping &amp;&amp; mapping[semanticName] !== undefined) {\n            return getPaletteColor(mapping[semanticName]);\n        }\n        const fallbacks = {\n            positive: \"#2CA02C\",\n            negative: \"#D62728\",\n            highlight: \"#ffd700\"\n        };\n        return fallbacks[semanticName] || \"#888\";\n    }\n\n    // Dark mode management\n    function isDarkMode() {\n        if (typeof localStorage !== 'undefined') {\n            const stored = localStorage.getItem('darkMode');\n            if (stored !== null) {\n                return stored === 'true';\n            }\n        }\n        // Check if system prefers dark mode\n        if (typeof window !== 'undefined' &amp;&amp; window.matchMedia) {\n            return window.matchMedia('(prefers-color-scheme: dark)').matches;\n        }\n        return false;\n    }\n\n    function setDarkMode(enabled) {\n        if\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 1,
                "column": 1
              },
              "endPosition": {
                "line": 1,
                "column": 1
              }
            },
            {
              "startPosition": {
                "line": 1,
                "column": 2
              },
              "endPosition": {
                "line": 2,
                "column": 5
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "() =&gt; {",
            "lineNumber": 1
          },
          {
            "text": "function updatePlayerColorMap(currentPlayers = []) {",
            "lineNumber": 293
          },
          {
            "text": "player =&gt; {",
            "lineNumber": 303
          },
          {
            "lineNumber": 305
          },
          {
            "text": "            }",
            "lineNumber": 306
          },
          {
            "text": "        });",
            "lineNumber": 307
          },
          {
            "text": "    }",
            "lineNumber": 308
          },
          {
            "lineNumber": 309
          },
          {
            "text": "    function getPlayerColor(playerName, fallbackIndex = 0) {",
            "lineNumber": 310
          },
          {
            "text": "        if (playerName &amp;&amp; playerColorMap[playerName]) {",
            "lineNumber": 311
          },
          {
            "text": "            return playerColorMap[playerName];",
            "lineNumber": 312
          },
          {
            "text": "        }",
            "lineNumber": 313
          },
          {
            "text": "        // If not in map, assign a color based on hash of name for consistency",
            "lineNumber": 314
          },
          {
            "text": "        if (playerName) {",
            "lineNumber": 315
          },
          {
            "text": "            let hash = 0;",
            "lineNumber": 316
          },
          {
            "text": "            for (let i = 0; i &lt; playerName.length; i++) {",
            "lineNumber": 317
          },
          {
            "text": "                hash = playerName.charCodeAt(i) + ((hash &lt;&lt; 5) - hash);",
            "lineNumber": 318
          },
          {
            "text": "            }",
            "lineNumber": 319
          },
          {
            "text": "            const index = Math.abs(hash) % currentPalette.length;",
            "lineNumber": 320
          },
          {
            "text": "            return getPaletteColor(index);",
            "lineNumber": 321
          },
          {
            "text": "        }",
            "lineNumber": 322
          },
          {
            "text": "        return getPaletteColor(fallbackIndex);",
            "lineNumber": 323
          },
          {
            "text": "    }",
            "lineNumber": 324
          },
          {
            "lineNumber": 325
          },
          {
            "text": "    function setPalette(name) {",
            "lineNumber": 326
          },
          {
            "text": "        if (TEAM_COLOR_PALETTES[name]) {",
            "lineNumber": 327
          },
          {
            "text": "            currentPaletteName = name;",
            "lineNumber": 328
          },
          {
            "text": "            currentPalette = TEAM_COLOR_PALETTES[name];",
            "lineNumber": 329
          },
          {
            "text": "            return true;",
            "lineNumber": 330
          },
          {
            "text": "        }",
            "lineNumber": 331
          },
          {
            "text": "        return false;",
            "lineNumber": 332
          },
          {
            "text": "    }",
            "lineNumber": 333
          },
          {
            "lineNumber": 334
          },
          {
            "text": "    function getSemanticColor(semanticName) {",
            "lineNumber": 335
          },
          {
            "text": "        const mapping = SEMANTIC_COLOR_MAPPINGS[currentPaletteName];",
            "lineNumber": 336
          },
          {
            "text": "        if (mapping &amp;&amp; mapping[semanticName] !== undefined) {",
            "lineNumber": 337
          },
          {
            "text": "            return getPaletteColor(mapping[semanticName]);",
            "lineNumber": 338
          },
          {
            "text": "        }",
            "lineNumber": 339
          },
          {
            "text": "        const fallbacks = {",
            "lineNumber": 340
          },
          {
            "text": "            positive: \"#2CA02C\",",
            "lineNumber": 341
          },
          {
            "text": "            negative: \"#D62728\",",
            "lineNumber": 342
          },
          {
            "text": "            highlight: \"#ffd700\"",
            "lineNumber": 343
          },
          {
            "text": "        };",
            "lineNumber": 344
          },
          {
            "text": "        return fallbacks[semanticName] || \"#888\";",
            "lineNumber": 345
          },
          {
            "text": "    }",
            "lineNumber": 346
          },
          {
            "lineNumber": 347
          },
          {
            "text": "    // Dark mode management",
            "lineNumber": 348
          },
          {
            "text": "    function isDarkMode() {",
            "lineNumber": 349
          },
          {
            "text": "        if (typeof localStorage !== 'undefined') {",
            "lineNumber": 350
          },
          {
            "text": "            const stored = localStorage.getItem('darkMode');",
            "lineNumber": 351
          },
          {
            "text": "            if (stored !== null) {",
            "lineNumber": 352
          },
          {
            "text": "                return stored === 'true';",
            "lineNumber": 353
          },
          {
            "text": "            }",
            "lineNumber": 354
          },
          {
            "text": "        }",
            "lineNumber": 355
          },
          {
            "text": "        // Check if system prefers dark mode",
            "lineNumber": 356
          },
          {
            "text": "        if (typeof window !== 'undefined' &amp;&amp; window.matchMedia) {",
            "lineNumber": 357
          },
          {
            "text": "            return window.matchMedia('(prefers-color-scheme: dark)').matches;",
            "lineNumber": 358
          },
          {
            "text": "        }",
            "lineNumber": 359
          },
          {
            "text": "        return false;",
            "lineNumber": 360
          },
          {
            "text": "    }",
            "lineNumber": 361
          },
          {
            "lineNumber": 362
          },
          {
            "text": "    function setDarkMode(enabled) {",
            "lineNumber": 363
          },
          {
            "text": "        if",
            "lineNumber": 364
          },
          {
            "text": "    }",
            "lineNumber": 368
          },
          {
            "text": "}",
            "lineNumber": 480
          }
        ]
      },
      "score": 0.2760423421859741
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 540
          },
          "endPosition": {
            "line": 573
          }
        },
        "contents": "                            // Always use the raw data array for reliability\n                            if (rowIdx !== undefined &amp;&amp; rowIdx &gt;= 0 &amp;&amp; data.data &amp;&amp; data.data[rowIdx]) {\n                                // Find the column index for opponent_name in columnOrder\n                                const opponentNameIndex = columnOrder.findIndex(ci =&gt; ci.field === 'opponent_name');\n                                if (opponentNameIndex &gt;= 0 &amp;&amp; opponentNameIndex &lt; data.data[rowIdx].length) {\n                                    const rawRow = data.data[rowIdx];\n                                    teamName = rawRow[opponentNameIndex] || null;\n                                    \n                                    // Debug logging (remove after fixing)\n                                    if (value &amp;&amp; rowIdx &lt; 3) { // Only log first 3 rows to avoid spam\n                                        console.log(&#96;[opponent_position] Row ${rowIdx}: opponentNameIndex=${opponentNameIndex}, rawRow[${opponentNameIndex}]=${teamName}, rowData['opponent_name']=${rowData['opponent_name']}&#96;);\n                                    }\n                                } else {\n                                    console.warn(&#96;[opponent_position] Row ${rowIdx}: Invalid opponentNameIndex=${opponentNameIndex} or row length mismatch&#96;);\n                                }\n                            } else {\n                                // Fallback: try rowData\n                                teamName = rowData['opponent_name'] || null;\n                                \n                                // Last resort: try to get it from the row's opponent_name cell\n                                if (!teamName) {\n                                    try {\n                                        const opponentNameCell = row.getCell('opponent_name');\n                                        if (opponentNameCell) {\n                                            teamName = opponentNameCell.getValue();\n                                        }\n                                    } catch (e) {\n                                        // Cell might not be rendered yet\n                                    }\n                                }\n                            }\n                        } else {\n                            // Fallback: first column of first group (original logic)",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                            // Always use the raw data array for reliability",
            "lineNumber": 541
          },
          {
            "text": "                            if (rowIdx !== undefined &amp;&amp; rowIdx &gt;= 0 &amp;&amp; data.data &amp;&amp; data.data[rowIdx]) {",
            "lineNumber": 542
          },
          {
            "text": "                                // Find the column index for opponent_name in columnOrder",
            "lineNumber": 543
          },
          {
            "text": "                                const opponentNameIndex = columnOrder.findIndex(ci =&gt; ci.field === 'opponent_name');",
            "lineNumber": 544
          },
          {
            "text": "                                if (opponentNameIndex &gt;= 0 &amp;&amp; opponentNameIndex &lt; data.data[rowIdx].length) {",
            "lineNumber": 545
          },
          {
            "text": "                                    const rawRow = data.data[rowIdx];",
            "lineNumber": 546
          },
          {
            "text": "                                    teamName = rawRow[opponentNameIndex] || null;",
            "lineNumber": 547
          },
          {
            "text": "                                    ",
            "lineNumber": 548
          },
          {
            "text": "                                    // Debug logging (remove after fixing)",
            "lineNumber": 549
          },
          {
            "text": "                                    if (value &amp;&amp; rowIdx &lt; 3) { // Only log first 3 rows to avoid spam",
            "lineNumber": 550
          },
          {
            "text": "                                        console.log(&#96;[opponent_position] Row ${rowIdx}: opponentNameIndex=${opponentNameIndex}, rawRow[${opponentNameIndex}]=${teamName}, rowData['opponent_name']=${rowData['opponent_name']}&#96;);",
            "lineNumber": 551
          },
          {
            "text": "                                    }",
            "lineNumber": 552
          },
          {
            "text": "                                } else {",
            "lineNumber": 553
          },
          {
            "text": "                                    console.warn(&#96;[opponent_position] Row ${rowIdx}: Invalid opponentNameIndex=${opponentNameIndex} or row length mismatch&#96;);",
            "lineNumber": 554
          },
          {
            "text": "                                }",
            "lineNumber": 555
          },
          {
            "text": "                            } else {",
            "lineNumber": 556
          },
          {
            "text": "                                // Fallback: try rowData",
            "lineNumber": 557
          },
          {
            "text": "                                teamName = rowData['opponent_name'] || null;",
            "lineNumber": 558
          },
          {
            "text": "                                ",
            "lineNumber": 559
          },
          {
            "text": "                                // Last resort: try to get it from the row's opponent_name cell",
            "lineNumber": 560
          },
          {
            "text": "                                if (!teamName) {",
            "lineNumber": 561
          },
          {
            "text": "                                    try {",
            "lineNumber": 562
          },
          {
            "text": "                                        const opponentNameCell = row.getCell('opponent_name');",
            "lineNumber": 563
          },
          {
            "text": "                                        if (opponentNameCell) {",
            "lineNumber": 564
          },
          {
            "text": "                                            teamName = opponentNameCell.getValue();",
            "lineNumber": 565
          },
          {
            "text": "                                        }",
            "lineNumber": 566
          },
          {
            "text": "                                    } catch (e) {",
            "lineNumber": 567
          },
          {
            "text": "                                        // Cell might not be rendered yet",
            "lineNumber": 568
          },
          {
            "text": "                                    }",
            "lineNumber": 569
          },
          {
            "text": "                                }",
            "lineNumber": 570
          },
          {
            "text": "                            }",
            "lineNumber": 571
          },
          {
            "text": "                        } else {",
            "lineNumber": 572
          },
          {
            "text": "                            // Fallback: first column of first group (original logic)",
            "lineNumber": 573
          }
        ]
      },
      "score": 0.2750585973262787
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 497
          },
          "endPosition": {
            "line": 514
          }
        },
        "contents": "                    const row = cell.getRow();\n\n                    // Add stripe class for column group coloring; actual colors come from CSS\n                    if (useStripedGroups) {\n                        element.classList.add('col-group-' + groupIndex);\n                    }\n\n                    // Add highlighting class and style to cell element if group is highlighted\n                    if (isHighlighted) {\n                        element.classList.add('tab-col-highlighted');\n                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');\n                    }\n\n                    // Column-level inline styles\n                    applyElementStyles(element, columnStyles);\n\n                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    const row = cell.getRow();",
            "lineNumber": 498
          },
          {
            "lineNumber": 499
          },
          {
            "text": "                    // Add stripe class for column group coloring; actual colors come from CSS",
            "lineNumber": 500
          },
          {
            "text": "                    if (useStripedGroups) {",
            "lineNumber": 501
          },
          {
            "text": "                        element.classList.add('col-group-' + groupIndex);",
            "lineNumber": 502
          },
          {
            "text": "                    }",
            "lineNumber": 503
          },
          {
            "lineNumber": 504
          },
          {
            "text": "                    // Add highlighting class and style to cell element if group is highlighted",
            "lineNumber": 505
          },
          {
            "text": "                    if (isHighlighted) {",
            "lineNumber": 506
          },
          {
            "text": "                        element.classList.add('tab-col-highlighted');",
            "lineNumber": 507
          },
          {
            "text": "                        element.style.setProperty('font-weight', HIGHLIGHT_STYLES.cellFontWeight, 'important');",
            "lineNumber": 508
          },
          {
            "text": "                    }",
            "lineNumber": 509
          },
          {
            "lineNumber": 510
          },
          {
            "text": "                    // Column-level inline styles",
            "lineNumber": 511
          },
          {
            "text": "                    applyElementStyles(element, columnStyles);",
            "lineNumber": 512
          },
          {
            "lineNumber": 513
          },
          {
            "text": "                    // Cell metadata styles (heatmap colors) - apply with !important to override striping",
            "lineNumber": 514
          }
        ]
      },
      "score": 0.27475643157958984
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\static\\js\\content-blocks\\game-overview-block.js",
        "range": {
          "startPosition": {
            "line": 4
          },
          "endPosition": {
            "line": 173,
            "column": 1
          }
        },
        "contents": "async loadGameOverviewData(state) {\nconst container = ('tableGameOverview');\n            if (container) {\n                // Use Tabulator for the game overview table\n                if (typeof createTableTabulator === 'function') {\n                    console.log('Using createTableTabulator function for game overview table');\n                    createTableTabulator('tableGameOverview', tableData, { \n                        disablePositionCircle: false, // Enable position circles for team and opponent positions\n                        enableSpecialRowStyling: true,\n                        tooltips: true\n                    });\n                } else if (typeof createTableBootstrap3 === 'function') {\n                    console.log('Fallback: Using createTableBootstrap3 function');\n                    createTableBootstrap3('tableGameOverview', tableData, { \n                        disablePositionCircle: true,\n                        enableSpecialRowStyling: true \n                    });\n                } else {\n                    console.error('No table creation function available');\n                    container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${typeof t === 'function' ? t('no_data', 'Table creation function not available') : 'Table creation function not available'}&lt;/div&gt;&#96;;\n                }\n            }\n        } catch (error) {\n            console.error('Error loading game overview:', error);\n            const container = document.getElementById('tableGameOverview');\n            if (container) {\n                container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Error loading game overview') : 'Error loading game overview'}: ${error.message || error}&lt;/div&gt;&#96;;\n            }\n        }\n    }\n}",
        "signatures": {
          "ranges": [
            {
              "startPosition": {
                "line": 5,
                "column": 1
              },
              "endPosition": {
                "line": 6,
                "column": 5
              }
            },
            {
              "startPosition": {
                "line": 114,
                "column": 5
              },
              "endPosition": {
                "line": 115,
                "column": 9
              }
            }
          ]
        },
        "detailedLines": [
          {
            "text": "async loadGameOverviewData(state) {",
            "lineNumber": 114,
            "isSignature": true
          },
          {
            "text": "const container = ('tableGameOverview');",
            "lineNumber": 145
          },
          {
            "text": "            if (container) {",
            "lineNumber": 146
          },
          {
            "text": "                // Use Tabulator for the game overview table",
            "lineNumber": 147
          },
          {
            "text": "                if (typeof createTableTabulator === 'function') {",
            "lineNumber": 148
          },
          {
            "text": "                    console.log('Using createTableTabulator function for game overview table');",
            "lineNumber": 149
          },
          {
            "text": "                    createTableTabulator('tableGameOverview', tableData, { ",
            "lineNumber": 150
          },
          {
            "text": "                        disablePositionCircle: false, // Enable position circles for team and opponent positions",
            "lineNumber": 151
          },
          {
            "text": "                        enableSpecialRowStyling: true,",
            "lineNumber": 152
          },
          {
            "text": "                        tooltips: true",
            "lineNumber": 153
          },
          {
            "text": "                    });",
            "lineNumber": 154
          },
          {
            "text": "                } else if (typeof createTableBootstrap3 === 'function') {",
            "lineNumber": 155
          },
          {
            "text": "                    console.log('Fallback: Using createTableBootstrap3 function');",
            "lineNumber": 156
          },
          {
            "text": "                    createTableBootstrap3('tableGameOverview', tableData, { ",
            "lineNumber": 157
          },
          {
            "text": "                        disablePositionCircle: true,",
            "lineNumber": 158
          },
          {
            "text": "                        enableSpecialRowStyling: true ",
            "lineNumber": 159
          },
          {
            "text": "                    });",
            "lineNumber": 160
          },
          {
            "text": "                } else {",
            "lineNumber": 161
          },
          {
            "text": "                    console.error('No table creation function available');",
            "lineNumber": 162
          },
          {
            "text": "                    container.innerHTML = &#96;&lt;div class=\"alert alert-warning\"&gt;${typeof t === 'function' ? t('no_data', 'Table creation function not available') : 'Table creation function not available'}&lt;/div&gt;&#96;;",
            "lineNumber": 163
          },
          {
            "text": "                }",
            "lineNumber": 164
          },
          {
            "text": "            }",
            "lineNumber": 165
          },
          {
            "text": "        } catch (error) {",
            "lineNumber": 166
          },
          {
            "text": "            console.error('Error loading game overview:', error);",
            "lineNumber": 167
          },
          {
            "text": "            const container = document.getElementById('tableGameOverview');",
            "lineNumber": 168
          },
          {
            "text": "            if (container) {",
            "lineNumber": 169
          },
          {
            "text": "                container.innerHTML = &#96;&lt;div class=\"alert alert-danger\"&gt;${typeof t === 'function' ? t('error_loading_data', 'Error loading game overview') : 'Error loading game overview'}: ${error.message || error}&lt;/div&gt;&#96;;",
            "lineNumber": 170
          },
          {
            "text": "            }",
            "lineNumber": 171
          },
          {
            "text": "        }",
            "lineNumber": 172
          },
          {
            "text": "    }",
            "lineNumber": 173,
            "isSignature": true
          },
          {
            "text": "}",
            "lineNumber": 174,
            "isSignature": true
          }
        ]
      },
      "score": 0.27465561032295227
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\charts.html",
        "range": {
          "startPosition": {
            "line": 58
          },
          "endPosition": {
            "line": 94
          }
        },
        "contents": "function renderPaletteSwitcher(containerId = \"paletteSwitcher\") {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n  container.innerHTML = \"&lt;b&gt;Color Palette:&lt;/b&gt; \";\n  const palettes = ColorUtilsRef.TEAM_COLOR_PALETTES || {};\n  Object.keys(palettes).forEach(name =&gt; {\n    const btn = document.createElement(\"button\");\n    btn.textContent = name.replace(/([A-Z])/g, \" $1\").replace(/^./, s =&gt; s.toUpperCase());\n    btn.onclick = () =&gt; {\n      if (syncPalette(name) &amp;&amp; typeof window.refreshAllCharts === \"function\") {\n        window.refreshAllCharts();\n      }\n    };\n    btn.style.margin = \"0 4px\";\n    btn.style.padding = \"4px 10px\";\n    btn.style.borderRadius = \"4px\";\n    btn.style.border = name === currentPaletteName ? \"2px solid #222\" : \"1px solid #aaa\";\n    btn.style.background = name === currentPaletteName ? \"#eee\" : \"#fff\";\n    btn.style.cursor = \"pointer\";\n    container.appendChild(btn);\n  });\n}\n\n// --- Global chart refresh stub (user should implement) ---\nif (!window.refreshAllCharts) {\n  window.refreshAllCharts = function() {\n    // User: call your chart rendering functions here to update colors\n    // Example: updateTableLeagueWeek(); updateTablePosition(data); etc.\n    // console.log('refreshAllCharts called');\n  };\n}\n\n// --- Palette Dropdown Handler for Navbar ---\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  renderPaletteSwitcher();\n  // Palette dropdown in navbar",
        "signatures": {},
        "detailedLines": [
          {
            "text": "function renderPaletteSwitcher(containerId = \"paletteSwitcher\") {",
            "lineNumber": 59
          },
          {
            "text": "  const container = document.getElementById(containerId);",
            "lineNumber": 60
          },
          {
            "text": "  if (!container) return;",
            "lineNumber": 61
          },
          {
            "text": "  container.innerHTML = \"&lt;b&gt;Color Palette:&lt;/b&gt; \";",
            "lineNumber": 62
          },
          {
            "text": "  const palettes = ColorUtilsRef.TEAM_COLOR_PALETTES || {};",
            "lineNumber": 63
          },
          {
            "text": "  Object.keys(palettes).forEach(name =&gt; {",
            "lineNumber": 64
          },
          {
            "text": "    const btn = document.createElement(\"button\");",
            "lineNumber": 65
          },
          {
            "text": "    btn.textContent = name.replace(/([A-Z])/g, \" $1\").replace(/^./, s =&gt; s.toUpperCase());",
            "lineNumber": 66
          },
          {
            "text": "    btn.onclick = () =&gt; {",
            "lineNumber": 67
          },
          {
            "text": "      if (syncPalette(name) &amp;&amp; typeof window.refreshAllCharts === \"function\") {",
            "lineNumber": 68
          },
          {
            "text": "        window.refreshAllCharts();",
            "lineNumber": 69
          },
          {
            "text": "      }",
            "lineNumber": 70
          },
          {
            "text": "    };",
            "lineNumber": 71
          },
          {
            "text": "    btn.style.margin = \"0 4px\";",
            "lineNumber": 72
          },
          {
            "text": "    btn.style.padding = \"4px 10px\";",
            "lineNumber": 73
          },
          {
            "text": "    btn.style.borderRadius = \"4px\";",
            "lineNumber": 74
          },
          {
            "text": "    btn.style.border = name === currentPaletteName ? \"2px solid #222\" : \"1px solid #aaa\";",
            "lineNumber": 75
          },
          {
            "text": "    btn.style.background = name === currentPaletteName ? \"#eee\" : \"#fff\";",
            "lineNumber": 76
          },
          {
            "text": "    btn.style.cursor = \"pointer\";",
            "lineNumber": 77
          },
          {
            "text": "    container.appendChild(btn);",
            "lineNumber": 78
          },
          {
            "text": "  });",
            "lineNumber": 79
          },
          {
            "text": "}",
            "lineNumber": 80
          },
          {
            "lineNumber": 81
          },
          {
            "text": "// --- Global chart refresh stub (user should implement) ---",
            "lineNumber": 82
          },
          {
            "text": "if (!window.refreshAllCharts) {",
            "lineNumber": 83
          },
          {
            "text": "  window.refreshAllCharts = function() {",
            "lineNumber": 84
          },
          {
            "text": "    // User: call your chart rendering functions here to update colors",
            "lineNumber": 85
          },
          {
            "text": "    // Example: updateTableLeagueWeek(); updateTablePosition(data); etc.",
            "lineNumber": 86
          },
          {
            "text": "    // console.log('refreshAllCharts called');",
            "lineNumber": 87
          },
          {
            "text": "  };",
            "lineNumber": 88
          },
          {
            "text": "}",
            "lineNumber": 89
          },
          {
            "lineNumber": 90
          },
          {
            "text": "// --- Palette Dropdown Handler for Navbar ---",
            "lineNumber": 91
          },
          {
            "text": "document.addEventListener(\"DOMContentLoaded\", function() {",
            "lineNumber": 92
          },
          {
            "text": "  renderPaletteSwitcher();",
            "lineNumber": 93
          },
          {
            "text": "  // Palette dropdown in navbar",
            "lineNumber": 94
          }
        ]
      },
      "score": 0.27449315786361694
    },
    {
      "codeBlock": {
        "relativeWorkspacePath": ".\\app\\templates\\components\\tables.html",
        "range": {
          "startPosition": {
            "line": 650
          },
          "endPosition": {
            "line": 718
          }
        },
        "contents": "                    }\n                }\n\n                if (columnWidth !== undefined) {\n                    if (isCompactLayout) {\n                        columnDefinition.width = columnWidth;\n                        columnDefinition.minWidth = columnWidth;\n                        columnDefinition.widthGrow = 0;\n                    } else {\n                        columnDefinition.minWidth = columnWidth; // Set minimum width, allow expansion\n                        columnDefinition.widthGrow = 1; // Allow column to grow proportionally\n                    }\n                } else if (isCompactLayout) {\n                    columnDefinition.widthGrow = 0;\n                }\n\n                // Build CSS classes\n                let cssClasses = [];\n                if (column.align === 'right') {\n                    cssClasses.push('text-end');\n                } else if (column.align === 'left') {\n                    cssClasses.push('text-start');\n                } else {\n                    cssClasses.push('text-center');\n                }\n                \n                // Add highlighting class if group is highlighted\n                if (isHighlighted) {\n                    cssClasses.push('tab-col-highlighted');\n                }\n                \n                columnDefinition.cssClass = cssClasses.join(' ');\n\n                return columnDefinition;\n            }).filter(Boolean)\n        };\n\n        // Set frozen on the parent group, not individual columns\n        if (groupFrozenDirection) {\n            groupDefinition.frozen = groupFrozenDirection;\n        }\n\n        return groupDefinition;\n        }).filter(Boolean);\n    }\n\n    if (!tabulatorColumns.length) {\n        console.warn('No Tabulator column definitions could be created');\n        return;\n    }\n\n    if (window[tableId + 'Instance']) {\n        window[tableId + 'Instance'].destroy();\n    }\n\n    const tooltipOption = settings.tooltips\n        ? function(cell) {\n            const value = cell.getValue();\n            if (value === null || value === undefined) {\n                return '';\n            }\n            if (typeof value === 'object') {\n                try {\n                    return JSON.stringify(value);\n                } catch (e) {\n                    return '';\n                }\n            }",
        "signatures": {},
        "detailedLines": [
          {
            "text": "                    }",
            "lineNumber": 651
          },
          {
            "text": "                }",
            "lineNumber": 652
          },
          {
            "lineNumber": 653
          },
          {
            "text": "                if (columnWidth !== undefined) {",
            "lineNumber": 654
          },
          {
            "text": "                    if (isCompactLayout) {",
            "lineNumber": 655
          },
          {
            "text": "                        columnDefinition.width = columnWidth;",
            "lineNumber": 656
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth;",
            "lineNumber": 657
          },
          {
            "text": "                        columnDefinition.widthGrow = 0;",
            "lineNumber": 658
          },
          {
            "text": "                    } else {",
            "lineNumber": 659
          },
          {
            "text": "                        columnDefinition.minWidth = columnWidth; // Set minimum width, allow expansion",
            "lineNumber": 660
          },
          {
            "text": "                        columnDefinition.widthGrow = 1; // Allow column to grow proportionally",
            "lineNumber": 661
          },
          {
            "text": "                    }",
            "lineNumber": 662
          },
          {
            "text": "                } else if (isCompactLayout) {",
            "lineNumber": 663
          },
          {
            "text": "                    columnDefinition.widthGrow = 0;",
            "lineNumber": 664
          },
          {
            "text": "                }",
            "lineNumber": 665
          },
          {
            "lineNumber": 666
          },
          {
            "text": "                // Build CSS classes",
            "lineNumber": 667
          },
          {
            "text": "                let cssClasses = [];",
            "lineNumber": 668
          },
          {
            "text": "                if (column.align === 'right') {",
            "lineNumber": 669
          },
          {
            "text": "                    cssClasses.push('text-end');",
            "lineNumber": 670
          },
          {
            "text": "                } else if (column.align === 'left') {",
            "lineNumber": 671
          },
          {
            "text": "                    cssClasses.push('text-start');",
            "lineNumber": 672
          },
          {
            "text": "                } else {",
            "lineNumber": 673
          },
          {
            "text": "                    cssClasses.push('text-center');",
            "lineNumber": 674
          },
          {
            "text": "                }",
            "lineNumber": 675
          },
          {
            "text": "                ",
            "lineNumber": 676
          },
          {
            "text": "                // Add highlighting class if group is highlighted",
            "lineNumber": 677
          },
          {
            "text": "                if (isHighlighted) {",
            "lineNumber": 678
          },
          {
            "text": "                    cssClasses.push('tab-col-highlighted');",
            "lineNumber": 679
          },
          {
            "text": "                }",
            "lineNumber": 680
          },
          {
            "text": "                ",
            "lineNumber": 681
          },
          {
            "text": "                columnDefinition.cssClass = cssClasses.join(' ');",
            "lineNumber": 682
          },
          {
            "lineNumber": 683
          },
          {
            "text": "                return columnDefinition;",
            "lineNumber": 684
          },
          {
            "text": "            }).filter(Boolean)",
            "lineNumber": 685
          },
          {
            "text": "        };",
            "lineNumber": 686
          },
          {
            "lineNumber": 687
          },
          {
            "text": "        // Set frozen on the parent group, not individual columns",
            "lineNumber": 688
          },
          {
            "text": "        if (groupFrozenDirection) {",
            "lineNumber": 689
          },
          {
            "text": "            groupDefinition.frozen = groupFrozenDirection;",
            "lineNumber": 690
          },
          {
            "text": "        }",
            "lineNumber": 691
          },
          {
            "lineNumber": 692
          },
          {
            "text": "        return groupDefinition;",
            "lineNumber": 693
          },
          {
            "text": "        }).filter(Boolean);",
            "lineNumber": 694
          },
          {
            "text": "    }",
            "lineNumber": 695
          },
          {
            "lineNumber": 696
          },
          {
            "text": "    if (!tabulatorColumns.length) {",
            "lineNumber": 697
          },
          {
            "text": "        console.warn('No Tabulator column definitions could be created');",
            "lineNumber": 698
          },
          {
            "text": "        return;",
            "lineNumber": 699
          },
          {
            "text": "    }",
            "lineNumber": 700
          },
          {
            "lineNumber": 701
          },
          {
            "text": "    if (window[tableId + 'Instance']) {",
            "lineNumber": 702
          },
          {
            "text": "        window[tableId + 'Instance'].destroy();",
            "lineNumber": 703
          },
          {
            "text": "    }",
            "lineNumber": 704
          },
          {
            "lineNumber": 705
          },
          {
            "text": "    const tooltipOption = settings.tooltips",
            "lineNumber": 706
          },
          {
            "text": "        ? function(cell) {",
            "lineNumber": 707
          },
          {
            "text": "            const value = cell.getValue();",
            "lineNumber": 708
          },
          {
            "text": "            if (value === null || value === undefined) {",
            "lineNumber": 709
          },
          {
            "text": "                return '';",
            "lineNumber": 710
          },
          {
            "text": "            }",
            "lineNumber": 711
          },
          {
            "text": "            if (typeof value === 'object') {",
            "lineNumber": 712
          },
          {
            "text": "                try {",
            "lineNumber": 713
          },
          {
            "text": "                    return JSON.stringify(value);",
            "lineNumber": 714
          },
          {
            "text": "                } catch (e) {",
            "lineNumber": 715
          },
          {
            "text": "                    return '';",
            "lineNumber": 716
          },
          {
            "text": "                }",
            "lineNumber": 717
          },
          {
            "text": "            }",
            "lineNumber": 718
          }
        ]
      },
      "score": 0.2732408046722412
    }
  ]
}
```
Status: **completed**


</details>
</tool-use>

---



---

Ensuring the formatter accesses the color map correctly. The formatter may be capturing a stale reference. Updating it to access the color map directly at render time:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "148d943b-4172-4ea1-a225-2c215dbe1442",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Checking the CSS for `tab-position-circle` to see if it's overriding the background color:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "\\.tab-position-circle|tab-position-circle\\s*\\{",
  "path": "app/templates/components/tables.html",
  "contextAfter": 10,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "\\.tab-position-circle|tab-position-circle\\s*\\{",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 2157,
                  "content": ".tab-position-circle {"
                },
                {
                  "lineNumber": 2158,
                  "content": "    width: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2159,
                  "content": "    height: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2160,
                  "content": "    border-radius: 50%;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2161,
                  "content": "    display: flex;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2162,
                  "content": "    align-items: center;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2163,
                  "content": "    justify-content: center;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2164,
                  "content": "    color: #fff;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2165,
                  "content": "    font-weight: 600;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2166,
                  "content": "    margin: 0 auto;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2167,
                  "content": "    font-size: 0.85rem;",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 2157,
                  "content": ".tab-position-circle {"
                },
                {
                  "lineNumber": 2158,
                  "content": "    width: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2159,
                  "content": "    height: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2160,
                  "content": "    border-radius: 50%;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2161,
                  "content": "    display: flex;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2162,
                  "content": "    align-items: center;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2163,
                  "content": "    justify-content: center;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2164,
                  "content": "    color: #fff;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2165,
                  "content": "    font-weight: 600;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2166,
                  "content": "    margin: 0 auto;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2167,
                  "content": "    font-size: 0.85rem;",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 22,
          "totalMatchedLines": 2
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "tab-position-circle",
  "path": "app",
  "contextAfter": 5,
  "caseInsensitive": false,
  "type": "css"
}
```
Result:

```json
{
  "success": {
    "pattern": "tab-position-circle",
    "path": "app",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 341,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color} !important;\"&gt;${value}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 342,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 343,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 344,
                  "isContextLine": true
                },
                {
                  "lineNumber": 345,
                  "content": "                    // Special handling for position columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 346,
                  "content": "                    // Check if this is a position column by field name or by position (first column of first group)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 393,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 395,
                  "isContextLine": true
                },
                {
                  "lineNumber": 396,
                  "content": "                    return value ?? '';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 397,
                  "content": "                };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 594,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 595,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 596,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 597,
                  "isContextLine": true
                },
                {
                  "lineNumber": 598,
                  "content": "                    return value ?? '';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 599,
                  "content": "                };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2157,
                  "content": ".tab-position-circle {"
                },
                {
                  "lineNumber": 2158,
                  "content": "    width: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2159,
                  "content": "    height: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2160,
                  "content": "    border-radius: 50%;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2161,
                  "content": "    display: flex;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2162,
                  "content": "    align-items: center;",
                  "isContextLine": true
                }
              ]
            },
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 341,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color} !important;\"&gt;${value}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 342,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 343,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 344,
                  "isContextLine": true
                },
                {
                  "lineNumber": 345,
                  "content": "                    // Special handling for position columns",
                  "isContextLine": true
                },
                {
                  "lineNumber": 346,
                  "content": "                    // Check if this is a position column by field name or by position (first column of first group)",
                  "isContextLine": true
                },
                {
                  "lineNumber": 392,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 393,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 394,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 395,
                  "isContextLine": true
                },
                {
                  "lineNumber": 396,
                  "content": "                    return value ?? '';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 397,
                  "content": "                };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 594,
                  "content": "                            return &#96;&lt;div class=\"tab-position-circle\" style=\"background-color: ${color};\"&gt;${value ?? ''}&lt;/div&gt;&#96;;"
                },
                {
                  "lineNumber": 595,
                  "content": "                        }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 596,
                  "content": "                    }",
                  "isContextLine": true
                },
                {
                  "lineNumber": 597,
                  "isContextLine": true
                },
                {
                  "lineNumber": 598,
                  "content": "                    return value ?? '';",
                  "isContextLine": true
                },
                {
                  "lineNumber": 599,
                  "content": "                };",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2157,
                  "content": ".tab-position-circle {"
                },
                {
                  "lineNumber": 2158,
                  "content": "    width: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2159,
                  "content": "    height: 24px;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2160,
                  "content": "    border-radius: 50%;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2161,
                  "content": "    display: flex;",
                  "isContextLine": true
                },
                {
                  "lineNumber": 2162,
                  "content": "    align-items: center;",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 48,
          "totalMatchedLines": 8
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

The CSS class looks fine. Verifying the field name matches exactly and adding a fallback to ensure the formatter runs. Checking the exact field name used in the backend:


---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "player_initials|field='player_initials'",
  "path": "app/services/league_service.py",
  "contextAfter": 1,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "player_initials|field='player_initials'",
    "path": "app/services/league_service.py",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app\\services\\league_service.py",
              "matches": [
                {
                  "lineNumber": 3049,
                  "content": "                        Column(title='', field='player_initials', width='50px', align='center'),"
                },
                {
                  "lineNumber": 3050,
                  "content": "                        Column(title=i18n_service.get_text('player'), field='player_name', width='150px')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3096,
                  "content": "                    'player_initials': playerName[0].upper() if playerName else '',"
                },
                {
                  "lineNumber": 3097,
                  "content": "                    'player_name': playerName",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3116,
                  "content": "                    'player_initials': 'T',"
                },
                {
                  "lineNumber": 3117,
                  "content": "                    'player_name': teamAverageKey",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3198,
                  "content": "                        Column(title='', field='player_initials', width='50px', align='center'),"
                },
                {
                  "lineNumber": 3199,
                  "content": "                        Column(title=i18n_service.get_text('ui.win_percentage.player'), field='player_name', width='150px')",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3245,
                  "content": "                    'player_initials': playerName[0].upper() if playerName else '',"
                },
                {
                  "lineNumber": 3246,
                  "content": "                    'player_name': playerName",
                  "isContextLine": true
                },
                {
                  "lineNumber": 3265,
                  "content": "                    'player_initials': 'T',"
                },
                {
                  "lineNumber": 3266,
                  "content": "                    'player_name': teamKey",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 12,
          "totalMatchedLines": 6
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---



---

Field name matches. The formatter should work. Adding a console log to verify it runs, and ensuring the HTML is returned correctly. Checking if Tabulator requires a specific formatter return format:


---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: c:\Users\cfell\OneDrive\Documents\001_repositories\league_analyzer\app/templates/components/tables.html</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="unknown" data-tool-name="ripgrep_raw_search">
<details>
<summary>Tool use: **ripgrep_raw_search**</summary>


Parameters:

```json
{
  "pattern": "formatter.*function|formatter:\\s*function",
  "path": "app/templates/components/tables.html",
  "contextAfter": 3,
  "caseInsensitive": false
}
```
Result:

```json
{
  "success": {
    "pattern": "formatter.*function|formatter:\\s*function",
    "path": "app/templates/components/tables.html",
    "outputMode": "content",
    "workspaceResults": {
      "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer": {
        "content": {
          "matches": [
            {
              "file": "app/templates/components/tables.html",
              "matches": [
                {
                  "lineNumber": 280,
                  "content": "                const formatter = function(cell) {"
                },
                {
                  "lineNumber": 281,
                  "content": "                    const value = cell.getValue();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                    const element = cell.getElement();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "                    const rowData = cell.getRow().getData();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 502,
                  "content": "                const formatter = function(cell) {"
                }
              ]
            },
            {
              "file": "app\\templates\\components\\tables.html",
              "matches": [
                {
                  "lineNumber": 280,
                  "content": "                const formatter = function(cell) {"
                },
                {
                  "lineNumber": 281,
                  "content": "                    const value = cell.getValue();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 282,
                  "content": "                    const element = cell.getElement();",
                  "isContextLine": true
                },
                {
                  "lineNumber": 283,
                  "content": "                    const rowData = cell.getRow().getData();",
                  "isContextLine": true
                }
              ]
            }
          ],
          "totalLines": 9,
          "totalMatchedLines": 3,
          "clientTruncated": true
        }
      }
    }
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Trying a different approach: setting the cell's HTML directly instead of returning it from the formatter:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "4905d79a-dbc3-48b8-9792-25b440b3653e",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Reverting to returning HTML from the formatter (as with position columns) and ensuring the color lookup works:


---

<tool-use data-tool-type="unknown" data-tool-name="edit_file_v2">
<details>
<summary>Tool use: **edit_file_v2**</summary>


Parameters:

```json
{
  "relativeWorkspacePath": "c:\\Users\\cfell\\OneDrive\\Documents\\001_repositories\\league_analyzer\\app/templates/components/tables.html"
}
```
Additional data:

```json
{
  "codeblockId": "19d8433e-d21a-4ab4-b174-ff4061c03f4d",
  "reviewData": {
    "status": "None",
    "selectedOption": "accept",
    "isShowingInput": false,
    "firstTimeReviewMode": false
  }
}
```
Status: **completed**


</details>
</tool-use>

---



---

Updated the formatter to:

1. Check the value more explicitly
2. Try multiple color sources (ColorUtils.playerColorMap, window.playerColorMap, getTeamColor)
3. Use a hash-based color as a final fallback so there's always a color
4. Add `!important` to the background-color style

The formatter should now display colored circles with player initials. If it still doesn't work, the formatter may not be running for that field. In that case, we can add temporary console logging to debug, or check if Tabulator requires a different formatter configuration.

The colored circles should now appear in both the team performance and win percentage tables, using the same colors as the charts.

---

